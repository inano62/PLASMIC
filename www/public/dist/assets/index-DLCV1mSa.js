(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Sw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bp={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function IN(){if(XT)return Ec;XT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Ec.Fragment=e,Ec.jsx=n,Ec.jsxs=n,Ec}var QT;function jN(){return QT||(QT=1,Bp.exports=IN()),Bp.exports}var S=jN(),zp={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function UN(){if(JT)return qe;JT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function w(L,ne,he){this.props=L,this.context=ne,this.refs=C,this.updater=he||T}w.prototype.isReactComponent={},w.prototype.setState=function(L,ne){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ne,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=w.prototype;function N(L,ne,he){this.props=L,this.context=ne,this.refs=C,this.updater=he||T}var D=N.prototype=new _;D.constructor=N,E(D,w.prototype),D.isPureReactComponent=!0;var O=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function B(L,ne,he,le,ge,Oe){return he=Oe.ref,{$$typeof:t,type:L,key:ne,ref:he!==void 0?he:null,props:Oe}}function M(L,ne){return B(L.type,ne,void 0,void 0,void 0,L.props)}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function z(L){var ne={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(he){return ne[he]})}var q=/\/+/g;function re(L,ne){return typeof L=="object"&&L!==null&&L.key!=null?z(""+L.key):ne.toString(36)}function fe(){}function ye(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(fe,fe):(L.status="pending",L.then(function(ne){L.status==="pending"&&(L.status="fulfilled",L.value=ne)},function(ne){L.status==="pending"&&(L.status="rejected",L.reason=ne)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function we(L,ne,he,le,ge){var Oe=typeof L;(Oe==="undefined"||Oe==="boolean")&&(L=null);var Te=!1;if(L===null)Te=!0;else switch(Oe){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(L.$$typeof){case t:case e:Te=!0;break;case m:return Te=L._init,we(Te(L._payload),ne,he,le,ge)}}if(Te)return ge=ge(L),Te=le===""?"."+re(L,0):le,O(ge)?(he="",Te!=null&&(he=Te.replace(q,"$&/")+"/"),we(ge,ne,he,"",function(Tt){return Tt})):ge!=null&&(P(ge)&&(ge=M(ge,he+(ge.key==null||L&&L.key===ge.key?"":(""+ge.key).replace(q,"$&/")+"/")+Te)),ne.push(ge)),1;Te=0;var Ne=le===""?".":le+":";if(O(L))for(var ze=0;ze<L.length;ze++)le=L[ze],Oe=Ne+re(le,ze),Te+=we(le,ne,he,Oe,ge);else if(ze=y(L),typeof ze=="function")for(L=ze.call(L),ze=0;!(le=L.next()).done;)le=le.value,Oe=Ne+re(le,ze++),Te+=we(le,ne,he,Oe,ge);else if(Oe==="object"){if(typeof L.then=="function")return we(ye(L),ne,he,le,ge);throw ne=String(L),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Te}function F(L,ne,he){if(L==null)return L;var le=[],ge=0;return we(L,le,"","",function(Oe){return ne.call(he,Oe,ge++)}),le}function se(L){if(L._status===-1){var ne=L._result;ne=ne(),ne.then(function(he){(L._status===0||L._status===-1)&&(L._status=1,L._result=he)},function(he){(L._status===0||L._status===-1)&&(L._status=2,L._result=he)}),L._status===-1&&(L._status=0,L._result=ne)}if(L._status===1)return L._result.default;throw L._result}var Q=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Se(){}return qe.Children={map:F,forEach:function(L,ne,he){F(L,function(){ne.apply(this,arguments)},he)},count:function(L){var ne=0;return F(L,function(){ne++}),ne},toArray:function(L){return F(L,function(ne){return ne})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},qe.Component=w,qe.Fragment=n,qe.Profiler=a,qe.PureComponent=N,qe.StrictMode=i,qe.Suspense=d,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,qe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},qe.cache=function(L){return function(){return L.apply(null,arguments)}},qe.cloneElement=function(L,ne,he){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var le=E({},L.props),ge=L.key,Oe=void 0;if(ne!=null)for(Te in ne.ref!==void 0&&(Oe=void 0),ne.key!==void 0&&(ge=""+ne.key),ne)!x.call(ne,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&ne.ref===void 0||(le[Te]=ne[Te]);var Te=arguments.length-2;if(Te===1)le.children=he;else if(1<Te){for(var Ne=Array(Te),ze=0;ze<Te;ze++)Ne[ze]=arguments[ze+2];le.children=Ne}return B(L.type,ge,void 0,void 0,Oe,le)},qe.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},qe.createElement=function(L,ne,he){var le,ge={},Oe=null;if(ne!=null)for(le in ne.key!==void 0&&(Oe=""+ne.key),ne)x.call(ne,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ge[le]=ne[le]);var Te=arguments.length-2;if(Te===1)ge.children=he;else if(1<Te){for(var Ne=Array(Te),ze=0;ze<Te;ze++)Ne[ze]=arguments[ze+2];ge.children=Ne}if(L&&L.defaultProps)for(le in Te=L.defaultProps,Te)ge[le]===void 0&&(ge[le]=Te[le]);return B(L,Oe,void 0,void 0,null,ge)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(L){return{$$typeof:u,render:L}},qe.isValidElement=P,qe.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:se}},qe.memo=function(L,ne){return{$$typeof:h,type:L,compare:ne===void 0?null:ne}},qe.startTransition=function(L){var ne=R.T,he={};R.T=he;try{var le=L(),ge=R.S;ge!==null&&ge(he,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Se,Q)}catch(Oe){Q(Oe)}finally{R.T=ne}},qe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},qe.use=function(L){return R.H.use(L)},qe.useActionState=function(L,ne,he){return R.H.useActionState(L,ne,he)},qe.useCallback=function(L,ne){return R.H.useCallback(L,ne)},qe.useContext=function(L){return R.H.useContext(L)},qe.useDebugValue=function(){},qe.useDeferredValue=function(L,ne){return R.H.useDeferredValue(L,ne)},qe.useEffect=function(L,ne,he){var le=R.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(L,ne)},qe.useId=function(){return R.H.useId()},qe.useImperativeHandle=function(L,ne,he){return R.H.useImperativeHandle(L,ne,he)},qe.useInsertionEffect=function(L,ne){return R.H.useInsertionEffect(L,ne)},qe.useLayoutEffect=function(L,ne){return R.H.useLayoutEffect(L,ne)},qe.useMemo=function(L,ne){return R.H.useMemo(L,ne)},qe.useOptimistic=function(L,ne){return R.H.useOptimistic(L,ne)},qe.useReducer=function(L,ne,he){return R.H.useReducer(L,ne,he)},qe.useRef=function(L){return R.H.useRef(L)},qe.useState=function(L){return R.H.useState(L)},qe.useSyncExternalStore=function(L,ne,he){return R.H.useSyncExternalStore(L,ne,he)},qe.useTransition=function(){return R.H.useTransition()},qe.version="19.1.0",qe}var ZT;function ay(){return ZT||(ZT=1,zp.exports=UN()),zp.exports}var b=ay();const BN=Sw(b);var Fp={exports:{}},Cc={},Vp={exports:{}},Hp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function zN(){return eE||(eE=1,function(t){function e(F,se){var Q=F.length;F.push(se);e:for(;0<Q;){var Se=Q-1>>>1,L=F[Se];if(0<a(L,se))F[Se]=se,F[Q]=L,Q=Se;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var se=F[0],Q=F.pop();if(Q!==se){F[0]=Q;e:for(var Se=0,L=F.length,ne=L>>>1;Se<ne;){var he=2*(Se+1)-1,le=F[he],ge=he+1,Oe=F[ge];if(0>a(le,Q))ge<L&&0>a(Oe,le)?(F[Se]=Oe,F[ge]=Q,Se=ge):(F[Se]=le,F[he]=Q,Se=he);else if(ge<L&&0>a(Oe,Q))F[Se]=Oe,F[ge]=Q,Se=ge;else break e}}return se}function a(F,se){var Q=F.sortIndex-se.sortIndex;return Q!==0?Q:F.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],m=1,g=null,y=3,T=!1,E=!1,C=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function O(F){for(var se=n(h);se!==null;){if(se.callback===null)i(h);else if(se.startTime<=F)i(h),se.sortIndex=se.expirationTime,e(d,se);else break;se=n(h)}}function R(F){if(C=!1,O(F),!E)if(n(d)!==null)E=!0,x||(x=!0,re());else{var se=n(h);se!==null&&we(R,se.startTime-F)}}var x=!1,B=-1,M=5,P=-1;function z(){return w?!0:!(t.unstable_now()-P<M)}function q(){if(w=!1,x){var F=t.unstable_now();P=F;var se=!0;try{e:{E=!1,C&&(C=!1,N(B),B=-1),T=!0;var Q=y;try{t:{for(O(F),g=n(d);g!==null&&!(g.expirationTime>F&&z());){var Se=g.callback;if(typeof Se=="function"){g.callback=null,y=g.priorityLevel;var L=Se(g.expirationTime<=F);if(F=t.unstable_now(),typeof L=="function"){g.callback=L,O(F),se=!0;break t}g===n(d)&&i(d),O(F)}else i(d);g=n(d)}if(g!==null)se=!0;else{var ne=n(h);ne!==null&&we(R,ne.startTime-F),se=!1}}break e}finally{g=null,y=Q,T=!1}se=void 0}}finally{se?re():x=!1}}}var re;if(typeof D=="function")re=function(){D(q)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ye=fe.port2;fe.port1.onmessage=q,re=function(){ye.postMessage(null)}}else re=function(){_(q,0)};function we(F,se){B=_(function(){F(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(F){switch(y){case 1:case 2:case 3:var se=3;break;default:se=y}var Q=y;y=se;try{return F()}finally{y=Q}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=y;y=F;try{return se()}finally{y=Q}},t.unstable_scheduleCallback=function(F,se,Q){var Se=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Se+Q:Se):Q=Se,F){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Q+L,F={id:m++,callback:se,priorityLevel:F,startTime:Q,expirationTime:L,sortIndex:-1},Q>Se?(F.sortIndex=Q,e(h,F),n(d)===null&&F===n(h)&&(C?(N(B),B=-1):C=!0,we(R,Q-Se))):(F.sortIndex=L,e(d,F),E||T||(E=!0,x||(x=!0,re()))),F},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(F){var se=y;return function(){var Q=y;y=se;try{return F.apply(this,arguments)}finally{y=Q}}}}(Hp)),Hp}var tE;function FN(){return tE||(tE=1,Vp.exports=zN()),Vp.exports}var qp={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function VN(){if(nE)return mn;nE=1;var t=ay();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:d,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,mn.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,m)},mn.flushSync=function(d){var h=l.T,m=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=m,i.d.f()}},mn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},mn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},mn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,g=u(m,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,T=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:T}):m==="script"&&i.d.X(d,{crossOrigin:g,integrity:y,fetchPriority:T,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},mn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},mn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=u(m,h.crossOrigin);i.d.L(d,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},mn.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=u(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},mn.requestFormReset=function(d){i.d.r(d)},mn.unstable_batchedUpdates=function(d,h){return d(h)},mn.useFormState=function(d,h,m){return l.H.useFormState(d,h,m)},mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},mn.version="19.1.0",mn}var iE;function Tw(){if(iE)return qp.exports;iE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qp.exports=VN(),qp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function HN(){if(rE)return Cc;rE=1;var t=FN(),e=ay(),n=Tw();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function l(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function u(r){if(o(r)!==r)throw Error(i(188))}function d(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,f=s;;){var p=c.return;if(p===null)break;var v=p.alternate;if(v===null){if(f=p.return,f!==null){c=f;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===c)return u(p),r;if(v===f)return u(p),s;v=v.sibling}throw Error(i(188))}if(c.return!==f.return)c=p,f=v;else{for(var k=!1,A=p.child;A;){if(A===c){k=!0,c=p,f=v;break}if(A===f){k=!0,f=p,c=v;break}A=A.sibling}if(!k){for(A=v.child;A;){if(A===c){k=!0,c=v,f=p;break}if(A===f){k=!0,f=v,c=p;break}A=A.sibling}if(!k)throw Error(i(189))}}if(c.alternate!==f)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function h(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=h(r),s!==null)return s;r=r.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function re(r){return r===null||typeof r!="object"?null:(r=q&&r[q]||r["@@iterator"],typeof r=="function"?r:null)}var fe=Symbol.for("react.client.reference");function ye(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===fe?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case x:return"SuspenseList";case P:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case D:return(r.displayName||"Context")+".Provider";case N:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case B:return s=r.displayName||null,s!==null?s:ye(r.type)||"Memo";case M:s=r._payload,r=r._init;try{return ye(r(s))}catch{}}return null}var we=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Se=[],L=-1;function ne(r){return{current:r}}function he(r){0>L||(r.current=Se[L],Se[L]=null,L--)}function le(r,s){L++,Se[L]=r.current,r.current=s}var ge=ne(null),Oe=ne(null),Te=ne(null),Ne=ne(null);function ze(r,s){switch(le(Te,s),le(Oe,r),le(ge,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?kT(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=kT(s),r=wT(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}he(ge),le(ge,r)}function Tt(){he(ge),he(Oe),he(Te)}function lt(r){r.memoizedState!==null&&le(Ne,r);var s=ge.current,c=wT(s,r.type);s!==c&&(le(Oe,r),le(ge,c))}function qt(r){Oe.current===r&&(he(ge),he(Oe)),Ne.current===r&&(he(Ne),vc._currentValue=Q)}var jn=Object.prototype.hasOwnProperty,Zr=t.unstable_scheduleCallback,Un=t.unstable_cancelCallback,_l=t.unstable_shouldYield,Ys=t.unstable_requestPaint,fn=t.unstable_now,xl=t.unstable_getCurrentPriorityLevel,Ws=t.unstable_ImmediatePriority,ii=t.unstable_UserBlockingPriority,Ei=t.unstable_NormalPriority,ri=t.unstable_LowPriority,Ci=t.unstable_IdlePriority,ea=t.log,ta=t.unstable_setDisableYieldValue,an=null,yt=null;function Sn(r){if(typeof ea=="function"&&ta(r),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(an,r)}catch{}}var sn=Math.clz32?Math.clz32:ku,Lh=Math.log,Yi=Math.LN2;function ku(r){return r>>>=0,r===0?32:31-(Lh(r)/Yi|0)|0}var Ja=256,Za=4194304;function yr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function es(r,s,c){var f=r.pendingLanes;if(f===0)return 0;var p=0,v=r.suspendedLanes,k=r.pingedLanes;r=r.warmLanes;var A=f&134217727;return A!==0?(f=A&~v,f!==0?p=yr(f):(k&=A,k!==0?p=yr(k):c||(c=A&~r,c!==0&&(p=yr(c))))):(A=f&~v,A!==0?p=yr(A):k!==0?p=yr(k):c||(c=f&~r,c!==0&&(p=yr(c)))),p===0?0:s!==0&&s!==p&&(s&v)===0&&(v=p&-p,c=s&-s,v>=c||v===32&&(c&4194048)!==0)?s:p}function Wi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function wu(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xs(){var r=Ja;return Ja<<=1,(Ja&4194048)===0&&(Ja=256),r}function _u(){var r=Za;return Za<<=1,(Za&62914560)===0&&(Za=4194304),r}function Qs(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function ts(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function xu(r,s,c,f,p,v){var k=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,j=r.expirationTimes,Y=r.hiddenUpdates;for(c=k&~c;0<c;){var ae=31-sn(c),ce=1<<ae;A[ae]=0,j[ae]=-1;var W=Y[ae];if(W!==null)for(Y[ae]=null,ae=0;ae<W.length;ae++){var X=W[ae];X!==null&&(X.lane&=-536870913)}c&=~ce}f!==0&&ns(r,f,0),v!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=v&~(k&~s))}function ns(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var f=31-sn(s);r.entangledLanes|=s,r.entanglements[f]=r.entanglements[f]|1073741824|c&4194090}function is(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var f=31-sn(c),p=1<<f;p&s|r[f]&s&&(r[f]|=s),c&=~p}}function Rl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Al(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function U(){var r=se.p;return r!==0?r:(r=window.event,r===void 0?32:qT(r.type))}function $(r,s){var c=se.p;try{return se.p=r,s()}finally{se.p=c}}var J=Math.random().toString(36).slice(2),ue="__reactFiber$"+J,pe="__reactProps$"+J,_e="__reactContainer$"+J,De="__reactEvents$"+J,xe="__reactListeners$"+J,Me="__reactHandles$"+J,Ie="__reactResources$"+J,Re="__reactMarker$"+J;function Ae(r){delete r[ue],delete r[pe],delete r[De],delete r[xe],delete r[Me]}function $e(r){var s=r[ue];if(s)return s;for(var c=r.parentNode;c;){if(s=c[_e]||c[ue]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=AT(r);r!==null;){if(c=r[ue])return c;r=AT(r)}return s}r=c,c=r.parentNode}return null}function st(r){if(r=r[ue]||r[_e]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Ct(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Rt(r){var s=r[Ie];return s||(s=r[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Fe(r){r[Re]=!0}var dt=new Set,Xi={};function Bn(r,s){gn(r,s),gn(r+"Capture",s)}function gn(r,s){for(Xi[r]=s,r=0;r<s.length;r++)dt.add(s[r])}var ai=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Js={},na={};function br(r){return jn.call(na,r)?!0:jn.call(Js,r)?!1:ai.test(r)?na[r]=!0:(Js[r]=!0,!1)}function Sr(r,s,c){if(br(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function Tr(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function Ve(r,s,c,f){if(f===null)r.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+f)}}var Bt,Er;function Tn(r){if(Bt===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Bt=s&&s[1]||"",Er=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bt+r+Er}var _t=!1;function ia(r,s){if(!r||_t)return"";_t=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(X){var W=X}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(X){W=X}r.call(ce.prototype)}}else{try{throw Error()}catch(X){W=X}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(X){if(X&&W&&typeof X.stack=="string")return[X.stack,W.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),k=v[0],A=v[1];if(k&&A){var j=k.split(`
`),Y=A.split(`
`);for(p=f=0;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;for(;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;if(f===j.length||p===Y.length)for(f=j.length-1,p=Y.length-1;1<=f&&0<=p&&j[f]!==Y[p];)p--;for(;1<=f&&0<=p;f--,p--)if(j[f]!==Y[p]){if(f!==1||p!==1)do if(f--,p--,0>p||j[f]!==Y[p]){var ae=`
`+j[f].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=f&&0<=p);break}}}finally{_t=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Tn(c):""}function Ru(r){switch(r.tag){case 26:case 27:case 5:return Tn(r.type);case 16:return Tn("Lazy");case 13:return Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return ia(r.type,!1);case 11:return ia(r.type.render,!1);case 1:return ia(r.type,!0);case 31:return Tn("Activity");default:return""}}function Au(r){try{var s="";do s+=Ru(r),r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function si(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bb(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function NA(r){var s=bb(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),f=""+r[s];if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,v=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(k){f=""+k,v.call(this,k)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ou(r){r._valueTracker||(r._valueTracker=NA(r))}function Sb(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return r&&(f=bb(r)?r.checked?"true":"false":r.value),r=f,r!==c?(s.setValue(r),!0):!1}function Nu(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var DA=/[\n"\\]/g;function oi(r){return r.replace(DA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ih(r,s,c,f,p,v,k,A){r.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.type=k:r.removeAttribute("type"),s!=null?k==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+si(s)):r.value!==""+si(s)&&(r.value=""+si(s)):k!=="submit"&&k!=="reset"||r.removeAttribute("value"),s!=null?jh(r,k,si(s)):c!=null?jh(r,k,si(c)):f!=null&&r.removeAttribute("value"),p==null&&v!=null&&(r.defaultChecked=!!v),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+si(A):r.removeAttribute("name")}function Tb(r,s,c,f,p,v,k,A){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),s!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;c=c!=null?""+si(c):"",s=s!=null?""+si(s):c,A||s===r.value||(r.value=s),r.defaultValue=s}f=f??p,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=A?r.checked:!!f,r.defaultChecked=!!f,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(r.name=k)}function jh(r,s,c){s==="number"&&Nu(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Zs(r,s,c,f){if(r=r.options,s){s={};for(var p=0;p<c.length;p++)s["$"+c[p]]=!0;for(c=0;c<r.length;c++)p=s.hasOwnProperty("$"+r[c].value),r[c].selected!==p&&(r[c].selected=p),p&&f&&(r[c].defaultSelected=!0)}else{for(c=""+si(c),s=null,p=0;p<r.length;p++){if(r[p].value===c){r[p].selected=!0,f&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function Eb(r,s,c){if(s!=null&&(s=""+si(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+si(c):""}function Cb(r,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(i(92));if(we(f)){if(1<f.length)throw Error(i(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=si(s),r.defaultValue=c,f=r.textContent,f===c&&f!==""&&f!==null&&(r.value=f)}function eo(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var PA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kb(r,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":f?r.setProperty(s,c):typeof c!="number"||c===0||PA.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function wb(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var p in s)f=s[p],s.hasOwnProperty(p)&&c[p]!==f&&kb(r,p,f)}else for(var v in s)s.hasOwnProperty(v)&&kb(r,v,s[v])}function Uh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Du(r){return LA.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Bh=null;function zh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var to=null,no=null;function _b(r){var s=st(r);if(s&&(r=s.stateNode)){var c=r[pe]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ih(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+oi(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==r&&f.form===r.form){var p=f[pe]||null;if(!p)throw Error(i(90));Ih(f,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===r.form&&Sb(f)}break e;case"textarea":Eb(r,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Zs(r,!!c.multiple,s,!1)}}}var Fh=!1;function xb(r,s,c){if(Fh)return r(s,c);Fh=!0;try{var f=r(s);return f}finally{if(Fh=!1,(to!==null||no!==null)&&(vd(),to&&(s=to,r=no,no=to=null,_b(s),r)))for(s=0;s<r.length;s++)_b(r[s])}}function Ol(r,s){var c=r.stateNode;if(c===null)return null;var f=c[pe]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vh=!1;if(Cr)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Vh=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Vh=!1}var ra=null,Hh=null,Pu=null;function Rb(){if(Pu)return Pu;var r,s=Hh,c=s.length,f,p="value"in ra?ra.value:ra.textContent,v=p.length;for(r=0;r<c&&s[r]===p[r];r++);var k=c-r;for(f=1;f<=k&&s[c-f]===p[v-f];f++);return Pu=p.slice(r,1<f?1-f:void 0)}function Mu(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Lu(){return!0}function Ab(){return!1}function En(r){function s(c,f,p,v,k){this._reactName=c,this._targetInst=p,this.type=f,this.nativeEvent=v,this.target=k,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Lu:Ab,this.isPropagationStopped=Ab,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Lu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Lu)},persist:function(){},isPersistent:Lu}),s}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iu=En(rs),Dl=m({},rs,{view:0,detail:0}),IA=En(Dl),qh,$h,Pl,ju=m({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Pl&&(Pl&&r.type==="mousemove"?(qh=r.screenX-Pl.screenX,$h=r.screenY-Pl.screenY):$h=qh=0,Pl=r),qh)},movementY:function(r){return"movementY"in r?r.movementY:$h}}),Ob=En(ju),jA=m({},ju,{dataTransfer:0}),UA=En(jA),BA=m({},Dl,{relatedTarget:0}),Gh=En(BA),zA=m({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),FA=En(zA),VA=m({},rs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),HA=En(VA),qA=m({},rs,{data:0}),Nb=En(qA),$A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YA(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=KA[r])?!!s[r]:!1}function Kh(){return YA}var WA=m({},Dl,{key:function(r){if(r.key){var s=$A[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Mu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?GA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kh,charCode:function(r){return r.type==="keypress"?Mu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Mu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),XA=En(WA),QA=m({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Db=En(QA),JA=m({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kh}),ZA=En(JA),eO=m({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tO=En(eO),nO=m({},ju,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),iO=En(nO),rO=m({},rs,{newState:0,oldState:0}),aO=En(rO),sO=[9,13,27,32],Yh=Cr&&"CompositionEvent"in window,Ml=null;Cr&&"documentMode"in document&&(Ml=document.documentMode);var oO=Cr&&"TextEvent"in window&&!Ml,Pb=Cr&&(!Yh||Ml&&8<Ml&&11>=Ml),Mb=" ",Lb=!1;function Ib(r,s){switch(r){case"keyup":return sO.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jb(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var io=!1;function lO(r,s){switch(r){case"compositionend":return jb(s);case"keypress":return s.which!==32?null:(Lb=!0,Mb);case"textInput":return r=s.data,r===Mb&&Lb?null:r;default:return null}}function cO(r,s){if(io)return r==="compositionend"||!Yh&&Ib(r,s)?(r=Rb(),Pu=Hh=ra=null,io=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Pb&&s.locale!=="ko"?null:s.data;default:return null}}var uO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ub(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!uO[r.type]:s==="textarea"}function Bb(r,s,c,f){to?no?no.push(f):no=[f]:to=f,s=Cd(s,"onChange"),0<s.length&&(c=new Iu("onChange","change",null,c,f),r.push({event:c,listeners:s}))}var Ll=null,Il=null;function dO(r){bT(r,0)}function Uu(r){var s=Ct(r);if(Sb(s))return r}function zb(r,s){if(r==="change")return s}var Fb=!1;if(Cr){var Wh;if(Cr){var Xh="oninput"in document;if(!Xh){var Vb=document.createElement("div");Vb.setAttribute("oninput","return;"),Xh=typeof Vb.oninput=="function"}Wh=Xh}else Wh=!1;Fb=Wh&&(!document.documentMode||9<document.documentMode)}function Hb(){Ll&&(Ll.detachEvent("onpropertychange",qb),Il=Ll=null)}function qb(r){if(r.propertyName==="value"&&Uu(Il)){var s=[];Bb(s,Il,r,zh(r)),xb(dO,s)}}function fO(r,s,c){r==="focusin"?(Hb(),Ll=s,Il=c,Ll.attachEvent("onpropertychange",qb)):r==="focusout"&&Hb()}function hO(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Uu(Il)}function mO(r,s){if(r==="click")return Uu(s)}function pO(r,s){if(r==="input"||r==="change")return Uu(s)}function gO(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var zn=typeof Object.is=="function"?Object.is:gO;function jl(r,s){if(zn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var p=c[f];if(!jn.call(s,p)||!zn(r[p],s[p]))return!1}return!0}function $b(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Gb(r,s){var c=$b(r);r=0;for(var f;c;){if(c.nodeType===3){if(f=r+c.textContent.length,r<=s&&f>=s)return{node:c,offset:s-r};r=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=$b(c)}}function Kb(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Kb(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Yb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Nu(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=Nu(r.document)}return s}function Qh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var vO=Cr&&"documentMode"in document&&11>=document.documentMode,ro=null,Jh=null,Ul=null,Zh=!1;function Wb(r,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Zh||ro==null||ro!==Nu(f)||(f=ro,"selectionStart"in f&&Qh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ul&&jl(Ul,f)||(Ul=f,f=Cd(Jh,"onSelect"),0<f.length&&(s=new Iu("onSelect","select",null,s,c),r.push({event:s,listeners:f}),s.target=ro)))}function as(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var ao={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionrun:as("Transition","TransitionRun"),transitionstart:as("Transition","TransitionStart"),transitioncancel:as("Transition","TransitionCancel"),transitionend:as("Transition","TransitionEnd")},em={},Xb={};Cr&&(Xb=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ss(r){if(em[r])return em[r];if(!ao[r])return r;var s=ao[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in Xb)return em[r]=s[c];return r}var Qb=ss("animationend"),Jb=ss("animationiteration"),Zb=ss("animationstart"),yO=ss("transitionrun"),bO=ss("transitionstart"),SO=ss("transitioncancel"),e0=ss("transitionend"),t0=new Map,tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tm.push("scrollEnd");function ki(r,s){t0.set(r,s),Bn(s,[r])}var n0=new WeakMap;function li(r,s){if(typeof r=="object"&&r!==null){var c=n0.get(r);return c!==void 0?c:(s={value:r,source:s,stack:Au(s)},n0.set(r,s),s)}return{value:r,source:s,stack:Au(s)}}var ci=[],so=0,nm=0;function Bu(){for(var r=so,s=nm=so=0;s<r;){var c=ci[s];ci[s++]=null;var f=ci[s];ci[s++]=null;var p=ci[s];ci[s++]=null;var v=ci[s];if(ci[s++]=null,f!==null&&p!==null){var k=f.pending;k===null?p.next=p:(p.next=k.next,k.next=p),f.pending=p}v!==0&&i0(c,p,v)}}function zu(r,s,c,f){ci[so++]=r,ci[so++]=s,ci[so++]=c,ci[so++]=f,nm|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function im(r,s,c,f){return zu(r,s,c,f),Fu(r)}function oo(r,s){return zu(r,null,null,s),Fu(r)}function i0(r,s,c){r.lanes|=c;var f=r.alternate;f!==null&&(f.lanes|=c);for(var p=!1,v=r.return;v!==null;)v.childLanes|=c,f=v.alternate,f!==null&&(f.childLanes|=c),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(p=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,p&&s!==null&&(p=31-sn(c),r=v.hiddenUpdates,f=r[p],f===null?r[p]=[s]:f.push(s),s.lane=c|536870912),v):null}function Fu(r){if(50<cc)throw cc=0,cp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var lo={};function TO(r,s,c,f){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(r,s,c,f){return new TO(r,s,c,f)}function rm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function kr(r,s){var c=r.alternate;return c===null?(c=Fn(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function r0(r,s){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Vu(r,s,c,f,p,v){var k=0;if(f=r,typeof r=="function")rm(r)&&(k=1);else if(typeof r=="string")k=CN(r,c,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case P:return r=Fn(31,c,s,p),r.elementType=P,r.lanes=v,r;case E:return os(c.children,p,v,s);case C:k=8,p|=24;break;case w:return r=Fn(12,c,s,p|2),r.elementType=w,r.lanes=v,r;case R:return r=Fn(13,c,s,p),r.elementType=R,r.lanes=v,r;case x:return r=Fn(19,c,s,p),r.elementType=x,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case D:k=10;break e;case N:k=9;break e;case O:k=11;break e;case B:k=14;break e;case M:k=16,f=null;break e}k=29,c=Error(i(130,r===null?"null":typeof r,"")),f=null}return s=Fn(k,c,s,p),s.elementType=r,s.type=f,s.lanes=v,s}function os(r,s,c,f){return r=Fn(7,r,f,s),r.lanes=c,r}function am(r,s,c){return r=Fn(6,r,null,s),r.lanes=c,r}function sm(r,s,c){return s=Fn(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var co=[],uo=0,Hu=null,qu=0,ui=[],di=0,ls=null,wr=1,_r="";function cs(r,s){co[uo++]=qu,co[uo++]=Hu,Hu=r,qu=s}function a0(r,s,c){ui[di++]=wr,ui[di++]=_r,ui[di++]=ls,ls=r;var f=wr;r=_r;var p=32-sn(f)-1;f&=~(1<<p),c+=1;var v=32-sn(s)+p;if(30<v){var k=p-p%5;v=(f&(1<<k)-1).toString(32),f>>=k,p-=k,wr=1<<32-sn(s)+p|c<<p|f,_r=v+r}else wr=1<<v|c<<p|f,_r=r}function om(r){r.return!==null&&(cs(r,1),a0(r,1,0))}function lm(r){for(;r===Hu;)Hu=co[--uo],co[uo]=null,qu=co[--uo],co[uo]=null;for(;r===ls;)ls=ui[--di],ui[di]=null,_r=ui[--di],ui[di]=null,wr=ui[--di],ui[di]=null}var vn=null,At=null,ot=!1,us=null,Qi=!1,cm=Error(i(519));function ds(r){var s=Error(i(418,""));throw Fl(li(s,r)),cm}function s0(r){var s=r.stateNode,c=r.type,f=r.memoizedProps;switch(s[ue]=r,s[pe]=f,c){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(c=0;c<dc.length;c++)et(dc[c],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":et("invalid",s),Tb(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Ou(s);break;case"select":et("invalid",s);break;case"textarea":et("invalid",s),Cb(s,f.value,f.defaultValue,f.children),Ou(s)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||CT(s.textContent,c)?(f.popover!=null&&(et("beforetoggle",s),et("toggle",s)),f.onScroll!=null&&et("scroll",s),f.onScrollEnd!=null&&et("scrollend",s),f.onClick!=null&&(s.onclick=kd),s=!0):s=!1,s||ds(r)}function o0(r){for(vn=r.return;vn;)switch(vn.tag){case 5:case 13:Qi=!1;return;case 27:case 3:Qi=!0;return;default:vn=vn.return}}function Bl(r){if(r!==vn)return!1;if(!ot)return o0(r),ot=!0,!1;var s=r.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||wp(r.type,r.memoizedProps)),c=!c),c&&At&&ds(r),o0(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(s===0){At=_i(r.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;r=r.nextSibling}At=null}}else s===27?(s=At,Sa(r.type)?(r=Ap,Ap=null,At=r):At=s):At=vn?_i(r.stateNode.nextSibling):null;return!0}function zl(){At=vn=null,ot=!1}function l0(){var r=us;return r!==null&&(wn===null?wn=r:wn.push.apply(wn,r),us=null),r}function Fl(r){us===null?us=[r]:us.push(r)}var um=ne(null),fs=null,xr=null;function aa(r,s,c){le(um,s._currentValue),s._currentValue=c}function Rr(r){r._currentValue=um.current,he(um)}function dm(r,s,c){for(;r!==null;){var f=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),r===c)break;r=r.return}}function fm(r,s,c,f){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var v=p.dependencies;if(v!==null){var k=p.child;v=v.firstContext;e:for(;v!==null;){var A=v;v=p;for(var j=0;j<s.length;j++)if(A.context===s[j]){v.lanes|=c,A=v.alternate,A!==null&&(A.lanes|=c),dm(v.return,c,r),f||(k=null);break e}v=A.next}}else if(p.tag===18){if(k=p.return,k===null)throw Error(i(341));k.lanes|=c,v=k.alternate,v!==null&&(v.lanes|=c),dm(k,c,r),k=null}else k=p.child;if(k!==null)k.return=p;else for(k=p;k!==null;){if(k===r){k=null;break}if(p=k.sibling,p!==null){p.return=k.return,k=p;break}k=k.return}p=k}}function Vl(r,s,c,f){r=null;for(var p=s,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var k=p.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var A=p.type;zn(p.pendingProps.value,k.value)||(r!==null?r.push(A):r=[A])}}else if(p===Ne.current){if(k=p.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(vc):r=[vc])}p=p.return}r!==null&&fm(s,r,c,f),s.flags|=262144}function $u(r){for(r=r.firstContext;r!==null;){if(!zn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function hs(r){fs=r,xr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function hn(r){return c0(fs,r)}function Gu(r,s){return fs===null&&hs(r),c0(r,s)}function c0(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},xr===null){if(r===null)throw Error(i(308));xr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else xr=xr.next=s;return c}var EO=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,f){r.push(f)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},CO=t.unstable_scheduleCallback,kO=t.unstable_NormalPriority,$t={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hm(){return{controller:new EO,data:new Map,refCount:0}}function Hl(r){r.refCount--,r.refCount===0&&CO(kO,function(){r.controller.abort()})}var ql=null,mm=0,fo=0,ho=null;function wO(r,s){if(ql===null){var c=ql=[];mm=0,fo=gp(),ho={status:"pending",value:void 0,then:function(f){c.push(f)}}}return mm++,s.then(u0,u0),s}function u0(){if(--mm===0&&ql!==null){ho!==null&&(ho.status="fulfilled");var r=ql;ql=null,fo=0,ho=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function _O(r,s){var c=[],f={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return r.then(function(){f.status="fulfilled",f.value=s;for(var p=0;p<c.length;p++)(0,c[p])(s)},function(p){for(f.status="rejected",f.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),f}var d0=F.S;F.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&wO(r,s),d0!==null&&d0(r,s)};var ms=ne(null);function pm(){var r=ms.current;return r!==null?r:bt.pooledCache}function Ku(r,s){s===null?le(ms,ms.current):le(ms,s.pool)}function f0(){var r=pm();return r===null?null:{parent:$t._currentValue,pool:r}}var $l=Error(i(460)),h0=Error(i(474)),Yu=Error(i(542)),gm={then:function(){}};function m0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Wu(){}function p0(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(Wu,Wu),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,v0(r),r;default:if(typeof s.status=="string")s.then(Wu,Wu);else{if(r=bt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(f){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=f}},function(f){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,v0(r),r}throw Gl=s,$l}}var Gl=null;function g0(){if(Gl===null)throw Error(i(459));var r=Gl;return Gl=null,r}function v0(r){if(r===$l||r===Yu)throw Error(i(483))}var sa=!1;function vm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function oa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function la(r,s,c){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(ct&2)!==0){var p=f.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),f.pending=s,s=Fu(r),i0(r,null,c),s}return zu(r,f,s,c),Fu(r)}function Kl(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,is(r,c)}}function bm(r,s){var c=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var p=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?p=v=k:v=v.next=k,c=c.next}while(c!==null);v===null?p=v=s:v=v.next=s}else p=v=s;c={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var Sm=!1;function Yl(){if(Sm){var r=ho;if(r!==null)throw r}}function Wl(r,s,c,f){Sm=!1;var p=r.updateQueue;sa=!1;var v=p.firstBaseUpdate,k=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var j=A,Y=j.next;j.next=null,k===null?v=Y:k.next=Y,k=j;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==k&&(A===null?ae.firstBaseUpdate=Y:A.next=Y,ae.lastBaseUpdate=j))}if(v!==null){var ce=p.baseState;k=0,ae=Y=j=null,A=v;do{var W=A.lane&-536870913,X=W!==A.lane;if(X?(it&W)===W:(f&W)===W){W!==0&&W===fo&&(Sm=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Be=r,je=A;W=s;var mt=c;switch(je.tag){case 1:if(Be=je.payload,typeof Be=="function"){ce=Be.call(mt,ce,W);break e}ce=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=je.payload,W=typeof Be=="function"?Be.call(mt,ce,W):Be,W==null)break e;ce=m({},ce,W);break e;case 2:sa=!0}}W=A.callback,W!==null&&(r.flags|=64,X&&(r.flags|=8192),X=p.callbacks,X===null?p.callbacks=[W]:X.push(W))}else X={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(Y=ae=X,j=ce):ae=ae.next=X,k|=W;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;X=A,A=X.next,X.next=null,p.lastBaseUpdate=X,p.shared.pending=null}}while(!0);ae===null&&(j=ce),p.baseState=j,p.firstBaseUpdate=Y,p.lastBaseUpdate=ae,v===null&&(p.shared.lanes=0),ga|=k,r.lanes=k,r.memoizedState=ce}}function y0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function b0(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)y0(c[r],s)}var mo=ne(null),Xu=ne(0);function S0(r,s){r=Lr,le(Xu,r),le(mo,s),Lr=r|s.baseLanes}function Tm(){le(Xu,Lr),le(mo,mo.current)}function Em(){Lr=Xu.current,he(mo),he(Xu)}var ca=0,Ge=null,ft=null,zt=null,Qu=!1,po=!1,ps=!1,Ju=0,Xl=0,go=null,xO=0;function It(){throw Error(i(321))}function Cm(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!zn(r[c],s[c]))return!1;return!0}function km(r,s,c,f,p,v){return ca=v,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=r===null||r.memoizedState===null?iS:rS,ps=!1,v=c(f,p),ps=!1,po&&(v=E0(s,c,f,p)),T0(r),v}function T0(r){F.H=rd;var s=ft!==null&&ft.next!==null;if(ca=0,zt=ft=Ge=null,Qu=!1,Xl=0,go=null,s)throw Error(i(300));r===null||Jt||(r=r.dependencies,r!==null&&$u(r)&&(Jt=!0))}function E0(r,s,c,f){Ge=r;var p=0;do{if(po&&(go=null),Xl=0,po=!1,25<=p)throw Error(i(301));if(p+=1,zt=ft=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}F.H=MO,v=s(c,f)}while(po);return v}function RO(){var r=F.H,s=r.useState()[0];return s=typeof s.then=="function"?Ql(s):s,r=r.useState()[0],(ft!==null?ft.memoizedState:null)!==r&&(Ge.flags|=1024),s}function wm(){var r=Ju!==0;return Ju=0,r}function _m(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function xm(r){if(Qu){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qu=!1}ca=0,zt=ft=Ge=null,po=!1,Xl=Ju=0,go=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ge.memoizedState=zt=r:zt=zt.next=r,zt}function Ft(){if(ft===null){var r=Ge.alternate;r=r!==null?r.memoizedState:null}else r=ft.next;var s=zt===null?Ge.memoizedState:zt.next;if(s!==null)zt=s,ft=r;else{if(r===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));ft=r,r={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},zt===null?Ge.memoizedState=zt=r:zt=zt.next=r}return zt}function Rm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(r){var s=Xl;return Xl+=1,go===null&&(go=[]),r=p0(go,r,s),s=Ge,(zt===null?s.memoizedState:zt.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?iS:rS),r}function Zu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ql(r);if(r.$$typeof===D)return hn(r)}throw Error(i(438,String(r)))}function Am(r){var s=null,c=Ge.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=Ge.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Rm(),Ge.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),f=0;f<r;f++)c[f]=z;return s.index++,c}function Ar(r,s){return typeof s=="function"?s(r):s}function ed(r){var s=Ft();return Om(s,ft,r)}function Om(r,s,c){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=c;var p=r.baseQueue,v=f.pending;if(v!==null){if(p!==null){var k=p.next;p.next=v.next,v.next=k}s.baseQueue=p=v,f.pending=null}if(v=r.baseState,p===null)r.memoizedState=v;else{s=p.next;var A=k=null,j=null,Y=s,ae=!1;do{var ce=Y.lane&-536870913;if(ce!==Y.lane?(it&ce)===ce:(ca&ce)===ce){var W=Y.revertLane;if(W===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ce===fo&&(ae=!0);else if((ca&W)===W){Y=Y.next,W===fo&&(ae=!0);continue}else ce={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=ce,k=v):j=j.next=ce,Ge.lanes|=W,ga|=W;ce=Y.action,ps&&c(v,ce),v=Y.hasEagerState?Y.eagerState:c(v,ce)}else W={lane:ce,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(A=j=W,k=v):j=j.next=W,Ge.lanes|=ce,ga|=ce;Y=Y.next}while(Y!==null&&Y!==s);if(j===null?k=v:j.next=A,!zn(v,r.memoizedState)&&(Jt=!0,ae&&(c=ho,c!==null)))throw c;r.memoizedState=v,r.baseState=k,r.baseQueue=j,f.lastRenderedState=v}return p===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Nm(r){var s=Ft(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var f=c.dispatch,p=c.pending,v=s.memoizedState;if(p!==null){c.pending=null;var k=p=p.next;do v=r(v,k.action),k=k.next;while(k!==p);zn(v,s.memoizedState)||(Jt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),c.lastRenderedState=v}return[v,f]}function C0(r,s,c){var f=Ge,p=Ft(),v=ot;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=s();var k=!zn((ft||p).memoizedState,c);k&&(p.memoizedState=c,Jt=!0),p=p.queue;var A=_0.bind(null,f,p,r);if(Jl(2048,8,A,[r]),p.getSnapshot!==s||k||zt!==null&&zt.memoizedState.tag&1){if(f.flags|=2048,vo(9,td(),w0.bind(null,f,p,c,s),null),bt===null)throw Error(i(349));v||(ca&124)!==0||k0(f,s,c)}return c}function k0(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=Ge.updateQueue,s===null?(s=Rm(),Ge.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function w0(r,s,c,f){s.value=c,s.getSnapshot=f,x0(s)&&R0(r)}function _0(r,s,c){return c(function(){x0(s)&&R0(r)})}function x0(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!zn(r,c)}catch{return!0}}function R0(r){var s=oo(r,2);s!==null&&Gn(s,r,2)}function Dm(r){var s=Cn();if(typeof r=="function"){var c=r;if(r=c(),ps){Sn(!0);try{c()}finally{Sn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:r},s}function A0(r,s,c,f){return r.baseState=c,Om(r,ft,typeof f=="function"?f:Ar)}function AO(r,s,c,f,p){if(id(r))throw Error(i(485));if(r=s.action,r!==null){var v={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){v.listeners.push(k)}};F.T!==null?c(!0):v.isTransition=!1,f(v),c=s.pending,c===null?(v.next=s.pending=v,O0(s,v)):(v.next=c.next,s.pending=c.next=v)}}function O0(r,s){var c=s.action,f=s.payload,p=r.state;if(s.isTransition){var v=F.T,k={};F.T=k;try{var A=c(p,f),j=F.S;j!==null&&j(k,A),N0(r,s,A)}catch(Y){Pm(r,s,Y)}finally{F.T=v}}else try{v=c(p,f),N0(r,s,v)}catch(Y){Pm(r,s,Y)}}function N0(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){D0(r,s,f)},function(f){return Pm(r,s,f)}):D0(r,s,c)}function D0(r,s,c){s.status="fulfilled",s.value=c,P0(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,O0(r,c)))}function Pm(r,s,c){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,P0(s),s=s.next;while(s!==f)}r.action=null}function P0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function M0(r,s){return s}function L0(r,s){if(ot){var c=bt.formState;if(c!==null){e:{var f=Ge;if(ot){if(At){t:{for(var p=At,v=Qi;p.nodeType!==8;){if(!v){p=null;break t}if(p=_i(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){At=_i(p.nextSibling),f=p.data==="F!";break e}}ds(f)}f=!1}f&&(s=c[0])}}return c=Cn(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M0,lastRenderedState:s},c.queue=f,c=eS.bind(null,Ge,f),f.dispatch=c,f=Dm(!1),v=Um.bind(null,Ge,!1,f.queue),f=Cn(),p={state:s,dispatch:null,action:r,pending:null},f.queue=p,c=AO.bind(null,Ge,p,v,c),p.dispatch=c,f.memoizedState=r,[s,c,!1]}function I0(r){var s=Ft();return j0(s,ft,r)}function j0(r,s,c){if(s=Om(r,s,M0)[0],r=ed(Ar)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Ql(s)}catch(k){throw k===$l?Yu:k}else f=s;s=Ft();var p=s.queue,v=p.dispatch;return c!==s.memoizedState&&(Ge.flags|=2048,vo(9,td(),OO.bind(null,p,c),null)),[f,v,r]}function OO(r,s){r.action=s}function U0(r){var s=Ft(),c=ft;if(c!==null)return j0(s,c,r);Ft(),s=s.memoizedState,c=Ft();var f=c.queue.dispatch;return c.memoizedState=r,[s,f,!1]}function vo(r,s,c,f){return r={tag:r,create:c,deps:f,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=Rm(),Ge.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(f=c.next,c.next=r,r.next=f,s.lastEffect=r),r}function td(){return{destroy:void 0,resource:void 0}}function B0(){return Ft().memoizedState}function nd(r,s,c,f){var p=Cn();f=f===void 0?null:f,Ge.flags|=r,p.memoizedState=vo(1|s,td(),c,f)}function Jl(r,s,c,f){var p=Ft();f=f===void 0?null:f;var v=p.memoizedState.inst;ft!==null&&f!==null&&Cm(f,ft.memoizedState.deps)?p.memoizedState=vo(s,v,c,f):(Ge.flags|=r,p.memoizedState=vo(1|s,v,c,f))}function z0(r,s){nd(8390656,8,r,s)}function F0(r,s){Jl(2048,8,r,s)}function V0(r,s){return Jl(4,2,r,s)}function H0(r,s){return Jl(4,4,r,s)}function q0(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function $0(r,s,c){c=c!=null?c.concat([r]):null,Jl(4,4,q0.bind(null,s,r),c)}function Mm(){}function G0(r,s){var c=Ft();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&Cm(s,f[1])?f[0]:(c.memoizedState=[r,s],r)}function K0(r,s){var c=Ft();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&Cm(s,f[1]))return f[0];if(f=r(),ps){Sn(!0);try{r()}finally{Sn(!1)}}return c.memoizedState=[f,s],f}function Lm(r,s,c){return c===void 0||(ca&1073741824)!==0?r.memoizedState=s:(r.memoizedState=c,r=XS(),Ge.lanes|=r,ga|=r,c)}function Y0(r,s,c,f){return zn(c,s)?c:mo.current!==null?(r=Lm(r,c,f),zn(r,s)||(Jt=!0),r):(ca&42)===0?(Jt=!0,r.memoizedState=c):(r=XS(),Ge.lanes|=r,ga|=r,s)}function W0(r,s,c,f,p){var v=se.p;se.p=v!==0&&8>v?v:8;var k=F.T,A={};F.T=A,Um(r,!1,s,c);try{var j=p(),Y=F.S;if(Y!==null&&Y(A,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ae=_O(j,f);Zl(r,s,ae,$n(r))}else Zl(r,s,f,$n(r))}catch(ce){Zl(r,s,{then:function(){},status:"rejected",reason:ce},$n())}finally{se.p=v,F.T=k}}function NO(){}function Im(r,s,c,f){if(r.tag!==5)throw Error(i(476));var p=X0(r).queue;W0(r,p,s,Q,c===null?NO:function(){return Q0(r),c(f)})}function X0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:Q},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Q0(r){var s=X0(r).next.queue;Zl(r,s,{},$n())}function jm(){return hn(vc)}function J0(){return Ft().memoizedState}function Z0(){return Ft().memoizedState}function DO(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=$n();r=oa(c);var f=la(s,r,c);f!==null&&(Gn(f,s,c),Kl(f,s,c)),s={cache:hm()},r.payload=s;return}s=s.return}}function PO(r,s,c){var f=$n();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},id(r)?tS(s,c):(c=im(r,s,c,f),c!==null&&(Gn(c,r,f),nS(c,s,f)))}function eS(r,s,c){var f=$n();Zl(r,s,c,f)}function Zl(r,s,c,f){var p={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(id(r))tS(s,p);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var k=s.lastRenderedState,A=v(k,c);if(p.hasEagerState=!0,p.eagerState=A,zn(A,k))return zu(r,s,p,0),bt===null&&Bu(),!1}catch{}finally{}if(c=im(r,s,p,f),c!==null)return Gn(c,r,f),nS(c,s,f),!0}return!1}function Um(r,s,c,f){if(f={lane:2,revertLane:gp(),action:f,hasEagerState:!1,eagerState:null,next:null},id(r)){if(s)throw Error(i(479))}else s=im(r,c,f,2),s!==null&&Gn(s,r,2)}function id(r){var s=r.alternate;return r===Ge||s!==null&&s===Ge}function tS(r,s){po=Qu=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function nS(r,s,c){if((c&4194048)!==0){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,is(r,c)}}var rd={readContext:hn,use:Zu,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},iS={readContext:hn,use:Zu,useCallback:function(r,s){return Cn().memoizedState=[r,s===void 0?null:s],r},useContext:hn,useEffect:z0,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,nd(4194308,4,q0.bind(null,s,r),c)},useLayoutEffect:function(r,s){return nd(4194308,4,r,s)},useInsertionEffect:function(r,s){nd(4,2,r,s)},useMemo:function(r,s){var c=Cn();s=s===void 0?null:s;var f=r();if(ps){Sn(!0);try{r()}finally{Sn(!1)}}return c.memoizedState=[f,s],f},useReducer:function(r,s,c){var f=Cn();if(c!==void 0){var p=c(s);if(ps){Sn(!0);try{c(s)}finally{Sn(!1)}}}else p=s;return f.memoizedState=f.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},f.queue=r,r=r.dispatch=PO.bind(null,Ge,r),[f.memoizedState,r]},useRef:function(r){var s=Cn();return r={current:r},s.memoizedState=r},useState:function(r){r=Dm(r);var s=r.queue,c=eS.bind(null,Ge,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:Mm,useDeferredValue:function(r,s){var c=Cn();return Lm(c,r,s)},useTransition:function(){var r=Dm(!1);return r=W0.bind(null,Ge,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var f=Ge,p=Cn();if(ot){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),bt===null)throw Error(i(349));(it&124)!==0||k0(f,s,c)}p.memoizedState=c;var v={value:c,getSnapshot:s};return p.queue=v,z0(_0.bind(null,f,v,r),[r]),f.flags|=2048,vo(9,td(),w0.bind(null,f,v,c,s),null),c},useId:function(){var r=Cn(),s=bt.identifierPrefix;if(ot){var c=_r,f=wr;c=(f&~(1<<32-sn(f)-1)).toString(32)+c,s=""+s+"R"+c,c=Ju++,0<c&&(s+="H"+c.toString(32)),s+=""}else c=xO++,s=""+s+"r"+c.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:jm,useFormState:L0,useActionState:L0,useOptimistic:function(r){var s=Cn();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Um.bind(null,Ge,!0,c),c.dispatch=s,[r,s]},useMemoCache:Am,useCacheRefresh:function(){return Cn().memoizedState=DO.bind(null,Ge)}},rS={readContext:hn,use:Zu,useCallback:G0,useContext:hn,useEffect:F0,useImperativeHandle:$0,useInsertionEffect:V0,useLayoutEffect:H0,useMemo:K0,useReducer:ed,useRef:B0,useState:function(){return ed(Ar)},useDebugValue:Mm,useDeferredValue:function(r,s){var c=Ft();return Y0(c,ft.memoizedState,r,s)},useTransition:function(){var r=ed(Ar)[0],s=Ft().memoizedState;return[typeof r=="boolean"?r:Ql(r),s]},useSyncExternalStore:C0,useId:J0,useHostTransitionStatus:jm,useFormState:I0,useActionState:I0,useOptimistic:function(r,s){var c=Ft();return A0(c,ft,r,s)},useMemoCache:Am,useCacheRefresh:Z0},MO={readContext:hn,use:Zu,useCallback:G0,useContext:hn,useEffect:F0,useImperativeHandle:$0,useInsertionEffect:V0,useLayoutEffect:H0,useMemo:K0,useReducer:Nm,useRef:B0,useState:function(){return Nm(Ar)},useDebugValue:Mm,useDeferredValue:function(r,s){var c=Ft();return ft===null?Lm(c,r,s):Y0(c,ft.memoizedState,r,s)},useTransition:function(){var r=Nm(Ar)[0],s=Ft().memoizedState;return[typeof r=="boolean"?r:Ql(r),s]},useSyncExternalStore:C0,useId:J0,useHostTransitionStatus:jm,useFormState:U0,useActionState:U0,useOptimistic:function(r,s){var c=Ft();return ft!==null?A0(c,ft,r,s):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Am,useCacheRefresh:Z0},yo=null,ec=0;function ad(r){var s=ec;return ec+=1,yo===null&&(yo=[]),p0(yo,r,s)}function tc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function sd(r,s){throw s.$$typeof===g?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function aS(r){var s=r._init;return s(r._payload)}function sS(r){function s(H,V){if(r){var G=H.deletions;G===null?(H.deletions=[V],H.flags|=16):G.push(V)}}function c(H,V){if(!r)return null;for(;V!==null;)s(H,V),V=V.sibling;return null}function f(H){for(var V=new Map;H!==null;)H.key!==null?V.set(H.key,H):V.set(H.index,H),H=H.sibling;return V}function p(H,V){return H=kr(H,V),H.index=0,H.sibling=null,H}function v(H,V,G){return H.index=G,r?(G=H.alternate,G!==null?(G=G.index,G<V?(H.flags|=67108866,V):G):(H.flags|=67108866,V)):(H.flags|=1048576,V)}function k(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function A(H,V,G,oe){return V===null||V.tag!==6?(V=am(G,H.mode,oe),V.return=H,V):(V=p(V,G),V.return=H,V)}function j(H,V,G,oe){var Ee=G.type;return Ee===E?ae(H,V,G.props.children,oe,G.key):V!==null&&(V.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&aS(Ee)===V.type)?(V=p(V,G.props),tc(V,G),V.return=H,V):(V=Vu(G.type,G.key,G.props,null,H.mode,oe),tc(V,G),V.return=H,V)}function Y(H,V,G,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==G.containerInfo||V.stateNode.implementation!==G.implementation?(V=sm(G,H.mode,oe),V.return=H,V):(V=p(V,G.children||[]),V.return=H,V)}function ae(H,V,G,oe,Ee){return V===null||V.tag!==7?(V=os(G,H.mode,oe,Ee),V.return=H,V):(V=p(V,G),V.return=H,V)}function ce(H,V,G){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=am(""+V,H.mode,G),V.return=H,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case y:return G=Vu(V.type,V.key,V.props,null,H.mode,G),tc(G,V),G.return=H,G;case T:return V=sm(V,H.mode,G),V.return=H,V;case M:var oe=V._init;return V=oe(V._payload),ce(H,V,G)}if(we(V)||re(V))return V=os(V,H.mode,G,null),V.return=H,V;if(typeof V.then=="function")return ce(H,ad(V),G);if(V.$$typeof===D)return ce(H,Gu(H,V),G);sd(H,V)}return null}function W(H,V,G,oe){var Ee=V!==null?V.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ee!==null?null:A(H,V,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return G.key===Ee?j(H,V,G,oe):null;case T:return G.key===Ee?Y(H,V,G,oe):null;case M:return Ee=G._init,G=Ee(G._payload),W(H,V,G,oe)}if(we(G)||re(G))return Ee!==null?null:ae(H,V,G,oe,null);if(typeof G.then=="function")return W(H,V,ad(G),oe);if(G.$$typeof===D)return W(H,V,Gu(H,G),oe);sd(H,G)}return null}function X(H,V,G,oe,Ee){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(G)||null,A(V,H,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return H=H.get(oe.key===null?G:oe.key)||null,j(V,H,oe,Ee);case T:return H=H.get(oe.key===null?G:oe.key)||null,Y(V,H,oe,Ee);case M:var Xe=oe._init;return oe=Xe(oe._payload),X(H,V,G,oe,Ee)}if(we(oe)||re(oe))return H=H.get(G)||null,ae(V,H,oe,Ee,null);if(typeof oe.then=="function")return X(H,V,G,ad(oe),Ee);if(oe.$$typeof===D)return X(H,V,G,Gu(V,oe),Ee);sd(V,oe)}return null}function Be(H,V,G,oe){for(var Ee=null,Xe=null,Pe=V,Ue=V=0,en=null;Pe!==null&&Ue<G.length;Ue++){Pe.index>Ue?(en=Pe,Pe=null):en=Pe.sibling;var at=W(H,Pe,G[Ue],oe);if(at===null){Pe===null&&(Pe=en);break}r&&Pe&&at.alternate===null&&s(H,Pe),V=v(at,V,Ue),Xe===null?Ee=at:Xe.sibling=at,Xe=at,Pe=en}if(Ue===G.length)return c(H,Pe),ot&&cs(H,Ue),Ee;if(Pe===null){for(;Ue<G.length;Ue++)Pe=ce(H,G[Ue],oe),Pe!==null&&(V=v(Pe,V,Ue),Xe===null?Ee=Pe:Xe.sibling=Pe,Xe=Pe);return ot&&cs(H,Ue),Ee}for(Pe=f(Pe);Ue<G.length;Ue++)en=X(Pe,H,Ue,G[Ue],oe),en!==null&&(r&&en.alternate!==null&&Pe.delete(en.key===null?Ue:en.key),V=v(en,V,Ue),Xe===null?Ee=en:Xe.sibling=en,Xe=en);return r&&Pe.forEach(function(wa){return s(H,wa)}),ot&&cs(H,Ue),Ee}function je(H,V,G,oe){if(G==null)throw Error(i(151));for(var Ee=null,Xe=null,Pe=V,Ue=V=0,en=null,at=G.next();Pe!==null&&!at.done;Ue++,at=G.next()){Pe.index>Ue?(en=Pe,Pe=null):en=Pe.sibling;var wa=W(H,Pe,at.value,oe);if(wa===null){Pe===null&&(Pe=en);break}r&&Pe&&wa.alternate===null&&s(H,Pe),V=v(wa,V,Ue),Xe===null?Ee=wa:Xe.sibling=wa,Xe=wa,Pe=en}if(at.done)return c(H,Pe),ot&&cs(H,Ue),Ee;if(Pe===null){for(;!at.done;Ue++,at=G.next())at=ce(H,at.value,oe),at!==null&&(V=v(at,V,Ue),Xe===null?Ee=at:Xe.sibling=at,Xe=at);return ot&&cs(H,Ue),Ee}for(Pe=f(Pe);!at.done;Ue++,at=G.next())at=X(Pe,H,Ue,at.value,oe),at!==null&&(r&&at.alternate!==null&&Pe.delete(at.key===null?Ue:at.key),V=v(at,V,Ue),Xe===null?Ee=at:Xe.sibling=at,Xe=at);return r&&Pe.forEach(function(LN){return s(H,LN)}),ot&&cs(H,Ue),Ee}function mt(H,V,G,oe){if(typeof G=="object"&&G!==null&&G.type===E&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case y:e:{for(var Ee=G.key;V!==null;){if(V.key===Ee){if(Ee=G.type,Ee===E){if(V.tag===7){c(H,V.sibling),oe=p(V,G.props.children),oe.return=H,H=oe;break e}}else if(V.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&aS(Ee)===V.type){c(H,V.sibling),oe=p(V,G.props),tc(oe,G),oe.return=H,H=oe;break e}c(H,V);break}else s(H,V);V=V.sibling}G.type===E?(oe=os(G.props.children,H.mode,oe,G.key),oe.return=H,H=oe):(oe=Vu(G.type,G.key,G.props,null,H.mode,oe),tc(oe,G),oe.return=H,H=oe)}return k(H);case T:e:{for(Ee=G.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===G.containerInfo&&V.stateNode.implementation===G.implementation){c(H,V.sibling),oe=p(V,G.children||[]),oe.return=H,H=oe;break e}else{c(H,V);break}else s(H,V);V=V.sibling}oe=sm(G,H.mode,oe),oe.return=H,H=oe}return k(H);case M:return Ee=G._init,G=Ee(G._payload),mt(H,V,G,oe)}if(we(G))return Be(H,V,G,oe);if(re(G)){if(Ee=re(G),typeof Ee!="function")throw Error(i(150));return G=Ee.call(G),je(H,V,G,oe)}if(typeof G.then=="function")return mt(H,V,ad(G),oe);if(G.$$typeof===D)return mt(H,V,Gu(H,G),oe);sd(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,V!==null&&V.tag===6?(c(H,V.sibling),oe=p(V,G),oe.return=H,H=oe):(c(H,V),oe=am(G,H.mode,oe),oe.return=H,H=oe),k(H)):c(H,V)}return function(H,V,G,oe){try{ec=0;var Ee=mt(H,V,G,oe);return yo=null,Ee}catch(Pe){if(Pe===$l||Pe===Yu)throw Pe;var Xe=Fn(29,Pe,null,H.mode);return Xe.lanes=oe,Xe.return=H,Xe}finally{}}}var bo=sS(!0),oS=sS(!1),fi=ne(null),Ji=null;function ua(r){var s=r.alternate;le(Gt,Gt.current&1),le(fi,r),Ji===null&&(s===null||mo.current!==null||s.memoizedState!==null)&&(Ji=r)}function lS(r){if(r.tag===22){if(le(Gt,Gt.current),le(fi,r),Ji===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Ji=r)}}else da()}function da(){le(Gt,Gt.current),le(fi,fi.current)}function Or(r){he(fi),Ji===r&&(Ji=null),he(Gt)}var Gt=ne(0);function od(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Rp(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Bm(r,s,c,f){s=r.memoizedState,c=c(f,s),c=c==null?s:m({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var zm={enqueueSetState:function(r,s,c){r=r._reactInternals;var f=$n(),p=oa(f);p.payload=s,c!=null&&(p.callback=c),s=la(r,p,f),s!==null&&(Gn(s,r,f),Kl(s,r,f))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var f=$n(),p=oa(f);p.tag=1,p.payload=s,c!=null&&(p.callback=c),s=la(r,p,f),s!==null&&(Gn(s,r,f),Kl(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=$n(),f=oa(c);f.tag=2,s!=null&&(f.callback=s),s=la(r,f,c),s!==null&&(Gn(s,r,c),Kl(s,r,c))}};function cS(r,s,c,f,p,v,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,v,k):s.prototype&&s.prototype.isPureReactComponent?!jl(c,f)||!jl(p,v):!0}function uS(r,s,c,f){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==r&&zm.enqueueReplaceState(s,s.state,null)}function gs(r,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(r=r.defaultProps){c===s&&(c=m({},c));for(var p in r)c[p]===void 0&&(c[p]=r[p])}return c}var ld=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function dS(r){ld(r)}function fS(r){console.error(r)}function hS(r){ld(r)}function cd(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function mS(r,s,c){try{var f=r.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Fm(r,s,c){return c=oa(c),c.tag=3,c.payload={element:null},c.callback=function(){cd(r,s)},c}function pS(r){return r=oa(r),r.tag=3,r}function gS(r,s,c,f){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var v=f.value;r.payload=function(){return p(v)},r.callback=function(){mS(s,c,f)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(r.callback=function(){mS(s,c,f),typeof p!="function"&&(va===null?va=new Set([this]):va.add(this));var A=f.stack;this.componentDidCatch(f.value,{componentStack:A!==null?A:""})})}function LO(r,s,c,f,p){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&Vl(s,c,p,!0),c=fi.current,c!==null){switch(c.tag){case 13:return Ji===null?dp():c.alternate===null&&Ot===0&&(Ot=3),c.flags&=-257,c.flags|=65536,c.lanes=p,f===gm?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),hp(r,f,p)),!1;case 22:return c.flags|=65536,f===gm?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),hp(r,f,p)),!1}throw Error(i(435,c.tag))}return hp(r,f,p),dp(),!1}if(ot)return s=fi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,f!==cm&&(r=Error(i(422),{cause:f}),Fl(li(r,c)))):(f!==cm&&(s=Error(i(423),{cause:f}),Fl(li(s,c))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,f=li(f,c),p=Fm(r.stateNode,f,p),bm(r,p),Ot!==4&&(Ot=2)),!1;var v=Error(i(520),{cause:f});if(v=li(v,c),lc===null?lc=[v]:lc.push(v),Ot!==4&&(Ot=2),s===null)return!0;f=li(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=p&-p,c.lanes|=r,r=Fm(c.stateNode,f,r),bm(c,r),!1;case 1:if(s=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(va===null||!va.has(v))))return c.flags|=65536,p&=-p,c.lanes|=p,p=pS(p),gS(p,r,c,f),bm(c,p),!1}c=c.return}while(c!==null);return!1}var vS=Error(i(461)),Jt=!1;function on(r,s,c,f){s.child=r===null?oS(s,null,c,f):bo(s,r.child,c,f)}function yS(r,s,c,f,p){c=c.render;var v=s.ref;if("ref"in f){var k={};for(var A in f)A!=="ref"&&(k[A]=f[A])}else k=f;return hs(s),f=km(r,s,c,k,v,p),A=wm(),r!==null&&!Jt?(_m(r,s,p),Nr(r,s,p)):(ot&&A&&om(s),s.flags|=1,on(r,s,f,p),s.child)}function bS(r,s,c,f,p){if(r===null){var v=c.type;return typeof v=="function"&&!rm(v)&&v.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=v,SS(r,s,v,f,p)):(r=Vu(c.type,null,f,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,!Wm(r,p)){var k=v.memoizedProps;if(c=c.compare,c=c!==null?c:jl,c(k,f)&&r.ref===s.ref)return Nr(r,s,p)}return s.flags|=1,r=kr(v,f),r.ref=s.ref,r.return=s,s.child=r}function SS(r,s,c,f,p){if(r!==null){var v=r.memoizedProps;if(jl(v,f)&&r.ref===s.ref)if(Jt=!1,s.pendingProps=f=v,Wm(r,p))(r.flags&131072)!==0&&(Jt=!0);else return s.lanes=r.lanes,Nr(r,s,p)}return Vm(r,s,c,f,p)}function TS(r,s,c){var f=s.pendingProps,p=f.children,v=r!==null?r.memoizedState:null;if(f.mode==="hidden"){if((s.flags&128)!==0){if(f=v!==null?v.baseLanes|c:c,r!==null){for(p=s.child=r.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;s.childLanes=v&~f}else s.childLanes=0,s.child=null;return ES(r,s,f,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ku(s,v!==null?v.cachePool:null),v!==null?S0(s,v):Tm(),lS(s);else return s.lanes=s.childLanes=536870912,ES(r,s,v!==null?v.baseLanes|c:c,c)}else v!==null?(Ku(s,v.cachePool),S0(s,v),da(),s.memoizedState=null):(r!==null&&Ku(s,null),Tm(),da());return on(r,s,p,c),s.child}function ES(r,s,c,f){var p=pm();return p=p===null?null:{parent:$t._currentValue,pool:p},s.memoizedState={baseLanes:c,cachePool:p},r!==null&&Ku(s,null),Tm(),lS(s),r!==null&&Vl(r,s,f,!0),null}function ud(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=4194816)}}function Vm(r,s,c,f,p){return hs(s),c=km(r,s,c,f,void 0,p),f=wm(),r!==null&&!Jt?(_m(r,s,p),Nr(r,s,p)):(ot&&f&&om(s),s.flags|=1,on(r,s,c,p),s.child)}function CS(r,s,c,f,p,v){return hs(s),s.updateQueue=null,c=E0(s,f,c,p),T0(r),f=wm(),r!==null&&!Jt?(_m(r,s,v),Nr(r,s,v)):(ot&&f&&om(s),s.flags|=1,on(r,s,c,v),s.child)}function kS(r,s,c,f,p){if(hs(s),s.stateNode===null){var v=lo,k=c.contextType;typeof k=="object"&&k!==null&&(v=hn(k)),v=new c(f,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=zm,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=f,v.state=s.memoizedState,v.refs={},vm(s),k=c.contextType,v.context=typeof k=="object"&&k!==null?hn(k):lo,v.state=s.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Bm(s,c,k,f),v.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(k=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),k!==v.state&&zm.enqueueReplaceState(v,v.state,null),Wl(s,f,v,p),Yl(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(r===null){v=s.stateNode;var A=s.memoizedProps,j=gs(c,A);v.props=j;var Y=v.context,ae=c.contextType;k=lo,typeof ae=="object"&&ae!==null&&(k=hn(ae));var ce=c.getDerivedStateFromProps;ae=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,ae||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A||Y!==k)&&uS(s,v,f,k),sa=!1;var W=s.memoizedState;v.state=W,Wl(s,f,v,p),Yl(),Y=s.memoizedState,A||W!==Y||sa?(typeof ce=="function"&&(Bm(s,c,ce,f),Y=s.memoizedState),(j=sa||cS(s,c,j,f,W,Y,k))?(ae||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=Y),v.props=f,v.state=Y,v.context=k,f=j):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{v=s.stateNode,ym(r,s),k=s.memoizedProps,ae=gs(c,k),v.props=ae,ce=s.pendingProps,W=v.context,Y=c.contextType,j=lo,typeof Y=="object"&&Y!==null&&(j=hn(Y)),A=c.getDerivedStateFromProps,(Y=typeof A=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(k!==ce||W!==j)&&uS(s,v,f,j),sa=!1,W=s.memoizedState,v.state=W,Wl(s,f,v,p),Yl();var X=s.memoizedState;k!==ce||W!==X||sa||r!==null&&r.dependencies!==null&&$u(r.dependencies)?(typeof A=="function"&&(Bm(s,c,A,f),X=s.memoizedState),(ae=sa||cS(s,c,ae,f,W,X,j)||r!==null&&r.dependencies!==null&&$u(r.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,X,j),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,X,j)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||k===r.memoizedProps&&W===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&W===r.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=X),v.props=f,v.state=X,v.context=j,f=ae):(typeof v.componentDidUpdate!="function"||k===r.memoizedProps&&W===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&W===r.memoizedState||(s.flags|=1024),f=!1)}return v=f,ud(r,s),f=(s.flags&128)!==0,v||f?(v=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,r!==null&&f?(s.child=bo(s,r.child,null,p),s.child=bo(s,null,c,p)):on(r,s,c,p),s.memoizedState=v.state,r=s.child):r=Nr(r,s,p),r}function wS(r,s,c,f){return zl(),s.flags|=256,on(r,s,c,f),s.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qm(r){return{baseLanes:r,cachePool:f0()}}function $m(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=hi),r}function _S(r,s,c){var f=s.pendingProps,p=!1,v=(s.flags&128)!==0,k;if((k=v)||(k=r!==null&&r.memoizedState===null?!1:(Gt.current&2)!==0),k&&(p=!0,s.flags&=-129),k=(s.flags&32)!==0,s.flags&=-33,r===null){if(ot){if(p?ua(s):da(),ot){var A=At,j;if(j=A){e:{for(j=A,A=Qi;j.nodeType!==8;){if(!A){A=null;break e}if(j=_i(j.nextSibling),j===null){A=null;break e}}A=j}A!==null?(s.memoizedState={dehydrated:A,treeContext:ls!==null?{id:wr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},j=Fn(18,null,null,0),j.stateNode=A,j.return=s,s.child=j,vn=s,At=null,j=!0):j=!1}j||ds(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Rp(A)?s.lanes=32:s.lanes=536870912,null;Or(s)}return A=f.children,f=f.fallback,p?(da(),p=s.mode,A=dd({mode:"hidden",children:A},p),f=os(f,p,c,null),A.return=s,f.return=s,A.sibling=f,s.child=A,p=s.child,p.memoizedState=qm(c),p.childLanes=$m(r,k,c),s.memoizedState=Hm,f):(ua(s),Gm(s,A))}if(j=r.memoizedState,j!==null&&(A=j.dehydrated,A!==null)){if(v)s.flags&256?(ua(s),s.flags&=-257,s=Km(r,s,c)):s.memoizedState!==null?(da(),s.child=r.child,s.flags|=128,s=null):(da(),p=f.fallback,A=s.mode,f=dd({mode:"visible",children:f.children},A),p=os(p,A,c,null),p.flags|=2,f.return=s,p.return=s,f.sibling=p,s.child=f,bo(s,r.child,null,c),f=s.child,f.memoizedState=qm(c),f.childLanes=$m(r,k,c),s.memoizedState=Hm,s=p);else if(ua(s),Rp(A)){if(k=A.nextSibling&&A.nextSibling.dataset,k)var Y=k.dgst;k=Y,f=Error(i(419)),f.stack="",f.digest=k,Fl({value:f,source:null,stack:null}),s=Km(r,s,c)}else if(Jt||Vl(r,s,c,!1),k=(c&r.childLanes)!==0,Jt||k){if(k=bt,k!==null&&(f=c&-c,f=(f&42)!==0?1:Rl(f),f=(f&(k.suspendedLanes|c))!==0?0:f,f!==0&&f!==j.retryLane))throw j.retryLane=f,oo(r,f),Gn(k,r,f),vS;A.data==="$?"||dp(),s=Km(r,s,c)}else A.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=j.treeContext,At=_i(A.nextSibling),vn=s,ot=!0,us=null,Qi=!1,r!==null&&(ui[di++]=wr,ui[di++]=_r,ui[di++]=ls,wr=r.id,_r=r.overflow,ls=s),s=Gm(s,f.children),s.flags|=4096);return s}return p?(da(),p=f.fallback,A=s.mode,j=r.child,Y=j.sibling,f=kr(j,{mode:"hidden",children:f.children}),f.subtreeFlags=j.subtreeFlags&65011712,Y!==null?p=kr(Y,p):(p=os(p,A,c,null),p.flags|=2),p.return=s,f.return=s,f.sibling=p,s.child=f,f=p,p=s.child,A=r.child.memoizedState,A===null?A=qm(c):(j=A.cachePool,j!==null?(Y=$t._currentValue,j=j.parent!==Y?{parent:Y,pool:Y}:j):j=f0(),A={baseLanes:A.baseLanes|c,cachePool:j}),p.memoizedState=A,p.childLanes=$m(r,k,c),s.memoizedState=Hm,f):(ua(s),c=r.child,r=c.sibling,c=kr(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,r!==null&&(k=s.deletions,k===null?(s.deletions=[r],s.flags|=16):k.push(r)),s.child=c,s.memoizedState=null,c)}function Gm(r,s){return s=dd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function dd(r,s){return r=Fn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Km(r,s,c){return bo(s,r.child,null,c),r=Gm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function xS(r,s,c){r.lanes|=s;var f=r.alternate;f!==null&&(f.lanes|=s),dm(r.return,s,c)}function Ym(r,s,c,f,p){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=c,v.tailMode=p)}function RS(r,s,c){var f=s.pendingProps,p=f.revealOrder,v=f.tail;if(on(r,s,f.children,c),f=Gt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&xS(r,c,s);else if(r.tag===19)xS(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}switch(le(Gt,f),p){case"forwards":for(c=s.child,p=null;c!==null;)r=c.alternate,r!==null&&od(r)===null&&(p=c),c=c.sibling;c=p,c===null?(p=s.child,s.child=null):(p=c.sibling,c.sibling=null),Ym(s,!1,p,c,v);break;case"backwards":for(c=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&od(r)===null){s.child=p;break}r=p.sibling,p.sibling=c,c=p,p=r}Ym(s,!0,c,null,v);break;case"together":Ym(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Nr(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),ga|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(Vl(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=kr(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=kr(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function Wm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&$u(r)))}function IO(r,s,c){switch(s.tag){case 3:ze(s,s.stateNode.containerInfo),aa(s,$t,r.memoizedState.cache),zl();break;case 27:case 5:lt(s);break;case 4:ze(s,s.stateNode.containerInfo);break;case 10:aa(s,s.type,s.memoizedProps.value);break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(ua(s),s.flags|=128,null):(c&s.child.childLanes)!==0?_S(r,s,c):(ua(s),r=Nr(r,s,c),r!==null?r.sibling:null);ua(s);break;case 19:var p=(r.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(Vl(r,s,c,!1),f=(c&s.childLanes)!==0),p){if(f)return RS(r,s,c);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),le(Gt,Gt.current),f)break;return null;case 22:case 23:return s.lanes=0,TS(r,s,c);case 24:aa(s,$t,r.memoizedState.cache)}return Nr(r,s,c)}function AS(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)Jt=!0;else{if(!Wm(r,c)&&(s.flags&128)===0)return Jt=!1,IO(r,s,c);Jt=(r.flags&131072)!==0}else Jt=!1,ot&&(s.flags&1048576)!==0&&a0(s,qu,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var f=s.elementType,p=f._init;if(f=p(f._payload),s.type=f,typeof f=="function")rm(f)?(r=gs(f,r),s.tag=1,s=kS(null,s,f,r,c)):(s.tag=0,s=Vm(null,s,f,r,c));else{if(f!=null){if(p=f.$$typeof,p===O){s.tag=11,s=yS(null,s,f,r,c);break e}else if(p===B){s.tag=14,s=bS(null,s,f,r,c);break e}}throw s=ye(f)||f,Error(i(306,s,""))}}return s;case 0:return Vm(r,s,s.type,s.pendingProps,c);case 1:return f=s.type,p=gs(f,s.pendingProps),kS(r,s,f,p,c);case 3:e:{if(ze(s,s.stateNode.containerInfo),r===null)throw Error(i(387));f=s.pendingProps;var v=s.memoizedState;p=v.element,ym(r,s),Wl(s,f,null,c);var k=s.memoizedState;if(f=k.cache,aa(s,$t,f),f!==v.cache&&fm(s,[$t],c,!0),Yl(),f=k.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:k.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=wS(r,s,f,c);break e}else if(f!==p){p=li(Error(i(424)),s),Fl(p),s=wS(r,s,f,c);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(At=_i(r.firstChild),vn=s,ot=!0,us=null,Qi=!0,c=oS(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(zl(),f===p){s=Nr(r,s,c);break e}on(r,s,f,c)}s=s.child}return s;case 26:return ud(r,s),r===null?(c=PT(s.type,null,s.pendingProps,null))?s.memoizedState=c:ot||(c=s.type,r=s.pendingProps,f=wd(Te.current).createElement(c),f[ue]=s,f[pe]=r,cn(f,c,r),Fe(f),s.stateNode=f):s.memoizedState=PT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return lt(s),r===null&&ot&&(f=s.stateNode=OT(s.type,s.pendingProps,Te.current),vn=s,Qi=!0,p=At,Sa(s.type)?(Ap=p,At=_i(f.firstChild)):At=p),on(r,s,s.pendingProps.children,c),ud(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&ot&&((p=f=At)&&(f=uN(f,s.type,s.pendingProps,Qi),f!==null?(s.stateNode=f,vn=s,At=_i(f.firstChild),Qi=!1,p=!0):p=!1),p||ds(s)),lt(s),p=s.type,v=s.pendingProps,k=r!==null?r.memoizedProps:null,f=v.children,wp(p,v)?f=null:k!==null&&wp(p,k)&&(s.flags|=32),s.memoizedState!==null&&(p=km(r,s,RO,null,null,c),vc._currentValue=p),ud(r,s),on(r,s,f,c),s.child;case 6:return r===null&&ot&&((r=c=At)&&(c=dN(c,s.pendingProps,Qi),c!==null?(s.stateNode=c,vn=s,At=null,r=!0):r=!1),r||ds(s)),null;case 13:return _S(r,s,c);case 4:return ze(s,s.stateNode.containerInfo),f=s.pendingProps,r===null?s.child=bo(s,null,f,c):on(r,s,f,c),s.child;case 11:return yS(r,s,s.type,s.pendingProps,c);case 7:return on(r,s,s.pendingProps,c),s.child;case 8:return on(r,s,s.pendingProps.children,c),s.child;case 12:return on(r,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,aa(s,s.type,f.value),on(r,s,f.children,c),s.child;case 9:return p=s.type._context,f=s.pendingProps.children,hs(s),p=hn(p),f=f(p),s.flags|=1,on(r,s,f,c),s.child;case 14:return bS(r,s,s.type,s.pendingProps,c);case 15:return SS(r,s,s.type,s.pendingProps,c);case 19:return RS(r,s,c);case 31:return f=s.pendingProps,c=s.mode,f={mode:f.mode,children:f.children},r===null?(c=dd(f,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=kr(r.child,f),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return TS(r,s,c);case 24:return hs(s),f=hn($t),r===null?(p=pm(),p===null&&(p=bt,v=hm(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=c),p=v),s.memoizedState={parent:f,cache:p},vm(s),aa(s,$t,p)):((r.lanes&c)!==0&&(ym(r,s),Wl(s,null,null,c),Yl()),p=r.memoizedState,v=s.memoizedState,p.parent!==f?(p={parent:f,cache:f},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),aa(s,$t,f)):(f=v.cache,aa(s,$t,f),f!==p.cache&&fm(s,[$t],c,!0))),on(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Dr(r){r.flags|=4}function OS(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!UT(s)){if(s=fi.current,s!==null&&((it&4194048)===it?Ji!==null:(it&62914560)!==it&&(it&536870912)===0||s!==Ji))throw Gl=gm,h0;r.flags|=8192}}function fd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?_u():536870912,r.lanes|=s,Co|=s)}function nc(r,s){if(!ot)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,f=0;if(s)for(var p=r.child;p!==null;)c|=p.lanes|p.childLanes,f|=p.subtreeFlags&65011712,f|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)c|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=f,r.childLanes=c,s}function jO(r,s,c){var f=s.pendingProps;switch(lm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return c=s.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Rr($t),Tt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Bl(s)?Dr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,l0())),xt(s),null;case 26:return c=s.memoizedState,r===null?(Dr(s),c!==null?(xt(s),OS(s,c)):(xt(s),s.flags&=-16777217)):c?c!==r.memoizedState?(Dr(s),xt(s),OS(s,c)):(xt(s),s.flags&=-16777217):(r.memoizedProps!==f&&Dr(s),xt(s),s.flags&=-16777217),null;case 27:qt(s),c=Te.current;var p=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==f&&Dr(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return xt(s),null}r=ge.current,Bl(s)?s0(s):(r=OT(p,f,c),s.stateNode=r,Dr(s))}return xt(s),null;case 5:if(qt(s),c=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==f&&Dr(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return xt(s),null}if(r=ge.current,Bl(s))s0(s);else{switch(p=wd(Te.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof f.is=="string"?p.createElement("select",{is:f.is}):p.createElement("select"),f.multiple?r.multiple=!0:f.size&&(r.size=f.size);break;default:r=typeof f.is=="string"?p.createElement(c,{is:f.is}):p.createElement(c)}}r[ue]=s,r[pe]=f;e:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=r;e:switch(cn(r,c,f),c){case"button":case"input":case"select":case"textarea":r=!!f.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Dr(s)}}return xt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==f&&Dr(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(r=Te.current,Bl(s)){if(r=s.stateNode,c=s.memoizedProps,f=null,p=vn,p!==null)switch(p.tag){case 27:case 5:f=p.memoizedProps}r[ue]=s,r=!!(r.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||CT(r.nodeValue,c)),r||ds(s)}else r=wd(r).createTextNode(f),r[ue]=s,s.stateNode=r}return xt(s),null;case 13:if(f=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=Bl(s),f!==null&&f.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[ue]=s}else zl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),p=!1}else p=l0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(Or(s),s):(Or(s),null)}if(Or(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=f!==null,r=r!==null&&r.memoizedState!==null,c){f=s.child,p=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(p=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==p&&(f.flags|=2048)}return c!==r&&c&&(s.child.flags|=8192),fd(s,s.updateQueue),xt(s),null;case 4:return Tt(),r===null&&Sp(s.stateNode.containerInfo),xt(s),null;case 10:return Rr(s.type),xt(s),null;case 19:if(he(Gt),p=s.memoizedState,p===null)return xt(s),null;if(f=(s.flags&128)!==0,v=p.rendering,v===null)if(f)nc(p,!1);else{if(Ot!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(v=od(r),v!==null){for(s.flags|=128,nc(p,!1),r=v.updateQueue,s.updateQueue=r,fd(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)r0(c,r),c=c.sibling;return le(Gt,Gt.current&1|2),s.child}r=r.sibling}p.tail!==null&&fn()>pd&&(s.flags|=128,f=!0,nc(p,!1),s.lanes=4194304)}else{if(!f)if(r=od(v),r!==null){if(s.flags|=128,f=!0,r=r.updateQueue,s.updateQueue=r,fd(s,r),nc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!ot)return xt(s),null}else 2*fn()-p.renderingStartTime>pd&&c!==536870912&&(s.flags|=128,f=!0,nc(p,!1),s.lanes=4194304);p.isBackwards?(v.sibling=s.child,s.child=v):(r=p.last,r!==null?r.sibling=v:s.child=v,p.last=v)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=fn(),s.sibling=null,r=Gt.current,le(Gt,f?r&1|2:r&1),s):(xt(s),null);case 22:case 23:return Or(s),Em(),f=s.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),c=s.updateQueue,c!==null&&fd(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),r!==null&&he(ms),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Rr($t),xt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function UO(r,s){switch(lm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Rr($t),Tt(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return qt(s),null;case 13:if(Or(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));zl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return he(Gt),null;case 4:return Tt(),null;case 10:return Rr(s.type),null;case 22:case 23:return Or(s),Em(),r!==null&&he(ms),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Rr($t),null;case 25:return null;default:return null}}function NS(r,s){switch(lm(s),s.tag){case 3:Rr($t),Tt();break;case 26:case 27:case 5:qt(s);break;case 4:Tt();break;case 13:Or(s);break;case 19:he(Gt);break;case 10:Rr(s.type);break;case 22:case 23:Or(s),Em(),r!==null&&he(ms);break;case 24:Rr($t)}}function ic(r,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&r)===r){f=void 0;var v=c.create,k=c.inst;f=v(),k.destroy=f}c=c.next}while(c!==p)}}catch(A){gt(s,s.return,A)}}function fa(r,s,c){try{var f=s.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var v=p.next;f=v;do{if((f.tag&r)===r){var k=f.inst,A=k.destroy;if(A!==void 0){k.destroy=void 0,p=s;var j=c,Y=A;try{Y()}catch(ae){gt(p,j,ae)}}}f=f.next}while(f!==v)}}catch(ae){gt(s,s.return,ae)}}function DS(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{b0(s,c)}catch(f){gt(r,r.return,f)}}}function PS(r,s,c){c.props=gs(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(f){gt(r,s,f)}}function rc(r,s){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof c=="function"?r.refCleanup=c(f):c.current=f}}catch(p){gt(r,s,p)}}function Zi(r,s){var c=r.ref,f=r.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(p){gt(r,s,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){gt(r,s,p)}else c.current=null}function MS(r){var s=r.type,c=r.memoizedProps,f=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(p){gt(r,r.return,p)}}function Xm(r,s,c){try{var f=r.stateNode;aN(f,r.type,c,s),f[pe]=s}catch(p){gt(r,r.return,p)}}function LS(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Sa(r.type)||r.tag===4}function Qm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||LS(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Sa(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Jm(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(r),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=kd));else if(f!==4&&(f===27&&Sa(r.type)&&(c=r.stateNode,s=null),r=r.child,r!==null))for(Jm(r,s,c),r=r.sibling;r!==null;)Jm(r,s,c),r=r.sibling}function hd(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(f!==4&&(f===27&&Sa(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(hd(r,s,c),r=r.sibling;r!==null;)hd(r,s,c),r=r.sibling}function IS(r){var s=r.stateNode,c=r.memoizedProps;try{for(var f=r.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);cn(s,f,c),s[ue]=r,s[pe]=c}catch(v){gt(r,r.return,v)}}var Pr=!1,jt=!1,Zm=!1,jS=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function BO(r,s){if(r=r.containerInfo,Cp=Nd,r=Yb(r),Qh(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var p=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var k=0,A=-1,j=-1,Y=0,ae=0,ce=r,W=null;t:for(;;){for(var X;ce!==c||p!==0&&ce.nodeType!==3||(A=k+p),ce!==v||f!==0&&ce.nodeType!==3||(j=k+f),ce.nodeType===3&&(k+=ce.nodeValue.length),(X=ce.firstChild)!==null;)W=ce,ce=X;for(;;){if(ce===r)break t;if(W===c&&++Y===p&&(A=k),W===v&&++ae===f&&(j=k),(X=ce.nextSibling)!==null)break;ce=W,W=ce.parentNode}ce=X}c=A===-1||j===-1?null:{start:A,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(kp={focusedElem:r,selectionRange:c},Nd=!1,Zt=s;Zt!==null;)if(s=Zt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Zt=r;else for(;Zt!==null;){switch(s=Zt,v=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,c=s,p=v.memoizedProps,v=v.memoizedState,f=c.stateNode;try{var Be=gs(c.type,p,c.elementType===c.type);r=f.getSnapshotBeforeUpdate(Be,v),f.__reactInternalSnapshotBeforeUpdate=r}catch(je){gt(c,c.return,je)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)xp(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":xp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Zt=r;break}Zt=s.return}}function US(r,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ha(r,c),f&4&&ic(5,c);break;case 1:if(ha(r,c),f&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(k){gt(c,c.return,k)}else{var p=gs(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(p,s,r.__reactInternalSnapshotBeforeUpdate)}catch(k){gt(c,c.return,k)}}f&64&&DS(c),f&512&&rc(c,c.return);break;case 3:if(ha(r,c),f&64&&(r=c.updateQueue,r!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{b0(r,s)}catch(k){gt(c,c.return,k)}}break;case 27:s===null&&f&4&&IS(c);case 26:case 5:ha(r,c),s===null&&f&4&&MS(c),f&512&&rc(c,c.return);break;case 12:ha(r,c);break;case 13:ha(r,c),f&4&&FS(r,c),f&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=YO.bind(null,c),fN(r,c))));break;case 22:if(f=c.memoizedState!==null||Pr,!f){s=s!==null&&s.memoizedState!==null||jt,p=Pr;var v=jt;Pr=f,(jt=s)&&!v?ma(r,c,(c.subtreeFlags&8772)!==0):ha(r,c),Pr=p,jt=v}break;case 30:break;default:ha(r,c)}}function BS(r){var s=r.alternate;s!==null&&(r.alternate=null,BS(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ae(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var kt=null,kn=!1;function Mr(r,s,c){for(c=c.child;c!==null;)zS(r,s,c),c=c.sibling}function zS(r,s,c){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(an,c)}catch{}switch(c.tag){case 26:jt||Zi(c,s),Mr(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:jt||Zi(c,s);var f=kt,p=kn;Sa(c.type)&&(kt=c.stateNode,kn=!1),Mr(r,s,c),hc(c.stateNode),kt=f,kn=p;break;case 5:jt||Zi(c,s);case 6:if(f=kt,p=kn,kt=null,Mr(r,s,c),kt=f,kn=p,kt!==null)if(kn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(c.stateNode)}catch(v){gt(c,s,v)}else try{kt.removeChild(c.stateNode)}catch(v){gt(c,s,v)}break;case 18:kt!==null&&(kn?(r=kt,RT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Tc(r)):RT(kt,c.stateNode));break;case 4:f=kt,p=kn,kt=c.stateNode.containerInfo,kn=!0,Mr(r,s,c),kt=f,kn=p;break;case 0:case 11:case 14:case 15:jt||fa(2,c,s),jt||fa(4,c,s),Mr(r,s,c);break;case 1:jt||(Zi(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&PS(c,s,f)),Mr(r,s,c);break;case 21:Mr(r,s,c);break;case 22:jt=(f=jt)||c.memoizedState!==null,Mr(r,s,c),jt=f;break;default:Mr(r,s,c)}}function FS(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Tc(r)}catch(c){gt(s,s.return,c)}}function zO(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new jS),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new jS),s;default:throw Error(i(435,r.tag))}}function ep(r,s){var c=zO(r);s.forEach(function(f){var p=WO.bind(null,r,f);c.has(f)||(c.add(f),f.then(p,p))})}function Vn(r,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var p=c[f],v=r,k=s,A=k;e:for(;A!==null;){switch(A.tag){case 27:if(Sa(A.type)){kt=A.stateNode,kn=!1;break e}break;case 5:kt=A.stateNode,kn=!1;break e;case 3:case 4:kt=A.stateNode.containerInfo,kn=!0;break e}A=A.return}if(kt===null)throw Error(i(160));zS(v,k,p),kt=null,kn=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)VS(s,r),s=s.sibling}var wi=null;function VS(r,s){var c=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Vn(s,r),Hn(r),f&4&&(fa(3,r,r.return),ic(3,r),fa(5,r,r.return));break;case 1:Vn(s,r),Hn(r),f&512&&(jt||c===null||Zi(c,c.return)),f&64&&Pr&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var p=wi;if(Vn(s,r),Hn(r),f&512&&(jt||c===null||Zi(c,c.return)),f&4){var v=c!==null?c.memoizedState:null;if(f=r.memoizedState,c===null)if(f===null)if(r.stateNode===null){e:{f=r.type,c=r.memoizedProps,p=p.ownerDocument||p;t:switch(f){case"title":v=p.getElementsByTagName("title")[0],(!v||v[Re]||v[ue]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(f),p.head.insertBefore(v,p.querySelector("head > title"))),cn(v,f,c),v[ue]=r,Fe(v),f=v;break e;case"link":var k=IT("link","href",p).get(f+(c.href||""));if(k){for(var A=0;A<k.length;A++)if(v=k[A],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(A,1);break t}}v=p.createElement(f),cn(v,f,c),p.head.appendChild(v);break;case"meta":if(k=IT("meta","content",p).get(f+(c.content||""))){for(A=0;A<k.length;A++)if(v=k[A],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(A,1);break t}}v=p.createElement(f),cn(v,f,c),p.head.appendChild(v);break;default:throw Error(i(468,f))}v[ue]=r,Fe(v),f=v}r.stateNode=f}else jT(p,r.type,r.stateNode);else r.stateNode=LT(p,f,r.memoizedProps);else v!==f?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,f===null?jT(p,r.type,r.stateNode):LT(p,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Xm(r,r.memoizedProps,c.memoizedProps)}break;case 27:Vn(s,r),Hn(r),f&512&&(jt||c===null||Zi(c,c.return)),c!==null&&f&4&&Xm(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Vn(s,r),Hn(r),f&512&&(jt||c===null||Zi(c,c.return)),r.flags&32){p=r.stateNode;try{eo(p,"")}catch(X){gt(r,r.return,X)}}f&4&&r.stateNode!=null&&(p=r.memoizedProps,Xm(r,p,c!==null?c.memoizedProps:p)),f&1024&&(Zm=!0);break;case 6:if(Vn(s,r),Hn(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,c=r.stateNode;try{c.nodeValue=f}catch(X){gt(r,r.return,X)}}break;case 3:if(Rd=null,p=wi,wi=_d(s.containerInfo),Vn(s,r),wi=p,Hn(r),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Tc(s.containerInfo)}catch(X){gt(r,r.return,X)}Zm&&(Zm=!1,HS(r));break;case 4:f=wi,wi=_d(r.stateNode.containerInfo),Vn(s,r),Hn(r),wi=f;break;case 12:Vn(s,r),Hn(r);break;case 13:Vn(s,r),Hn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(sp=fn()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,ep(r,f)));break;case 22:p=r.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,Y=Pr,ae=jt;if(Pr=Y||p,jt=ae||j,Vn(s,r),jt=ae,Pr=Y,Hn(r),f&8192)e:for(s=r.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(c===null||j||Pr||jt||vs(r)),c=null,s=r;;){if(s.tag===5||s.tag===26){if(c===null){j=c=s;try{if(v=j.stateNode,p)k=v.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{A=j.stateNode;var ce=j.memoizedProps.style,W=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(X){gt(j,j.return,X)}}}else if(s.tag===6){if(c===null){j=s;try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(X){gt(j,j.return,X)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=r.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,ep(r,c))));break;case 19:Vn(s,r),Hn(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,ep(r,f)));break;case 30:break;case 21:break;default:Vn(s,r),Hn(r)}}function Hn(r){var s=r.flags;if(s&2){try{for(var c,f=r.return;f!==null;){if(LS(f)){c=f;break}f=f.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var p=c.stateNode,v=Qm(r);hd(r,v,p);break;case 5:var k=c.stateNode;c.flags&32&&(eo(k,""),c.flags&=-33);var A=Qm(r);hd(r,A,k);break;case 3:case 4:var j=c.stateNode.containerInfo,Y=Qm(r);Jm(r,Y,j);break;default:throw Error(i(161))}}catch(ae){gt(r,r.return,ae)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function HS(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;HS(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ha(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)US(r,s.alternate,s),s=s.sibling}function vs(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:fa(4,s,s.return),vs(s);break;case 1:Zi(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&PS(s,s.return,c),vs(s);break;case 27:hc(s.stateNode);case 26:case 5:Zi(s,s.return),vs(s);break;case 22:s.memoizedState===null&&vs(s);break;case 30:vs(s);break;default:vs(s)}r=r.sibling}}function ma(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,p=r,v=s,k=v.flags;switch(v.tag){case 0:case 11:case 15:ma(p,v,c),ic(4,v);break;case 1:if(ma(p,v,c),f=v,p=f.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Y){gt(f,f.return,Y)}if(f=v,p=f.updateQueue,p!==null){var A=f.stateNode;try{var j=p.shared.hiddenCallbacks;if(j!==null)for(p.shared.hiddenCallbacks=null,p=0;p<j.length;p++)y0(j[p],A)}catch(Y){gt(f,f.return,Y)}}c&&k&64&&DS(v),rc(v,v.return);break;case 27:IS(v);case 26:case 5:ma(p,v,c),c&&f===null&&k&4&&MS(v),rc(v,v.return);break;case 12:ma(p,v,c);break;case 13:ma(p,v,c),c&&k&4&&FS(p,v);break;case 22:v.memoizedState===null&&ma(p,v,c),rc(v,v.return);break;case 30:break;default:ma(p,v,c)}s=s.sibling}}function tp(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Hl(c))}function np(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Hl(r))}function er(r,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qS(r,s,c,f),s=s.sibling}function qS(r,s,c,f){var p=s.flags;switch(s.tag){case 0:case 11:case 15:er(r,s,c,f),p&2048&&ic(9,s);break;case 1:er(r,s,c,f);break;case 3:er(r,s,c,f),p&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Hl(r)));break;case 12:if(p&2048){er(r,s,c,f),r=s.stateNode;try{var v=s.memoizedProps,k=v.id,A=v.onPostCommit;typeof A=="function"&&A(k,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){gt(s,s.return,j)}}else er(r,s,c,f);break;case 13:er(r,s,c,f);break;case 23:break;case 22:v=s.stateNode,k=s.alternate,s.memoizedState!==null?v._visibility&2?er(r,s,c,f):ac(r,s):v._visibility&2?er(r,s,c,f):(v._visibility|=2,So(r,s,c,f,(s.subtreeFlags&10256)!==0)),p&2048&&tp(k,s);break;case 24:er(r,s,c,f),p&2048&&np(s.alternate,s);break;default:er(r,s,c,f)}}function So(r,s,c,f,p){for(p=p&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=r,k=s,A=c,j=f,Y=k.flags;switch(k.tag){case 0:case 11:case 15:So(v,k,A,j,p),ic(8,k);break;case 23:break;case 22:var ae=k.stateNode;k.memoizedState!==null?ae._visibility&2?So(v,k,A,j,p):ac(v,k):(ae._visibility|=2,So(v,k,A,j,p)),p&&Y&2048&&tp(k.alternate,k);break;case 24:So(v,k,A,j,p),p&&Y&2048&&np(k.alternate,k);break;default:So(v,k,A,j,p)}s=s.sibling}}function ac(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,f=s,p=f.flags;switch(f.tag){case 22:ac(c,f),p&2048&&tp(f.alternate,f);break;case 24:ac(c,f),p&2048&&np(f.alternate,f);break;default:ac(c,f)}s=s.sibling}}var sc=8192;function To(r){if(r.subtreeFlags&sc)for(r=r.child;r!==null;)$S(r),r=r.sibling}function $S(r){switch(r.tag){case 26:To(r),r.flags&sc&&r.memoizedState!==null&&wN(wi,r.memoizedState,r.memoizedProps);break;case 5:To(r);break;case 3:case 4:var s=wi;wi=_d(r.stateNode.containerInfo),To(r),wi=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=sc,sc=16777216,To(r),sc=s):To(r));break;default:To(r)}}function GS(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function oc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,YS(f,r)}GS(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)KS(r),r=r.sibling}function KS(r){switch(r.tag){case 0:case 11:case 15:oc(r),r.flags&2048&&fa(9,r,r.return);break;case 3:oc(r);break;case 12:oc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,md(r)):oc(r);break;default:oc(r)}}function md(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Zt=f,YS(f,r)}GS(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:fa(8,s,s.return),md(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,md(s));break;default:md(s)}r=r.sibling}}function YS(r,s){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:fa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Hl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Zt=f;else e:for(c=r;Zt!==null;){f=Zt;var p=f.sibling,v=f.return;if(BS(f),f===c){Zt=null;break e}if(p!==null){p.return=v,Zt=p;break e}Zt=v}}}var FO={getCacheForType:function(r){var s=hn($t),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c}},VO=typeof WeakMap=="function"?WeakMap:Map,ct=0,bt=null,Ze=null,it=0,ut=0,qn=null,pa=!1,Eo=!1,ip=!1,Lr=0,Ot=0,ga=0,ys=0,rp=0,hi=0,Co=0,lc=null,wn=null,ap=!1,sp=0,pd=1/0,gd=null,va=null,ln=0,ya=null,ko=null,wo=0,op=0,lp=null,WS=null,cc=0,cp=null;function $n(){if((ct&2)!==0&&it!==0)return it&-it;if(F.T!==null){var r=fo;return r!==0?r:gp()}return U()}function XS(){hi===0&&(hi=(it&536870912)===0||ot?Xs():536870912);var r=fi.current;return r!==null&&(r.flags|=32),hi}function Gn(r,s,c){(r===bt&&(ut===2||ut===9)||r.cancelPendingCommit!==null)&&(_o(r,0),ba(r,it,hi,!1)),ts(r,c),((ct&2)===0||r!==bt)&&(r===bt&&((ct&2)===0&&(ys|=c),Ot===4&&ba(r,it,hi,!1)),tr(r))}function QS(r,s,c){if((ct&6)!==0)throw Error(i(327));var f=!c&&(s&124)===0&&(s&r.expiredLanes)===0||Wi(r,s),p=f?$O(r,s):fp(r,s,!0),v=f;do{if(p===0){Eo&&!f&&ba(r,s,0,!1);break}else{if(c=r.current.alternate,v&&!HO(c)){p=fp(r,s,!1),v=!1;continue}if(p===2){if(v=s,r.errorRecoveryDisabledLanes&v)var k=0;else k=r.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){s=k;e:{var A=r;p=lc;var j=A.current.memoizedState.isDehydrated;if(j&&(_o(A,k).flags|=256),k=fp(A,k,!1),k!==2){if(ip&&!j){A.errorRecoveryDisabledLanes|=v,ys|=v,p=4;break e}v=wn,wn=p,v!==null&&(wn===null?wn=v:wn.push.apply(wn,v))}p=k}if(v=!1,p!==2)continue}}if(p===1){_o(r,0),ba(r,s,0,!0);break}e:{switch(f=r,v=p,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ba(f,s,hi,!pa);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=sp+300-fn(),10<p)){if(ba(f,s,hi,!pa),es(f,0,!0)!==0)break e;f.timeoutHandle=_T(JS.bind(null,f,c,wn,gd,ap,s,hi,ys,Co,pa,v,2,-0,0),p);break e}JS(f,c,wn,gd,ap,s,hi,ys,Co,pa,v,0,-0,0)}}break}while(!0);tr(r)}function JS(r,s,c,f,p,v,k,A,j,Y,ae,ce,W,X){if(r.timeoutHandle=-1,ce=s.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(gc={stylesheets:null,count:0,unsuspend:kN},$S(s),ce=_N(),ce!==null)){r.cancelPendingCommit=ce(aT.bind(null,r,s,v,c,f,p,k,A,j,ae,1,W,X)),ba(r,v,k,!Y);return}aT(r,s,v,c,f,p,k,A,j)}function HO(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var p=c[f],v=p.getSnapshot;p=p.value;try{if(!zn(v(),p))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ba(r,s,c,f){s&=~rp,s&=~ys,r.suspendedLanes|=s,r.pingedLanes&=~s,f&&(r.warmLanes|=s),f=r.expirationTimes;for(var p=s;0<p;){var v=31-sn(p),k=1<<v;f[v]=-1,p&=~k}c!==0&&ns(r,c,s)}function vd(){return(ct&6)===0?(uc(0),!1):!0}function up(){if(Ze!==null){if(ut===0)var r=Ze.return;else r=Ze,xr=fs=null,xm(r),yo=null,ec=0,r=Ze;for(;r!==null;)NS(r.alternate,r),r=r.return;Ze=null}}function _o(r,s){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,oN(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),up(),bt=r,Ze=c=kr(r.current,null),it=s,ut=0,qn=null,pa=!1,Eo=Wi(r,s),ip=!1,Co=hi=rp=ys=ga=Ot=0,wn=lc=null,ap=!1,(s&8)!==0&&(s|=s&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=s;0<f;){var p=31-sn(f),v=1<<p;s|=r[p],f&=~v}return Lr=s,Bu(),c}function ZS(r,s){Ge=null,F.H=rd,s===$l||s===Yu?(s=g0(),ut=3):s===h0?(s=g0(),ut=4):ut=s===vS?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,qn=s,Ze===null&&(Ot=1,cd(r,li(s,r.current)))}function eT(){var r=F.H;return F.H=rd,r===null?rd:r}function tT(){var r=F.A;return F.A=FO,r}function dp(){Ot=4,pa||(it&4194048)!==it&&fi.current!==null||(Eo=!0),(ga&134217727)===0&&(ys&134217727)===0||bt===null||ba(bt,it,hi,!1)}function fp(r,s,c){var f=ct;ct|=2;var p=eT(),v=tT();(bt!==r||it!==s)&&(gd=null,_o(r,s)),s=!1;var k=Ot;e:do try{if(ut!==0&&Ze!==null){var A=Ze,j=qn;switch(ut){case 8:up(),k=6;break e;case 3:case 2:case 9:case 6:fi.current===null&&(s=!0);var Y=ut;if(ut=0,qn=null,xo(r,A,j,Y),c&&Eo){k=0;break e}break;default:Y=ut,ut=0,qn=null,xo(r,A,j,Y)}}qO(),k=Ot;break}catch(ae){ZS(r,ae)}while(!0);return s&&r.shellSuspendCounter++,xr=fs=null,ct=f,F.H=p,F.A=v,Ze===null&&(bt=null,it=0,Bu()),k}function qO(){for(;Ze!==null;)nT(Ze)}function $O(r,s){var c=ct;ct|=2;var f=eT(),p=tT();bt!==r||it!==s?(gd=null,pd=fn()+500,_o(r,s)):Eo=Wi(r,s);e:do try{if(ut!==0&&Ze!==null){s=Ze;var v=qn;t:switch(ut){case 1:ut=0,qn=null,xo(r,s,v,1);break;case 2:case 9:if(m0(v)){ut=0,qn=null,iT(s);break}s=function(){ut!==2&&ut!==9||bt!==r||(ut=7),tr(r)},v.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:m0(v)?(ut=0,qn=null,iT(s)):(ut=0,qn=null,xo(r,s,v,7));break;case 5:var k=null;switch(Ze.tag){case 26:k=Ze.memoizedState;case 5:case 27:var A=Ze;if(!k||UT(k)){ut=0,qn=null;var j=A.sibling;if(j!==null)Ze=j;else{var Y=A.return;Y!==null?(Ze=Y,yd(Y)):Ze=null}break t}}ut=0,qn=null,xo(r,s,v,5);break;case 6:ut=0,qn=null,xo(r,s,v,6);break;case 8:up(),Ot=6;break e;default:throw Error(i(462))}}GO();break}catch(ae){ZS(r,ae)}while(!0);return xr=fs=null,F.H=f,F.A=p,ct=c,Ze!==null?0:(bt=null,it=0,Bu(),Ot)}function GO(){for(;Ze!==null&&!_l();)nT(Ze)}function nT(r){var s=AS(r.alternate,r,Lr);r.memoizedProps=r.pendingProps,s===null?yd(r):Ze=s}function iT(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=CS(c,s,s.pendingProps,s.type,void 0,it);break;case 11:s=CS(c,s,s.pendingProps,s.type.render,s.ref,it);break;case 5:xm(s);default:NS(c,s),s=Ze=r0(s,Lr),s=AS(c,s,Lr)}r.memoizedProps=r.pendingProps,s===null?yd(r):Ze=s}function xo(r,s,c,f){xr=fs=null,xm(s),yo=null,ec=0;var p=s.return;try{if(LO(r,p,s,c,it)){Ot=1,cd(r,li(c,r.current)),Ze=null;return}}catch(v){if(p!==null)throw Ze=p,v;Ot=1,cd(r,li(c,r.current)),Ze=null;return}s.flags&32768?(ot||f===1?r=!0:Eo||(it&536870912)!==0?r=!1:(pa=r=!0,(f===2||f===9||f===3||f===6)&&(f=fi.current,f!==null&&f.tag===13&&(f.flags|=16384))),rT(s,r)):yd(s)}function yd(r){var s=r;do{if((s.flags&32768)!==0){rT(s,pa);return}r=s.return;var c=jO(s.alternate,s,Lr);if(c!==null){Ze=c;return}if(s=s.sibling,s!==null){Ze=s;return}Ze=s=r}while(s!==null);Ot===0&&(Ot=5)}function rT(r,s){do{var c=UO(r.alternate,r);if(c!==null){c.flags&=32767,Ze=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){Ze=r;return}Ze=r=c}while(r!==null);Ot=6,Ze=null}function aT(r,s,c,f,p,v,k,A,j){r.cancelPendingCommit=null;do bd();while(ln!==0);if((ct&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=nm,xu(r,c,v,k,A,j),r===bt&&(Ze=bt=null,it=0),ko=s,ya=r,wo=c,op=v,lp=p,WS=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,XO(Ei,function(){return uT(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=F.T,F.T=null,p=se.p,se.p=2,k=ct,ct|=4;try{BO(r,s,c)}finally{ct=k,se.p=p,F.T=f}}ln=1,sT(),oT(),lT()}}function sT(){if(ln===1){ln=0;var r=ya,s=ko,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=F.T,F.T=null;var f=se.p;se.p=2;var p=ct;ct|=4;try{VS(s,r);var v=kp,k=Yb(r.containerInfo),A=v.focusedElem,j=v.selectionRange;if(k!==A&&A&&A.ownerDocument&&Kb(A.ownerDocument.documentElement,A)){if(j!==null&&Qh(A)){var Y=j.start,ae=j.end;if(ae===void 0&&(ae=Y),"selectionStart"in A)A.selectionStart=Y,A.selectionEnd=Math.min(ae,A.value.length);else{var ce=A.ownerDocument||document,W=ce&&ce.defaultView||window;if(W.getSelection){var X=W.getSelection(),Be=A.textContent.length,je=Math.min(j.start,Be),mt=j.end===void 0?je:Math.min(j.end,Be);!X.extend&&je>mt&&(k=mt,mt=je,je=k);var H=Gb(A,je),V=Gb(A,mt);if(H&&V&&(X.rangeCount!==1||X.anchorNode!==H.node||X.anchorOffset!==H.offset||X.focusNode!==V.node||X.focusOffset!==V.offset)){var G=ce.createRange();G.setStart(H.node,H.offset),X.removeAllRanges(),je>mt?(X.addRange(G),X.extend(V.node,V.offset)):(G.setEnd(V.node,V.offset),X.addRange(G))}}}}for(ce=[],X=A;X=X.parentNode;)X.nodeType===1&&ce.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var oe=ce[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Nd=!!Cp,kp=Cp=null}finally{ct=p,se.p=f,F.T=c}}r.current=s,ln=2}}function oT(){if(ln===2){ln=0;var r=ya,s=ko,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=F.T,F.T=null;var f=se.p;se.p=2;var p=ct;ct|=4;try{US(r,s.alternate,s)}finally{ct=p,se.p=f,F.T=c}}ln=3}}function lT(){if(ln===4||ln===3){ln=0,Ys();var r=ya,s=ko,c=wo,f=WS;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ln=5:(ln=0,ko=ya=null,cT(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(va=null),Al(c),s=s.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(an,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=F.T,p=se.p,se.p=2,F.T=null;try{for(var v=r.onRecoverableError,k=0;k<f.length;k++){var A=f[k];v(A.value,{componentStack:A.stack})}}finally{F.T=s,se.p=p}}(wo&3)!==0&&bd(),tr(r),p=r.pendingLanes,(c&4194090)!==0&&(p&42)!==0?r===cp?cc++:(cc=0,cp=r):cc=0,uc(0)}}function cT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Hl(s)))}function bd(r){return sT(),oT(),lT(),uT()}function uT(){if(ln!==5)return!1;var r=ya,s=op;op=0;var c=Al(wo),f=F.T,p=se.p;try{se.p=32>c?32:c,F.T=null,c=lp,lp=null;var v=ya,k=wo;if(ln=0,ko=ya=null,wo=0,(ct&6)!==0)throw Error(i(331));var A=ct;if(ct|=4,KS(v.current),qS(v,v.current,k,c),ct=A,uc(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(an,v)}catch{}return!0}finally{se.p=p,F.T=f,cT(r,s)}}function dT(r,s,c){s=li(c,s),s=Fm(r.stateNode,s,2),r=la(r,s,2),r!==null&&(ts(r,2),tr(r))}function gt(r,s,c){if(r.tag===3)dT(r,r,c);else for(;s!==null;){if(s.tag===3){dT(s,r,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(va===null||!va.has(f))){r=li(c,r),c=pS(2),f=la(s,c,2),f!==null&&(gS(c,f,s,r),ts(f,2),tr(f));break}}s=s.return}}function hp(r,s,c){var f=r.pingCache;if(f===null){f=r.pingCache=new VO;var p=new Set;f.set(s,p)}else p=f.get(s),p===void 0&&(p=new Set,f.set(s,p));p.has(c)||(ip=!0,p.add(c),r=KO.bind(null,r,s,c),s.then(r,r))}function KO(r,s,c){var f=r.pingCache;f!==null&&f.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,bt===r&&(it&c)===c&&(Ot===4||Ot===3&&(it&62914560)===it&&300>fn()-sp?(ct&2)===0&&_o(r,0):rp|=c,Co===it&&(Co=0)),tr(r)}function fT(r,s){s===0&&(s=_u()),r=oo(r,s),r!==null&&(ts(r,s),tr(r))}function YO(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),fT(r,c)}function WO(r,s){var c=0;switch(r.tag){case 13:var f=r.stateNode,p=r.memoizedState;p!==null&&(c=p.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(s),fT(r,c)}function XO(r,s){return Zr(r,s)}var Sd=null,Ro=null,mp=!1,Td=!1,pp=!1,bs=0;function tr(r){r!==Ro&&r.next===null&&(Ro===null?Sd=Ro=r:Ro=Ro.next=r),Td=!0,mp||(mp=!0,JO())}function uc(r,s){if(!pp&&Td){pp=!0;do for(var c=!1,f=Sd;f!==null;){if(r!==0){var p=f.pendingLanes;if(p===0)var v=0;else{var k=f.suspendedLanes,A=f.pingedLanes;v=(1<<31-sn(42|r)+1)-1,v&=p&~(k&~A),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,gT(f,v))}else v=it,v=es(f,f===bt?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||Wi(f,v)||(c=!0,gT(f,v));f=f.next}while(c);pp=!1}}function QO(){hT()}function hT(){Td=mp=!1;var r=0;bs!==0&&(sN()&&(r=bs),bs=0);for(var s=fn(),c=null,f=Sd;f!==null;){var p=f.next,v=mT(f,s);v===0?(f.next=null,c===null?Sd=p:c.next=p,p===null&&(Ro=c)):(c=f,(r!==0||(v&3)!==0)&&(Td=!0)),f=p}uc(r)}function mT(r,s){for(var c=r.suspendedLanes,f=r.pingedLanes,p=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var k=31-sn(v),A=1<<k,j=p[k];j===-1?((A&c)===0||(A&f)!==0)&&(p[k]=wu(A,s)):j<=s&&(r.expiredLanes|=A),v&=~A}if(s=bt,c=it,c=es(r,r===s?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,c===0||r===s&&(ut===2||ut===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&Un(f),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Wi(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(f!==null&&Un(f),Al(c)){case 2:case 8:c=ii;break;case 32:c=Ei;break;case 268435456:c=Ci;break;default:c=Ei}return f=pT.bind(null,r),c=Zr(c,f),r.callbackPriority=s,r.callbackNode=c,s}return f!==null&&f!==null&&Un(f),r.callbackPriority=2,r.callbackNode=null,2}function pT(r,s){if(ln!==0&&ln!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(bd()&&r.callbackNode!==c)return null;var f=it;return f=es(r,r===bt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(QS(r,f,s),mT(r,fn()),r.callbackNode!=null&&r.callbackNode===c?pT.bind(null,r):null)}function gT(r,s){if(bd())return null;QS(r,s,!0)}function JO(){lN(function(){(ct&6)!==0?Zr(Ws,QO):hT()})}function gp(){return bs===0&&(bs=Xs()),bs}function vT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Du(""+r)}function yT(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function ZO(r,s,c,f,p){if(s==="submit"&&c&&c.stateNode===p){var v=vT((p[pe]||null).action),k=f.submitter;k&&(s=(s=k[pe]||null)?vT(s.formAction):k.getAttribute("formAction"),s!==null&&(v=s,k=null));var A=new Iu("action","action",null,f,p);r.push({event:A,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(bs!==0){var j=k?yT(p,k):new FormData(p);Im(c,{pending:!0,data:j,method:p.method,action:v},null,j)}}else typeof v=="function"&&(A.preventDefault(),j=k?yT(p,k):new FormData(p),Im(c,{pending:!0,data:j,method:p.method,action:v},v,j))},currentTarget:p}]})}}for(var vp=0;vp<tm.length;vp++){var yp=tm[vp],eN=yp.toLowerCase(),tN=yp[0].toUpperCase()+yp.slice(1);ki(eN,"on"+tN)}ki(Qb,"onAnimationEnd"),ki(Jb,"onAnimationIteration"),ki(Zb,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(yO,"onTransitionRun"),ki(bO,"onTransitionStart"),ki(SO,"onTransitionCancel"),ki(e0,"onTransitionEnd"),gn("onMouseEnter",["mouseout","mouseover"]),gn("onMouseLeave",["mouseout","mouseover"]),gn("onPointerEnter",["pointerout","pointerover"]),gn("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dc));function bT(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var f=r[c],p=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var k=f.length-1;0<=k;k--){var A=f[k],j=A.instance,Y=A.currentTarget;if(A=A.listener,j!==v&&p.isPropagationStopped())break e;v=A,p.currentTarget=Y;try{v(p)}catch(ae){ld(ae)}p.currentTarget=null,v=j}else for(k=0;k<f.length;k++){if(A=f[k],j=A.instance,Y=A.currentTarget,A=A.listener,j!==v&&p.isPropagationStopped())break e;v=A,p.currentTarget=Y;try{v(p)}catch(ae){ld(ae)}p.currentTarget=null,v=j}}}}function et(r,s){var c=s[De];c===void 0&&(c=s[De]=new Set);var f=r+"__bubble";c.has(f)||(ST(s,r,2,!1),c.add(f))}function bp(r,s,c){var f=0;s&&(f|=4),ST(c,r,f,s)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function Sp(r){if(!r[Ed]){r[Ed]=!0,dt.forEach(function(c){c!=="selectionchange"&&(nN.has(c)||bp(c,!1,r),bp(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ed]||(s[Ed]=!0,bp("selectionchange",!1,s))}}function ST(r,s,c,f){switch(qT(s)){case 2:var p=AN;break;case 8:p=ON;break;default:p=Mp}c=p.bind(null,s,c,r),p=void 0,!Vh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),f?p!==void 0?r.addEventListener(s,c,{capture:!0,passive:p}):r.addEventListener(s,c,!0):p!==void 0?r.addEventListener(s,c,{passive:p}):r.addEventListener(s,c,!1)}function Tp(r,s,c,f,p){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var A=f.stateNode.containerInfo;if(A===p)break;if(k===4)for(k=f.return;k!==null;){var j=k.tag;if((j===3||j===4)&&k.stateNode.containerInfo===p)return;k=k.return}for(;A!==null;){if(k=$e(A),k===null)return;if(j=k.tag,j===5||j===6||j===26||j===27){f=v=k;continue e}A=A.parentNode}}f=f.return}xb(function(){var Y=v,ae=zh(c),ce=[];e:{var W=t0.get(r);if(W!==void 0){var X=Iu,Be=r;switch(r){case"keypress":if(Mu(c)===0)break e;case"keydown":case"keyup":X=XA;break;case"focusin":Be="focus",X=Gh;break;case"focusout":Be="blur",X=Gh;break;case"beforeblur":case"afterblur":X=Gh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=UA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=ZA;break;case Qb:case Jb:case Zb:X=FA;break;case e0:X=tO;break;case"scroll":case"scrollend":X=IA;break;case"wheel":X=iO;break;case"copy":case"cut":case"paste":X=HA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Db;break;case"toggle":case"beforetoggle":X=aO}var je=(s&4)!==0,mt=!je&&(r==="scroll"||r==="scrollend"),H=je?W!==null?W+"Capture":null:W;je=[];for(var V=Y,G;V!==null;){var oe=V;if(G=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||G===null||H===null||(oe=Ol(V,H),oe!=null&&je.push(fc(V,oe,G))),mt)break;V=V.return}0<je.length&&(W=new X(W,Be,null,c,ae),ce.push({event:W,listeners:je}))}}if((s&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",X=r==="mouseout"||r==="pointerout",W&&c!==Bh&&(Be=c.relatedTarget||c.fromElement)&&($e(Be)||Be[_e]))break e;if((X||W)&&(W=ae.window===ae?ae:(W=ae.ownerDocument)?W.defaultView||W.parentWindow:window,X?(Be=c.relatedTarget||c.toElement,X=Y,Be=Be?$e(Be):null,Be!==null&&(mt=o(Be),je=Be.tag,Be!==mt||je!==5&&je!==27&&je!==6)&&(Be=null)):(X=null,Be=Y),X!==Be)){if(je=Ob,oe="onMouseLeave",H="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(je=Db,oe="onPointerLeave",H="onPointerEnter",V="pointer"),mt=X==null?W:Ct(X),G=Be==null?W:Ct(Be),W=new je(oe,V+"leave",X,c,ae),W.target=mt,W.relatedTarget=G,oe=null,$e(ae)===Y&&(je=new je(H,V+"enter",Be,c,ae),je.target=G,je.relatedTarget=mt,oe=je),mt=oe,X&&Be)t:{for(je=X,H=Be,V=0,G=je;G;G=Ao(G))V++;for(G=0,oe=H;oe;oe=Ao(oe))G++;for(;0<V-G;)je=Ao(je),V--;for(;0<G-V;)H=Ao(H),G--;for(;V--;){if(je===H||H!==null&&je===H.alternate)break t;je=Ao(je),H=Ao(H)}je=null}else je=null;X!==null&&TT(ce,W,X,je,!1),Be!==null&&mt!==null&&TT(ce,mt,Be,je,!0)}}e:{if(W=Y?Ct(Y):window,X=W.nodeName&&W.nodeName.toLowerCase(),X==="select"||X==="input"&&W.type==="file")var Ee=zb;else if(Ub(W))if(Fb)Ee=pO;else{Ee=hO;var Xe=fO}else X=W.nodeName,!X||X.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Uh(Y.elementType)&&(Ee=zb):Ee=mO;if(Ee&&(Ee=Ee(r,Y))){Bb(ce,Ee,c,ae);break e}Xe&&Xe(r,W,Y),r==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&jh(W,"number",W.value)}switch(Xe=Y?Ct(Y):window,r){case"focusin":(Ub(Xe)||Xe.contentEditable==="true")&&(ro=Xe,Jh=Y,Ul=null);break;case"focusout":Ul=Jh=ro=null;break;case"mousedown":Zh=!0;break;case"contextmenu":case"mouseup":case"dragend":Zh=!1,Wb(ce,c,ae);break;case"selectionchange":if(vO)break;case"keydown":case"keyup":Wb(ce,c,ae)}var Pe;if(Yh)e:{switch(r){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else io?Ib(r,c)&&(Ue="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ue="onCompositionStart");Ue&&(Pb&&c.locale!=="ko"&&(io||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&io&&(Pe=Rb()):(ra=ae,Hh="value"in ra?ra.value:ra.textContent,io=!0)),Xe=Cd(Y,Ue),0<Xe.length&&(Ue=new Nb(Ue,r,null,c,ae),ce.push({event:Ue,listeners:Xe}),Pe?Ue.data=Pe:(Pe=jb(c),Pe!==null&&(Ue.data=Pe)))),(Pe=oO?lO(r,c):cO(r,c))&&(Ue=Cd(Y,"onBeforeInput"),0<Ue.length&&(Xe=new Nb("onBeforeInput","beforeinput",null,c,ae),ce.push({event:Xe,listeners:Ue}),Xe.data=Pe)),ZO(ce,r,Y,c,ae)}bT(ce,s)})}function fc(r,s,c){return{instance:r,listener:s,currentTarget:c}}function Cd(r,s){for(var c=s+"Capture",f=[];r!==null;){var p=r,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=Ol(r,c),p!=null&&f.unshift(fc(r,p,v)),p=Ol(r,s),p!=null&&f.push(fc(r,p,v))),r.tag===3)return f;r=r.return}return[]}function Ao(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function TT(r,s,c,f,p){for(var v=s._reactName,k=[];c!==null&&c!==f;){var A=c,j=A.alternate,Y=A.stateNode;if(A=A.tag,j!==null&&j===f)break;A!==5&&A!==26&&A!==27||Y===null||(j=Y,p?(Y=Ol(c,v),Y!=null&&k.unshift(fc(c,Y,j))):p||(Y=Ol(c,v),Y!=null&&k.push(fc(c,Y,j)))),c=c.return}k.length!==0&&r.push({event:s,listeners:k})}var iN=/\r\n?/g,rN=/\u0000|\uFFFD/g;function ET(r){return(typeof r=="string"?r:""+r).replace(iN,`
`).replace(rN,"")}function CT(r,s){return s=ET(s),ET(r)===s}function kd(){}function ht(r,s,c,f,p,v){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||eo(r,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&eo(r,""+f);break;case"className":Tr(r,"class",f);break;case"tabIndex":Tr(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(r,c,f);break;case"style":wb(r,f,v);break;case"data":if(s!=="object"){Tr(r,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(c);break}f=Du(""+f),r.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(s!=="input"&&ht(r,s,"name",p.name,p,null),ht(r,s,"formEncType",p.formEncType,p,null),ht(r,s,"formMethod",p.formMethod,p,null),ht(r,s,"formTarget",p.formTarget,p,null)):(ht(r,s,"encType",p.encType,p,null),ht(r,s,"method",p.method,p,null),ht(r,s,"target",p.target,p,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(c);break}f=Du(""+f),r.setAttribute(c,f);break;case"onClick":f!=null&&(r.onclick=kd);break;case"onScroll":f!=null&&et("scroll",r);break;case"onScrollEnd":f!=null&&et("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(c=f.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}c=Du(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(c,""+f):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":f===!0?r.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(c,f):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(c,f):r.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(c):r.setAttribute(c,f);break;case"popover":et("beforetoggle",r),et("toggle",r),Sr(r,"popover",f);break;case"xlinkActuate":Ve(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ve(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ve(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ve(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ve(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ve(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ve(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ve(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ve(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Sr(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=MA.get(c)||c,Sr(r,c,f))}}function Ep(r,s,c,f,p,v){switch(c){case"style":wb(r,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(c=f.__html,c!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof f=="string"?eo(r,f):(typeof f=="number"||typeof f=="bigint")&&eo(r,""+f);break;case"onScroll":f!=null&&et("scroll",r);break;case"onScrollEnd":f!=null&&et("scrollend",r);break;case"onClick":f!=null&&(r.onclick=kd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xi.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),s=c.slice(2,p?c.length-7:void 0),v=r[pe]||null,v=v!=null?v[c]:null,typeof v=="function"&&r.removeEventListener(s,v,p),typeof f=="function")){typeof v!="function"&&v!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,f,p);break e}c in r?r[c]=f:f===!0?r.setAttribute(c,""):Sr(r,c,f)}}}function cn(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",r),et("load",r);var f=!1,p=!1,v;for(v in c)if(c.hasOwnProperty(v)){var k=c[v];if(k!=null)switch(v){case"src":f=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ht(r,s,v,k,c,null)}}p&&ht(r,s,"srcSet",c.srcSet,c,null),f&&ht(r,s,"src",c.src,c,null);return;case"input":et("invalid",r);var A=v=k=p=null,j=null,Y=null;for(f in c)if(c.hasOwnProperty(f)){var ae=c[f];if(ae!=null)switch(f){case"name":p=ae;break;case"type":k=ae;break;case"checked":j=ae;break;case"defaultChecked":Y=ae;break;case"value":v=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,s));break;default:ht(r,s,f,ae,c,null)}}Tb(r,v,A,j,Y,k,p,!1),Ou(r);return;case"select":et("invalid",r),f=k=v=null;for(p in c)if(c.hasOwnProperty(p)&&(A=c[p],A!=null))switch(p){case"value":v=A;break;case"defaultValue":k=A;break;case"multiple":f=A;default:ht(r,s,p,A,c,null)}s=v,c=k,r.multiple=!!f,s!=null?Zs(r,!!f,s,!1):c!=null&&Zs(r,!!f,c,!0);return;case"textarea":et("invalid",r),v=p=f=null;for(k in c)if(c.hasOwnProperty(k)&&(A=c[k],A!=null))switch(k){case"value":f=A;break;case"defaultValue":p=A;break;case"children":v=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:ht(r,s,k,A,c,null)}Cb(r,f,p,v),Ou(r);return;case"option":for(j in c)if(c.hasOwnProperty(j)&&(f=c[j],f!=null))switch(j){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ht(r,s,j,f,c,null)}return;case"dialog":et("beforetoggle",r),et("toggle",r),et("cancel",r),et("close",r);break;case"iframe":case"object":et("load",r);break;case"video":case"audio":for(f=0;f<dc.length;f++)et(dc[f],r);break;case"image":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"embed":case"source":case"link":et("error",r),et("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(f=c[Y],f!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ht(r,s,Y,f,c,null)}return;default:if(Uh(s)){for(ae in c)c.hasOwnProperty(ae)&&(f=c[ae],f!==void 0&&Ep(r,s,ae,f,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(f=c[A],f!=null&&ht(r,s,A,f,c,null))}function aN(r,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,k=null,A=null,j=null,Y=null,ae=null;for(X in c){var ce=c[X];if(c.hasOwnProperty(X)&&ce!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":j=ce;default:f.hasOwnProperty(X)||ht(r,s,X,null,f,ce)}}for(var W in f){var X=f[W];if(ce=c[W],f.hasOwnProperty(W)&&(X!=null||ce!=null))switch(W){case"type":v=X;break;case"name":p=X;break;case"checked":Y=X;break;case"defaultChecked":ae=X;break;case"value":k=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==ce&&ht(r,s,W,X,f,ce)}}Ih(r,k,A,j,Y,ae,v,p);return;case"select":X=k=A=W=null;for(v in c)if(j=c[v],c.hasOwnProperty(v)&&j!=null)switch(v){case"value":break;case"multiple":X=j;default:f.hasOwnProperty(v)||ht(r,s,v,null,f,j)}for(p in f)if(v=f[p],j=c[p],f.hasOwnProperty(p)&&(v!=null||j!=null))switch(p){case"value":W=v;break;case"defaultValue":A=v;break;case"multiple":k=v;default:v!==j&&ht(r,s,p,v,f,j)}s=A,c=k,f=X,W!=null?Zs(r,!!c,W,!1):!!f!=!!c&&(s!=null?Zs(r,!!c,s,!0):Zs(r,!!c,c?[]:"",!1));return;case"textarea":X=W=null;for(A in c)if(p=c[A],c.hasOwnProperty(A)&&p!=null&&!f.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ht(r,s,A,null,f,p)}for(k in f)if(p=f[k],v=c[k],f.hasOwnProperty(k)&&(p!=null||v!=null))switch(k){case"value":W=p;break;case"defaultValue":X=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==v&&ht(r,s,k,p,f,v)}Eb(r,W,X);return;case"option":for(var Be in c)if(W=c[Be],c.hasOwnProperty(Be)&&W!=null&&!f.hasOwnProperty(Be))switch(Be){case"selected":r.selected=!1;break;default:ht(r,s,Be,null,f,W)}for(j in f)if(W=f[j],X=c[j],f.hasOwnProperty(j)&&W!==X&&(W!=null||X!=null))switch(j){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ht(r,s,j,W,f,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in c)W=c[je],c.hasOwnProperty(je)&&W!=null&&!f.hasOwnProperty(je)&&ht(r,s,je,null,f,W);for(Y in f)if(W=f[Y],X=c[Y],f.hasOwnProperty(Y)&&W!==X&&(W!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:ht(r,s,Y,W,f,X)}return;default:if(Uh(s)){for(var mt in c)W=c[mt],c.hasOwnProperty(mt)&&W!==void 0&&!f.hasOwnProperty(mt)&&Ep(r,s,mt,void 0,f,W);for(ae in f)W=f[ae],X=c[ae],!f.hasOwnProperty(ae)||W===X||W===void 0&&X===void 0||Ep(r,s,ae,W,f,X);return}}for(var H in c)W=c[H],c.hasOwnProperty(H)&&W!=null&&!f.hasOwnProperty(H)&&ht(r,s,H,null,f,W);for(ce in f)W=f[ce],X=c[ce],!f.hasOwnProperty(ce)||W===X||W==null&&X==null||ht(r,s,ce,W,f,X)}var Cp=null,kp=null;function wd(r){return r.nodeType===9?r:r.ownerDocument}function kT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function wp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _p=null;function sN(){var r=window.event;return r&&r.type==="popstate"?r===_p?!1:(_p=r,!0):(_p=null,!1)}var _T=typeof setTimeout=="function"?setTimeout:void 0,oN=typeof clearTimeout=="function"?clearTimeout:void 0,xT=typeof Promise=="function"?Promise:void 0,lN=typeof queueMicrotask=="function"?queueMicrotask:typeof xT<"u"?function(r){return xT.resolve(null).then(r).catch(cN)}:_T;function cN(r){setTimeout(function(){throw r})}function Sa(r){return r==="head"}function RT(r,s){var c=s,f=0,p=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<f&&8>f){c=f;var k=r.ownerDocument;if(c&1&&hc(k.documentElement),c&2&&hc(k.body),c&4)for(c=k.head,hc(c),k=c.firstChild;k;){var A=k.nextSibling,j=k.nodeName;k[Re]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&k.rel.toLowerCase()==="stylesheet"||c.removeChild(k),k=A}}if(p===0){r.removeChild(v),Tc(s);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:f=c.charCodeAt(0)-48;else f=0;c=v}while(c);Tc(s)}function xp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":xp(c),Ae(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function uN(r,s,c,f){for(;r.nodeType===1;){var p=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Re])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=_i(r.nextSibling),r===null)break}return null}function dN(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=_i(r.nextSibling),r===null))return null;return r}function Rp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function fN(r,s){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function _i(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Ap=null;function AT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return r;s--}else c==="/$"&&s++}r=r.previousSibling}return null}function OT(r,s,c){switch(s=wd(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function hc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ae(r)}var mi=new Map,NT=new Set;function _d(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ir=se.d;se.d={f:hN,r:mN,D:pN,C:gN,L:vN,m:yN,X:SN,S:bN,M:TN};function hN(){var r=Ir.f(),s=vd();return r||s}function mN(r){var s=st(r);s!==null&&s.tag===5&&s.type==="form"?Q0(s):Ir.r(r)}var Oo=typeof document>"u"?null:document;function DT(r,s,c){var f=Oo;if(f&&typeof s=="string"&&s){var p=oi(s);p='link[rel="'+r+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),NT.has(p)||(NT.add(p),r={rel:r,crossOrigin:c,href:s},f.querySelector(p)===null&&(s=f.createElement("link"),cn(s,"link",r),Fe(s),f.head.appendChild(s)))}}function pN(r){Ir.D(r),DT("dns-prefetch",r,null)}function gN(r,s){Ir.C(r,s),DT("preconnect",r,s)}function vN(r,s,c){Ir.L(r,s,c);var f=Oo;if(f&&r&&s){var p='link[rel="preload"][as="'+oi(s)+'"]';s==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+oi(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+oi(c.imageSizes)+'"]')):p+='[href="'+oi(r)+'"]';var v=p;switch(s){case"style":v=No(r);break;case"script":v=Do(r)}mi.has(v)||(r=m({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),mi.set(v,r),f.querySelector(p)!==null||s==="style"&&f.querySelector(mc(v))||s==="script"&&f.querySelector(pc(v))||(s=f.createElement("link"),cn(s,"link",r),Fe(s),f.head.appendChild(s)))}}function yN(r,s){Ir.m(r,s);var c=Oo;if(c&&r){var f=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+oi(f)+'"][href="'+oi(r)+'"]',v=p;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Do(r)}if(!mi.has(v)&&(r=m({rel:"modulepreload",href:r},s),mi.set(v,r),c.querySelector(p)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(pc(v)))return}f=c.createElement("link"),cn(f,"link",r),Fe(f),c.head.appendChild(f)}}}function bN(r,s,c){Ir.S(r,s,c);var f=Oo;if(f&&r){var p=Rt(f).hoistableStyles,v=No(r);s=s||"default";var k=p.get(v);if(!k){var A={loading:0,preload:null};if(k=f.querySelector(mc(v)))A.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":s},c),(c=mi.get(v))&&Op(r,c);var j=k=f.createElement("link");Fe(j),cn(j,"link",r),j._p=new Promise(function(Y,ae){j.onload=Y,j.onerror=ae}),j.addEventListener("load",function(){A.loading|=1}),j.addEventListener("error",function(){A.loading|=2}),A.loading|=4,xd(k,s,f)}k={type:"stylesheet",instance:k,count:1,state:A},p.set(v,k)}}}function SN(r,s){Ir.X(r,s);var c=Oo;if(c&&r){var f=Rt(c).hoistableScripts,p=Do(r),v=f.get(p);v||(v=c.querySelector(pc(p)),v||(r=m({src:r,async:!0},s),(s=mi.get(p))&&Np(r,s),v=c.createElement("script"),Fe(v),cn(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(p,v))}}function TN(r,s){Ir.M(r,s);var c=Oo;if(c&&r){var f=Rt(c).hoistableScripts,p=Do(r),v=f.get(p);v||(v=c.querySelector(pc(p)),v||(r=m({src:r,async:!0,type:"module"},s),(s=mi.get(p))&&Np(r,s),v=c.createElement("script"),Fe(v),cn(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(p,v))}}function PT(r,s,c,f){var p=(p=Te.current)?_d(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=No(c.href),c=Rt(p).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=No(c.href);var v=Rt(p).hoistableStyles,k=v.get(r);if(k||(p=p.ownerDocument||p,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,k),(v=p.querySelector(mc(r)))&&!v._p&&(k.instance=v,k.state.loading=5),mi.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},mi.set(r,c),v||EN(p,r,c,k.state))),s&&f===null)throw Error(i(528,""));return k}if(s&&f!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Do(c),c=Rt(p).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function No(r){return'href="'+oi(r)+'"'}function mc(r){return'link[rel="stylesheet"]['+r+"]"}function MT(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function EN(r,s,c,f){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=r.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),cn(s,"link",c),Fe(s),r.head.appendChild(s))}function Do(r){return'[src="'+oi(r)+'"]'}function pc(r){return"script[async]"+r}function LT(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=r.querySelector('style[data-href~="'+oi(c.href)+'"]');if(f)return s.instance=f,Fe(f),f;var p=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Fe(f),cn(f,"style",p),xd(f,c.precedence,r),s.instance=f;case"stylesheet":p=No(c.href);var v=r.querySelector(mc(p));if(v)return s.state.loading|=4,s.instance=v,Fe(v),v;f=MT(c),(p=mi.get(p))&&Op(f,p),v=(r.ownerDocument||r).createElement("link"),Fe(v);var k=v;return k._p=new Promise(function(A,j){k.onload=A,k.onerror=j}),cn(v,"link",f),s.state.loading|=4,xd(v,c.precedence,r),s.instance=v;case"script":return v=Do(c.src),(p=r.querySelector(pc(v)))?(s.instance=p,Fe(p),p):(f=c,(p=mi.get(v))&&(f=m({},c),Np(f,p)),r=r.ownerDocument||r,p=r.createElement("script"),Fe(p),cn(p,"link",f),r.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,xd(f,c.precedence,r));return s.instance}function xd(r,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=f.length?f[f.length-1]:null,v=p,k=0;k<f.length;k++){var A=f[k];if(A.dataset.precedence===s)v=A;else if(v!==p)break}v?v.parentNode.insertBefore(r,v.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function Op(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Np(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Rd=null;function IT(r,s,c){if(Rd===null){var f=new Map,p=Rd=new Map;p.set(c,f)}else p=Rd,f=p.get(c),f||(f=new Map,p.set(c,f));if(f.has(r))return f;for(f.set(r,null),c=c.getElementsByTagName(r),p=0;p<c.length;p++){var v=c[p];if(!(v[Re]||v[ue]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var k=v.getAttribute(s)||"";k=r+k;var A=f.get(k);A?A.push(v):f.set(k,[v])}}return f}function jT(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function CN(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function UT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var gc=null;function kN(){}function wN(r,s,c){if(gc===null)throw Error(i(475));var f=gc;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=No(c.href),v=r.querySelector(mc(p));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(f.count++,f=Ad.bind(f),r.then(f,f)),s.state.loading|=4,s.instance=v,Fe(v);return}v=r.ownerDocument||r,c=MT(c),(p=mi.get(p))&&Op(c,p),v=v.createElement("link"),Fe(v);var k=v;k._p=new Promise(function(A,j){k.onload=A,k.onerror=j}),cn(v,"link",c),s.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(f.count++,s=Ad.bind(f),r.addEventListener("load",s),r.addEventListener("error",s))}}function _N(){if(gc===null)throw Error(i(475));var r=gc;return r.stylesheets&&r.count===0&&Dp(r,r.stylesheets),0<r.count?function(s){var c=setTimeout(function(){if(r.stylesheets&&Dp(r,r.stylesheets),r.unsuspend){var f=r.unsuspend;r.unsuspend=null,f()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(c)}}:null}function Ad(){if(this.count--,this.count===0){if(this.stylesheets)Dp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Od=null;function Dp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Od=new Map,s.forEach(xN,r),Od=null,Ad.call(r))}function xN(r,s){if(!(s.state.loading&4)){var c=Od.get(r);if(c)var f=c.get(null);else{c=new Map,Od.set(r,c);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var k=p[v];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),f=k)}f&&c.set(null,f)}p=s.instance,k=p.getAttribute("data-precedence"),v=c.get(k)||f,v===f&&c.set(null,p),c.set(k,p),this.count++,f=Ad.bind(this),p.addEventListener("load",f),p.addEventListener("error",f),v?v.parentNode.insertBefore(p,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),s.state.loading|=4}}var vc={$$typeof:D,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function RN(r,s,c,f,p,v,k,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qs(0),this.hiddenUpdates=Qs(null),this.identifierPrefix=f,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function BT(r,s,c,f,p,v,k,A,j,Y,ae,ce){return r=new RN(r,s,c,k,A,j,Y,ce),s=1,v===!0&&(s|=24),v=Fn(3,null,null,s),r.current=v,v.stateNode=r,s=hm(),s.refCount++,r.pooledCache=s,s.refCount++,v.memoizedState={element:f,isDehydrated:c,cache:s},vm(v),r}function zT(r){return r?(r=lo,r):lo}function FT(r,s,c,f,p,v){p=zT(p),f.context===null?f.context=p:f.pendingContext=p,f=oa(s),f.payload={element:c},v=v===void 0?null:v,v!==null&&(f.callback=v),c=la(r,f,s),c!==null&&(Gn(c,r,s),Kl(c,r,s))}function VT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function Pp(r,s){VT(r,s),(r=r.alternate)&&VT(r,s)}function HT(r){if(r.tag===13){var s=oo(r,67108864);s!==null&&Gn(s,r,67108864),Pp(r,67108864)}}var Nd=!0;function AN(r,s,c,f){var p=F.T;F.T=null;var v=se.p;try{se.p=2,Mp(r,s,c,f)}finally{se.p=v,F.T=p}}function ON(r,s,c,f){var p=F.T;F.T=null;var v=se.p;try{se.p=8,Mp(r,s,c,f)}finally{se.p=v,F.T=p}}function Mp(r,s,c,f){if(Nd){var p=Lp(f);if(p===null)Tp(r,s,f,Dd,c),$T(r,f);else if(DN(p,r,s,c,f))f.stopPropagation();else if($T(r,f),s&4&&-1<NN.indexOf(r)){for(;p!==null;){var v=st(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var k=yr(v.pendingLanes);if(k!==0){var A=v;for(A.pendingLanes|=2,A.entangledLanes|=2;k;){var j=1<<31-sn(k);A.entanglements[1]|=j,k&=~j}tr(v),(ct&6)===0&&(pd=fn()+500,uc(0))}}break;case 13:A=oo(v,2),A!==null&&Gn(A,v,2),vd(),Pp(v,2)}if(v=Lp(f),v===null&&Tp(r,s,f,Dd,c),v===p)break;p=v}p!==null&&f.stopPropagation()}else Tp(r,s,f,null,c)}}function Lp(r){return r=zh(r),Ip(r)}var Dd=null;function Ip(r){if(Dd=null,r=$e(r),r!==null){var s=o(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=l(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Dd=r,null}function qT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xl()){case Ws:return 2;case ii:return 8;case Ei:case ri:return 32;case Ci:return 268435456;default:return 32}default:return 32}}var jp=!1,Ta=null,Ea=null,Ca=null,yc=new Map,bc=new Map,ka=[],NN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $T(r,s){switch(r){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":yc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(s.pointerId)}}function Sc(r,s,c,f,p,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:v,targetContainers:[p]},s!==null&&(s=st(s),s!==null&&HT(s)),r):(r.eventSystemFlags|=f,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function DN(r,s,c,f,p){switch(s){case"focusin":return Ta=Sc(Ta,r,s,c,f,p),!0;case"dragenter":return Ea=Sc(Ea,r,s,c,f,p),!0;case"mouseover":return Ca=Sc(Ca,r,s,c,f,p),!0;case"pointerover":var v=p.pointerId;return yc.set(v,Sc(yc.get(v)||null,r,s,c,f,p)),!0;case"gotpointercapture":return v=p.pointerId,bc.set(v,Sc(bc.get(v)||null,r,s,c,f,p)),!0}return!1}function GT(r){var s=$e(r.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=l(c),s!==null){r.blockedOn=s,$(r.priority,function(){if(c.tag===13){var f=$n();f=Rl(f);var p=oo(c,f);p!==null&&Gn(p,c,f),Pp(c,f)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Pd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=Lp(r.nativeEvent);if(c===null){c=r.nativeEvent;var f=new c.constructor(c.type,c);Bh=f,c.target.dispatchEvent(f),Bh=null}else return s=st(c),s!==null&&HT(s),r.blockedOn=c,!1;s.shift()}return!0}function KT(r,s,c){Pd(r)&&c.delete(s)}function PN(){jp=!1,Ta!==null&&Pd(Ta)&&(Ta=null),Ea!==null&&Pd(Ea)&&(Ea=null),Ca!==null&&Pd(Ca)&&(Ca=null),yc.forEach(KT),bc.forEach(KT)}function Md(r,s){r.blockedOn===s&&(r.blockedOn=null,jp||(jp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PN)))}var Ld=null;function YT(r){Ld!==r&&(Ld=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ld===r&&(Ld=null);for(var s=0;s<r.length;s+=3){var c=r[s],f=r[s+1],p=r[s+2];if(typeof f!="function"){if(Ip(f||c)===null)continue;break}var v=st(c);v!==null&&(r.splice(s,3),s-=3,Im(v,{pending:!0,data:p,method:c.method,action:f},f,p))}}))}function Tc(r){function s(j){return Md(j,r)}Ta!==null&&Md(Ta,r),Ea!==null&&Md(Ea,r),Ca!==null&&Md(Ca,r),yc.forEach(s),bc.forEach(s);for(var c=0;c<ka.length;c++){var f=ka[c];f.blockedOn===r&&(f.blockedOn=null)}for(;0<ka.length&&(c=ka[0],c.blockedOn===null);)GT(c),c.blockedOn===null&&ka.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var p=c[f],v=c[f+1],k=p[pe]||null;if(typeof v=="function")k||YT(c);else if(k){var A=null;if(v&&v.hasAttribute("formAction")){if(p=v,k=v[pe]||null)A=k.formAction;else if(Ip(p)!==null)continue}else A=k.action;typeof A=="function"?c[f+1]=A:(c.splice(f,3),f-=3),YT(c)}}}function Up(r){this._internalRoot=r}Id.prototype.render=Up.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,f=$n();FT(c,f,r,s,null,null)},Id.prototype.unmount=Up.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;FT(r.current,2,null,r,null,null),vd(),s[_e]=null}};function Id(r){this._internalRoot=r}Id.prototype.unstable_scheduleHydration=function(r){if(r){var s=U();r={blockedOn:null,target:r,priority:s};for(var c=0;c<ka.length&&s!==0&&s<ka[c].priority;c++);ka.splice(c,0,r),c===0&&GT(r)}};var WT=e.version;if(WT!=="19.1.0")throw Error(i(527,WT,"19.1.0"));se.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(s),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var MN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{an=jd.inject(MN),yt=jd}catch{}}return Cc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var c=!1,f="",p=dS,v=fS,k=hS,A=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(k=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=BT(r,1,!1,null,null,c,f,p,v,k,A,null),r[_e]=s.current,Sp(r),new Up(s)},Cc.hydrateRoot=function(r,s,c){if(!a(r))throw Error(i(299));var f=!1,p="",v=dS,k=fS,A=hS,j=null,Y=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks),c.formState!==void 0&&(Y=c.formState)),s=BT(r,1,!0,s,c??null,f,p,v,k,A,j,Y),s.context=zT(null),c=s.current,f=$n(),f=Rl(f),p=oa(f),p.callback=null,la(c,p,f),c=f,s.current.lanes=c,ts(s,c),tr(s),r[_e]=s.current,Sp(r),new Id(s)},Cc.version="19.1.0",Cc}var aE;function qN(){if(aE)return Fp.exports;aE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fp.exports=HN(),Fp.exports}var $N=qN();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ew=t=>{throw TypeError(t)},GN=(t,e,n)=>e.has(t)||Ew("Cannot "+n),$p=(t,e,n)=>(GN(t,e,"read from private field"),n?n.call(t):e.get(t)),KN=(t,e,n)=>e.has(t)?Ew("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),sE="popstate";function YN(t={}){function e(i,a){let{pathname:o,search:l,hash:u}=i.location;return Wc("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:za(a)}return XN(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WN(){return Math.random().toString(36).substring(2,10)}function oE(t,e){return{usr:t.state,key:t.key,idx:e}}function Wc(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ga(e):e,state:n,key:e&&e.key||i||WN()}}function za({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function XN(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,u="POP",d=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function g(){u="POP";let w=m(),_=w==null?null:w-h;h=w,d&&d({action:u,location:C.location,delta:_})}function y(w,_){u="PUSH";let N=Wc(C.location,w,_);h=m()+1;let D=oE(N,h),O=C.createHref(N);try{l.pushState(D,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(O)}o&&d&&d({action:u,location:C.location,delta:1})}function T(w,_){u="REPLACE";let N=Wc(C.location,w,_);h=m();let D=oE(N,h),O=C.createHref(N);l.replaceState(D,"",O),o&&d&&d({action:u,location:C.location,delta:0})}function E(w){return Cw(w)}let C={get action(){return u},get location(){return t(a,l)},listen(w){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(sE,g),d=w,()=>{a.removeEventListener(sE,g),d=null}},createHref(w){return e(a,w)},createURL:E,encodeLocation(w){let _=E(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:T,go(w){return l.go(w)}};return C}function Cw(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Je(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:za(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}var Bc,lE=class{constructor(t){if(KN(this,Bc,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if($p(this,Bc).has(t))return $p(this,Bc).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){$p(this,Bc).set(t,e)}};Bc=new WeakMap;var QN=new Set(["lazy","caseSensitive","path","id","index","children"]);function JN(t){return QN.has(t)}var ZN=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function eD(t){return ZN.has(t)}function tD(t){return t.index===!0}function Xc(t,e,n=[],i={},a=!1){return t.map((o,l)=>{let u=[...n,String(l)],d=typeof o.id=="string"?o.id:u.join("-");if(Je(o.index!==!0||!o.children,"Cannot specify children on an index route"),Je(a||!i[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),tD(o)){let h={...o,...e(o),id:d};return i[d]=h,h}else{let h={...o,...e(o),id:d,children:void 0};return i[d]=h,o.children&&(h.children=Xc(o.children,e,u,i,a)),h}})}function Da(t,e,n="/"){return rf(t,e,n,!1)}function rf(t,e,n,i){let a=typeof e=="string"?Ga(e):e,o=vi(a.pathname||"/",n);if(o==null)return null;let l=kw(t);iD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=mD(o);u=fD(l[d],h,i)}return u}function nD(t,e){let{route:n,pathname:i,params:a}=t;return{id:n.id,pathname:i,params:a,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function kw(t,e=[],n=[],i="",a=!1){let o=(l,u,d=a,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&d)return;Je(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let g=or([i,m.relativePath]),y=n.concat(m);l.children&&l.children.length>0&&(Je(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),kw(l.children,e,y,g,d)),!(l.path==null&&!l.index)&&e.push({path:g,score:uD(g,l.index),routesMeta:y})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of ww(l.path))o(l,u,!0,d)}),e}function ww(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=ww(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function iD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dD(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var rD=/^:[\w-]+$/,aD=3,sD=2,oD=1,lD=10,cD=-2,cE=t=>t==="*";function uD(t,e){let n=t.split("/"),i=n.length;return n.some(cE)&&(i+=cD),e&&(i+=sD),n.filter(a=>!cE(a)).reduce((a,o)=>a+(rD.test(o)?aD:o===""?oD:lD),i)}function dD(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function fD(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],h=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=Rf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),y=d.route;if(!g&&h&&n&&!i[i.length-1].route.index&&(g=Rf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:or([o,g.pathname]),pathnameBase:yD(or([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=or([o,g.pathnameBase]))}return l}function Rf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=hD(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((h,{paramName:m,isOptional:g},y)=>{if(m==="*"){let E=u[y]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const T=u[y];return g&&!T?h[m]=void 0:h[m]=(T||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function hD(t,e=!1,n=!0){Mt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function mD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function pD({basename:t,pathname:e}){return e==="/"?t:or([t,e])}function gD(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?Ga(t):t;return{pathname:n?n.startsWith("/")?n:vD(n,e):e,search:bD(i),hash:SD(a)}}function vD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Gp(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _w(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function eh(t){let e=_w(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function th(t,e,n,i=!1){let a;typeof t=="string"?a=Ga(t):(a={...t},Je(!a.pathname||!a.pathname.includes("?"),Gp("?","pathname","search",a)),Je(!a.pathname||!a.pathname.includes("#"),Gp("#","pathname","hash",a)),Je(!a.search||!a.search.includes("#"),Gp("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=n;else{let g=e.length-1;if(!i&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}u=g>=0?e[g]:"/"}let d=gD(a,u),h=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var or=t=>t.join("/").replace(/\/\/+/g,"/"),yD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Af=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Qc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var xw=["POST","PUT","PATCH","DELETE"],TD=new Set(xw),ED=["GET",...xw],CD=new Set(ED),kD=new Set([301,302,303,307,308]),wD=new Set([307,308]),Kp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_D={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},xD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sy=t=>xD.test(t),RD=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Rw="remix-router-transitions",Aw=Symbol("ResetLoaderData");function AD(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Je(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=t.hydrationRouteProperties||[],a=t.mapRouteProperties||RD,o={},l=Xc(t.routes,a,void 0,o),u,d=t.basename||"/";d.startsWith("/")||(d=`/${d}`);let h=t.dataStrategy||MD,m={...t.future},g=null,y=new Set,T=null,E=null,C=null,w=t.hydrationData!=null,_=Da(l,t.history.location,d),N=!1,D=null,O;if(_==null&&!t.patchRoutesOnNavigation){let U=pi(404,{pathname:t.history.location.pathname}),{matches:$,route:J}=Ud(l);O=!0,_=$,D={[J.id]:U}}else if(_&&!t.hydrationData&&ns(_,l,t.history.location.pathname).active&&(_=null),_)if(_.some(U=>U.route.lazy))O=!1;else if(!_.some(U=>U.route.loader))O=!0;else{let U=t.hydrationData?t.hydrationData.loaderData:null,$=t.hydrationData?t.hydrationData.errors:null;if($){let J=_.findIndex(ue=>$[ue.route.id]!==void 0);O=_.slice(0,J+1).every(ue=>!Yg(ue.route,U,$))}else O=_.every(J=>!Yg(J.route,U,$))}else{O=!1,_=[];let U=ns(null,l,t.history.location.pathname);U.active&&U.matches&&(N=!0,_=U.matches)}let R,x={historyAction:t.history.action,location:t.history.location,matches:_,initialized:O,navigation:Kp,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||D,fetchers:new Map,blockers:new Map},B="POP",M=!1,P,z=!1,q=new Map,re=null,fe=!1,ye=!1,we=new Set,F=new Map,se=0,Q=-1,Se=new Map,L=new Set,ne=new Map,he=new Map,le=new Set,ge=new Map,Oe,Te=null;function Ne(){if(g=t.history.listen(({action:U,location:$,delta:J})=>{if(Oe){Oe(),Oe=void 0;return}Mt(ge.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ue=wu({currentLocation:x.location,nextLocation:$,historyAction:U});if(ue&&J!=null){let pe=new Promise(_e=>{Oe=_e});t.history.go(J*-1),Wi(ue,{state:"blocked",location:$,proceed(){Wi(ue,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),pe.then(()=>t.history.go(J))},reset(){let _e=new Map(x.blockers);_e.set(ue,kc),lt({blockers:_e})}});return}return Un(U,$)}),n){WD(e,q);let U=()=>XD(e,q);e.addEventListener("pagehide",U),re=()=>e.removeEventListener("pagehide",U)}return x.initialized||Un("POP",x.location,{initialHydration:!0}),R}function ze(){g&&g(),re&&re(),y.clear(),P&&P.abort(),x.fetchers.forEach((U,$)=>sn($)),x.blockers.forEach((U,$)=>es($))}function Tt(U){return y.add(U),()=>y.delete(U)}function lt(U,$={}){U.matches&&(U.matches=U.matches.map(pe=>{let _e=o[pe.route.id],De=pe.route;return De.element!==_e.element||De.errorElement!==_e.errorElement||De.hydrateFallbackElement!==_e.hydrateFallbackElement?{...pe,route:_e}:pe})),x={...x,...U};let J=[],ue=[];x.fetchers.forEach((pe,_e)=>{pe.state==="idle"&&(le.has(_e)?J.push(_e):ue.push(_e))}),le.forEach(pe=>{!x.fetchers.has(pe)&&!F.has(pe)&&J.push(pe)}),[...y].forEach(pe=>pe(x,{deletedFetchers:J,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),J.forEach(pe=>sn(pe)),ue.forEach(pe=>x.fetchers.delete(pe))}function qt(U,$,{flushSync:J}={}){let ue=x.actionData!=null&&x.navigation.formMethod!=null&&_n(x.navigation.formMethod)&&x.navigation.state==="loading"&&U.state?._isRedirect!==!0,pe;$.actionData?Object.keys($.actionData).length>0?pe=$.actionData:pe=null:ue?pe=x.actionData:pe=null;let _e=$.loaderData?bE(x.loaderData,$.loaderData,$.matches||[],$.errors):x.loaderData,De=x.blockers;De.size>0&&(De=new Map(De),De.forEach((Re,Ae)=>De.set(Ae,kc)));let xe=fe?!1:xu(U,$.matches||x.matches),Me=M===!0||x.navigation.formMethod!=null&&_n(x.navigation.formMethod)&&U.state?._isRedirect!==!0;u&&(l=u,u=void 0),fe||B==="POP"||(B==="PUSH"?t.history.push(U,U.state):B==="REPLACE"&&t.history.replace(U,U.state));let Ie;if(B==="POP"){let Re=q.get(x.location.pathname);Re&&Re.has(U.pathname)?Ie={currentLocation:x.location,nextLocation:U}:q.has(U.pathname)&&(Ie={currentLocation:U,nextLocation:x.location})}else if(z){let Re=q.get(x.location.pathname);Re?Re.add(U.pathname):(Re=new Set([U.pathname]),q.set(x.location.pathname,Re)),Ie={currentLocation:x.location,nextLocation:U}}lt({...$,actionData:pe,loaderData:_e,historyAction:B,location:U,initialized:!0,navigation:Kp,revalidation:"idle",restoreScrollPosition:xe,preventScrollReset:Me,blockers:De},{viewTransitionOpts:Ie,flushSync:J===!0}),B="POP",M=!1,z=!1,fe=!1,ye=!1,Te?.resolve(),Te=null}async function jn(U,$){if(typeof U=="number"){t.history.go(U);return}let J=Kg(x.location,x.matches,d,U,$?.fromRouteId,$?.relative),{path:ue,submission:pe,error:_e}=uE(!1,J,$),De=x.location,xe=Wc(x.location,ue,$&&$.state);xe={...xe,...t.history.encodeLocation(xe)};let Me=$&&$.replace!=null?$.replace:void 0,Ie="PUSH";Me===!0?Ie="REPLACE":Me===!1||pe!=null&&_n(pe.formMethod)&&pe.formAction===x.location.pathname+x.location.search&&(Ie="REPLACE");let Re=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,Ae=($&&$.flushSync)===!0,$e=wu({currentLocation:De,nextLocation:xe,historyAction:Ie});if($e){Wi($e,{state:"blocked",location:xe,proceed(){Wi($e,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),jn(U,$)},reset(){let st=new Map(x.blockers);st.set($e,kc),lt({blockers:st})}});return}await Un(Ie,xe,{submission:pe,pendingError:_e,preventScrollReset:Re,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:Ae})}function Zr(){Te||(Te=QD()),ta(),lt({revalidation:"loading"});let U=Te.promise;return x.navigation.state==="submitting"?U:x.navigation.state==="idle"?(Un(x.historyAction,x.location,{startUninterruptedRevalidation:!0}),U):(Un(B||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation,enableViewTransition:z===!0}),U)}async function Un(U,$,J){P&&P.abort(),P=null,B=U,fe=(J&&J.startUninterruptedRevalidation)===!0,ts(x.location,x.matches),M=(J&&J.preventScrollReset)===!0,z=(J&&J.enableViewTransition)===!0;let ue=u||l,pe=J&&J.overrideNavigation,_e=J?.initialHydration&&x.matches&&x.matches.length>0&&!N?x.matches:Da(ue,$,d),De=(J&&J.flushSync)===!0;if(_e&&x.initialized&&!ye&&VD(x.location,$)&&!(J&&J.submission&&_n(J.submission.formMethod))){qt($,{matches:_e},{flushSync:De});return}let xe=ns(_e,ue,$.pathname);if(xe.active&&xe.matches&&(_e=xe.matches),!_e){let{error:Rt,notFoundMatches:Fe,route:dt}=Xs($.pathname);qt($,{matches:Fe,loaderData:{},errors:{[dt.id]:Rt}},{flushSync:De});return}P=new AbortController;let Me=zo(t.history,$,P.signal,J&&J.submission),Ie=t.unstable_getContext?await t.unstable_getContext():new lE,Re;if(J&&J.pendingError)Re=[Pa(_e).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&_n(J.submission.formMethod)){let Rt=await _l(Me,$,J.submission,_e,Ie,xe.active,J&&J.initialHydration===!0,{replace:J.replace,flushSync:De});if(Rt.shortCircuited)return;if(Rt.pendingActionResult){let[Fe,dt]=Rt.pendingActionResult;if(Kn(dt)&&Qc(dt.error)&&dt.error.status===404){P=null,qt($,{matches:Rt.matches,loaderData:{},errors:{[Fe]:dt.error}});return}}_e=Rt.matches||_e,Re=Rt.pendingActionResult,pe=Yp($,J.submission),De=!1,xe.active=!1,Me=zo(t.history,Me.url,Me.signal)}let{shortCircuited:Ae,matches:$e,loaderData:st,errors:Ct}=await Ys(Me,$,_e,Ie,xe.active,pe,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,De,Re);Ae||(P=null,qt($,{matches:$e||_e,...SE(Re),loaderData:st,errors:Ct}))}async function _l(U,$,J,ue,pe,_e,De,xe={}){ta();let Me=KD($,J);if(lt({navigation:Me},{flushSync:xe.flushSync===!0}),_e){let Ae=await is(ue,$.pathname,U.signal);if(Ae.type==="aborted")return{shortCircuited:!0};if(Ae.type==="error"){if(Ae.partialMatches.length===0){let{matches:st,route:Ct}=Ud(l);return{matches:st,pendingActionResult:[Ct.id,{type:"error",error:Ae.error}]}}let $e=Pa(Ae.partialMatches).route.id;return{matches:Ae.partialMatches,pendingActionResult:[$e,{type:"error",error:Ae.error}]}}else if(Ae.matches)ue=Ae.matches;else{let{notFoundMatches:$e,error:st,route:Ct}=Xs($.pathname);return{matches:$e,pendingActionResult:[Ct.id,{type:"error",error:st}]}}}let Ie,Re=af(ue,$);if(!Re.route.action&&!Re.route.lazy)Ie={type:"error",error:pi(405,{method:U.method,pathname:$.pathname,routeId:Re.route.id})};else{let Ae=Ko(a,o,U,ue,Re,De?[]:i,pe),$e=await Ci(U,Ae,pe,null);if(Ie=$e[Re.route.id],!Ie){for(let st of ue)if($e[st.route.id]){Ie=$e[st.route.id];break}}if(U.signal.aborted)return{shortCircuited:!0}}if(ks(Ie)){let Ae;return xe&&xe.replace!=null?Ae=xe.replace:Ae=gE(Ie.response.headers.get("Location"),new URL(U.url),d)===x.location.pathname+x.location.search,await ri(U,Ie,!0,{submission:J,replace:Ae}),{shortCircuited:!0}}if(Kn(Ie)){let Ae=Pa(ue,Re.route.id);return(xe&&xe.replace)!==!0&&(B="PUSH"),{matches:ue,pendingActionResult:[Ae.route.id,Ie,Re.route.id]}}return{matches:ue,pendingActionResult:[Re.route.id,Ie]}}async function Ys(U,$,J,ue,pe,_e,De,xe,Me,Ie,Re,Ae){let $e=_e||Yp($,De),st=De||xe||EE($e),Ct=!fe&&!Ie;if(pe){if(Ct){let Bt=fn(Ae);lt({navigation:$e,...Bt!==void 0?{actionData:Bt}:{}},{flushSync:Re})}let Ve=await is(J,$.pathname,U.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){if(Ve.partialMatches.length===0){let{matches:Er,route:Tn}=Ud(l);return{matches:Er,loaderData:{},errors:{[Tn.id]:Ve.error}}}let Bt=Pa(Ve.partialMatches).route.id;return{matches:Ve.partialMatches,loaderData:{},errors:{[Bt]:Ve.error}}}else if(Ve.matches)J=Ve.matches;else{let{error:Bt,notFoundMatches:Er,route:Tn}=Xs($.pathname);return{matches:Er,loaderData:{},errors:{[Tn.id]:Bt}}}}let Rt=u||l,{dsMatches:Fe,revalidatingFetchers:dt}=dE(U,ue,a,o,t.history,x,J,st,$,Ie?[]:i,Ie===!0,ye,we,le,ne,L,Rt,d,t.patchRoutesOnNavigation!=null,Ae);if(Q=++se,!t.dataStrategy&&!Fe.some(Ve=>Ve.shouldLoad)&&!Fe.some(Ve=>Ve.route.unstable_middleware)&&dt.length===0){let Ve=Ja();return qt($,{matches:J,loaderData:{},errors:Ae&&Kn(Ae[1])?{[Ae[0]]:Ae[1].error}:null,...SE(Ae),...Ve?{fetchers:new Map(x.fetchers)}:{}},{flushSync:Re}),{shortCircuited:!0}}if(Ct){let Ve={};if(!pe){Ve.navigation=$e;let Bt=fn(Ae);Bt!==void 0&&(Ve.actionData=Bt)}dt.length>0&&(Ve.fetchers=xl(dt)),lt(Ve,{flushSync:Re})}dt.forEach(Ve=>{Yi(Ve.key),Ve.controller&&F.set(Ve.key,Ve.controller)});let Xi=()=>dt.forEach(Ve=>Yi(Ve.key));P&&P.signal.addEventListener("abort",Xi);let{loaderResults:Bn,fetcherResults:gn}=await ea(Fe,dt,U,ue);if(U.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",Xi),dt.forEach(Ve=>F.delete(Ve.key));let ai=Bd(Bn);if(ai)return await ri(U,ai.result,!0,{replace:Me}),{shortCircuited:!0};if(ai=Bd(gn),ai)return L.add(ai.key),await ri(U,ai.result,!0,{replace:Me}),{shortCircuited:!0};let{loaderData:Js,errors:na}=yE(x,J,Bn,Ae,dt,gn);Ie&&x.errors&&(na={...x.errors,...na});let br=Ja(),Sr=Za(Q),Tr=br||Sr||dt.length>0;return{matches:J,loaderData:Js,errors:na,...Tr?{fetchers:new Map(x.fetchers)}:{}}}function fn(U){if(U&&!Kn(U[1]))return{[U[0]]:U[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function xl(U){return U.forEach($=>{let J=x.fetchers.get($.key),ue=wc(void 0,J?J.data:void 0);x.fetchers.set($.key,ue)}),new Map(x.fetchers)}async function Ws(U,$,J,ue){Yi(U);let pe=(ue&&ue.flushSync)===!0,_e=u||l,De=Kg(x.location,x.matches,d,J,$,ue?.relative),xe=Da(_e,De,d),Me=ns(xe,_e,De);if(Me.active&&Me.matches&&(xe=Me.matches),!xe){yt(U,$,pi(404,{pathname:De}),{flushSync:pe});return}let{path:Ie,submission:Re,error:Ae}=uE(!0,De,ue);if(Ae){yt(U,$,Ae,{flushSync:pe});return}let $e=t.unstable_getContext?await t.unstable_getContext():new lE,st=(ue&&ue.preventScrollReset)===!0;if(Re&&_n(Re.formMethod)){await ii(U,$,Ie,xe,$e,Me.active,pe,st,Re);return}ne.set(U,{routeId:$,path:Ie}),await Ei(U,$,Ie,xe,$e,Me.active,pe,st,Re)}async function ii(U,$,J,ue,pe,_e,De,xe,Me){ta(),ne.delete(U);let Ie=x.fetchers.get(U);an(U,YD(Me,Ie),{flushSync:De});let Re=new AbortController,Ae=zo(t.history,J,Re.signal,Me);if(_e){let _t=await is(ue,new URL(Ae.url).pathname,Ae.signal,U);if(_t.type==="aborted")return;if(_t.type==="error"){yt(U,$,_t.error,{flushSync:De});return}else if(_t.matches)ue=_t.matches;else{yt(U,$,pi(404,{pathname:J}),{flushSync:De});return}}let $e=af(ue,J);if(!$e.route.action&&!$e.route.lazy){let _t=pi(405,{method:Me.formMethod,pathname:J,routeId:$});yt(U,$,_t,{flushSync:De});return}F.set(U,Re);let st=se,Ct=Ko(a,o,Ae,ue,$e,i,pe),Fe=(await Ci(Ae,Ct,pe,U))[$e.route.id];if(Ae.signal.aborted){F.get(U)===Re&&F.delete(U);return}if(le.has(U)){if(ks(Fe)||Kn(Fe)){an(U,Oa(void 0));return}}else{if(ks(Fe))if(F.delete(U),Q>st){an(U,Oa(void 0));return}else return L.add(U),an(U,wc(Me)),ri(Ae,Fe,!1,{fetcherSubmission:Me,preventScrollReset:xe});if(Kn(Fe)){yt(U,$,Fe.error);return}}let dt=x.navigation.location||x.location,Xi=zo(t.history,dt,Re.signal),Bn=u||l,gn=x.navigation.state!=="idle"?Da(Bn,x.navigation.location,d):x.matches;Je(gn,"Didn't find any matches after fetcher action");let ai=++se;Se.set(U,ai);let Js=wc(Me,Fe.data);x.fetchers.set(U,Js);let{dsMatches:na,revalidatingFetchers:br}=dE(Xi,pe,a,o,t.history,x,gn,Me,dt,i,!1,ye,we,le,ne,L,Bn,d,t.patchRoutesOnNavigation!=null,[$e.route.id,Fe]);br.filter(_t=>_t.key!==U).forEach(_t=>{let ia=_t.key,Ru=x.fetchers.get(ia),Au=wc(void 0,Ru?Ru.data:void 0);x.fetchers.set(ia,Au),Yi(ia),_t.controller&&F.set(ia,_t.controller)}),lt({fetchers:new Map(x.fetchers)});let Sr=()=>br.forEach(_t=>Yi(_t.key));Re.signal.addEventListener("abort",Sr);let{loaderResults:Tr,fetcherResults:Ve}=await ea(na,br,Xi,pe);if(Re.signal.aborted)return;if(Re.signal.removeEventListener("abort",Sr),Se.delete(U),F.delete(U),br.forEach(_t=>F.delete(_t.key)),x.fetchers.has(U)){let _t=Oa(Fe.data);x.fetchers.set(U,_t)}let Bt=Bd(Tr);if(Bt)return ri(Xi,Bt.result,!1,{preventScrollReset:xe});if(Bt=Bd(Ve),Bt)return L.add(Bt.key),ri(Xi,Bt.result,!1,{preventScrollReset:xe});let{loaderData:Er,errors:Tn}=yE(x,gn,Tr,void 0,br,Ve);Za(ai),x.navigation.state==="loading"&&ai>Q?(Je(B,"Expected pending action"),P&&P.abort(),qt(x.navigation.location,{matches:gn,loaderData:Er,errors:Tn,fetchers:new Map(x.fetchers)})):(lt({errors:Tn,loaderData:bE(x.loaderData,Er,gn,Tn),fetchers:new Map(x.fetchers)}),ye=!1)}async function Ei(U,$,J,ue,pe,_e,De,xe,Me){let Ie=x.fetchers.get(U);an(U,wc(Me,Ie?Ie.data:void 0),{flushSync:De});let Re=new AbortController,Ae=zo(t.history,J,Re.signal);if(_e){let dt=await is(ue,new URL(Ae.url).pathname,Ae.signal,U);if(dt.type==="aborted")return;if(dt.type==="error"){yt(U,$,dt.error,{flushSync:De});return}else if(dt.matches)ue=dt.matches;else{yt(U,$,pi(404,{pathname:J}),{flushSync:De});return}}let $e=af(ue,J);F.set(U,Re);let st=se,Ct=Ko(a,o,Ae,ue,$e,i,pe),Fe=(await Ci(Ae,Ct,pe,U))[$e.route.id];if(F.get(U)===Re&&F.delete(U),!Ae.signal.aborted){if(le.has(U)){an(U,Oa(void 0));return}if(ks(Fe))if(Q>st){an(U,Oa(void 0));return}else{L.add(U),await ri(Ae,Fe,!1,{preventScrollReset:xe});return}if(Kn(Fe)){yt(U,$,Fe.error);return}an(U,Oa(Fe.data))}}async function ri(U,$,J,{submission:ue,fetcherSubmission:pe,preventScrollReset:_e,replace:De}={}){$.response.headers.has("X-Remix-Revalidate")&&(ye=!0);let xe=$.response.headers.get("Location");Je(xe,"Expected a Location header on the redirect Response"),xe=gE(xe,new URL(U.url),d);let Me=Wc(x.location,xe,{_isRedirect:!0});if(n){let Ct=!1;if($.response.headers.has("X-Remix-Reload-Document"))Ct=!0;else if(sy(xe)){const Rt=Cw(xe,!0);Ct=Rt.origin!==e.location.origin||vi(Rt.pathname,d)==null}if(Ct){De?e.location.replace(xe):e.location.assign(xe);return}}P=null;let Ie=De===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Re,formAction:Ae,formEncType:$e}=x.navigation;!ue&&!pe&&Re&&Ae&&$e&&(ue=EE(x.navigation));let st=ue||pe;if(wD.has($.response.status)&&st&&_n(st.formMethod))await Un(Ie,Me,{submission:{...st,formAction:xe},preventScrollReset:_e||M,enableViewTransition:J?z:void 0});else{let Ct=Yp(Me,ue);await Un(Ie,Me,{overrideNavigation:Ct,fetcherSubmission:pe,preventScrollReset:_e||M,enableViewTransition:J?z:void 0})}}async function Ci(U,$,J,ue){let pe,_e={};try{pe=await ID(h,U,$,ue,J,!1)}catch(De){return $.filter(xe=>xe.shouldLoad).forEach(xe=>{_e[xe.route.id]={type:"error",error:De}}),_e}if(U.signal.aborted)return _e;for(let[De,xe]of Object.entries(pe))if($D(xe)){let Me=xe.result;_e[De]={type:"redirect",response:zD(Me,U,De,$,d)}}else _e[De]=await BD(xe);return _e}async function ea(U,$,J,ue){let pe=Ci(J,U,ue,null),_e=Promise.all($.map(async Me=>{if(Me.matches&&Me.match&&Me.request&&Me.controller){let Re=(await Ci(Me.request,Me.matches,ue,Me.key))[Me.match.route.id];return{[Me.key]:Re}}else return Promise.resolve({[Me.key]:{type:"error",error:pi(404,{pathname:Me.path})}})})),De=await pe,xe=(await _e).reduce((Me,Ie)=>Object.assign(Me,Ie),{});return{loaderResults:De,fetcherResults:xe}}function ta(){ye=!0,ne.forEach((U,$)=>{F.has($)&&we.add($),Yi($)})}function an(U,$,J={}){x.fetchers.set(U,$),lt({fetchers:new Map(x.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function yt(U,$,J,ue={}){let pe=Pa(x.matches,$);sn(U),lt({errors:{[pe.route.id]:J},fetchers:new Map(x.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Sn(U){return he.set(U,(he.get(U)||0)+1),le.has(U)&&le.delete(U),x.fetchers.get(U)||_D}function sn(U){let $=x.fetchers.get(U);F.has(U)&&!($&&$.state==="loading"&&Se.has(U))&&Yi(U),ne.delete(U),Se.delete(U),L.delete(U),le.delete(U),we.delete(U),x.fetchers.delete(U)}function Lh(U){let $=(he.get(U)||0)-1;$<=0?(he.delete(U),le.add(U)):he.set(U,$),lt({fetchers:new Map(x.fetchers)})}function Yi(U){let $=F.get(U);$&&($.abort(),F.delete(U))}function ku(U){for(let $ of U){let J=Sn($),ue=Oa(J.data);x.fetchers.set($,ue)}}function Ja(){let U=[],$=!1;for(let J of L){let ue=x.fetchers.get(J);Je(ue,`Expected fetcher: ${J}`),ue.state==="loading"&&(L.delete(J),U.push(J),$=!0)}return ku(U),$}function Za(U){let $=[];for(let[J,ue]of Se)if(ue<U){let pe=x.fetchers.get(J);Je(pe,`Expected fetcher: ${J}`),pe.state==="loading"&&(Yi(J),Se.delete(J),$.push(J))}return ku($),$.length>0}function yr(U,$){let J=x.blockers.get(U)||kc;return ge.get(U)!==$&&ge.set(U,$),J}function es(U){x.blockers.delete(U),ge.delete(U)}function Wi(U,$){let J=x.blockers.get(U)||kc;Je(J.state==="unblocked"&&$.state==="blocked"||J.state==="blocked"&&$.state==="blocked"||J.state==="blocked"&&$.state==="proceeding"||J.state==="blocked"&&$.state==="unblocked"||J.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${$.state}`);let ue=new Map(x.blockers);ue.set(U,$),lt({blockers:ue})}function wu({currentLocation:U,nextLocation:$,historyAction:J}){if(ge.size===0)return;ge.size>1&&Mt(!1,"A router only supports one blocker at a time");let ue=Array.from(ge.entries()),[pe,_e]=ue[ue.length-1],De=x.blockers.get(pe);if(!(De&&De.state==="proceeding")&&_e({currentLocation:U,nextLocation:$,historyAction:J}))return pe}function Xs(U){let $=pi(404,{pathname:U}),J=u||l,{matches:ue,route:pe}=Ud(J);return{notFoundMatches:ue,route:pe,error:$}}function _u(U,$,J){if(T=U,C=$,E=J||null,!w&&x.navigation===Kp){w=!0;let ue=xu(x.location,x.matches);ue!=null&&lt({restoreScrollPosition:ue})}return()=>{T=null,C=null,E=null}}function Qs(U,$){return E&&E(U,$.map(ue=>nD(ue,x.loaderData)))||U.key}function ts(U,$){if(T&&C){let J=Qs(U,$);T[J]=C()}}function xu(U,$){if(T){let J=Qs(U,$),ue=T[J];if(typeof ue=="number")return ue}return null}function ns(U,$,J){if(t.patchRoutesOnNavigation)if(U){if(Object.keys(U[0].params).length>0)return{active:!0,matches:rf($,J,d,!0)}}else return{active:!0,matches:rf($,J,d,!0)||[]};return{active:!1,matches:null}}async function is(U,$,J,ue){if(!t.patchRoutesOnNavigation)return{type:"success",matches:U};let pe=U;for(;;){let _e=u==null,De=u||l,xe=o;try{await t.patchRoutesOnNavigation({signal:J,path:$,matches:pe,fetcherKey:ue,patch:(Re,Ae)=>{J.aborted||fE(Re,Ae,De,xe,a,!1)}})}catch(Re){return{type:"error",error:Re,partialMatches:pe}}finally{_e&&!J.aborted&&(l=[...l])}if(J.aborted)return{type:"aborted"};let Me=Da(De,$,d);if(Me)return{type:"success",matches:Me};let Ie=rf(De,$,d,!0);if(!Ie||pe.length===Ie.length&&pe.every((Re,Ae)=>Re.route.id===Ie[Ae].route.id))return{type:"success",matches:null};pe=Ie}}function Rl(U){o={},u=Xc(U,a,void 0,o)}function Al(U,$,J=!1){let ue=u==null;fE(U,$,u||l,o,a,J),ue&&(l=[...l],lt({}))}return R={get basename(){return d},get future(){return m},get state(){return x},get routes(){return l},get window(){return e},initialize:Ne,subscribe:Tt,enableScrollRestoration:_u,navigate:jn,fetch:Ws,revalidate:Zr,createHref:U=>t.history.createHref(U),encodeLocation:U=>t.history.encodeLocation(U),getFetcher:Sn,deleteFetcher:Lh,dispose:ze,getBlocker:yr,deleteBlocker:es,patchRoutes:Al,_internalFetchControllers:F,_internalSetRoutes:Rl,_internalSetStateDoNotUseOrYouWillBreakYourApp(U){lt(U)}},R}function OD(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Kg(t,e,n,i,a,o){let l,u;if(a){l=[];for(let h of e)if(l.push(h),h.route.id===a){u=h;break}}else l=e,u=e[e.length-1];let d=th(i||".",eh(l),vi(t.pathname,n)||t.pathname,o==="path");if(i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&u){let h=oy(d.search);if(u.route.index&&!h)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&h){let m=new URLSearchParams(d.search),g=m.getAll("index");m.delete("index"),g.filter(T=>T).forEach(T=>m.append("index",T));let y=m.toString();d.search=y?`?${y}`:""}}return n!=="/"&&(d.pathname=pD({basename:n,pathname:d.pathname})),za(d)}function uE(t,e,n){if(!n||!OD(n))return{path:e};if(n.formMethod&&!GD(n.formMethod))return{path:e,error:pi(405,{method:n.formMethod})};let i=()=>({path:e,error:pi(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),l=Lw(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!_n(o))return i();let g=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((y,[T,E])=>`${y}${T}=${E}
`,""):String(n.body);return{path:e,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:g}}}else if(n.formEncType==="application/json"){if(!_n(o))return i();try{let g=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}Je(typeof FormData=="function","FormData is not available in this environment");let u,d;if(n.formData)u=Xg(n.formData),d=n.formData;else if(n.body instanceof FormData)u=Xg(n.body),d=n.body;else if(n.body instanceof URLSearchParams)u=n.body,d=vE(u);else if(n.body==null)u=new URLSearchParams,d=new FormData;else try{u=new URLSearchParams(n.body),d=vE(u)}catch{return i()}let h={formMethod:o,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(_n(h.formMethod))return{path:e,submission:h};let m=Ga(e);return t&&m.search&&oy(m.search)&&u.append("index",""),m.search=`?${u}`,{path:za(m),submission:h}}function dE(t,e,n,i,a,o,l,u,d,h,m,g,y,T,E,C,w,_,N,D){let O=D?Kn(D[1])?D[1].error:D[1].data:void 0,R=a.createURL(o.location),x=a.createURL(d),B;if(m&&o.errors){let fe=Object.keys(o.errors)[0];B=l.findIndex(ye=>ye.route.id===fe)}else if(D&&Kn(D[1])){let fe=D[0];B=l.findIndex(ye=>ye.route.id===fe)-1}let M=D?D[1].statusCode:void 0,P=M&&M>=400,z={currentUrl:R,currentParams:o.matches[0]?.params||{},nextUrl:x,nextParams:l[0].params,...u,actionResult:O,actionStatus:M},q=l.map((fe,ye)=>{let{route:we}=fe,F=null;if(B!=null&&ye>B?F=!1:we.lazy?F=!0:we.loader==null?F=!1:m?F=Yg(we,o.loaderData,o.errors):ND(o.loaderData,o.matches[ye],fe)&&(F=!0),F!==null)return Wg(n,i,t,fe,h,e,F);let se=P?!1:g||R.pathname+R.search===x.pathname+x.search||R.search!==x.search||DD(o.matches[ye],fe),Q={...z,defaultShouldRevalidate:se},Se=Of(fe,Q);return Wg(n,i,t,fe,h,e,Se,Q)}),re=[];return E.forEach((fe,ye)=>{if(m||!l.some(he=>he.route.id===fe.routeId)||T.has(ye))return;let we=o.fetchers.get(ye),F=we&&we.state!=="idle"&&we.data===void 0,se=Da(w,fe.path,_);if(!se){if(N&&F)return;re.push({key:ye,routeId:fe.routeId,path:fe.path,matches:null,match:null,request:null,controller:null});return}if(C.has(ye))return;let Q=af(se,fe.path),Se=new AbortController,L=zo(a,fe.path,Se.signal),ne=null;if(y.has(ye))y.delete(ye),ne=Ko(n,i,L,se,Q,h,e);else if(F)g&&(ne=Ko(n,i,L,se,Q,h,e));else{let he={...z,defaultShouldRevalidate:P?!1:g};Of(Q,he)&&(ne=Ko(n,i,L,se,Q,h,e,he))}ne&&re.push({key:ye,routeId:fe.routeId,path:fe.path,matches:ne,match:Q,request:L,controller:Se})}),{dsMatches:q,revalidatingFetchers:re}}function Yg(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let i=e!=null&&t.id in e,a=n!=null&&n[t.id]!==void 0;return!i&&a?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!i&&!a}function ND(t,e,n){let i=!e||n.route.id!==e.route.id,a=!t.hasOwnProperty(n.route.id);return i||a}function DD(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Of(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function fE(t,e,n,i,a,o){let l;if(t){let h=i[t];Je(h,`No route found to patch children into: routeId = ${t}`),h.children||(h.children=[]),l=h.children}else l=n;let u=[],d=[];if(e.forEach(h=>{let m=l.find(g=>Ow(h,g));m?d.push({existingRoute:m,newRoute:h}):u.push(h)}),u.length>0){let h=Xc(u,a,[t||"_","patch",String(l?.length||"0")],i);l.push(...h)}if(o&&d.length>0)for(let h=0;h<d.length;h++){let{existingRoute:m,newRoute:g}=d[h],y=m,[T]=Xc([g],a,[],{},!0);Object.assign(y,{element:T.element?T.element:y.element,errorElement:T.errorElement?T.errorElement:y.errorElement,hydrateFallbackElement:T.hydrateFallbackElement?T.hydrateFallbackElement:y.hydrateFallbackElement})}}function Ow(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,i)=>e.children?.some(a=>Ow(n,a))):!1}var hE=new WeakMap,Nw=({key:t,route:e,manifest:n,mapRouteProperties:i})=>{let a=n[e.id];if(Je(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let o=a.lazy[t];if(!o)return;let l=hE.get(a);l||(l={},hE.set(a,l));let u=l[t];if(u)return u;let d=(async()=>{let h=JN(t),g=a[t]!==void 0&&t!=="hasErrorBoundary";if(h)Mt(!h,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),l[t]=Promise.resolve();else if(g)Mt(!1,`Route "${a.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let y=await o();y!=null&&(Object.assign(a,{[t]:y}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[t]=void 0,Object.values(a.lazy).every(y=>y===void 0)&&(a.lazy=void 0))})();return l[t]=d,d},mE=new WeakMap;function PD(t,e,n,i,a){let o=n[t.id];if(Je(o,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let m=mE.get(o);if(m)return{lazyRoutePromise:m,lazyHandlerPromise:m};let g=(async()=>{Je(typeof t.lazy=="function","No lazy route function found");let y=await t.lazy(),T={};for(let E in y){let C=y[E];if(C===void 0)continue;let w=eD(E),N=o[E]!==void 0&&E!=="hasErrorBoundary";w?Mt(!w,"Route property "+E+" is not a supported property to be returned from a lazy route function. This property will be ignored."):N?Mt(!N,`Route "${o.id}" has a static property "${E}" defined but its lazy function is also returning a value for this property. The lazy route property "${E}" will be ignored.`):T[E]=C}Object.assign(o,T),Object.assign(o,{...i(o),lazy:void 0})})();return mE.set(o,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let l=Object.keys(t.lazy),u=[],d;for(let m of l){if(a&&a.includes(m))continue;let g=Nw({key:m,route:t,manifest:n,mapRouteProperties:i});g&&(u.push(g),m===e&&(d=g))}let h=u.length>0?Promise.all(u).then(()=>{}):void 0;return h?.catch(()=>{}),d?.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:d}}async function pE(t){let e=t.matches.filter(a=>a.shouldLoad),n={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,o)=>{n[e[o].route.id]=a}),n}async function MD(t){return t.matches.some(e=>e.route.unstable_middleware)?Dw(t,()=>pE(t)):pE(t)}function Dw(t,e){return LD(t,e,i=>i,HD,n);function n(i,a,o){if(o)return Promise.resolve(Object.assign(o.value,{[a]:{type:"error",result:i}}));{let{matches:l}=t,u=Math.min(l.findIndex(h=>h.route.id===a)||0,l.findIndex(h=>h.unstable_shouldCallHandler())||0),d=Pa(l,l[u].route.id).route.id;return Promise.resolve({[d]:{type:"error",result:i}})}}}async function LD(t,e,n,i,a){let{matches:o,request:l,params:u,context:d}=t,h=o.flatMap(g=>g.route.unstable_middleware?g.route.unstable_middleware.map(y=>[g.route.id,y]):[]);return await Pw({request:l,params:u,context:d},h,e,n,i,a)}async function Pw(t,e,n,i,a,o,l=0){let{request:u}=t;if(u.signal.aborted)throw u.signal.reason??new Error(`Request aborted: ${u.method} ${u.url}`);let d=e[l];if(!d)return await n();let[h,m]=d,g,y=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");try{return g={value:await Pw(t,e,n,i,a,o,l+1)},g.value}catch(T){return g={value:await o(T,h,g)},g.value}};try{let T=await m(t,y),E=T!=null?i(T):void 0;return a(E)?E:g?E??g.value:(g={value:await y()},g.value)}catch(T){return await o(T,h,g)}}function Mw(t,e,n,i,a){let o=Nw({key:"unstable_middleware",route:i.route,manifest:e,mapRouteProperties:t}),l=PD(i.route,_n(n.method)?"action":"loader",e,t,a);return{middleware:o,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function Wg(t,e,n,i,a,o,l,u=null){let d=!1,h=Mw(t,e,n,i,a);return{...i,_lazyPromises:h,shouldLoad:l,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler(m){return d=!0,u?typeof m=="boolean"?Of(i,{...u,defaultShouldRevalidate:m}):Of(i,u):l},resolve(m){return d||l||m&&!_n(n.method)&&(i.route.lazy||i.route.loader)?jD({request:n,match:i,lazyHandlerPromise:h?.handler,lazyRoutePromise:h?.route,handlerOverride:m,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function Ko(t,e,n,i,a,o,l,u=null){return i.map(d=>d.route.id!==a.route.id?{...d,shouldLoad:!1,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler:()=>!1,_lazyPromises:Mw(t,e,n,d,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Wg(t,e,n,d,o,l,!0,u))}async function ID(t,e,n,i,a,o){n.some(h=>h._lazyPromises?.middleware)&&await Promise.all(n.map(h=>h._lazyPromises?.middleware));let l={request:e,params:n[0].params,context:a,matches:n},d=await t({...l,fetcherKey:i,unstable_runClientMiddleware:h=>{let m=l;return Dw(m,()=>h({...m,fetcherKey:i,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(h=>[h._lazyPromises?.handler,h._lazyPromises?.route]))}catch{}return d}async function jD({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:i,handlerOverride:a,scopedContext:o}){let l,u,d=_n(t.method),h=d?"action":"loader",m=g=>{let y,T=new Promise((w,_)=>y=_);u=()=>y(),t.signal.addEventListener("abort",u);let E=w=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${e.route.id}]`)):g({request:t,params:e.params,context:o},...w!==void 0?[w]:[]),C=(async()=>{try{return{type:"data",result:await(a?a(_=>E(_)):E())}}catch(w){return{type:"error",result:w}}})();return Promise.race([C,T])};try{let g=d?e.route.action:e.route.loader;if(n||i)if(g){let y,[T]=await Promise.all([m(g).catch(E=>{y=E}),n,i]);if(y!==void 0)throw y;l=T}else{await n;let y=d?e.route.action:e.route.loader;if(y)[l]=await Promise.all([m(y),i]);else if(h==="action"){let T=new URL(t.url),E=T.pathname+T.search;throw pi(405,{method:t.method,pathname:E,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(g)l=await m(g);else{let y=new URL(t.url),T=y.pathname+y.search;throw pi(404,{pathname:T})}}catch(g){return{type:"error",result:g}}finally{u&&t.signal.removeEventListener("abort",u)}return l}async function UD(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function BD(t){let{result:e,type:n}=t;if(Iw(e)){let i;try{i=await UD(e)}catch(a){return{type:"error",error:a}}return n==="error"?{type:"error",error:new Af(e.status,e.statusText,i),statusCode:e.status,headers:e.headers}:{type:"data",data:i,statusCode:e.status,headers:e.headers}}return n==="error"?TE(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Af(e.init?.status||500,void 0,e.data),statusCode:Qc(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Qc(e)?e.status:void 0}:TE(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function zD(t,e,n,i,a){let o=t.headers.get("Location");if(Je(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!sy(o)){let l=i.slice(0,i.findIndex(u=>u.route.id===n)+1);o=Kg(new URL(e.url),l,a,o),t.headers.set("Location",o)}return t}function gE(t,e,n){if(sy(t)){let i=t,a=i.startsWith("//")?new URL(e.protocol+i):new URL(i),o=vi(a.pathname,n)!=null;if(a.origin===e.origin&&o)return a.pathname+a.search+a.hash}return t}function zo(t,e,n,i){let a=t.createURL(Lw(e)).toString(),o={signal:n};if(i&&_n(i.formMethod)){let{formMethod:l,formEncType:u}=i;o.method=l.toUpperCase(),u==="application/json"?(o.headers=new Headers({"Content-Type":u}),o.body=JSON.stringify(i.json)):u==="text/plain"?o.body=i.text:u==="application/x-www-form-urlencoded"&&i.formData?o.body=Xg(i.formData):o.body=i.formData}return new Request(a,o)}function Xg(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,typeof i=="string"?i:i.name);return e}function vE(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function FD(t,e,n,i=!1,a=!1){let o={},l=null,u,d=!1,h={},m=n&&Kn(n[1])?n[1].error:void 0;return t.forEach(g=>{if(!(g.route.id in e))return;let y=g.route.id,T=e[y];if(Je(!ks(T),"Cannot handle redirect results in processLoaderData"),Kn(T)){let E=T.error;if(m!==void 0&&(E=m,m=void 0),l=l||{},a)l[y]=E;else{let C=Pa(t,y);l[C.route.id]==null&&(l[C.route.id]=E)}i||(o[y]=Aw),d||(d=!0,u=Qc(T.error)?T.error.status:500),T.headers&&(h[y]=T.headers)}else o[y]=T.data,T.statusCode&&T.statusCode!==200&&!d&&(u=T.statusCode),T.headers&&(h[y]=T.headers)}),m!==void 0&&n&&(l={[n[0]]:m},n[2]&&(o[n[2]]=void 0)),{loaderData:o,errors:l,statusCode:u||200,loaderHeaders:h}}function yE(t,e,n,i,a,o){let{loaderData:l,errors:u}=FD(e,n,i);return a.filter(d=>!d.matches||d.matches.some(h=>h.shouldLoad)).forEach(d=>{let{key:h,match:m,controller:g}=d;if(g&&g.signal.aborted)return;let y=o[h];if(Je(y,"Did not find corresponding fetcher result"),Kn(y)){let T=Pa(t.matches,m?.route.id);u&&u[T.route.id]||(u={...u,[T.route.id]:y.error}),t.fetchers.delete(h)}else if(ks(y))Je(!1,"Unhandled fetcher revalidation redirect");else{let T=Oa(y.data);t.fetchers.set(h,T)}}),{loaderData:l,errors:u}}function bE(t,e,n,i){let a=Object.entries(e).filter(([,o])=>o!==Aw).reduce((o,[l,u])=>(o[l]=u,o),{});for(let o of n){let l=o.route.id;if(!e.hasOwnProperty(l)&&t.hasOwnProperty(l)&&o.route.loader&&(a[l]=t[l]),i&&i.hasOwnProperty(l))break}return a}function SE(t){return t?Kn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Pa(t,e){return(e?t.slice(0,t.findIndex(i=>i.route.id===e)+1):[...t]).reverse().find(i=>i.route.hasErrorBoundary===!0)||t[0]}function Ud(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function pi(t,{pathname:e,routeId:n,method:i,type:a,message:o}={}){let l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&e&&n?u=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:a==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u=`Route "${n}" does not match URL "${e}"`):t===404?(l="Not Found",u=`No route matches URL "${e}"`):t===405&&(l="Method Not Allowed",i&&e&&n?u=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:i&&(u=`Invalid request method "${i.toUpperCase()}"`)),new Af(t||500,l,new Error(u),!0)}function Bd(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[i,a]=e[n];if(ks(a))return{key:i,result:a}}}function Lw(t){let e=typeof t=="string"?Ga(t):t;return za({...e,hash:""})}function VD(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function HD(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&qD(n))}function qD(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function $D(t){return Iw(t.result)&&kD.has(t.result.status)}function Kn(t){return t.type==="error"}function ks(t){return(t&&t.type)==="redirect"}function TE(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Iw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function GD(t){return CD.has(t.toUpperCase())}function _n(t){return TD.has(t.toUpperCase())}function oy(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function af(t,e){let n=typeof e=="string"?Ga(e).search:e.search;if(t[t.length-1].route.index&&oy(n||""))return t[t.length-1];let i=_w(t);return i[i.length-1]}function EE(t){let{formMethod:e,formAction:n,formEncType:i,text:a,formData:o,json:l}=t;if(!(!e||!n||!i)){if(a!=null)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:a};if(o!=null)return{formMethod:e,formAction:n,formEncType:i,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:l,text:void 0}}}function Yp(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function KD(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function wc(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function YD(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Oa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function WD(t,e){try{let n=t.sessionStorage.getItem(Rw);if(n){let i=JSON.parse(n);for(let[a,o]of Object.entries(i||{}))o&&Array.isArray(o)&&e.set(a,new Set(o||[]))}}catch{}}function XD(t,e){if(e.size>0){let n={};for(let[i,a]of e)n[i]=[...a];try{t.sessionStorage.setItem(Rw,JSON.stringify(n))}catch(i){Mt(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function QD(){let t,e,n=new Promise((i,a)=>{t=async o=>{i(o);try{await n}catch{}},e=async o=>{a(o);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var Hs=b.createContext(null);Hs.displayName="DataRouter";var ou=b.createContext(null);ou.displayName="DataRouterState";b.createContext(!1);var ly=b.createContext({isTransitioning:!1});ly.displayName="ViewTransition";var jw=b.createContext(new Map);jw.displayName="Fetchers";var JD=b.createContext(null);JD.displayName="Await";var Vi=b.createContext(null);Vi.displayName="Navigation";var nh=b.createContext(null);nh.displayName="Location";var Si=b.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var cy=b.createContext(null);cy.displayName="RouteError";function ZD(t,{relative:e}={}){Je(ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=b.useContext(Vi),{hash:a,pathname:o,search:l}=cu(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:or([n,o])),i.createHref({pathname:u,search:l,hash:a})}function ml(){return b.useContext(nh)!=null}function Hi(){return Je(ml(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(nh).location}var Uw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Bw(t){b.useContext(Vi).static||b.useLayoutEffect(t)}function qs(){let{isDataRoute:t}=b.useContext(Si);return t?mP():eP()}function eP(){Je(ml(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(Hs),{basename:e,navigator:n}=b.useContext(Vi),{matches:i}=b.useContext(Si),{pathname:a}=Hi(),o=JSON.stringify(eh(i)),l=b.useRef(!1);return Bw(()=>{l.current=!0}),b.useCallback((d,h={})=>{if(Mt(l.current,Uw),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=th(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:or([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,o,a,t])}var tP=b.createContext(null);function nP(t){let e=b.useContext(Si).outlet;return e&&b.createElement(tP.Provider,{value:t},e)}function lu(){let{matches:t}=b.useContext(Si),e=t[t.length-1];return e?e.params:{}}function cu(t,{relative:e}={}){let{matches:n}=b.useContext(Si),{pathname:i}=Hi(),a=JSON.stringify(eh(n));return b.useMemo(()=>th(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function iP(t,e,n,i,a){Je(ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=b.useContext(Vi),{matches:l}=b.useContext(Si),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",m=u?u.pathnameBase:"/",g=u&&u.route;{let N=g&&g.path||"";Fw(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let y=Hi(),T;T=y;let E=T.pathname||"/",C=E;if(m!=="/"){let N=m.replace(/^\//,"").split("/");C="/"+E.replace(/^\//,"").split("/").slice(N.length).join("/")}let w=Da(t,{pathname:C});return Mt(g||w!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Mt(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),lP(w&&w.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:or([m,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:or([m,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,i,a)}function rP(){let t=hP(),e=Qc(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:o},"ErrorBoundary")," or"," ",b.createElement("code",{style:o},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:a},n):null,l)}var aP=b.createElement(rP,null),sP=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?b.createElement(Si.Provider,{value:this.props.routeContext},b.createElement(cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oP({routeContext:t,match:e,children:n}){let i=b.useContext(Hs);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Si.Provider,{value:t},n)}function lP(t,e=[],n=null,i=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n?.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);Je(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:g,errors:y}=n,T=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let y,T=!1,E=null,C=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,E=m.route.errorElement||aP,u&&(d<0&&g===0?(Fw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):d===g&&(T=!0,C=m.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),_=()=>{let N;return y?N=E:T?N=C:m.route.Component?N=b.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=h,b.createElement(oP,{match:m,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?b.createElement(sP,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:i}):_()},null)}function uy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cP(t){let e=b.useContext(Hs);return Je(e,uy(t)),e}function zw(t){let e=b.useContext(ou);return Je(e,uy(t)),e}function uP(t){let e=b.useContext(Si);return Je(e,uy(t)),e}function ih(t){let e=uP(t),n=e.matches[e.matches.length-1];return Je(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function dP(){return ih("useRouteId")}function fP(){let t=zw("useLoaderData"),e=ih("useLoaderData");return t.loaderData[e]}function hP(){let t=b.useContext(cy),e=zw("useRouteError"),n=ih("useRouteError");return t!==void 0?t:e.errors?.[n]}function mP(){let{router:t}=cP("useNavigate"),e=ih("useNavigate"),n=b.useRef(!1);return Bw(()=>{n.current=!0}),b.useCallback(async(a,o={})=>{Mt(n.current,Uw),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var CE={};function Fw(t,e,n){!e&&!CE[t]&&(CE[t]=!0,Mt(!1,n))}var kE={};function wE(t,e){!t&&!kE[e]&&(kE[e]=!0,console.warn(e))}function pP(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Mt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:b.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Mt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:b.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Mt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:b.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var gP=["HydrateFallback","hydrateFallbackElement"],vP=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function yP({router:t,flushSync:e,unstable_onError:n}){let[i,a]=b.useState(t.state),[o,l]=b.useState(),[u,d]=b.useState({isTransitioning:!1}),[h,m]=b.useState(),[g,y]=b.useState(),[T,E]=b.useState(),C=b.useRef(new Map),w=b.useCallback(R=>{a(x=>(R.errors&&n&&Object.entries(R.errors).forEach(([B,M])=>{x.errors?.[B]!==M&&n(M)}),R))},[n]),_=b.useCallback((R,{deletedFetchers:x,flushSync:B,viewTransitionOpts:M})=>{R.fetchers.forEach((z,q)=>{z.data!==void 0&&C.current.set(q,z.data)}),x.forEach(z=>C.current.delete(z)),wE(B===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let P=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(wE(M==null||P,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!P){e&&B?e(()=>w(R)):b.startTransition(()=>w(R));return}if(e&&B){e(()=>{g&&(h&&h.resolve(),g.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let z=t.window.document.startViewTransition(()=>{e(()=>w(R))});z.finished.finally(()=>{e(()=>{m(void 0),y(void 0),l(void 0),d({isTransitioning:!1})})}),e(()=>y(z));return}g?(h&&h.resolve(),g.skipTransition(),E({state:R,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(l(R),d({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[t.window,e,g,h,w]);b.useLayoutEffect(()=>t.subscribe(_),[t,_]),b.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new vP)},[u]),b.useEffect(()=>{if(h&&o&&t.window){let R=o,x=h.promise,B=t.window.document.startViewTransition(async()=>{b.startTransition(()=>w(R)),await x});B.finished.finally(()=>{m(void 0),y(void 0),l(void 0),d({isTransitioning:!1})}),y(B)}},[o,h,t.window,w]),b.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,g,i.location,o]),b.useEffect(()=>{!u.isTransitioning&&T&&(l(T.state),d({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),E(void 0))},[u.isTransitioning,T]);let N=b.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:R=>t.navigate(R),push:(R,x,B)=>t.navigate(R,{state:x,preventScrollReset:B?.preventScrollReset}),replace:(R,x,B)=>t.navigate(R,{replace:!0,state:x,preventScrollReset:B?.preventScrollReset})}),[t]),D=t.basename||"/",O=b.useMemo(()=>({router:t,navigator:N,static:!1,basename:D,unstable_onError:n}),[t,N,D,n]);return b.createElement(b.Fragment,null,b.createElement(Hs.Provider,{value:O},b.createElement(ou.Provider,{value:i},b.createElement(jw.Provider,{value:C.current},b.createElement(ly.Provider,{value:u},b.createElement(TP,{basename:D,location:i.location,navigationType:i.historyAction,navigator:N},b.createElement(bP,{routes:t.routes,future:t.future,state:i,unstable_onError:n})))))),null)}var bP=b.memo(SP);function SP({routes:t,future:e,state:n,unstable_onError:i}){return iP(t,void 0,n,i,e)}function Vw({to:t,replace:e,state:n,relative:i}){Je(ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=b.useContext(Vi);Mt(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=b.useContext(Si),{pathname:l}=Hi(),u=qs(),d=th(t,eh(o),l,i==="path"),h=JSON.stringify(d);return b.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:i})},[u,h,i,e,n]),null}function dy(t){return nP(t.context)}function TP({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1}){Je(!ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=Ga(n));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:y="default"}=n,T=b.useMemo(()=>{let E=vi(d,l);return E==null?null:{location:{pathname:E,search:h,hash:m,state:g,key:y},navigationType:i}},[l,d,h,m,g,y,i]);return Mt(T!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:b.createElement(Vi.Provider,{value:u},b.createElement(nh.Provider,{children:e,value:T}))}var sf="get",of="application/x-www-form-urlencoded";function rh(t){return t!=null&&typeof t.tagName=="string"}function EP(t){return rh(t)&&t.tagName.toLowerCase()==="button"}function CP(t){return rh(t)&&t.tagName.toLowerCase()==="form"}function kP(t){return rh(t)&&t.tagName.toLowerCase()==="input"}function wP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _P(t,e){return t.button===0&&(!e||e==="_self")&&!wP(t)}function Qg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(a=>[n,a]):[[n,i]])},[]))}function xP(t,e){let n=Qg(t);return e&&e.forEach((i,a)=>{n.has(a)||e.getAll(a).forEach(o=>{n.append(a,o)})}),n}var zd=null;function RP(){if(zd===null)try{new FormData(document.createElement("form"),0),zd=!1}catch{zd=!0}return zd}var AP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wp(t){return t!=null&&!AP.has(t)?(Mt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${of}"`),null):t}function OP(t,e){let n,i,a,o,l;if(CP(t)){let u=t.getAttribute("action");i=u?vi(u,e):null,n=t.getAttribute("method")||sf,a=Wp(t.getAttribute("enctype"))||of,o=new FormData(t)}else if(EP(t)||kP(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(i=d?vi(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||sf,a=Wp(t.getAttribute("formenctype"))||Wp(u.getAttribute("enctype"))||of,o=new FormData(u,t),!RP()){let{name:h,type:m,value:g}=t;if(m==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,g)}}else{if(rh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sf,i=null,a=of,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function NP(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&vi(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function DP(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function MP(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await DP(o,n);return l.links?l.links():[]}return[]}));return UP(i.flat(1).filter(PP).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function _E(t,e,n,i,a,o){let l=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>n[h].pathname!==d.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{let m=i.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function LP(t,e,{includeHydrateFallback:n}={}){return IP(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function IP(t){return[...new Set(t)]}function jP(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function UP(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(jP(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}function Hw(){let t=b.useContext(Hs);return fy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function BP(){let t=b.useContext(ou);return fy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var hy=b.createContext(void 0);hy.displayName="FrameworkContext";function qw(){let t=b.useContext(hy);return fy(t,"You must render this element inside a <HydratedRouter> element"),t}function zP(t,e){let n=b.useContext(hy),[i,a]=b.useState(!1),[o,l]=b.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=e,y=b.useRef(null);b.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let C=_=>{_.forEach(N=>{l(N.isIntersecting)})},w=new IntersectionObserver(C,{threshold:.5});return y.current&&w.observe(y.current),()=>{w.disconnect()}}},[t]),b.useEffect(()=>{if(i){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[i]);let T=()=>{a(!0)},E=()=>{a(!1),l(!1)};return n?t!=="intent"?[o,y,{}]:[o,y,{onFocus:_c(u,T),onBlur:_c(d,E),onMouseEnter:_c(h,T),onMouseLeave:_c(m,E),onTouchStart:_c(g,T)}]:[!1,y,{}]}function _c(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function FP({page:t,...e}){let{router:n}=Hw(),i=b.useMemo(()=>Da(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?b.createElement(HP,{page:t,matches:i,...e}):null}function VP(t){let{manifest:e,routeModules:n}=qw(),[i,a]=b.useState([]);return b.useEffect(()=>{let o=!1;return MP(t,e,n).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,n]),i}function HP({page:t,matches:e,...n}){let i=Hi(),{manifest:a,routeModules:o}=qw(),{basename:l}=Hw(),{loaderData:u,matches:d}=BP(),h=b.useMemo(()=>_E(t,e,d,a,i,"data"),[t,e,d,a,i]),m=b.useMemo(()=>_E(t,e,d,a,i,"assets"),[t,e,d,a,i]),g=b.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let E=new Set,C=!1;if(e.forEach(_=>{let N=a.routes[_.route.id];!N||!N.hasLoader||(!h.some(D=>D.route.id===_.route.id)&&_.route.id in u&&o[_.route.id]?.shouldRevalidate||N.hasClientLoader?C=!0:E.add(_.route.id))}),E.size===0)return[];let w=NP(t,l,"data");return C&&E.size>0&&w.searchParams.set("_routes",e.filter(_=>E.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[l,u,i,a,h,e,t,o]),y=b.useMemo(()=>LP(m,a),[m,a]),T=VP(m);return b.createElement(b.Fragment,null,g.map(E=>b.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),y.map(E=>b.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),T.map(({key:E,link:C})=>b.createElement("link",{key:E,nonce:n.nonce,...C})))}function qP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var $w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$w&&(window.__reactRouterVersion="7.8.2")}catch{}function $P(t,e){return AD({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:YN({window:e?.window}),hydrationData:GP(),routes:t,mapRouteProperties:pP,hydrationRouteProperties:gP,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function GP(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:KP(t.errors)}),t}function KP(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")n[i]=new Af(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let o=window[a.__subType];if(typeof o=="function")try{let l=new o(a.message);l.stack="",n[i]=l}catch{}}if(n[i]==null){let o=new Error(a.message);o.stack="",n[i]=o}}else n[i]=a;return n}var Gw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yn=b.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g,...y},T){let{basename:E}=b.useContext(Vi),C=typeof h=="string"&&Gw.test(h),w,_=!1;if(typeof h=="string"&&C&&(w=h,$w))try{let P=new URL(window.location.href),z=h.startsWith("//")?new URL(P.protocol+h):new URL(h),q=vi(z.pathname,E);z.origin===P.origin&&q!=null?h=q+z.search+z.hash:_=!0}catch{Mt(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=ZD(h,{relative:a}),[D,O,R]=zP(i,y),x=XP(h,{replace:l,state:u,target:d,preventScrollReset:m,relative:a,viewTransition:g});function B(P){e&&e(P),P.defaultPrevented||x(P)}let M=b.createElement("a",{...y,...R,href:w||N,onClick:_||o?e:B,ref:qP(T,O),target:d,"data-discover":!C&&n==="render"?"true":void 0});return D&&!C?b.createElement(b.Fragment,null,M,b.createElement(FP,{page:N})):M});Yn.displayName="Link";var zc=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...h},m){let g=cu(l,{relative:h.relative}),y=Hi(),T=b.useContext(ou),{navigator:E,basename:C}=b.useContext(Vi),w=T!=null&&nM(g)&&u===!0,_=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,N=y.pathname,D=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(N=N.toLowerCase(),D=D?D.toLowerCase():null,_=_.toLowerCase()),D&&C&&(D=vi(D,C)||D);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let R=N===_||!a&&N.startsWith(_)&&N.charAt(O)==="/",x=D!=null&&(D===_||!a&&D.startsWith(_)&&D.charAt(_.length)==="/"),B={isActive:R,isPending:x,isTransitioning:w},M=R?e:void 0,P;typeof i=="function"?P=i(B):P=[i,R?"active":null,x?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(B):o;return b.createElement(Yn,{...h,"aria-current":M,className:P,ref:m,style:z,to:l,viewTransition:u},typeof d=="function"?d(B):d)});zc.displayName="NavLink";var YP=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:l=sf,action:u,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:g,...y},T)=>{let E=eM(),C=tM(u,{relative:h}),w=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&Gw.test(u),N=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let O=D.nativeEvent.submitter,R=O?.getAttribute("formmethod")||l;E(O||D.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:a,state:o,relative:h,preventScrollReset:m,viewTransition:g})};return b.createElement("form",{ref:T,method:w,action:C,onSubmit:i?d:N,...y,"data-discover":!_&&t==="render"?"true":void 0})});YP.displayName="Form";function WP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kw(t){let e=b.useContext(Hs);return Je(e,WP(t)),e}function XP(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=qs(),d=Hi(),h=cu(t,{relative:o});return b.useCallback(m=>{if(_P(m,e)){m.preventDefault();let g=n!==void 0?n:za(d)===za(h);u(t,{replace:g,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,n,i,e,t,a,o,l])}function QP(t){Mt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=b.useRef(Qg(t)),n=b.useRef(!1),i=Hi(),a=b.useMemo(()=>xP(i.search,n.current?null:e.current),[i.search]),o=qs(),l=b.useCallback((u,d)=>{const h=Qg(typeof u=="function"?u(new URLSearchParams(a)):u);n.current=!0,o("?"+h,d)},[o,a]);return[a,l]}var JP=0,ZP=()=>`__${String(++JP)}__`;function eM(){let{router:t}=Kw("useSubmit"),{basename:e}=b.useContext(Vi),n=dP();return b.useCallback(async(i,a={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=OP(i,e);if(a.navigate===!1){let m=a.fetcherKey||ZP();await t.fetch(m,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function tM(t,{relative:e}={}){let{basename:n}=b.useContext(Vi),i=b.useContext(Si);Je(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...cu(t||".",{relative:e})},l=Hi();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(m=>m==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let m=u.toString();o.search=m?`?${m}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:or([n,o.pathname])),za(o)}function nM(t,{relative:e}={}){let n=b.useContext(ly);Je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Kw("useViewTransitionState"),a=cu(t,{relative:e});if(!n.isTransitioning)return!1;let o=vi(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=vi(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Rf(a.pathname,l)!=null||Rf(a.pathname,o)!=null}var iM=Tw();function rM(t){return b.createElement(yP,{flushSync:iM.flushSync,...t})}function Yw(t,e){return function(){return t.apply(e,arguments)}}const{toString:aM}=Object.prototype,{getPrototypeOf:my}=Object,{iterator:ah,toStringTag:Ww}=Symbol,sh=(t=>e=>{const n=aM.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qi=t=>(t=t.toLowerCase(),e=>sh(e)===t),oh=t=>e=>typeof e===t,{isArray:pl}=Array,tl=oh("undefined");function uu(t){return t!==null&&!tl(t)&&t.constructor!==null&&!tl(t.constructor)&&Nn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Xw=qi("ArrayBuffer");function sM(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Xw(t.buffer),e}const oM=oh("string"),Nn=oh("function"),Qw=oh("number"),du=t=>t!==null&&typeof t=="object",lM=t=>t===!0||t===!1,lf=t=>{if(sh(t)!=="object")return!1;const e=my(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ww in t)&&!(ah in t)},cM=t=>{if(!du(t)||uu(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},uM=qi("Date"),dM=qi("File"),fM=qi("Blob"),hM=qi("FileList"),mM=t=>du(t)&&Nn(t.pipe),pM=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Nn(t.append)&&((e=sh(t))==="formdata"||e==="object"&&Nn(t.toString)&&t.toString()==="[object FormData]"))},gM=qi("URLSearchParams"),[vM,yM,bM,SM]=["ReadableStream","Request","Response","Headers"].map(qi),TM=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,a;if(typeof t!="object"&&(t=[t]),pl(t))for(i=0,a=t.length;i<a;i++)e.call(null,t[i],i,t);else{if(uu(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let u;for(i=0;i<l;i++)u=o[i],e.call(null,t[u],u,t)}}function Jw(t,e){if(uu(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i=n.length,a;for(;i-- >0;)if(a=n[i],e===a.toLowerCase())return a;return null}const ws=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zw=t=>!tl(t)&&t!==ws;function Jg(){const{caseless:t,skipUndefined:e}=Zw(this)&&this||{},n={},i=(a,o)=>{const l=t&&Jw(n,o)||o;lf(n[l])&&lf(a)?n[l]=Jg(n[l],a):lf(a)?n[l]=Jg({},a):pl(a)?n[l]=a.slice():(!e||!tl(a))&&(n[l]=a)};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&fu(arguments[a],i);return n}const EM=(t,e,n,{allOwnKeys:i}={})=>(fu(e,(a,o)=>{n&&Nn(a)?t[o]=Yw(a,n):t[o]=a},{allOwnKeys:i}),t),CM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),kM=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},wM=(t,e,n,i)=>{let a,o,l;const u={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)l=a[o],(!i||i(l,t,e))&&!u[l]&&(e[l]=t[l],u[l]=!0);t=n!==!1&&my(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},_M=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},xM=t=>{if(!t)return null;if(pl(t))return t;let e=t.length;if(!Qw(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},RM=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&my(Uint8Array)),AM=(t,e)=>{const i=(t&&t[ah]).call(t);let a;for(;(a=i.next())&&!a.done;){const o=a.value;e.call(t,o[0],o[1])}},OM=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},NM=qi("HTMLFormElement"),DM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),xE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),PM=qi("RegExp"),e_=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};fu(n,(a,o)=>{let l;(l=e(a,o,t))!==!1&&(i[o]=l||a)}),Object.defineProperties(t,i)},MM=t=>{e_(t,(e,n)=>{if(Nn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Nn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},LM=(t,e)=>{const n={},i=a=>{a.forEach(o=>{n[o]=!0})};return pl(t)?i(t):i(String(t).split(e)),n},IM=()=>{},jM=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function UM(t){return!!(t&&Nn(t.append)&&t[Ww]==="FormData"&&t[ah])}const BM=t=>{const e=new Array(10),n=(i,a)=>{if(du(i)){if(e.indexOf(i)>=0)return;if(uu(i))return i;if(!("toJSON"in i)){e[a]=i;const o=pl(i)?[]:{};return fu(i,(l,u)=>{const d=n(l,a+1);!tl(d)&&(o[u]=d)}),e[a]=void 0,o}}return i};return n(t,0)},zM=qi("AsyncFunction"),FM=t=>t&&(du(t)||Nn(t))&&Nn(t.then)&&Nn(t.catch),t_=((t,e)=>t?setImmediate:e?((n,i)=>(ws.addEventListener("message",({source:a,data:o})=>{a===ws&&o===n&&i.length&&i.shift()()},!1),a=>{i.push(a),ws.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Nn(ws.postMessage)),VM=typeof queueMicrotask<"u"?queueMicrotask.bind(ws):typeof process<"u"&&process.nextTick||t_,HM=t=>t!=null&&Nn(t[ah]),ee={isArray:pl,isArrayBuffer:Xw,isBuffer:uu,isFormData:pM,isArrayBufferView:sM,isString:oM,isNumber:Qw,isBoolean:lM,isObject:du,isPlainObject:lf,isEmptyObject:cM,isReadableStream:vM,isRequest:yM,isResponse:bM,isHeaders:SM,isUndefined:tl,isDate:uM,isFile:dM,isBlob:fM,isRegExp:PM,isFunction:Nn,isStream:mM,isURLSearchParams:gM,isTypedArray:RM,isFileList:hM,forEach:fu,merge:Jg,extend:EM,trim:TM,stripBOM:CM,inherits:kM,toFlatObject:wM,kindOf:sh,kindOfTest:qi,endsWith:_M,toArray:xM,forEachEntry:AM,matchAll:OM,isHTMLForm:NM,hasOwnProperty:xE,hasOwnProp:xE,reduceDescriptors:e_,freezeMethods:MM,toObjectSet:LM,toCamelCase:DM,noop:IM,toFiniteNumber:jM,findKey:Jw,global:ws,isContextDefined:Zw,isSpecCompliantForm:UM,toJSONObject:BM,isAsyncFn:zM,isThenable:FM,setImmediate:t_,asap:VM,isIterable:HM};function He(t,e,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}ee.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const n_=He.prototype,i_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{i_[t]={value:t}});Object.defineProperties(He,i_);Object.defineProperty(n_,"isAxiosError",{value:!0});He.from=(t,e,n,i,a,o)=>{const l=Object.create(n_);ee.toFlatObject(t,l,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const u=t&&t.message?t.message:"Error",d=e==null&&t?t.code:e;return He.call(l,u,d,n,i,a),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",o&&Object.assign(l,o),l};const qM=null;function Zg(t){return ee.isPlainObject(t)||ee.isArray(t)}function r_(t){return ee.endsWith(t,"[]")?t.slice(0,-2):t}function RE(t,e,n){return t?t.concat(e).map(function(a,o){return a=r_(a),!n&&o?"["+a+"]":a}).join(n?".":""):e}function $M(t){return ee.isArray(t)&&!t.some(Zg)}const GM=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function lh(t,e,n){if(!ee.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ee.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,w){return!ee.isUndefined(w[C])});const i=n.metaTokens,a=n.visitor||m,o=n.dots,l=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(a))throw new TypeError("visitor must be a function");function h(E){if(E===null)return"";if(ee.isDate(E))return E.toISOString();if(ee.isBoolean(E))return E.toString();if(!d&&ee.isBlob(E))throw new He("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(E)||ee.isTypedArray(E)?d&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function m(E,C,w){let _=E;if(E&&!w&&typeof E=="object"){if(ee.endsWith(C,"{}"))C=i?C:C.slice(0,-2),E=JSON.stringify(E);else if(ee.isArray(E)&&$M(E)||(ee.isFileList(E)||ee.endsWith(C,"[]"))&&(_=ee.toArray(E)))return C=r_(C),_.forEach(function(D,O){!(ee.isUndefined(D)||D===null)&&e.append(l===!0?RE([C],O,o):l===null?C:C+"[]",h(D))}),!1}return Zg(E)?!0:(e.append(RE(w,C,o),h(E)),!1)}const g=[],y=Object.assign(GM,{defaultVisitor:m,convertValue:h,isVisitable:Zg});function T(E,C){if(!ee.isUndefined(E)){if(g.indexOf(E)!==-1)throw Error("Circular reference detected in "+C.join("."));g.push(E),ee.forEach(E,function(_,N){(!(ee.isUndefined(_)||_===null)&&a.call(e,_,ee.isString(N)?N.trim():N,C,y))===!0&&T(_,C?C.concat(N):[N])}),g.pop()}}if(!ee.isObject(t))throw new TypeError("data must be an object");return T(t),e}function AE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function py(t,e){this._pairs=[],t&&lh(t,this,e)}const a_=py.prototype;a_.append=function(e,n){this._pairs.push([e,n])};a_.toString=function(e){const n=e?function(i){return e.call(this,i,AE)}:AE;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function KM(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function s_(t,e,n){if(!e)return t;const i=n&&n.encode||KM;ee.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(a?o=a(e,n):o=ee.isURLSearchParams(e)?e.toString():new py(e,n).toString(i),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class OE{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(i){i!==null&&e(i)})}}const o_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YM=typeof URLSearchParams<"u"?URLSearchParams:py,WM=typeof FormData<"u"?FormData:null,XM=typeof Blob<"u"?Blob:null,QM={isBrowser:!0,classes:{URLSearchParams:YM,FormData:WM,Blob:XM},protocols:["http","https","file","blob","url","data"]},gy=typeof window<"u"&&typeof document<"u",ev=typeof navigator=="object"&&navigator||void 0,JM=gy&&(!ev||["ReactNative","NativeScript","NS"].indexOf(ev.product)<0),ZM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eL=gy&&window.location.href||"http://localhost",tL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gy,hasStandardBrowserEnv:JM,hasStandardBrowserWebWorkerEnv:ZM,navigator:ev,origin:eL},Symbol.toStringTag,{value:"Module"})),pn={...tL,...QM};function nL(t,e){return lh(t,new pn.classes.URLSearchParams,{visitor:function(n,i,a,o){return pn.isNode&&ee.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function iL(t){return ee.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rL(t){const e={},n=Object.keys(t);let i;const a=n.length;let o;for(i=0;i<a;i++)o=n[i],e[o]=t[o];return e}function l_(t){function e(n,i,a,o){let l=n[o++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=o>=n.length;return l=!l&&ee.isArray(a)?a.length:l,d?(ee.hasOwnProp(a,l)?a[l]=[a[l],i]:a[l]=i,!u):((!a[l]||!ee.isObject(a[l]))&&(a[l]=[]),e(n,i,a[l],o)&&ee.isArray(a[l])&&(a[l]=rL(a[l])),!u)}if(ee.isFormData(t)&&ee.isFunction(t.entries)){const n={};return ee.forEachEntry(t,(i,a)=>{e(iL(i),a,n,0)}),n}return null}function aL(t,e,n){if(ee.isString(t))try{return(e||JSON.parse)(t),ee.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const hu={transitional:o_,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,o=ee.isObject(e);if(o&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return a?JSON.stringify(l_(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return nL(e,this.formSerializer).toString();if((u=ee.isFileList(e))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return lh(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return o||a?(n.setContentType("application/json",!1),aL(e)):e}],transformResponse:[function(e){const n=this.transitional||hu.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(i&&!this.responseType||a)){const l=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(u){if(l)throw u.name==="SyntaxError"?He.from(u,He.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],t=>{hu.headers[t]={}});const sL=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oL=t=>{const e={};let n,i,a;return t&&t.split(`
`).forEach(function(l){a=l.indexOf(":"),n=l.substring(0,a).trim().toLowerCase(),i=l.substring(a+1).trim(),!(!n||e[n]&&sL[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},NE=Symbol("internals");function xc(t){return t&&String(t).trim().toLowerCase()}function cf(t){return t===!1||t==null?t:ee.isArray(t)?t.map(cf):String(t)}function lL(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const cL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Xp(t,e,n,i,a){if(ee.isFunction(i))return i.call(this,e,n);if(a&&(e=n),!!ee.isString(e)){if(ee.isString(i))return e.indexOf(i)!==-1;if(ee.isRegExp(i))return i.test(e)}}function uL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function dL(t,e){const n=ee.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(a,o,l){return this[i].call(this,e,a,o,l)},configurable:!0})})}let Dn=class{constructor(e){e&&this.set(e)}set(e,n,i){const a=this;function o(u,d,h){const m=xc(d);if(!m)throw new Error("header name must be a non-empty string");const g=ee.findKey(a,m);(!g||a[g]===void 0||h===!0||h===void 0&&a[g]!==!1)&&(a[g||d]=cf(u))}const l=(u,d)=>ee.forEach(u,(h,m)=>o(h,m,d));if(ee.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(ee.isString(e)&&(e=e.trim())&&!cL(e))l(oL(e),n);else if(ee.isObject(e)&&ee.isIterable(e)){let u={},d,h;for(const m of e){if(!ee.isArray(m))throw TypeError("Object iterator must return a key-value pair");u[h=m[0]]=(d=u[h])?ee.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}l(u,n)}else e!=null&&o(n,e,i);return this}get(e,n){if(e=xc(e),e){const i=ee.findKey(this,e);if(i){const a=this[i];if(!n)return a;if(n===!0)return lL(a);if(ee.isFunction(n))return n.call(this,a,i);if(ee.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=xc(e),e){const i=ee.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Xp(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let a=!1;function o(l){if(l=xc(l),l){const u=ee.findKey(i,l);u&&(!n||Xp(i,i[u],u,n))&&(delete i[u],a=!0)}}return ee.isArray(e)?e.forEach(o):o(e),a}clear(e){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const o=n[i];(!e||Xp(this,this[o],o,e,!0))&&(delete this[o],a=!0)}return a}normalize(e){const n=this,i={};return ee.forEach(this,(a,o)=>{const l=ee.findKey(i,o);if(l){n[l]=cf(a),delete n[o];return}const u=e?uL(o):String(o).trim();u!==o&&delete n[o],n[u]=cf(a),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ee.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=e&&ee.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[NE]=this[NE]={accessors:{}}).accessors,a=this.prototype;function o(l){const u=xc(l);i[u]||(dL(a,l),i[u]=!0)}return ee.isArray(e)?e.forEach(o):o(e),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Dn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});ee.freezeMethods(Dn);function Qp(t,e){const n=this||hu,i=e||n,a=Dn.from(i.headers);let o=i.data;return ee.forEach(t,function(u){o=u.call(n,o,a.normalize(),e?e.status:void 0)}),a.normalize(),o}function c_(t){return!!(t&&t.__CANCEL__)}function gl(t,e,n){He.call(this,t??"canceled",He.ERR_CANCELED,e,n),this.name="CanceledError"}ee.inherits(gl,He,{__CANCEL__:!0});function u_(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new He("Request failed with status code "+n.status,[He.ERR_BAD_REQUEST,He.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function fL(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function hL(t,e){t=t||10;const n=new Array(t),i=new Array(t);let a=0,o=0,l;return e=e!==void 0?e:1e3,function(d){const h=Date.now(),m=i[o];l||(l=h),n[a]=d,i[a]=h;let g=o,y=0;for(;g!==a;)y+=n[g++],g=g%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),h-l<e)return;const T=m&&h-m;return T?Math.round(y*1e3/T):void 0}}function mL(t,e){let n=0,i=1e3/e,a,o;const l=(h,m=Date.now())=>{n=m,a=null,o&&(clearTimeout(o),o=null),t(...h)};return[(...h)=>{const m=Date.now(),g=m-n;g>=i?l(h,m):(a=h,o||(o=setTimeout(()=>{o=null,l(a)},i-g)))},()=>a&&l(a)]}const Nf=(t,e,n=3)=>{let i=0;const a=hL(50,250);return mL(o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,d=l-i,h=a(d),m=l<=u;i=l;const g={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:h||void 0,estimated:h&&u&&m?(u-l)/h:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(g)},n)},DE=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},PE=t=>(...e)=>ee.asap(()=>t(...e)),pL=pn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,pn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(pn.origin),pn.navigator&&/(msie|trident)/i.test(pn.navigator.userAgent)):()=>!0,gL=pn.hasStandardBrowserEnv?{write(t,e,n,i,a,o){const l=[t+"="+encodeURIComponent(e)];ee.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),ee.isString(i)&&l.push("path="+i),ee.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yL(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function d_(t,e,n){let i=!vL(e);return t&&(i||n==!1)?yL(t,e):e}const ME=t=>t instanceof Dn?{...t}:t;function Ps(t,e){e=e||{};const n={};function i(h,m,g,y){return ee.isPlainObject(h)&&ee.isPlainObject(m)?ee.merge.call({caseless:y},h,m):ee.isPlainObject(m)?ee.merge({},m):ee.isArray(m)?m.slice():m}function a(h,m,g,y){if(ee.isUndefined(m)){if(!ee.isUndefined(h))return i(void 0,h,g,y)}else return i(h,m,g,y)}function o(h,m){if(!ee.isUndefined(m))return i(void 0,m)}function l(h,m){if(ee.isUndefined(m)){if(!ee.isUndefined(h))return i(void 0,h)}else return i(void 0,m)}function u(h,m,g){if(g in e)return i(h,m);if(g in t)return i(void 0,h)}const d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(h,m,g)=>a(ME(h),ME(m),g,!0)};return ee.forEach(Object.keys({...t,...e}),function(m){const g=d[m]||a,y=g(t[m],e[m],m);ee.isUndefined(y)&&g!==u||(n[m]=y)}),n}const f_=t=>{const e=Ps({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:o,headers:l,auth:u}=e;if(e.headers=l=Dn.from(l),e.url=s_(d_(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),ee.isFormData(n)){if(pn.hasStandardBrowserEnv||pn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ee.isFunction(n.getHeaders)){const d=n.getHeaders(),h=["content-type","content-length"];Object.entries(d).forEach(([m,g])=>{h.includes(m.toLowerCase())&&l.set(m,g)})}}if(pn.hasStandardBrowserEnv&&(i&&ee.isFunction(i)&&(i=i(e)),i||i!==!1&&pL(e.url))){const d=a&&o&&gL.read(o);d&&l.set(a,d)}return e},bL=typeof XMLHttpRequest<"u",SL=bL&&function(t){return new Promise(function(n,i){const a=f_(t);let o=a.data;const l=Dn.from(a.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:h}=a,m,g,y,T,E;function C(){T&&T(),E&&E(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function _(){if(!w)return;const D=Dn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),R={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:D,config:t,request:w};u_(function(B){n(B),C()},function(B){i(B),C()},R),w=null}"onloadend"in w?w.onloadend=_:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(_)},w.onabort=function(){w&&(i(new He("Request aborted",He.ECONNABORTED,t,w)),w=null)},w.onerror=function(O){const R=O&&O.message?O.message:"Network Error",x=new He(R,He.ERR_NETWORK,t,w);x.event=O||null,i(x),w=null},w.ontimeout=function(){let O=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const R=a.transitional||o_;a.timeoutErrorMessage&&(O=a.timeoutErrorMessage),i(new He(O,R.clarifyTimeoutError?He.ETIMEDOUT:He.ECONNABORTED,t,w)),w=null},o===void 0&&l.setContentType(null),"setRequestHeader"in w&&ee.forEach(l.toJSON(),function(O,R){w.setRequestHeader(R,O)}),ee.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),u&&u!=="json"&&(w.responseType=a.responseType),h&&([y,E]=Nf(h,!0),w.addEventListener("progress",y)),d&&w.upload&&([g,T]=Nf(d),w.upload.addEventListener("progress",g),w.upload.addEventListener("loadend",T)),(a.cancelToken||a.signal)&&(m=D=>{w&&(i(!D||D.type?new gl(null,t,w):D),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const N=fL(a.url);if(N&&pn.protocols.indexOf(N)===-1){i(new He("Unsupported protocol "+N+":",He.ERR_BAD_REQUEST,t));return}w.send(o||null)})},TL=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,a;const o=function(h){if(!a){a=!0,u();const m=h instanceof Error?h:this.reason;i.abort(m instanceof He?m:new gl(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,o(new He(`timeout ${e} of ms exceeded`,He.ETIMEDOUT))},e);const u=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),t=null)};t.forEach(h=>h.addEventListener("abort",o));const{signal:d}=i;return d.unsubscribe=()=>ee.asap(u),d}},EL=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,a;for(;i<n;)a=i+e,yield t.slice(i,a),i=a},CL=async function*(t,e){for await(const n of kL(t))yield*EL(n,e)},kL=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},LE=(t,e,n,i)=>{const a=CL(t,e);let o=0,l,u=d=>{l||(l=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:h,value:m}=await a.next();if(h){u(),d.close();return}let g=m.byteLength;if(n){let y=o+=g;n(y)}d.enqueue(new Uint8Array(m))}catch(h){throw u(h),h}},cancel(d){return u(d),a.return()}},{highWaterMark:2})},IE=64*1024,{isFunction:Fd}=ee,wL=(({Request:t,Response:e})=>({Request:t,Response:e}))(ee.global),{ReadableStream:jE,TextEncoder:UE}=ee.global,BE=(t,...e)=>{try{return!!t(...e)}catch{return!1}},_L=t=>{t=ee.merge.call({skipUndefined:!0},wL,t);const{fetch:e,Request:n,Response:i}=t,a=e?Fd(e):typeof fetch=="function",o=Fd(n),l=Fd(i);if(!a)return!1;const u=a&&Fd(jE),d=a&&(typeof UE=="function"?(E=>C=>E.encode(C))(new UE):async E=>new Uint8Array(await new n(E).arrayBuffer())),h=o&&u&&BE(()=>{let E=!1;const C=new n(pn.origin,{body:new jE,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!C}),m=l&&u&&BE(()=>ee.isReadableStream(new i("").body)),g={stream:m&&(E=>E.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!g[E]&&(g[E]=(C,w)=>{let _=C&&C[E];if(_)return _.call(C);throw new He(`Response type '${E}' is not supported`,He.ERR_NOT_SUPPORT,w)})});const y=async E=>{if(E==null)return 0;if(ee.isBlob(E))return E.size;if(ee.isSpecCompliantForm(E))return(await new n(pn.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(E)||ee.isArrayBuffer(E))return E.byteLength;if(ee.isURLSearchParams(E)&&(E=E+""),ee.isString(E))return(await d(E)).byteLength},T=async(E,C)=>{const w=ee.toFiniteNumber(E.getContentLength());return w??y(C)};return async E=>{let{url:C,method:w,data:_,signal:N,cancelToken:D,timeout:O,onDownloadProgress:R,onUploadProgress:x,responseType:B,headers:M,withCredentials:P="same-origin",fetchOptions:z}=f_(E),q=e||fetch;B=B?(B+"").toLowerCase():"text";let re=TL([N,D&&D.toAbortSignal()],O),fe=null;const ye=re&&re.unsubscribe&&(()=>{re.unsubscribe()});let we;try{if(x&&h&&w!=="get"&&w!=="head"&&(we=await T(M,_))!==0){let ne=new n(C,{method:"POST",body:_,duplex:"half"}),he;if(ee.isFormData(_)&&(he=ne.headers.get("content-type"))&&M.setContentType(he),ne.body){const[le,ge]=DE(we,Nf(PE(x)));_=LE(ne.body,IE,le,ge)}}ee.isString(P)||(P=P?"include":"omit");const F=o&&"credentials"in n.prototype,se={...z,signal:re,method:w.toUpperCase(),headers:M.normalize().toJSON(),body:_,duplex:"half",credentials:F?P:void 0};fe=o&&new n(C,se);let Q=await(o?q(fe,z):q(C,se));const Se=m&&(B==="stream"||B==="response");if(m&&(R||Se&&ye)){const ne={};["status","statusText","headers"].forEach(Oe=>{ne[Oe]=Q[Oe]});const he=ee.toFiniteNumber(Q.headers.get("content-length")),[le,ge]=R&&DE(he,Nf(PE(R),!0))||[];Q=new i(LE(Q.body,IE,le,()=>{ge&&ge(),ye&&ye()}),ne)}B=B||"text";let L=await g[ee.findKey(g,B)||"text"](Q,E);return!Se&&ye&&ye(),await new Promise((ne,he)=>{u_(ne,he,{data:L,headers:Dn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:E,request:fe})})}catch(F){throw ye&&ye(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new He("Network Error",He.ERR_NETWORK,E,fe),{cause:F.cause||F}):He.from(F,F&&F.code,E,fe)}}},xL=new Map,h_=t=>{let e=t?t.env:{};const{fetch:n,Request:i,Response:a}=e,o=[i,a,n];let l=o.length,u=l,d,h,m=xL;for(;u--;)d=o[u],h=m.get(d),h===void 0&&m.set(d,h=u?new Map:_L(e)),m=h;return h};h_();const tv={http:qM,xhr:SL,fetch:{get:h_}};ee.forEach(tv,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zE=t=>`- ${t}`,RL=t=>ee.isFunction(t)||t===null||t===!1,m_={getAdapter:(t,e)=>{t=ee.isArray(t)?t:[t];const{length:n}=t;let i,a;const o={};for(let l=0;l<n;l++){i=t[l];let u;if(a=i,!RL(i)&&(a=tv[(u=String(i)).toLowerCase()],a===void 0))throw new He(`Unknown adapter '${u}'`);if(a&&(ee.isFunction(a)||(a=a.get(e))))break;o[u||"#"+l]=a}if(!a){const l=Object.entries(o).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=n?l.length>1?`since :
`+l.map(zE).join(`
`):" "+zE(l[0]):"as no adapter specified";throw new He("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return a},adapters:tv};function Jp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gl(null,t)}function FE(t){return Jp(t),t.headers=Dn.from(t.headers),t.data=Qp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),m_.getAdapter(t.adapter||hu.adapter,t)(t).then(function(i){return Jp(t),i.data=Qp.call(t,t.transformResponse,i),i.headers=Dn.from(i.headers),i},function(i){return c_(i)||(Jp(t),i&&i.response&&(i.response.data=Qp.call(t,t.transformResponse,i.response),i.response.headers=Dn.from(i.response.headers))),Promise.reject(i)})}const p_="1.12.2",ch={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ch[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const VE={};ch.transitional=function(e,n,i){function a(o,l){return"[Axios v"+p_+"] Transitional option '"+o+"'"+l+(i?". "+i:"")}return(o,l,u)=>{if(e===!1)throw new He(a(l," has been removed"+(n?" in "+n:"")),He.ERR_DEPRECATED);return n&&!VE[l]&&(VE[l]=!0,console.warn(a(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,l,u):!0}};ch.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function AL(t,e,n){if(typeof t!="object")throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let a=i.length;for(;a-- >0;){const o=i[a],l=e[o];if(l){const u=t[o],d=u===void 0||l(u,o,t);if(d!==!0)throw new He("option "+o+" must be "+d,He.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new He("Unknown option "+o,He.ERR_BAD_OPTION)}}const uf={assertOptions:AL,validators:ch},nr=uf.validators;let Rs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new OE,response:new OE}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ps(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:o}=n;i!==void 0&&uf.assertOptions(i,{silentJSONParsing:nr.transitional(nr.boolean),forcedJSONParsing:nr.transitional(nr.boolean),clarifyTimeoutError:nr.transitional(nr.boolean)},!1),a!=null&&(ee.isFunction(a)?n.paramsSerializer={serialize:a}:uf.assertOptions(a,{encode:nr.function,serialize:nr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),uf.assertOptions(n,{baseUrl:nr.spelling("baseURL"),withXsrfToken:nr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=o&&ee.merge(o.common,o[n.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),n.headers=Dn.concat(l,o);const u=[];let d=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(d=d&&C.synchronous,u.unshift(C.fulfilled,C.rejected))});const h=[];this.interceptors.response.forEach(function(C){h.push(C.fulfilled,C.rejected)});let m,g=0,y;if(!d){const E=[FE.bind(this),void 0];for(E.unshift(...u),E.push(...h),y=E.length,m=Promise.resolve(n);g<y;)m=m.then(E[g++],E[g++]);return m}y=u.length;let T=n;for(;g<y;){const E=u[g++],C=u[g++];try{T=E(T)}catch(w){C.call(this,w);break}}try{m=FE.call(this,T)}catch(E){return Promise.reject(E)}for(g=0,y=h.length;g<y;)m=m.then(h[g++],h[g++]);return m}getUri(e){e=Ps(this.defaults,e);const n=d_(e.baseURL,e.url,e.allowAbsoluteUrls);return s_(n,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){Rs.prototype[e]=function(n,i){return this.request(Ps(i||{},{method:e,url:n,data:(i||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function n(i){return function(o,l,u){return this.request(Ps(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Rs.prototype[e]=n(),Rs.prototype[e+"Form"]=n(!0)});let OL=class g_{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(a=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](a);i._listeners=null}),this.promise.then=a=>{let o;const l=new Promise(u=>{i.subscribe(u),o=u}).then(a);return l.cancel=function(){i.unsubscribe(o)},l},e(function(o,l,u){i.reason||(i.reason=new gl(o,l,u),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new g_(function(a){e=a}),cancel:e}}};function NL(t){return function(n){return t.apply(null,n)}}function DL(t){return ee.isObject(t)&&t.isAxiosError===!0}const nv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nv).forEach(([t,e])=>{nv[e]=t});function v_(t){const e=new Rs(t),n=Yw(Rs.prototype.request,e);return ee.extend(n,Rs.prototype,e,{allOwnKeys:!0}),ee.extend(n,e,null,{allOwnKeys:!0}),n.create=function(a){return v_(Ps(t,a))},n}const Lt=v_(hu);Lt.Axios=Rs;Lt.CanceledError=gl;Lt.CancelToken=OL;Lt.isCancel=c_;Lt.VERSION=p_;Lt.toFormData=lh;Lt.AxiosError=He;Lt.Cancel=Lt.CanceledError;Lt.all=function(e){return Promise.all(e)};Lt.spread=NL;Lt.isAxiosError=DL;Lt.mergeConfig=Ps;Lt.AxiosHeaders=Dn;Lt.formToJSON=t=>l_(ee.isHTMLForm(t)?new FormData(t):t);Lt.getAdapter=m_.getAdapter;Lt.HttpStatusCode=nv;Lt.default=Lt;const{Axios:MH,AxiosError:LH,CanceledError:IH,isCancel:jH,CancelToken:UH,VERSION:BH,all:zH,Cancel:FH,isAxiosError:VH,spread:HH,toFormData:qH,AxiosHeaders:$H,HttpStatusCode:GH,formToJSON:KH,getAdapter:YH,mergeConfig:WH}=Lt,PL="/api",ML="/api",LL=Lt.create({baseURL:ML,withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"});LL.interceptors.response.use(t=>t.data);const Zn=Lt.create({baseURL:PL,withCredentials:!1,headers:{Accept:"application/json"}});Zn.interceptors.response.use(t=>t.data);const iv="ADMIN_TOKEN";function Df(t){t?localStorage.setItem(iv,t):localStorage.removeItem(iv),Zn.defaults.headers.common.Authorization=t?`Bearer ${t}`:void 0}Df(localStorage.getItem(iv));const HE={login(t,e){return Zn.post("/auth/token",{email:t,password:e})},me(){return Zn.get("/whoami")}};function IL(t){return new Proxy(t,{set(e,n,i){return e[n]=i,queueMicrotask(()=>document.querySelectorAll("[data-bind]").forEach(a=>a.dispatchEvent(new CustomEvent("bind:update")))),!0}})}const qE={brandName:"Regal",logoUrl:"",heroTitle:"",heroSubtitle:"URLLiveKit",heroImageUrl:"",accentHex:"#4f46e5"};function jL(){try{const t=localStorage.getItem("_site_settings");if(t)return{...qE,...JSON.parse(t)}}catch{}return qE}function UL(t){localStorage.setItem("_site_settings",JSON.stringify(t))}function y_(){const t=IL({...jL(),overwrite:e=>{UL(e),Object.assign(t,e),document.documentElement.style.setProperty("--accent",e.accentHex||"#4f46e5")},export:()=>({brandName:t.brandName,logoUrl:t.logoUrl,heroTitle:t.heroTitle,heroSubtitle:t.heroSubtitle,heroImageUrl:t.heroImageUrl,accentHex:t.accentHex})});return document.documentElement.style.setProperty("--accent",t.accentHex||"#4f46e5"),t}function BL(){const t=y_();return S.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-white to-slate-50 text-slate-800",children:[S.jsx("main",{className:"flex-1",children:S.jsx(dy,{})}),S.jsx("footer",{className:"mt-14 border-t border-slate-200/70",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10 text-sm text-slate-500 flex flex-col md:flex-row items-center justify-between gap-3",children:[S.jsxs("p",{children:[" ",new Date().getFullYear()," ",t.brandName||"Regal",". All rights reserved."]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("a",{className:"hover:text-slate-700",href:"#",children:""}),S.jsx("a",{className:"hover:text-slate-700",href:"#",children:""}),S.jsx("a",{className:"hover:text-slate-700",href:"#",children:""})]})]})})]})}var $E={};function zL(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var a=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var FL=Object.defineProperty,VL=(t,e,n)=>e in t?FL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GE=(t,e,n)=>VL(t,typeof e!="symbol"?e+"":e,n);class Pn{constructor(){GE(this,"_locking"),GE(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(a=>e=()=>{this._locks-=1,a()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}}function Dt(t,e){if(!t)throw new Error(e)}const HL=34028234663852886e22,qL=-34028234663852886e22,$L=4294967295,GL=2147483647,KL=-2147483648;function df(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>GL||t<KL)throw new Error("invalid int 32: "+t)}function rv(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>$L||t<0)throw new Error("invalid uint 32: "+t)}function b_(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>HL||t<qL))throw new Error("invalid float 32: "+t)}const S_=Symbol("@bufbuild/protobuf/enum-type");function YL(t){const e=t[S_];return Dt(e,"missing enum type on enum object"),e}function T_(t,e,n,i){t[S_]=E_(e,n.map(a=>({no:a.no,name:a.name,localName:t[a.no]})))}function E_(t,e,n){const i=Object.create(null),a=Object.create(null),o=[];for(const l of e){const u=C_(l);o.push(u),i[l.name]=u,a[l.no]=u}return{typeName:t,values:o,findName(l){return i[l]},findNumber(l){return a[l]}}}function WL(t,e,n){const i={};for(const a of e){const o=C_(a);i[o.localName]=o.no,i[o.no]=o.localName}return T_(i,t,e),i}function C_(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class vy{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),a=i.runtime.bin,o=a.makeReadOptions(n);return a.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const i=this.getType(),a=i.runtime.json,o=a.makeReadOptions(n);return a.readMessage(i,e,o,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(a){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(a instanceof Error?a.message:String(a)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,a=i.makeWriteOptions(e),o=a.writerFactory();return i.writeMessage(this,o,a),o.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,a=i.makeWriteOptions(e);return i.writeMessage(this,a)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function XL(t,e,n,i){var a;const o=(a=i?.localName)!==null&&a!==void 0?a:e.substring(e.lastIndexOf(".")+1),l={[o]:function(u){t.util.initFields(this),t.util.initPartial(u,this)}}[o];return Object.setPrototypeOf(l.prototype,new vy),Object.assign(l,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(u,d){return new l().fromBinary(u,d)},fromJson(u,d){return new l().fromJson(u,d)},fromJsonString(u,d){return new l().fromJsonString(u,d)},equals(u,d){return t.util.equals(l,u,d)}}),l}function QL(){let t=0,e=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Zp(t,e,n){for(let o=0;o<28;o=o+7){const l=t>>>o,u=!(!(l>>>7)&&e==0),d=(u?l|128:l)&255;if(n.push(d),!u)return}const i=t>>>28&15|(e&7)<<4,a=e>>3!=0;if(n.push((a?i|128:i)&255),!!a){for(let o=3;o<31;o=o+7){const l=e>>>o,u=!!(l>>>7),d=(u?l|128:l)&255;if(n.push(d),!u)return}n.push(e>>>31&1)}}const ff=4294967296;function KE(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,a=0;function o(l,u){const d=Number(t.slice(l,u));a*=n,i=i*n+d,i>=ff&&(a=a+(i/ff|0),i=i%ff)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?w_(i,a):yy(i,a)}function JL(t,e){let n=yy(t,e);const i=n.hi&2147483648;i&&(n=w_(n.lo,n.hi));const a=k_(n.lo,n.hi);return i?"-"+a:a}function k_(t,e){if({lo:t,hi:e}=ZL(t,e),e<=2097151)return String(ff*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,a=e>>16&65535;let o=n+i*6777216+a*6710656,l=i+a*8147497,u=a*2;const d=1e7;return o>=d&&(l+=Math.floor(o/d),o%=d),l>=d&&(u+=Math.floor(l/d),l%=d),u.toString()+YE(l)+YE(o)}function ZL(t,e){return{lo:t>>>0,hi:e>>>0}}function yy(t,e){return{lo:t|0,hi:e|0}}function w_(t,e){return e=~e,t?t=~t+1:e+=1,yy(t,e)}const YE=t=>{const e=String(t);return"0000000".slice(e.length)+e};function WE(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function e5(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function t5(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof $E!="object"||$E.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),l=BigInt("0"),u=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>o||h<a)throw new Error("int64 invalid: ".concat(d));return h},uParse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>u||h<l)throw new Error("uint64 invalid: ".concat(d));return h},enc(d){return t.setBigInt64(0,this.parse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(d){return t.setBigInt64(0,this.uParse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(d,h){return t.setInt32(0,d,!0),t.setInt32(4,h,!0),t.getBigInt64(0,!0)},uDec(d,h){return t.setInt32(0,d,!0),t.setInt32(4,h,!0),t.getBigUint64(0,!0)}}}const n=a=>Dt(/^-?[0-9]+$/.test(a),"int64 invalid: ".concat(a)),i=a=>Dt(/^[0-9]+$/.test(a),"uint64 invalid: ".concat(a));return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),n(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),n(a),KE(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),KE(a)},dec(a,o){return JL(a,o)},uDec(a,o){return k_(a,o)}}}const wt=t5();var de;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(de||(de={}));var Fa;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Fa||(Fa={}));function _a(t,e,n){if(e===n)return!0;if(t==de.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case de.UINT64:case de.FIXED64:case de.INT64:case de.SFIXED64:case de.SINT64:return e==n}return!1}function nl(t,e){switch(t){case de.BOOL:return!1;case de.UINT64:case de.FIXED64:case de.INT64:case de.SFIXED64:case de.SINT64:return e==0?wt.zero:"0";case de.DOUBLE:case de.FLOAT:return 0;case de.BYTES:return new Uint8Array(0);case de.STRING:return"";default:return 0}}function __(t,e){switch(t){case de.BOOL:return e===!1;case de.STRING:return e==="";case de.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Ut;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Ut||(Ut={}));class n5{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let a=0;a<this.chunks.length;a++)e+=this.chunks[a].length;let n=new Uint8Array(e),i=0;for(let a=0;a<this.chunks.length;a++)n.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(rv(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return df(e),WE(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){b_(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){rv(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){df(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return df(e),e=(e<<1^e>>31)>>>0,WE(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),a=wt.enc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),a=wt.uEnc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(n)}int64(e){let n=wt.enc(e);return Zp(n.lo,n.hi,this.buf),this}sint64(e){let n=wt.enc(e),i=n.hi>>31,a=n.lo<<1^i,o=(n.hi<<1|n.lo>>>31)^i;return Zp(a,o,this.buf),this}uint64(e){let n=wt.uEnc(e);return Zp(n.lo,n.hi,this.buf),this}}class i5{constructor(e,n){this.varint64=QL,this.uint32=e5,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case Ut.Varint:for(;this.buf[this.pos++]&128;);break;case Ut.Bit64:this.pos+=4;case Ut.Bit32:this.pos+=4;break;case Ut.LengthDelimited:let a=this.uint32();this.pos+=a;break;case Ut.StartGroup:for(;;){const[o,l]=this.tag();if(l===Ut.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(l,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return wt.dec(...this.varint64())}uint64(){return wt.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,wt.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return wt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return wt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function r5(t,e,n,i){let a;return{typeName:e,extendee:n,get field(){if(!a){const o=typeof i=="function"?i():i;o.name=e.split(".").pop(),o.jsonName="[".concat(e,"]"),a=t.util.newFieldList([o]).list()[0]}return a},runtime:t}}function x_(t){const e=t.field.localName,n=Object.create(null);return n[e]=a5(t),[n,()=>n[e]]}function a5(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return nl(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function s5(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let zr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),uh=[];for(let t=0;t<zr.length;t++)uh[zr[t].charCodeAt(0)]=t;uh[45]=zr.indexOf("+");uh[95]=zr.indexOf("/");const R_={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,a=0,o,l=0;for(let u=0;u<t.length;u++){if(o=uh[t.charCodeAt(u)],o===void 0)switch(t[u]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:l=o,a=1;break;case 1:n[i++]=l<<2|(o&48)>>4,l=o,a=2;break;case 2:n[i++]=(l&15)<<4|(o&60)>>2,l=o,a=3;break;case 3:n[i++]=(l&3)<<6|o,a=0;break}}if(a==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,a=0;for(let o=0;o<t.length;o++)switch(i=t[o],n){case 0:e+=zr[i>>2],a=(i&3)<<4,n=1;break;case 1:e+=zr[a|i>>4],a=(i&15)<<2,n=2;break;case 2:e+=zr[a|i>>6],e+=zr[i&63],n=0;break}return n&&(e+=zr[a],e+="=",n==1&&(e+="=")),e}};function o5(t,e,n){O_(e,t);const i=e.runtime.bin.makeReadOptions(n),a=s5(t.getType().runtime.bin.listUnknownFields(t),e.field),[o,l]=x_(e);for(const u of a)e.runtime.bin.readField(o,i.readerFactory(u.data),e.field,u.wireType,i);return l()}function l5(t,e,n,i){O_(e,t);const a=e.runtime.bin.makeReadOptions(i),o=e.runtime.bin.makeWriteOptions(i);if(A_(t,e)){const h=t.getType().runtime.bin.listUnknownFields(t).filter(m=>m.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const m of h)t.getType().runtime.bin.onUnknownField(t,m.no,m.wireType,m.data)}const l=o.writerFactory();let u=e.field;!u.opt&&!u.repeated&&(u.kind=="enum"||u.kind=="scalar")&&(u=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(u,n,l,o);const d=a.readerFactory(l.finish());for(;d.pos<d.len;){const[h,m]=d.tag(),g=d.skip(m,h);t.getType().runtime.bin.onUnknownField(t,h,m,g)}}function A_(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function O_(t,e){Dt(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function N_(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!__(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function XE(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?nl(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Fr(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(vy.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function D_(t,e){return Fr(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}de.DOUBLE,de.FLOAT,de.INT64,de.UINT64,de.INT32,de.UINT32,de.BOOL,de.STRING,de.BYTES;const QE={ignoreUnknownFields:!1},JE={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function c5(t){return t?Object.assign(Object.assign({},QE),t):QE}function u5(t){return t?Object.assign(Object.assign({},JE),t):JE}const Pf=Symbol(),hf=Symbol();function d5(){return{makeReadOptions:c5,makeWriteOptions:u5,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(rr(e)));i=i??new t;const a=new Map,o=n.typeRegistry;for(const[l,u]of Object.entries(e)){const d=t.fields.findJsonName(l);if(d){if(d.oneof){if(u===null&&d.kind=="scalar")continue;const h=a.get(d.oneof);if(h!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(d.oneof.name,'" present: "').concat(h,'", "').concat(l,'"'));a.set(d.oneof,l)}ZE(i,u,d,n,t)}else{let h=!1;if(o?.findExtension&&l.startsWith("[")&&l.endsWith("]")){const m=o.findExtension(l.substring(1,l.length-1));if(m&&m.extendee.typeName==t.typeName){h=!0;const[g,y]=x_(m);ZE(g,u,m.field,n,m),l5(i,m,y(),n)}}if(!h&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(l,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let a;try{for(a of n.fields.byNumber()){if(!N_(a,t)){if(a.req)throw"required field not set";if(!e.emitDefaultValues||!h5(a))continue}const l=a.oneof?t[a.oneof.localName].value:t[a.localName],u=eC(a,l,e);u!==void 0&&(i[e.useProtoFieldName?a.name:a.jsonName]=u)}const o=e.typeRegistry;if(o?.findExtensionFor)for(const l of n.runtime.bin.listUnknownFields(t)){const u=o.findExtensionFor(n.typeName,l.no);if(u&&A_(t,u)){const d=o5(t,u,e),h=eC(u.field,d,e);h!==void 0&&(i[u.field.jsonName]=h)}}}catch(o){const l=a?"cannot encode field ".concat(n.typeName,".").concat(a.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),u=o instanceof Error?o.message:String(o);throw new Error(l+(u.length>0?": ".concat(u):""))}return i},readScalar(t,e,n){return Hc(t,e,n??Fa.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||__(t,e)))return mf(t,e)},debug:rr}}function rr(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function ZE(t,e,n,i,a){let o=n.localName;if(n.repeated){if(Dt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(rr(e)));const l=t[o];for(const u of e){if(u===null)throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(rr(u)));switch(n.kind){case"message":l.push(n.T.fromJson(u,i));break;case"enum":const d=eg(n.T,u,i.ignoreUnknownFields,!0);d!==hf&&l.push(d);break;case"scalar":try{l.push(Hc(n.T,u,n.L,!0))}catch(h){let m="cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(rr(u));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(rr(e)));const l=t[o];for(const[u,d]of Object.entries(e)){if(d===null)throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: map value null"));let h;try{h=f5(n.K,u)}catch(m){let g="cannot decode map key for field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(rr(e));throw m instanceof Error&&m.message.length>0&&(g+=": ".concat(m.message)),new Error(g)}switch(n.V.kind){case"message":l[h]=n.V.T.fromJson(d,i);break;case"enum":const m=eg(n.V.T,d,i.ignoreUnknownFields,!0);m!==hf&&(l[h]=m);break;case"scalar":try{l[h]=Hc(n.V.T,d,Fa.BIGINT,!0)}catch(g){let y="cannot decode map value for field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(rr(e));throw g instanceof Error&&g.message.length>0&&(y+=": ".concat(g.message)),new Error(y)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const l=n.T;if(e===null&&l.typeName!="google.protobuf.Value")return;let u=t[o];Fr(u)?u.fromJson(e,i):(t[o]=u=l.fromJson(e,i),l.fieldWrapper&&!n.oneof&&(t[o]=l.fieldWrapper.unwrapField(u)));break;case"enum":const d=eg(n.T,e,i.ignoreUnknownFields,!1);switch(d){case Pf:XE(n,t);break;case hf:break;default:t[o]=d;break}break;case"scalar":try{const h=Hc(n.T,e,n.L,!1);switch(h){case Pf:XE(n,t);break;default:t[o]=h;break}}catch(h){let m="cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(rr(e));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}break}}function f5(t,e){if(t===de.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Hc(t,e,Fa.BIGINT,!0).toString()}function Hc(t,e,n,i){if(e===null)return i?nl(t,n):Pf;switch(t){case de.DOUBLE:case de.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const a=Number(e);if(Number.isNaN(a)||!Number.isFinite(a))break;return t==de.FLOAT&&b_(a),a;case de.INT32:case de.FIXED32:case de.SFIXED32:case de.SINT32:case de.UINT32:let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return t==de.UINT32||t==de.FIXED32?rv(o):df(o),o;case de.INT64:case de.SFIXED64:case de.SINT64:if(typeof e!="number"&&typeof e!="string")break;const l=wt.parse(e);return n?l.toString():l;case de.FIXED64:case de.UINT64:if(typeof e!="number"&&typeof e!="string")break;const u=wt.uParse(e);return n?u.toString():u;case de.BOOL:if(typeof e!="boolean")break;return e;case de.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case de.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return R_.dec(e)}throw new Error}function eg(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:Pf;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const a=t.findName(e);if(a!==void 0)return a.no;if(n)return hf;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(rr(e)))}function h5(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function eC(t,e,n){if(t.kind=="map"){Dt(typeof e=="object"&&e!=null);const i={},a=Object.entries(e);switch(t.V.kind){case"scalar":for(const[l,u]of a)i[l.toString()]=mf(t.V.T,u);break;case"message":for(const[l,u]of a)i[l.toString()]=u.toJson(n);break;case"enum":const o=t.V.T;for(const[l,u]of a)i[l.toString()]=tg(o,u,n.enumAsInteger);break}return n.emitDefaultValues||a.length>0?i:void 0}if(t.repeated){Dt(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let a=0;a<e.length;a++)i.push(mf(t.T,e[a]));break;case"enum":for(let a=0;a<e.length;a++)i.push(tg(t.T,e[a],n.enumAsInteger));break;case"message":for(let a=0;a<e.length;a++)i.push(e[a].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return mf(t.T,e);case"enum":return tg(t.T,e,n.enumAsInteger);case"message":return D_(t.T,e).toJson(n)}}function tg(t,e,n){var i;if(Dt(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const a=t.findNumber(e);return(i=a?.name)!==null&&i!==void 0?i:e}function mf(t,e){switch(t){case de.INT32:case de.SFIXED32:case de.SINT32:case de.FIXED32:case de.UINT32:return Dt(typeof e=="number"),e;case de.FLOAT:case de.DOUBLE:return Dt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case de.STRING:return Dt(typeof e=="string"),e;case de.BOOL:return Dt(typeof e=="boolean"),e;case de.UINT64:case de.FIXED64:case de.INT64:case de.SFIXED64:case de.SINT64:return Dt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case de.BYTES:return Dt(e instanceof Uint8Array),R_.enc(e)}}const Po=Symbol("@bufbuild/protobuf/unknown-fields"),tC={readUnknownFields:!0,readerFactory:t=>new i5(t)},nC={writeUnknownFields:!0,writerFactory:()=>new n5};function m5(t){return t?Object.assign(Object.assign({},tC),t):tC}function p5(t){return t?Object.assign(Object.assign({},nC),t):nC}function g5(){return{makeReadOptions:m5,makeWriteOptions:p5,listUnknownFields(t){var e;return(e=t[Po])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Po]},writeUnknownFields(t,e){const i=t[Po];if(i)for(const a of i)e.tag(a.no,a.wireType).raw(a.data)},onUnknownField(t,e,n,i){const a=t;Array.isArray(a[Po])||(a[Po]=[]),a[Po].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,a){const o=t.getType(),l=a?e.len:e.pos+n;let u,d;for(;e.pos<l&&([u,d]=e.tag(),!(a===!0&&d==Ut.EndGroup));){const h=o.fields.find(u);if(!h){const m=e.skip(d,u);i.readUnknownFields&&this.onUnknownField(t,u,d,m);continue}iC(t,e,h,d,i)}if(a&&(d!=Ut.EndGroup||u!==n))throw new Error("invalid end group tag")},readField:iC,writeMessage(t,e,n){const i=t.getType();for(const a of i.fields.byNumber()){if(!N_(a,t)){if(a.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(a.name," to binary: required field not set"));continue}const o=a.oneof?t[a.oneof.localName].value:t[a.localName];rC(a,o,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&rC(t,e,n,i)}}}function iC(t,e,n,i,a){let{repeated:o,localName:l}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=l&&delete t.value,t.case=l,l="value"),n.kind){case"scalar":case"enum":const u=n.kind=="enum"?de.INT32:n.T;let d=Mf;if(n.kind=="scalar"&&n.L>0&&(d=y5),o){let y=t[l];if(i==Ut.LengthDelimited&&u!=de.STRING&&u!=de.BYTES){let E=e.uint32()+e.pos;for(;e.pos<E;)y.push(d(e,u))}else y.push(d(e,u))}else t[l]=d(e,u);break;case"message":const h=n.T;o?t[l].push(pf(e,new h,a,n)):Fr(t[l])?pf(e,t[l],a,n):(t[l]=pf(e,new h,a,n),h.fieldWrapper&&!n.oneof&&!n.repeated&&(t[l]=h.fieldWrapper.unwrapField(t[l])));break;case"map":let[m,g]=v5(n,e,a);t[l][m]=g;break}}function pf(t,e,n,i){const a=e.getType().runtime.bin,o=i?.delimited;return a.readMessage(e,t,o?i.no:t.uint32(),n,o),e}function v5(t,e,n){const i=e.uint32(),a=e.pos+i;let o,l;for(;e.pos<a;){const[u]=e.tag();switch(u){case 1:o=Mf(e,t.K);break;case 2:switch(t.V.kind){case"scalar":l=Mf(e,t.V.T);break;case"enum":l=e.int32();break;case"message":l=pf(e,new t.V.T,n,void 0);break}break}}if(o===void 0&&(o=nl(t.K,Fa.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),l===void 0)switch(t.V.kind){case"scalar":l=nl(t.V.T,Fa.BIGINT);break;case"enum":l=t.V.T.values[0].no;break;case"message":l=new t.V.T;break}return[o,l]}function y5(t,e){const n=Mf(t,e);return typeof n=="bigint"?n.toString():n}function Mf(t,e){switch(e){case de.STRING:return t.string();case de.BOOL:return t.bool();case de.DOUBLE:return t.double();case de.FLOAT:return t.float();case de.INT32:return t.int32();case de.INT64:return t.int64();case de.UINT64:return t.uint64();case de.FIXED64:return t.fixed64();case de.BYTES:return t.bytes();case de.FIXED32:return t.fixed32();case de.SFIXED32:return t.sfixed32();case de.SFIXED64:return t.sfixed64();case de.SINT64:return t.sint64();case de.UINT32:return t.uint32();case de.SINT32:return t.sint32()}}function rC(t,e,n,i){Dt(e!==void 0);const a=t.repeated;switch(t.kind){case"scalar":case"enum":let o=t.kind=="enum"?de.INT32:t.T;if(a)if(Dt(Array.isArray(e)),t.packed)S5(n,o,t.no,e);else for(const l of e)qc(n,o,t.no,l);else qc(n,o,t.no,e);break;case"message":if(a){Dt(Array.isArray(e));for(const l of e)aC(n,i,t,l)}else aC(n,i,t,e);break;case"map":Dt(typeof e=="object"&&e!=null);for(const[l,u]of Object.entries(e))b5(n,i,t,l,u);break}}function b5(t,e,n,i,a){t.tag(n.no,Ut.LengthDelimited),t.fork();let o=i;switch(n.K){case de.INT32:case de.FIXED32:case de.UINT32:case de.SFIXED32:case de.SINT32:o=Number.parseInt(i);break;case de.BOOL:Dt(i=="true"||i=="false"),o=i=="true";break}switch(qc(t,n.K,1,o),n.V.kind){case"scalar":qc(t,n.V.T,2,a);break;case"enum":qc(t,de.INT32,2,a);break;case"message":Dt(a!==void 0),t.tag(2,Ut.LengthDelimited).bytes(a.toBinary(e));break}t.join()}function aC(t,e,n,i){const a=D_(n.T,i);n.delimited?t.tag(n.no,Ut.StartGroup).raw(a.toBinary(e)).tag(n.no,Ut.EndGroup):t.tag(n.no,Ut.LengthDelimited).bytes(a.toBinary(e))}function qc(t,e,n,i){Dt(i!==void 0);let[a,o]=P_(e);t.tag(n,a)[o](i)}function S5(t,e,n,i){if(!i.length)return;t.tag(n,Ut.LengthDelimited).fork();let[,a]=P_(e);for(let o=0;o<i.length;o++)t[a](i[o]);t.join()}function P_(t){let e=Ut.Varint;switch(t){case de.BYTES:case de.STRING:e=Ut.LengthDelimited;break;case de.DOUBLE:case de.FIXED64:case de.SFIXED64:e=Ut.Bit64;break;case de.FIXED32:case de.SFIXED32:case de.FLOAT:e=Ut.Bit32;break}const n=de[t].toLowerCase();return[e,n]}function T5(){return{setEnumType:T_,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const a=i.localName,o=e,l=t;if(l[a]!=null)switch(i.kind){case"oneof":const u=l[a].case;if(u===void 0)continue;const d=i.findField(u);let h=l[a].value;d&&d.kind=="message"&&!Fr(h,d.T)?h=new d.T(h):d&&d.kind==="scalar"&&d.T===de.BYTES&&(h=Rc(h)),o[a]={case:u,value:h};break;case"scalar":case"enum":let m=l[a];i.T===de.BYTES&&(m=i.repeated?m.map(Rc):Rc(m)),o[a]=m;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===de.BYTES)for(const[T,E]of Object.entries(l[a]))o[a][T]=Rc(E);else Object.assign(o[a],l[a]);break;case"message":const y=i.V.T;for(const T of Object.keys(l[a])){let E=l[a][T];y.fieldWrapper||(E=new y(E)),o[a][T]=E}break}break;case"message":const g=i.T;if(i.repeated)o[a]=l[a].map(y=>Fr(y,g)?y:new g(y));else{const y=l[a];g.fieldWrapper?g.typeName==="google.protobuf.BytesValue"?o[a]=Rc(y):o[a]=y:o[a]=Fr(y,g)?y:new g(y)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const a=e[i.localName],o=n[i.localName];if(i.repeated){if(a.length!==o.length)return!1;switch(i.kind){case"message":return a.every((l,u)=>i.T.equals(l,o[u]));case"scalar":return a.every((l,u)=>_a(i.T,l,o[u]));case"enum":return a.every((l,u)=>_a(de.INT32,l,o[u]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let l=a,u=o;return i.T.fieldWrapper&&(l!==void 0&&!Fr(l)&&(l=i.T.fieldWrapper.wrapField(l)),u!==void 0&&!Fr(u)&&(u=i.T.fieldWrapper.wrapField(u))),i.T.equals(l,u);case"enum":return _a(de.INT32,a,o);case"scalar":return _a(i.T,a,o);case"oneof":if(a.case!==o.case)return!1;const d=i.findField(a.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(a.value,o.value);case"enum":return _a(de.INT32,a.value,o.value);case"scalar":return _a(d.T,a.value,o.value)}throw new Error("oneof cannot contain ".concat(d.kind));case"map":const h=Object.keys(a).concat(Object.keys(o));switch(i.V.kind){case"message":const m=i.V.T;return h.every(y=>m.equals(a[y],o[y]));case"enum":return h.every(y=>_a(de.INT32,a[y],o[y]));case"scalar":const g=i.V.T;return h.every(y=>_a(g,a[y],o[y]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const a of e.fields.byMember()){const o=t[a.localName];let l;if(a.repeated)l=o.map(Vd);else if(a.kind=="map"){l=i[a.localName];for(const[u,d]of Object.entries(o))l[u]=Vd(d)}else a.kind=="oneof"?l=a.findField(o.case)?{case:o.case,value:Vd(o.value)}:{case:void 0}:l=Vd(o);i[a.localName]=l}for(const a of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return n}}}function Vd(t){if(t===void 0)return t;if(Fr(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Rc(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function E5(t,e,n){return{syntax:t,json:d5(),bin:g5(),util:Object.assign(Object.assign({},T5()),{newFieldList:e,initFields:n}),makeMessageType(i,a,o){return XL(this,i,a,o)},makeEnum:WL,makeEnumType:E_,getEnumType:YL,makeExtension(i,a,o){return r5(this,i,a,o)}}}class C5{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function M_(t,e){const n=L_(t);return e?n:A5(R5(n))}function k5(t){return M_(t,!1)}const w5=L_;function L_(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let a=t.charAt(i);switch(a){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(a),e=!1;break;default:e&&(e=!1,a=a.toUpperCase()),n.push(a);break}}return n.join("")}const _5=new Set(["constructor","toString","toJSON","valueOf"]),x5=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),I_=t=>"".concat(t,"$"),R5=t=>x5.has(t)?I_(t):t,A5=t=>_5.has(t)?I_(t):t;class O5{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=k5(e)}addField(e){Dt(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function N5(t,e){var n,i,a,o,l,u;const d=[];let h;for(const m of typeof t=="function"?t():t){const g=m;if(g.localName=M_(m.name,m.oneof!==void 0),g.jsonName=(n=m.jsonName)!==null&&n!==void 0?n:w5(m.name),g.repeated=(i=m.repeated)!==null&&i!==void 0?i:!1,m.kind=="scalar"&&(g.L=(a=m.L)!==null&&a!==void 0?a:Fa.BIGINT),g.delimited=(o=m.delimited)!==null&&o!==void 0?o:!1,g.req=(l=m.req)!==null&&l!==void 0?l:!1,g.opt=(u=m.opt)!==null&&u!==void 0?u:!1,m.packed===void 0&&(g.packed=m.kind=="enum"||m.kind=="scalar"&&m.T!=de.BYTES&&m.T!=de.STRING),m.oneof!==void 0){const y=typeof m.oneof=="string"?m.oneof:m.oneof.name;(!h||h.name!=y)&&(h=new O5(y)),g.oneof=h,h.addField(g)}d.push(g)}return d}const Z=E5("proto3",t=>new C5(t,e=>N5(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=nl(e.T,e.L);break}}});class xn extends vy{constructor(e){super(),this.seconds=wt.zero,this.nanos=0,Z.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(Z.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=wt.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return xn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new xn({seconds:wt.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new xn().fromBinary(e,n)}static fromJson(e,n){return new xn().fromJson(e,n)}static fromJsonString(e,n){return new xn().fromJsonString(e,n)}static equals(e,n){return Z.util.equals(xn,e,n)}}xn.runtime=Z;xn.typeName="google.protobuf.Timestamp";xn.fields=Z.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const D5=Z.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:xn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:P5,repeated:!0},{no:5,name:"events",kind:"message",T:L5,repeated:!0}]),P5=Z.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:M5,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),M5=Z.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:xn},{no:3,name:"value",kind:"scalar",T:2}]),L5=Z.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:xn},{no:7,name:"normalized_end_timestamp",kind:"message",T:xn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),j_=Z.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Oi=Z.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Vt=Z.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),by=Z.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Fc=Z.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Jc=Z.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Mi=Z.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),Mo=Z.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),I5=Z.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),tn=Z.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),dh=Z.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Lf,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:X_}]),Lf=Z.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),j5=Z.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:Z.getEnumType(Vt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Ms=Z.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Z.getEnumType(Yo)},{no:4,name:"tracks",kind:"message",T:qo,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:j5},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:Z.getEnumType(Zc)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:Z.getEnumType(Mi)},{no:18,name:"kind_details",kind:"enum",T:Z.getEnumType(U5),repeated:!0}]),Yo=Z.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Zc=Z.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),U5=Z.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Wn=Z.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),B5=Z.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:As,repeated:!0}]),qo=Z.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:Z.getEnumType(Oi)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:Z.getEnumType(Vt)},{no:10,name:"layers",kind:"message",T:As,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:B5,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:Z.getEnumType(Wn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:X_},{no:19,name:"audio_features",kind:"enum",T:Z.getEnumType(tn),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:Z.getEnumType(j_)}]),As=Z.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:Z.getEnumType(by)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),Rn=Z.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:Z.getEnumType(Ye)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:B_,oneof:"value"},{no:3,name:"speaker",kind:"message",T:z5,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:z_,oneof:"value"},{no:7,name:"transcription",kind:"message",T:F5,oneof:"value"},{no:8,name:"metrics",kind:"message",T:D5,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:av,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:F_,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:V_,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:H_,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:ov,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:lv,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:cv,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),Ye=Z.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),z5=Z.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:U_,repeated:!0}]),U_=Z.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),B_=Z.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),z_=Z.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),F5=Z.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:V5,repeated:!0}]),V5=Z.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),av=Z.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),F_=Z.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),V_=Z.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),H_=Z.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:q_,oneof:"value"}]),q_=Z.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),$_=Z.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),G_=Z.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:Z.getEnumType(K_)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),K_=Z.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),H5=Z.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:Z.getEnumType(Y_)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),Y_=Z.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),W_=Z.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:sC},{no:2,name:"screen",kind:"message",T:sC},{no:3,name:"resume_connection",kind:"enum",T:Z.getEnumType(Jc)},{no:4,name:"disabled_codecs",kind:"message",T:q5},{no:5,name:"force_relay",kind:"enum",T:Z.getEnumType(Jc)}]),sC=Z.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:Z.getEnumType(Jc)}]),q5=Z.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Lf,repeated:!0},{no:2,name:"publish",kind:"message",T:Lf,repeated:!0}]),X_=Z.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),sv=Z.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),Q_=Z.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:Z.getEnumType(sv)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),J_=Z.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),ov=Z.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:Z.getEnumType(Wn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:Q_,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:J_,oneof:"content_header"}],{localName:"DataStream_Header"}),lv=Z.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),cv=Z.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),Ni=Z.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),uv=Z.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),$5=Z.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),G5=Z.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Ls,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ls,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Sy,oneof:"message"},{no:4,name:"add_track",kind:"message",T:fv,oneof:"message"},{no:5,name:"mute",kind:"message",T:Ty,oneof:"message"},{no:6,name:"subscription",kind:"message",T:fh,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Z_,oneof:"message"},{no:8,name:"leave",kind:"message",T:hh,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:t1,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:a1,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:s1,oneof:"message"},{no:13,name:"simulate",kind:"message",T:ir,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:n1,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:c1,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:e1,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:Q5,oneof:"message"}]),oC=Z.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:K5,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ls,oneof:"message"},{no:3,name:"offer",kind:"message",T:Ls,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Sy,oneof:"message"},{no:5,name:"update",kind:"message",T:X5,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Ey,oneof:"message"},{no:8,name:"leave",kind:"message",T:hh,oneof:"message"},{no:9,name:"mute",kind:"message",T:Ty,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:J5,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Z5,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:t2,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:i2,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:a2,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:s2,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:W5,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:Y5,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:l2,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:d2,oneof:"message"},{no:22,name:"request_response",kind:"message",T:f2,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:h2,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:o2,oneof:"message"}]),dv=Z.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),fv=Z.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:Z.getEnumType(Oi)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:Z.getEnumType(Vt)},{no:9,name:"layers",kind:"message",T:As,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:dv,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:Z.getEnumType(Wn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:Z.getEnumType(j_)},{no:17,name:"audio_features",kind:"enum",T:Z.getEnumType(tn),repeated:!0}]),Sy=Z.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:Z.getEnumType(Ni)},{no:3,name:"final",kind:"scalar",T:8}]),Ty=Z.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),K5=Z.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:dh},{no:2,name:"participant",kind:"message",T:Ms},{no:3,name:"other_participants",kind:"message",T:Ms,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:i1,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:W_},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:G_},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Lf,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),Y5=Z.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:i1,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:W_},{no:3,name:"server_info",kind:"message",T:G_},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),Ey=Z.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:qo}]),W5=Z.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Ls=Z.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),X5=Z.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Ms,repeated:!0}]),fh=Z.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:$_,repeated:!0}]),Z_=Z.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:Z.getEnumType(by)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),e1=Z.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:Z.getEnumType(tn),repeated:!0}]),Q5=Z.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),hh=Z.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:Z.getEnumType(Mi)},{no:3,name:"action",kind:"enum",T:Z.getEnumType(Wo)},{no:4,name:"regions",kind:"message",T:c2}]),Wo=Z.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),t1=Z.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:As,repeated:!0}]),n1=Z.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),i1=Z.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),J5=Z.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:U_,repeated:!0}]),Z5=Z.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:dh}]),e2=Z.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:Z.getEnumType(Fc)},{no:3,name:"score",kind:"scalar",T:2}]),t2=Z.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:e2,repeated:!0}]),n2=Z.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Z.getEnumType(uv)}]),i2=Z.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:n2,repeated:!0}]),Cy=Z.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:Z.getEnumType(by)},{no:2,name:"enabled",kind:"scalar",T:8}]),r2=Z.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Cy,repeated:!0}]),a2=Z.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Cy,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:r2,repeated:!0}]),r1=Z.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),a1=Z.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:r1,repeated:!0}]),s2=Z.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),o2=Z.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:dh},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Ms},{no:4,name:"other_participants",kind:"message",T:Ms,repeated:!0}]),s1=Z.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Ls},{no:2,name:"subscription",kind:"message",T:fh},{no:3,name:"publish_tracks",kind:"message",T:Ey,repeated:!0},{no:4,name:"data_channels",kind:"message",T:l1,repeated:!0},{no:5,name:"offer",kind:"message",T:Ls},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:o1,repeated:!0}]),o1=Z.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),l1=Z.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:Z.getEnumType(Ni)}]),ir=Z.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:Z.getEnumType($5),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),c1=Z.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),l2=Z.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),c2=Z.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:u2,repeated:!0}]),u2=Z.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),d2=Z.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:Z.getEnumType(I5)}]),f2=Z.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:Z.getEnumType(ky)},{no:3,name:"message",kind:"scalar",T:9}]),ky=Z.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),h2=Z.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function m2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gf={exports:{}},p2=gf.exports,lC;function g2(){return lC||(lC=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(p2,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],o={},l=null;function u(C,w){var _=C[w];if(typeof _.bind=="function")return _.bind(C);try{return Function.prototype.bind.call(_,C)}catch{return function(){return Function.prototype.apply.apply(_,[C,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(C){return C==="debug"&&(C="log"),typeof console===n?!1:C==="trace"&&i?d:console[C]!==void 0?u(console,C):console.log!==void 0?u(console,"log"):e}function m(){for(var C=this.getLevel(),w=0;w<a.length;w++){var _=a[w];this[_]=w<C?e:this.methodFactory(_,C,this.name)}if(this.log=this.debug,typeof console===n&&C<this.levels.SILENT)return"No console available for logging"}function g(C){return function(){typeof console!==n&&(m.call(this),this[C].apply(this,arguments))}}function y(C,w,_){return h(C)||g.apply(this,arguments)}function T(C,w){var _=this,N,D,O,R="loglevel";typeof C=="string"?R+=":"+C:typeof C=="symbol"&&(R=void 0);function x(q){var re=(a[q]||"silent").toUpperCase();if(!(typeof window===n||!R)){try{window.localStorage[R]=re;return}catch{}try{window.document.cookie=encodeURIComponent(R)+"="+re+";"}catch{}}}function B(){var q;if(!(typeof window===n||!R)){try{q=window.localStorage[R]}catch{}if(typeof q===n)try{var re=window.document.cookie,fe=encodeURIComponent(R),ye=re.indexOf(fe+"=");ye!==-1&&(q=/^([^;]+)/.exec(re.slice(ye+fe.length+1))[1])}catch{}return _.levels[q]===void 0&&(q=void 0),q}}function M(){if(!(typeof window===n||!R)){try{window.localStorage.removeItem(R)}catch{}try{window.document.cookie=encodeURIComponent(R)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(q){var re=q;if(typeof re=="string"&&_.levels[re.toUpperCase()]!==void 0&&(re=_.levels[re.toUpperCase()]),typeof re=="number"&&re>=0&&re<=_.levels.SILENT)return re;throw new TypeError("log.setLevel() called with invalid level: "+q)}_.name=C,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=w||y,_.getLevel=function(){return O??D??N},_.setLevel=function(q,re){return O=P(q),re!==!1&&x(O),m.call(_)},_.setDefaultLevel=function(q){D=P(q),B()||_.setLevel(q,!1)},_.resetLevel=function(){O=null,M(),m.call(_)},_.enableAll=function(q){_.setLevel(_.levels.TRACE,q)},_.disableAll=function(q){_.setLevel(_.levels.SILENT,q)},_.rebuild=function(){if(l!==_&&(N=P(l.getLevel())),m.call(_),l===_)for(var q in o)o[q].rebuild()},N=P(l?l.getLevel():"WARN");var z=B();z!=null&&(O=P(z)),m.call(_)}l=new T,l.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var _=o[w];return _||(_=o[w]=new T(w,l.methodFactory)),_};var E=typeof window!==n?window.log:void 0;return l.noConflict=function(){return typeof window!==n&&window.log===l&&(window.log=E),l},l.getLoggers=function(){return o},l.default=l,l})}(gf)),gf.exports}var mh=g2(),hv;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(hv||(hv={}));var Li;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Li||(Li={}));let Qe=mh.getLogger("livekit");Object.values(Li).map(t=>mh.getLogger(t));Qe.setDefaultLevel(hv.info);function Gr(t){const e=mh.getLogger(t);return e.setDefaultLevel(Qe.getLevel()),e}const v2=mh.getLogger("lk-e2ee"),Ac=7e3,y2=[0,300,4*300,9*300,16*300,Ac,Ac,Ac,Ac,Ac];class b2{constructor(e){this._retryDelays=e!==void 0?[...e]:y2}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function S2(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function I(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(m){try{h(i.next(m))}catch(g){l(g)}}function d(m){try{h(i.throw(m))}catch(g){l(g)}}function h(m){m.done?o(m.value):a(m.value).then(u,d)}h((i=i.apply(t,e||[])).next())})}function cC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof cC=="function"?cC(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(u,d){l=t[o](l),a(u,d,l.done,l.value)})}}function a(o,l,u,d){Promise.resolve(d).then(function(h){o({value:h,done:u})},l)}}var Hd={exports:{}},uC;function T2(){if(uC)return Hd.exports;uC=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(R,x,B){return Function.prototype.apply.call(R,x,B)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:n=function(R){return Object.getOwnPropertyNames(R)};function i(O){console&&console.warn&&console.warn(O)}var a=Number.isNaN||function(R){return R!==R};function o(){o.init.call(this)}Hd.exports=o,Hd.exports.once=_,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function u(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(O){if(typeof O!="number"||O<0||a(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");l=O}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||a(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function d(O){return O._maxListeners===void 0?o.defaultMaxListeners:O._maxListeners}o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(R){for(var x=[],B=1;B<arguments.length;B++)x.push(arguments[B]);var M=R==="error",P=this._events;if(P!==void 0)M=M&&P.error===void 0;else if(!M)return!1;if(M){var z;if(x.length>0&&(z=x[0]),z instanceof Error)throw z;var q=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw q.context=z,q}var re=P[R];if(re===void 0)return!1;if(typeof re=="function")e(re,this,x);else for(var fe=re.length,ye=E(re,fe),B=0;B<fe;++B)e(ye[B],this,x);return!0};function h(O,R,x,B){var M,P,z;if(u(x),P=O._events,P===void 0?(P=O._events=Object.create(null),O._eventsCount=0):(P.newListener!==void 0&&(O.emit("newListener",R,x.listener?x.listener:x),P=O._events),z=P[R]),z===void 0)z=P[R]=x,++O._eventsCount;else if(typeof z=="function"?z=P[R]=B?[x,z]:[z,x]:B?z.unshift(x):z.push(x),M=d(O),M>0&&z.length>M&&!z.warned){z.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=O,q.type=R,q.count=z.length,i(q)}return O}o.prototype.addListener=function(R,x){return h(this,R,x,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(R,x){return h(this,R,x,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(O,R,x){var B={fired:!1,wrapFn:void 0,target:O,type:R,listener:x},M=m.bind(B);return M.listener=x,B.wrapFn=M,M}o.prototype.once=function(R,x){return u(x),this.on(R,g(this,R,x)),this},o.prototype.prependOnceListener=function(R,x){return u(x),this.prependListener(R,g(this,R,x)),this},o.prototype.removeListener=function(R,x){var B,M,P,z,q;if(u(x),M=this._events,M===void 0)return this;if(B=M[R],B===void 0)return this;if(B===x||B.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete M[R],M.removeListener&&this.emit("removeListener",R,B.listener||x));else if(typeof B!="function"){for(P=-1,z=B.length-1;z>=0;z--)if(B[z]===x||B[z].listener===x){q=B[z].listener,P=z;break}if(P<0)return this;P===0?B.shift():C(B,P),B.length===1&&(M[R]=B[0]),M.removeListener!==void 0&&this.emit("removeListener",R,q||x)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(R){var x,B,M;if(B=this._events,B===void 0)return this;if(B.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):B[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete B[R]),this;if(arguments.length===0){var P=Object.keys(B),z;for(M=0;M<P.length;++M)z=P[M],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=B[R],typeof x=="function")this.removeListener(R,x);else if(x!==void 0)for(M=x.length-1;M>=0;M--)this.removeListener(R,x[M]);return this};function y(O,R,x){var B=O._events;if(B===void 0)return[];var M=B[R];return M===void 0?[]:typeof M=="function"?x?[M.listener||M]:[M]:x?w(M):E(M,M.length)}o.prototype.listeners=function(R){return y(this,R,!0)},o.prototype.rawListeners=function(R){return y(this,R,!1)},o.listenerCount=function(O,R){return typeof O.listenerCount=="function"?O.listenerCount(R):T.call(O,R)},o.prototype.listenerCount=T;function T(O){var R=this._events;if(R!==void 0){var x=R[O];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function E(O,R){for(var x=new Array(R),B=0;B<R;++B)x[B]=O[B];return x}function C(O,R){for(;R+1<O.length;R++)O[R]=O[R+1];O.pop()}function w(O){for(var R=new Array(O.length),x=0;x<R.length;++x)R[x]=O[x].listener||O[x];return R}function _(O,R){return new Promise(function(x,B){function M(z){O.removeListener(R,P),B(z)}function P(){typeof O.removeListener=="function"&&O.removeListener("error",M),x([].slice.call(arguments))}D(O,R,P,{once:!0}),R!=="error"&&N(O,M,{once:!0})})}function N(O,R,x){typeof O.on=="function"&&D(O,"error",R,x)}function D(O,R,x,B){if(typeof O.on=="function")B.once?O.once(R,x):O.on(R,x);else if(typeof O.addEventListener=="function")O.addEventListener(R,function M(P){B.once&&O.removeEventListener(R,M),x(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}return Hd.exports}var pr=T2();let u1=!0,d1=!0;function Vc(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function $s(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,a=i.addEventListener;i.addEventListener=function(l,u){if(l!==e)return a.apply(this,arguments);const d=h=>{const m=n(h);m&&(u.handleEvent?u.handleEvent(m):u(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(u,d),a.apply(this,[l,d])};const o=i.removeEventListener;i.removeEventListener=function(l,u){if(l!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(u))return o.apply(this,arguments);const d=this._eventMap[e].get(u);return this._eventMap[e].delete(u),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[l,d])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(l){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),l&&this.addEventListener(e,this["_on"+e]=l)},enumerable:!0,configurable:!0})}function E2(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(u1=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function C2(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(d1=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function f1(){if(typeof window=="object"){if(u1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function wy(t,e){d1&&console.warn(t+" is deprecated, please use "+e+" instead.")}function k2(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(a=>a.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Vc(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Vc(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Vc(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Vc(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function dC(t){return Object.prototype.toString.call(t)==="[object Object]"}function h1(t){return dC(t)?Object.keys(t).reduce(function(e,n){const i=dC(t[n]),a=i?h1(t[n]):t[n],o=i&&!Object.keys(a).length;return a===void 0||o?e:Object.assign(e,{[n]:a})},{}):t}function mv(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?mv(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(a=>{mv(t,t.get(a),n)})}))}function fC(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const o=[];return t.forEach(l=>{l.type==="track"&&l.trackIdentifier===e.id&&o.push(l)}),o.forEach(l=>{t.forEach(u=>{u.type===i&&u.trackId===l.id&&mv(t,u,a)})}),a}const hC=f1;function m1(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const d={};return Object.keys(u).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const m=typeof u[h]=="object"?u[h]:{ideal:u[h]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const g=function(y,T){return y?y+T.charAt(0).toUpperCase()+T.slice(1):T==="deviceId"?"sourceId":T};if(m.ideal!==void 0){d.optional=d.optional||[];let y={};typeof m.ideal=="number"?(y[g("min",h)]=m.ideal,d.optional.push(y),y={},y[g("max",h)]=m.ideal,d.optional.push(y)):(y[g("",h)]=m.ideal,d.optional.push(y))}m.exact!==void 0&&typeof m.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[g("",h)]=m.exact):["min","max"].forEach(y=>{m[y]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[g(y,h)]=m[y])})}),u.advanced&&(d.optional=(d.optional||[]).concat(u.advanced)),d},a=function(u,d){if(e.version>=61)return d(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const h=function(m,g,y){g in m&&!(y in m)&&(m[y]=m[g],delete m[g])};u=JSON.parse(JSON.stringify(u)),h(u.audio,"autoGainControl","googAutoGainControl"),h(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=i(u.audio)}if(u&&typeof u.video=="object"){let h=u.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const m=e.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete u.video.facingMode;let g;if(h.exact==="environment"||h.ideal==="environment"?g=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(g=["front"]),g)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(E=>E.kind==="videoinput");let T=y.find(E=>g.some(C=>E.label.toLowerCase().includes(C)));return!T&&y.length&&g.includes("back")&&(T=y[y.length-1]),T&&(u.video.deviceId=h.exact?{exact:T.deviceId}:{ideal:T.deviceId}),u.video=i(u.video),hC("chrome: "+JSON.stringify(u)),d(u)})}u.video=i(u.video)}return hC("chrome: "+JSON.stringify(u)),d(u)},o=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,d,h){a(u,m=>{n.webkitGetUserMedia(m,d,g=>{h&&h(o(g))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return a(d,h=>u(h).then(m=>{if(h.audio&&!m.getAudioTracks().length||h.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(o(m))))}}}function p1(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function g1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===a.track.id):o={track:a.track};const l=new Event("track");l.track=a.track,l.receiver=o,l.transceiver={receiver:o},l.streams=[i.stream],this.dispatchEvent(l)}),i.stream.getTracks().forEach(a=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===a.id):o={track:a};const l=new Event("track");l.track=a,l.receiver=o,l.transceiver={receiver:o},l.streams=[i.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else $s(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function v1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=a.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,d){let h=a.apply(this,arguments);return h||(h=e(this,u),this._senders.push(h)),h};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){o.apply(this,arguments);const d=this._senders.indexOf(u);d!==-1&&this._senders.splice(d,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(l=>{this._senders.push(e(this,l))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],i.apply(this,[o]),o.getTracks().forEach(l=>{const u=this._senders.find(d=>d.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function y1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=i.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>fC(l,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(o=>o._pc=this),a}),$s(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>fC(o,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let a,o,l;return this.getSenders().forEach(u=>{u.track===i&&(a?l=!0:a=u)}),this.getReceivers().forEach(u=>(u.track===i&&(o?l=!0:o=u),u.track===i)),l||a&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function b1(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=e.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(d)===-1&&this._shimmedLocalStreams[u.id].push(d):this._shimmedLocalStreams[u.id]=[u,d],d};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(g=>g.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(h=>u.indexOf(h)===-1);this._shimmedLocalStreams[l.id]=[l].concat(d)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],i.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const d=this._shimmedLocalStreams[u].indexOf(l);d!==-1&&this._shimmedLocalStreams[u].splice(d,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),a.apply(this,arguments)}}function S1(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return b1(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(g=>this._reverseStreams[g.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(g=>{if(this.getSenders().find(T=>T.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const g=new t.MediaStream(m.getTracks());this._streams[m.id]=g,this._reverseStreams[g.id]=m,m=g}i.apply(this,[m])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(C=>C===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const E=this._streams[g.id];if(E)E.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new t.MediaStream([m]);this._streams[g.id]=C,this._reverseStreams[C.id]=g,this.addStream(C)}return this.getSenders().find(C=>C.track===m)};function o(h,m){let g=m.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const T=h._reverseStreams[y],E=h._streams[T.id];g=g.replace(new RegExp(E.id,"g"),T.id)}),new RTCSessionDescription({type:m.type,sdp:g})}function l(h,m){let g=m.sdp;return Object.keys(h._reverseStreams||[]).forEach(y=>{const T=h._reverseStreams[y],E=h._streams[T.id];g=g.replace(new RegExp(T.id,"g"),E.id)}),new RTCSessionDescription({type:m.type,sdp:g})}["createOffer","createAnswer"].forEach(function(h){const m=t.RTCPeerConnection.prototype[h],g={[h](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[E=>{const C=o(this,E);y[0].apply(null,[C])},E=>{y[1]&&y[1].apply(null,E)},arguments[2]]):m.apply(this,arguments).then(E=>o(this,E))}};t.RTCPeerConnection.prototype[h]=g[h]});const u=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const h=d.get.apply(this);return h.type===""?h:o(this,h)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(T=>{this._streams[T].getTracks().find(C=>m.track===C)&&(y=this._streams[T])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function pv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function T1(t,e){$s(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var mC=Object.freeze({__proto__:null,fixNegotiationNeeded:T1,shimAddTrackRemoveTrack:S1,shimAddTrackRemoveTrackWithNative:b1,shimGetSendersWithDtmf:v1,shimGetUserMedia:m1,shimMediaStream:p1,shimOnTrack:g1,shimPeerConnection:pv,shimSenderReceiverGetStats:y1});function E1(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,o,l){wy("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(o,l)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(l,u,d){u in l&&!(d in l)&&(l[d]=l[u],delete l[u])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),a(l.audio,"autoGainControl","mozAutoGainControl"),a(l.audio,"noiseSuppression","mozNoiseSuppression")),o(l)},i&&i.prototype.getSettings){const l=i.prototype.getSettings;i.prototype.getSettings=function(){const u=l.apply(this,arguments);return a(u,"mozAutoGainControl","autoGainControl"),a(u,"mozNoiseSuppression","noiseSuppression"),u}}if(i&&i.prototype.applyConstraints){const l=i.prototype.applyConstraints;i.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u,"autoGainControl","mozAutoGainControl"),a(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function w2(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function C1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function gv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const o=t.RTCPeerConnection.prototype[a],l={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=l[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,l,u]=arguments;return i.apply(this,[o||null]).then(d=>{if(e.version<53&&!l)try{d.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;d.forEach((m,g)=>{d.set(g,Object.assign({},m,{type:n[m.type]||m.type}))})}return d}).then(l,u)}}function k1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(o=>o._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function w1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i}),$s(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function _1(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){wy("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function x1(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function R1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(a){const{sender:l}=o,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=i,l.sendEncodings=i,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return o})}function A1(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function O1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function N1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var pC=Object.freeze({__proto__:null,shimAddTransceiver:R1,shimCreateAnswer:N1,shimCreateOffer:O1,shimGetDisplayMedia:w2,shimGetParameters:A1,shimGetUserMedia:E1,shimOnTrack:C1,shimPeerConnection:gv,shimRTCDataChannel:x1,shimReceiverGetStats:w1,shimRemoveStream:_1,shimSenderGetStats:k1});function D1(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(a=>e.call(this,a,i)),i.getVideoTracks().forEach(a=>e.call(this,a,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return o&&o.forEach(u=>{this._localStreams?this._localStreams.includes(u)||this._localStreams.push(u):this._localStreams=[u]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const a=n.getTracks();this.getSenders().forEach(o=>{a.includes(o.track)&&this.removeTrack(o)})})}}function P1(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(o=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(o)>=0)return;i._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,i.dispatchEvent(l)})}),e.apply(i,arguments)}}}function M1(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,a=e.setLocalDescription,o=e.setRemoteDescription,l=e.addIceCandidate;e.createOffer=function(h,m){const g=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[g]);return m?(y.then(h,m),Promise.resolve()):y},e.createAnswer=function(h,m){const g=arguments.length>=2?arguments[2]:arguments[0],y=i.apply(this,[g]);return m?(y.then(h,m),Promise.resolve()):y};let u=function(d,h,m){const g=a.apply(this,[d]);return m?(g.then(h,m),Promise.resolve()):g};e.setLocalDescription=u,u=function(d,h,m){const g=o.apply(this,[d]);return m?(g.then(h,m),Promise.resolve()):g},e.setRemoteDescription=u,u=function(d,h,m){const g=l.apply(this,[d]);return m?(g.then(h,m),Promise.resolve()):g},e.addIceCandidate=u}function L1(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>i(I1(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,a,o){e.mediaDevices.getUserMedia(i).then(a,o)}).bind(e))}function I1(t){return t&&t.video!==void 0?Object.assign({},t,{video:h1(t.video)}):t}function j1(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const o=[];for(let l=0;l<i.iceServers.length;l++){let u=i.iceServers[l];u.urls===void 0&&u.url?(wy("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,o.push(u)):o.push(i.iceServers[l])}i.iceServers=o}return new e(i,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function U1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function B1(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function z1(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var gC=Object.freeze({__proto__:null,shimAudioContext:z1,shimCallbacksAPI:M1,shimConstraints:I1,shimCreateOfferLegacy:B1,shimGetUserMedia:L1,shimLocalStreamsAPI:D1,shimRTCIceServerUrls:j1,shimRemoteStreamsAPI:P1,shimTrackEventTransceiver:U1}),ng={exports:{}},vC;function _2(){return vC||(vC=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((a,o)=>(o>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(a=>a.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const a={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let o=8;o<i.length;o+=2)switch(i[o]){case"raddr":a.relatedAddress=i[o+1];break;case"rport":a.relatedPort=parseInt(i[o+1],10);break;case"tcptype":a.tcpType=i[o+1];break;case"ufrag":a.ufrag=i[o+1],a.usernameFragment=i[o+1];break;default:a[i[o]]===void 0&&(a[i[o]]=i[o+1]);break}return a},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const a=n.component;a==="rtp"?i.push(1):a==="rtcp"?i.push(2):i.push(a),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const o=n.type;return i.push("typ"),i.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const a={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),a.name=i[0],a.clockRate=parseInt(i[1],10),a.channels=i.length===3?parseInt(i[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const a=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let a;const o=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<o.length;l++)a=o[l].trim().split("="),i[a[0].trim()]=a[1];return i},e.writeFmtp=function(n){let i="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?o.push(l+"="+n.parameters[l]):o.push(l)}),i+="a=fmtp:"+a+" "+o.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{i+="a=rtcp-fb:"+a+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),a={ssrc:parseInt(n.substring(7,i),10)},o=n.indexOf(":",i);return o>-1?(a.attribute=n.substring(i+1,o),a.value=n.substring(o+1)):a.attribute=n.substring(i+1),a},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(a=>parseInt(a,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let a="a=setup:"+i+`\r
`;return n.fingerprints.forEach(o=>{a+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),a},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const a=e.matchPrefix(n+i,"a=ice-ufrag:")[0],o=e.matchPrefix(n+i,"a=ice-pwd:")[0];return a&&o?{usernameFragment:a.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");i.profile=o[2];for(let u=3;u<o.length;u++){const d=o[u],h=e.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(h){const m=e.parseRtpMap(h),g=e.matchPrefix(n,"a=fmtp:"+d+" ");switch(m.parameters=g.length?e.parseFmtp(g[0]):{},m.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),i.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(m.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(u=>{i.headerExtensions.push(e.parseExtmap(u))});const l=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(u=>{l.forEach(d=>{u.rtcpFeedback.find(m=>m.type===d.type&&m.parameter===d.parameter)||u.rtcpFeedback.push(d)})}),i},e.writeRtpDescription=function(n,i){let a="";a+="m="+n+" ",a+=i.codecs.length>0?"9":"0",a+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=i.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(l=>{a+=e.writeRtpMap(l),a+=e.writeFmtp(l),a+=e.writeRtcpFb(l)});let o=0;return i.codecs.forEach(l=>{l.maxptime>o&&(o=l.maxptime)}),o>0&&(a+="a=maxptime:"+o+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(l=>{a+=e.writeExtmap(l)}),a},e.parseRtpEncodingParameters=function(n){const i=[],a=e.parseRtpParameters(n),o=a.fecMechanisms.indexOf("RED")!==-1,l=a.fecMechanisms.indexOf("ULPFEC")!==-1,u=e.matchPrefix(n,"a=ssrc:").map(y=>e.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),d=u.length>0&&u[0].ssrc;let h;const m=e.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(E=>parseInt(E,10)));m.length>0&&m[0].length>1&&m[0][0]===d&&(h=m[0][1]),a.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let T={ssrc:d,codecPayloadType:parseInt(y.parameters.apt,10)};d&&h&&(T.rtx={ssrc:h}),i.push(T),o&&(T=JSON.parse(JSON.stringify(T)),T.fec={ssrc:d,mechanism:l?"red+ulpfec":"red"},i.push(T))}}),i.length===0&&d&&i.push({ssrc:d});let g=e.matchPrefix(n,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-2e3*8:g=void 0,i.forEach(y=>{y.maxBitrate=g})),i},e.parseRtcpParameters=function(n){const i={},a=e.matchPrefix(n,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];a&&(i.cname=a.value,i.ssrc=a.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=o.length>0,i.compound=o.length===0;const l=e.matchPrefix(n,"a=rtcp-mux");return i.mux=l.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const a=e.matchPrefix(n,"a=msid:");if(a.length===1)return i=a[0].substring(7).split(" "),{stream:i[0],track:i[1]};const o=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(o.length>0)return i=o[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:");let o;a.length>0&&(o=parseInt(a[0].substring(19),10)),isNaN(o)&&(o=65536);const l=e.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:i.fmt,maxMessageSize:o};const u=e.matchPrefix(n,"a=sctpmap:");if(u.length>0){const d=u[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,i){let a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&a.push("a=max-message-size:"+i.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,a){let o;const l=i!==void 0?i:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+o+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const a=e.splitLines(n);for(let o=0;o<a.length;o++)switch(a[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[o].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const a=e.splitLines(n)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){const a=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let a=0;a<i.length;a++)if(i[a].length<2||i[a].charAt(1)!=="=")return!1;return!0},t.exports=e}(ng)),ng.exports}var F1=_2(),Xo=m2(F1),x2=zL({__proto__:null,default:Xo},[F1]);function vf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const a=new e(i),o=Xo.parseCandidate(i.candidate);for(const l in o)l in a||Object.defineProperty(a,l,{value:o[l]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,$s(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function vv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||$s(t,"icecandidate",e=>{if(e.candidate){const n=Xo.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function yf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const d=Xo.splitSections(u.sdp);return d.shift(),d.some(h=>{const m=Xo.parseMLine(h);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},i=function(u){const d=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const h=parseInt(d[1],10);return h!==h?-1:h},a=function(u){let d=65536;return e.browser==="firefox"&&(e.version<57?u===-1?d=16384:d=2147483637:e.version<60?d=e.version===57?65535:65536:d=2147483637),d},o=function(u,d){let h=65536;e.browser==="firefox"&&e.version===57&&(h=65535);const m=Xo.matchPrefix(u.sdp,"a=max-message-size:");return m.length>0?h=parseInt(m[0].substring(19),10):e.browser==="firefox"&&d!==-1&&(h=2147483637),h},l=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=i(arguments[0]),h=a(d),m=o(arguments[0],d);let g;h===0&&m===0?g=Number.POSITIVE_INFINITY:h===0||m===0?g=Math.max(h,m):g=Math.min(h,m);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return g}}),this._sctp=y}return l.apply(this,arguments)}}function bf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,a){const o=i.send;i.send=function(){const u=arguments[0],d=u.length||u.size||u.byteLength;if(i.readyState==="open"&&a.sctp&&d>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return o.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},$s(t,"datachannel",i=>(e(i.channel,i.target),i))}function yv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const o=a.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const l=new Event("connectionstatechange",a);o.dispatchEvent(l)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function bv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=a.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:o}):a.sdp=o}return n.apply(this,arguments)}}function Sf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Tf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return n.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?n.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}var R2=Object.freeze({__proto__:null,removeExtmapAllowMixed:bv,shimAddIceCandidateNullOrEmpty:Sf,shimConnectionState:yv,shimMaxMessageSize:yf,shimParameterlessSetLocalDescription:Tf,shimRTCIceCandidate:vf,shimRTCIceCandidateRelayProtocol:vv,shimSendThrowTypeError:bf});function A2(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=f1,i=k2(t),a={browserDetails:i,commonShim:R2,extractVersion:Vc,disableLog:E2,disableWarnings:C2,sdp:x2};switch(i.browser){case"chrome":if(!mC||!pv||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=mC,Sf(t,i),Tf(t),m1(t,i),p1(t),pv(t,i),g1(t),S1(t,i),v1(t),y1(t),T1(t,i),vf(t),vv(t),yv(t),yf(t,i),bf(t),bv(t,i);break;case"firefox":if(!pC||!gv||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=pC,Sf(t,i),Tf(t),E1(t,i),gv(t,i),C1(t),_1(t),k1(t),w1(t),x1(t),R1(t),A1(t),O1(t),N1(t),vf(t),yv(t),yf(t,i),bf(t);break;case"safari":if(!gC||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=gC,Sf(t,i),Tf(t),j1(t),B1(t),M1(t),D1(t),P1(t),U1(t),L1(t),z1(t),vf(t),vv(t),yf(t,i),bf(t),bv(t,i);break;default:n("Unsupported browser!");break}return a}A2({window:typeof window>"u"?void 0:window});const O2=10,Oc="lk_e2ee",N2="LKFrameEncryptionKey",D2={sharedKey:!1,ratchetSalt:N2,ratchetWindowSize:8,failureTolerance:O2,keyringSize:16};var ja;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(ja||(ja={}));var yC;(function(t){t.KeyRatcheted="keyRatcheted"})(yC||(yC={}));var Ia;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Ia||(Ia={}));var bC;(function(t){t.Error="cryptorError"})(bC||(bC={}));function P2(){return M2()||Sv()}function Sv(){return typeof window.RTCRtpScriptTransform<"u"}function M2(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class XH extends pr.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,a)=>{Qe.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:a})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},D2),e),this.on(ja.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const a={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),a),this.emit(ja.SetKey,a)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(ja.RatchetRequest,e,n)}}class Yr extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var rt;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(rt||(rt={}));class vt extends Yr{constructor(e,n,i,a){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=a,this.reasonName=rt[n]}}class _y extends Yr{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Hr extends Yr{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class L2 extends Yr{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Yt extends Yr{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Tv extends Yr{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class SC extends Yr{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class TC extends Yr{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:ky[n]}}var Di;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered"})(Di||(Di={}));class Ma extends Yr{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=Di[n]}}var eu;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(eu||(eu={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(eu||(eu={}));var EC;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(EC||(EC={}));var te;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(te||(te={}));var ie;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(ie||(ie={}));var be;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(be||(be={}));var ve;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(ve||(ve={}));function I2(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const j2=/version\/(\d+(\.?_?\d+)+)/i;let ig;function Qn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(ig===void 0||e){const i=U2.find(a=>{let{test:o}=a;return o.test(n)});ig=i?.describe(n)}return ig}const U2=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Ef(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:rg(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Ef(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:rg(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Ef(j2,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:rg(t)}}}];function Ef(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function rg(t){return t.includes("mac os")?Ef(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var B2="2.15.6";const z2=B2,F2=16;class dn{}dn.setTimeout=function(){return setTimeout(...arguments)};dn.setInterval=function(){return setInterval(...arguments)};dn.clearTimeout=function(){return clearTimeout(...arguments)};dn.clearInterval=function(){return clearInterval(...arguments)};const V2=5e3,Nc=[];var Xn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Xn||(Xn={}));class K extends pr.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var a;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=K.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Qe,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),V2):this.handleAppVisibilityChanged()},this.log=Gr((a=i.loggerName)!==null&&a!==void 0?a:Li.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=K.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),tt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===K.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===K.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Nc.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&Nc.splice(Nc.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),$o(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),a=i.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(a?ve.AudioPlaybackStarted:ve.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(a?ve.AudioPlaybackFailed:ve.VideoPlaybackFailed,o):o.name==="AbortError"?Qe.debug("".concat(a?"audio":"video"," playback aborted, likely due to new play request")):Qe.warn("could not playback ".concat(a?"audio":"video"),o),a&&e&&i.some(l=>l.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ve.ElementAttached,e),e}detach(e){try{if(e){Qo(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(ve.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{Qo(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(ve.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Gr(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Nc.forEach(i=>{i.parentElement||(n=!1)}),n&&Nc.push(e)}}handleAppVisibilityChanged(){return I(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===K.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){On()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){On()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function $o(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(a=>{n.removeTrack(a)}),n.addTrack(t)),(!js()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(js()||Is())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function Qo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(h){h.Audio="audio",h.Video="video",h.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(h){h.Camera="camera",h.Microphone="microphone",h.ScreenShare="screen_share",h.ScreenShareAudio="screen_share_audio",h.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(h){h.Active="active",h.Paused="paused",h.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function a(h){switch(h){case e.Audio:return Oi.AUDIO;case e.Video:return Oi.VIDEO;default:return Oi.DATA}}t.kindToProto=a;function o(h){switch(h){case Oi.AUDIO:return e.Audio;case Oi.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function l(h){switch(h){case n.Camera:return Vt.CAMERA;case n.Microphone:return Vt.MICROPHONE;case n.ScreenShare:return Vt.SCREEN_SHARE;case n.ScreenShareAudio:return Vt.SCREEN_SHARE_AUDIO;default:return Vt.UNKNOWN}}t.sourceToProto=l;function u(h){switch(h){case Vt.CAMERA:return n.Camera;case Vt.MICROPHONE:return n.Microphone;case Vt.SCREEN_SHARE:return n.ScreenShare;case Vt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=u;function d(h){switch(h){case uv.ACTIVE:return i.Active;case uv.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=d})(K||(K={}));class pt{constructor(e,n,i,a,o){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:a,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const H2=["vp8","h264"],q2=["vp8","h264","vp9","av1","h265"];function $2(t){return!!H2.find(e=>e===t)}var CC;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(CC||(CC={}));var Ev;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(Ev||(Ev={}));const tu={h90:new pt(160,90,9e4,20),h180:new pt(320,180,16e4,20),h216:new pt(384,216,18e4,20),h360:new pt(640,360,45e4,20),h540:new pt(960,540,8e5,25),h720:new pt(1280,720,17e5,30),h1080:new pt(1920,1080,3e6,30),h1440:new pt(2560,1440,5e6,30),h2160:new pt(3840,2160,8e6,30)},Cv={h120:new pt(160,120,7e4,20),h180:new pt(240,180,125e3,20),h240:new pt(320,240,14e4,20),h360:new pt(480,360,33e4,20),h480:new pt(640,480,5e5,20),h540:new pt(720,540,6e5,25),h720:new pt(960,720,13e5,30),h1080:new pt(1440,1080,23e5,30),h1440:new pt(1920,1440,38e5,30)},xy={h360fps3:new pt(640,360,2e5,3,"medium"),h360fps15:new pt(640,360,4e5,15,"medium"),h720fps5:new pt(1280,720,8e5,5,"medium"),h720fps15:new pt(1280,720,15e5,15,"medium"),h720fps30:new pt(1280,720,2e6,30,"medium"),h1080fps15:new pt(1920,1080,25e5,15,"medium"),h1080fps30:new pt(1920,1080,5e6,30,"medium"),original:new pt(0,0,7e6,30,"medium")},G2="|",kC="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function K2(t){const e=t.split(G2);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Mn(t){return I(this,void 0,void 0,function*(){return new Promise(e=>dn.setTimeout(e,t))})}function kv(){return"addTransceiver"in RTCPeerConnection.prototype}function wv(){return"addTrack"in RTCPeerConnection.prototype}function Y2(){if(!("getCapabilities"in RTCRtpSender)||js()||Is())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function W2(){if(!("getCapabilities"in RTCRtpSender)||Is())return!1;if(js()){const n=Qn();if(n?.version&&Ii(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&Ii(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function ar(t){return t==="av1"||t==="vp9"}function _v(t){return!document||nu()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function X2(){return typeof RTCPeerConnection>"u"?!1:kv()||wv()}function Is(){var t;return((t=Qn())===null||t===void 0?void 0:t.name)==="Firefox"}function js(){var t;return((t=Qn())===null||t===void 0?void 0:t.name)==="Safari"}function nu(){const t=Qn();return t?.name==="Safari"||t?.os==="iOS"}function Q2(){const t=Qn();return t?.name==="Safari"&&t.version.startsWith("17.")||t?.os==="iOS"&&!!t?.osVersion&&Ii(t.osVersion,"17")>=0}function J2(t){return t||(t=Qn()),t?.name==="Safari"&&Ii(t.version,"18.3")>0||t?.os==="iOS"&&!!t?.osVersion&&Ii(t.osVersion,"18.3")>0}function V1(){var t,e;return On()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Z2(){const t=Qn(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Ii(t.osVersion,e)>=0?!0:t.name==="Safari"&&Ii(t.version,e)>=0}function On(){return typeof document<"u"}function fr(){return navigator.product=="ReactNative"}function xv(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function H1(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function q1(){if(!fr())return;let t=H1();if(t)return t.platform}function wC(){if(On())return window.devicePixelRatio;if(fr()){let t=H1();if(t)return t.devicePixelRatio}return 1}function Ii(t,e){const n=t.split("."),i=e.split("."),a=Math.min(n.length,i.length);for(let o=0;o<a;++o){const l=parseInt(n[o],10),u=parseInt(i[o],10);if(l>u)return 1;if(l<u)return-1;if(o===a-1&&l===u)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function eI(t){for(const e of t)e.target.handleResize(e)}function tI(t){for(const e of t)e.target.handleVisibilityChanged(e)}let ag=null;const _C=()=>(ag||(ag=new ResizeObserver(eI)),ag);let sg=null;const xC=()=>(sg||(sg=new IntersectionObserver(tI,{root:null,rootMargin:"0px"})),sg);function nI(){var t;const e=new H5({sdk:Y_.JS,protocol:F2,version:z2});return fr()&&(e.os=(t=q1())!==null&&t!==void 0?t:""),e}function RC(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a=document.createElement("canvas");a.width=t,a.height=e;const o=a.getContext("2d");o?.fillRect(0,0,a.width,a.height),i&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const l=a.captureStream(),[u]=l.getTracks();if(!u)throw Error("Could not get empty media stream video track");return u.enabled=n,u}let Dc;function og(){if(!Dc){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[Dc]=i.stream.getAudioTracks(),!Dc)throw Error("Could not get empty media stream audio track");Dc.enabled=!1}return Dc.clone()}class sr{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,a)=>I(this,void 0,void 0,function*(){this.resolve=i,this.reject=a,e&&(yield e(i,a))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function iI(t){return q2.includes(t)}function Ua(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function rI(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function Rv(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function aI(t,e){return t.segments.map(n=>{let{id:i,text:a,language:o,startTime:l,endTime:u,final:d}=n;var h;const m=(h=e.get(i))!==null&&h!==void 0?h:Date.now(),g=Date.now();return d?e.delete(i):e.set(i,m),{id:i,text:a,startTime:Number.parseInt(l.toString()),endTime:Number.parseInt(u.toString()),final:d,language:o,firstReceivedTime:m,lastReceivedTime:g}})}function sI(t){const{id:e,timestamp:n,message:i,editTimestamp:a}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:a?Number.parseInt(a.toString()):void 0,message:i}}function AC(t){switch(t.reason){case rt.LeaveRequest:return t.context;case rt.Cancelled:return Mi.CLIENT_INITIATED;case rt.NotAllowed:return Mi.USER_REJECTED;case rt.ServerUnreachable:return Mi.JOIN_FAILURE;default:return Mi.UNKNOWN_REASON}}function Cf(t){return t!==void 0?Number(t):void 0}function Cs(t){return t!==void 0?BigInt(t):void 0}function Os(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function lr(t){return!!t&&t.kind==K.Kind.Audio}function Ka(t){return!!t&&t.kind==K.Kind.Video}function xa(t){return Os(t)&&Ka(t)}function Ur(t){return Os(t)&&lr(t)}function Av(t){return!!t&&!t.isLocal}function oI(t){return!!t&&!t.isLocal}function lg(t){return Av(t)&&Ka(t)}function lI(t){return t.isLocal}function cI(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let a=e;for(;a>0;){const o=i[a];if(o!==void 0&&(o&192)!==128)break;a--}n.push(i.slice(0,a)),i=i.slice(a)}return i.length>0&&n.push(i),n}function $1(t,e,n){var i,a,o,l;const{optionsWithoutProcessor:u,audioProcessor:d,videoProcessor:h}=Y1(t??{}),m=e?.processor,g=n?.processor,y=u??{};return y.audio===!0&&(y.audio={}),y.video===!0&&(y.video={}),y.audio&&(Ov(y.audio,e),(i=(o=y.audio).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(d||m)&&(y.audio.processor=d??m)),y.video&&(Ov(y.video,n),(a=(l=y.video).deviceId)!==null&&a!==void 0||(l.deviceId={ideal:"default"}),(h||g)&&(y.video.processor=h??g)),y}function Ov(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Ry(t){var e,n,i,a;const o={};if(t.video)if(typeof t.video=="object"){const l={},u=l,d=t.video;Object.keys(d).forEach(h=>{switch(h){case"resolution":Ov(u,d.resolution);break;default:u[h]=d[h]}}),o.video=l,(e=(i=o.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else o.video=t.video?{deviceId:{ideal:"default"}}:!1;else o.video=!1;return t.audio?typeof t.audio=="object"?(o.audio=t.audio,(n=(a=o.audio).deviceId)!==null&&n!==void 0||(a.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function G1(t){return I(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const i=K1();if(i){const a=i.createAnalyser();a.fftSize=2048;const o=a.frequencyBinCount,l=new Uint8Array(o);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(a),yield Mn(n),a.getByteTimeDomainData(l);const d=l.some(h=>h!==128&&h!==0);return i.close(),!d}return!1}()})}function K1(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>I(this,void 0,void 0,function*(){var a;try{n.state==="suspended"&&(yield n.resume())}catch(o){console.warn("Error trying to auto-resume audio context",o)}(a=window.document.body)===null||a===void 0||a.removeEventListener("click",i)});window.document.body.addEventListener("click",i)}return n}}function uI(t){return t==="audioinput"?K.Source.Microphone:t==="videoinput"?K.Source.Camera:K.Source.Unknown}function Nv(t){return t===K.Source.Microphone?"audioinput":t===K.Source.Camera?"videoinput":void 0}function dI(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,js()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function $c(t){return t.split("/")[1].toLowerCase()}function fI(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new Ey({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function tt(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?tt(t.track):{})}}function hI(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function mI(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],a={};for(const o of i)t[o]!==e[o]&&(a[o]=(n=e[o])!==null&&n!==void 0?n:"");return a}function Y1(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:I2(e)}}function pI(t){switch(t){case Vt.CAMERA:return K.Source.Camera;case Vt.MICROPHONE:return K.Source.Microphone;case Vt.SCREEN_SHARE:return K.Source.ScreenShare;case Vt.SCREEN_SHARE_AUDIO:return K.Source.ScreenShareAudio;default:return K.Source.Unknown}}function OC(t,e){return t.width*t.height<e.width*e.height}function gI(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(i=>i.quality===e)}class vI extends pr.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var i,a;const{kind:o,data:l}=n.data;switch(o){case"error":Qe.error(l.error.message),this.emit(Ia.EncryptionError,l.error);break;case"initAck":l.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)});break;case"enable":if(l.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)}),this.encryptionEnabled!==l.enabled&&l.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Ia.ParticipantEncryptionStatusChanged,l.enabled,this.room.localParticipant),this.encryptionEnabled=l.enabled;else if(l.participantIdentity){const u=(a=this.room)===null||a===void 0?void 0:a.getParticipantByIdentity(l.participantIdentity);if(!u)throw TypeError("couldn't set encryption status, participant not found".concat(l.participantIdentity));this.emit(Ia.ParticipantEncryptionStatusChanged,l.enabled,u)}break;case"ratchetKey":this.keyProvider.emit(ja.KeyRatcheted,l.ratchetResult,l.participantIdentity,l.keyIndex);break}},this.onWorkerError=n=>{Qe.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Ia.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!P2())throw new _y("tried to setup end-to-end encryption on an unsupported browser");if(Qe.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:v2.getLevel()}};this.worker&&(Qe.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Qe.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Qe.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(be.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(te.TrackPublished,(i,a)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==Wn.NONE,a.identity)),e.on(te.ConnectionStateChanged,i=>{i===nt.Connected&&e.remoteParticipants.forEach(a=>{a.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Wn.NONE,a.identity)})})}).on(te.TrackUnsubscribed,(i,a,o)=>{var l;const u={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:i.mediaStreamID}};(l=this.worker)===null||l===void 0||l.postMessage(u)}).on(te.TrackSubscribed,(i,a,o)=>{this.setupE2EEReceiver(i,o.identity,a.trackInfo)}).on(te.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ie.LocalSenderCreated,(i,a)=>I(this,void 0,void 0,function*(){this.setupE2EESender(a,i)})),e.localParticipant.on(ie.LocalTrackPublished,i=>{if(!Ka(i.track)||!nu())return;const a={kind:"updateCodec",data:{trackId:i.track.mediaStreamID,codec:$c(i.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(a)}),n.on(ja.SetKey,i=>this.postKey(i)).on(ja.RatchetRequest,(i,a)=>this.postRatchetRequest(i,a))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:a}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const l={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:a}};this.worker.postMessage(l)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!i?.mimeType||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?$c(i.mimeType):void 0)}}setupE2EESender(e,n){if(!Os(e)||!n){n||Qe.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,a){return I(this,void 0,void 0,function*(){if(this.worker){if(Sv()){const o={kind:"decode",participantIdentity:i,trackId:n,codec:a};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Oc in e&&a){const d={kind:"updateCodec",data:{trackId:n,codec:a,participantIdentity:i}};this.worker.postMessage(d);return}let o=e.writableStream,l=e.readableStream;if(!o||!l){const d=e.createEncodedStreams();e.writableStream=d.writable,o=d.writable,e.readableStream=d.readable,l=d.readable}const u={kind:"decode",data:{readableStream:l,writableStream:o,trackId:n,codec:a,participantIdentity:i,isReuse:Oc in e}};this.worker.postMessage(u,[l,o])}e[Oc]=!0}})}handleSender(e,n,i){var a;if(!(Oc in e||!this.worker)){if(!(!((a=this.room)===null||a===void 0)&&a.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Sv()){Qe.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{Qe.info("initialize encoded streams");const o=e.createEncodedStreams(),l={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(l,[o.readable,o.writable])}e[Oc]=!0}}}const cg="default";class nn{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new nn),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return I(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;if(((o=nn.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){Qe.debug("awaiting getUserMedia promise");try{n?yield nn.userMediaPromiseMap.get(n):yield Promise.all(nn.userMediaPromiseMap.values())}catch{Qe.warn("error waiting for media permissons")}}let l=yield navigator.mediaDevices.enumerateDevices();if(a&&!(js()&&i.hasDeviceInUse(n))&&(l.filter(d=>d.kind===n).length===0||l.some(d=>{const h=d.label==="",m=n?d.kind===n:!0;return h&&m}))){const d={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},h=yield navigator.mediaDevices.getUserMedia(d);l=yield navigator.mediaDevices.enumerateDevices(),h.getTracks().forEach(m=>{m.stop()})}return i._previousDevices=l,n&&(l=l.filter(u=>u.kind===n)),l}()})}normalizeDeviceId(e,n,i){return I(this,void 0,void 0,function*(){if(n!==cg)return n;const a=yield this.getDevices(e),o=a.find(u=>u.deviceId===cg);if(!o){Qe.warn("could not reliably determine default device");return}const l=a.find(u=>u.deviceId!==cg&&u.groupId===(i??o.groupId));if(!l){Qe.warn("could not reliably determine default device");return}return l?.deviceId})}hasDeviceInUse(e){return e?nn.userMediaPromiseMap.has(e):nn.userMediaPromiseMap.size>0}}nn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];nn.userMediaPromiseMap=new Map;var Gc;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Gc||(Gc={}));class yI{constructor(){this.pendingTasks=new Map,this.taskMutex=new Pn,this.nextTaskIndex=0}run(e){return I(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Gc.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Gc.RUNNING,yield e()}finally{n.status=Gc.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return I(this,void 0,void 0,function*(){return this.run(()=>I(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function bI(t,e){const n=new URL(rI(t));return e.forEach((i,a)=>{n.searchParams.set(a,i)}),W1(n,"rtc")}function SI(t){const e=new URL(Rv(t));return W1(e,"validate")}function TI(t){return t.endsWith("/")?t:"".concat(t,"/")}function W1(t,e){return t.pathname="".concat(TI(t.pathname)).concat(e),t.toString()}const EI=["syncState","trickle","offer","answer","simulate","leave"];function CI(t){const e=EI.indexOf(t.case)>=0;return Qe.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Et;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Et||(Et={}));class Ay{get currentState(){return this.state}get isDisconnected(){return this.state===Et.DISCONNECTING||this.state===Et.DISCONNECTED}get isEstablishingConnection(){return this.state===Et.CONNECTING||this.state===Et.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=Et.DISCONNECTED,this.log=Qe,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Gr((i=n.loggerName)!==null&&i!==void 0?i:Li.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new yI,this.queuedRequests=[],this.closingLock=new Pn,this.connectionLock=new Pn,this.state=Et.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,a){return I(this,void 0,void 0,function*(){return this.state=Et.CONNECTING,this.options=i,yield this.connect(e,n,i,a)})}reconnect(e,n,i,a){return I(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Et.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:a}))})}connect(e,n,i,a){this.connectOptions=i;const o=nI(),l=kI(n,o,i),u=bI(e,l),d=SI(u);return new Promise((h,m)=>I(this,void 0,void 0,function*(){const g=yield this.connectionLock.lock();try{const y=()=>I(this,void 0,void 0,function*(){this.close(),clearTimeout(T),m(new vt("room connection has been cancelled (signal)",rt.Cancelled))}),T=setTimeout(()=>{this.close(),m(new vt("room connection has timed out (signal)",rt.ServerUnreachable))},i.websocketTimeout);a?.aborted&&y(),a?.addEventListener("abort",y);const E=new URL(u);E.searchParams.has("access_token")&&E.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(E),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(u),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(T)},this.ws.onerror=C=>I(this,void 0,void 0,function*(){if(this.state!==Et.CONNECTED){this.state=Et.DISCONNECTED,clearTimeout(T);try{const w=yield fetch(d);if(w.status.toFixed(0).startsWith("4")){const _=yield w.text();m(new vt(_,rt.NotAllowed,w.status))}else m(new vt("Encountered unknown websocket error during connection: ".concat(C.toString()),rt.InternalError,w.status))}catch(w){m(new vt(w instanceof Error?w.message:"server was not reachable",rt.ServerUnreachable))}return}this.handleWSError(C)}),this.ws.onmessage=C=>I(this,void 0,void 0,function*(){var w,_,N;let D;if(typeof C.data=="string"){const O=JSON.parse(C.data);D=oC.fromJson(O,{ignoreUnknownFields:!0})}else if(C.data instanceof ArrayBuffer)D=oC.fromBinary(new Uint8Array(C.data));else{this.log.error("could not decode websocket message: ".concat(typeof C.data),this.logContext);return}if(this.state!==Et.CONNECTED){let O=!1;if(((w=D.message)===null||w===void 0?void 0:w.case)==="join"?(this.state=Et.CONNECTED,a?.removeEventListener("abort",y),this.pingTimeoutDuration=D.message.value.pingTimeout,this.pingIntervalDuration=D.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),h(D.message.value)):this.state===Et.RECONNECTING&&D.message.case!=="leave"?(this.state=Et.CONNECTED,a?.removeEventListener("abort",y),this.startPingInterval(),((_=D.message)===null||_===void 0?void 0:_.case)==="reconnect"?h(D.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),h(void 0),O=!0)):this.isEstablishingConnection&&D.message.case==="leave"?m(new vt("Received leave request while trying to (re)connect",rt.LeaveRequest,void 0,D.message.value.reason)):i.reconnect||m(new vt("did not receive join response, got ".concat((N=D.message)===null||N===void 0?void 0:N.case," instead"),rt.InternalError)),!O)return}this.signalLatency&&(yield Mn(this.signalLatency)),this.handleSignalResponse(D)}),this.ws.onclose=C=>{this.isEstablishingConnection&&m(new vt("Websocket got closed during a (re)connection attempt",rt.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:C.reason,code:C.code,wasClean:C.wasClean,state:this.state})),this.handleOnClose(C.reason)}}finally{g()}}))}close(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Et.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const a=new Promise(o=>{e.ws?e.ws.onclose=()=>{o()}:o()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([a,Mn(250)])),e.ws=void 0}}finally{n&&(e.state=Et.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:If(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:If(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Sy({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Ty({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return I(this,arguments,void 0,function(i,a){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const u=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new n1({requestId:u,metadata:i,name:a,attributes:l})}),u}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new t1({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new a1({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:wt.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new c1({timestamp:wt.parse(Date.now()),rtt:wt.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new e1({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new hh({reason:Mi.CLIENT_INITIATED,action:Wo.DISCONNECT})})}sendRequest(e){return I(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!a&&!CI(n)&&i.state===Et.RECONNECTING){i.queuedRequests.push(()=>I(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(a||(yield i.requestQueue.flush()),i.signalLatency&&(yield Mn(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.ws||i.ws.readyState!==i.ws.OPEN){i.log.error("cannot send signal request before connected, type: ".concat(n?.case),i.logContext);return}const l=new G5({message:n});try{i.useJSON?i.ws.send(l.toJsonString()):i.ws.send(l.toBinary())}catch(u){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:u}))}}()})}handleSignalResponse(e){var n,i;const a=e.message;if(a==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(a.case==="answer"){const l=NC(a.value);this.onAnswer&&this.onAnswer(l,a.value.id)}else if(a.case==="offer"){const l=NC(a.value);this.onOffer&&this.onOffer(l,a.value.id)}else if(a.case==="trickle"){const l=JSON.parse(a.value.candidateInit);this.onTrickle&&this.onTrickle(l,a.value.target)}else a.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=a.value.participants)!==null&&n!==void 0?n:[]):a.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(a.value):a.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=a.value.speakers)!==null&&i!==void 0?i:[]):a.case==="leave"?this.onLeave&&this.onLeave(a.value):a.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(a.value.sid,a.value.muted):a.case==="roomUpdate"?this.onRoomUpdate&&a.value.room&&this.onRoomUpdate(a.value.room):a.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(a.value):a.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(a.value):a.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(a.value):a.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(a.value):a.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(a.value):a.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(a.value):a.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(a.value):a.case==="pong"||(a.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(a.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):a.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(a.value):a.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(a.value.trackSid):a.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(a.value.token),this.onRoomMoved&&this.onRoomMoved(a.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:a.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return I(this,void 0,void 0,function*(){if(this.state===Et.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=dn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&dn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=dn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&dn.clearInterval(this.pingInterval)}}function NC(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function If(t,e){return new Ls({sdp:t.sdp,type:t.type,id:e})}function kI(t,e,n){var i;const a=new URLSearchParams;return a.set("access_token",t),n.reconnect&&(a.set("reconnect","1"),n.sid&&a.set("sid",n.sid)),a.set("auto_subscribe",n.autoSubscribe?"1":"0"),a.set("sdk",fr()?"reactnative":"js"),a.set("version",e.version),a.set("protocol",e.protocol.toString()),e.deviceModel&&a.set("device_model",e.deviceModel),e.os&&a.set("os",e.os),e.osVersion&&a.set("os_version",e.osVersion),e.browser&&a.set("browser",e.browser),e.browserVersion&&a.set("browser_version",e.browserVersion),n.adaptiveStream&&a.set("adaptive_stream","1"),n.reconnectReason&&a.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&a.set("network",navigator.connection.type),a}class DC{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class wI{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const a=i+this.ttl;return this._map.set(e,{value:n,expiresAt:a}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e(i.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],i=this.asValueMap();for(const[a,o]of i.entries())n.push(e(o,a,i));return n}asValueMap(){const e=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e.set(n,i.value);return e}}var xi={},ug={},dg={exports:{}},PC;function Oy(){if(PC)return dg.exports;PC=1;var t=dg.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),dg.exports}var MC;function _I(){return MC||(MC=1,function(t){var e=function(u){return String(Number(u))===u?Number(u):u},n=function(u,d,h,m){if(m&&!h)d[m]=e(u[1]);else for(var g=0;g<h.length;g+=1)u[g+1]!=null&&(d[h[g]]=e(u[g+1]))},i=function(u,d,h){var m=u.name&&u.names;u.push&&!d[u.push]?d[u.push]=[]:m&&!d[u.name]&&(d[u.name]={});var g=u.push?{}:m?d[u.name]:d;n(h.match(u.reg),g,u.names,u.name),u.push&&d[u.push].push(g)},a=Oy(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(u){var d={},h=[],m=d;return u.split(/(\r\n|\r|\n)/).filter(o).forEach(function(g){var y=g[0],T=g.slice(2);y==="m"&&(h.push({rtp:[],fmtp:[]}),m=h[h.length-1]);for(var E=0;E<(a[y]||[]).length;E+=1){var C=a[y][E];if(C.reg.test(T))return i(C,m,T)}}),d.media=h,d};var l=function(u,d){var h=d.split(/=(.+)/,2);return h.length===2?u[h[0]]=e(h[1]):h.length===1&&d.length>1&&(u[h[0]]=void 0),u};t.parseParams=function(u){return u.split(/;\s?/).reduce(l,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(u){return u.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(u){for(var d=[],h=u.split(" ").map(e),m=0;m<h.length;m+=3)d.push({component:h[m],ip:h[m+1],port:h[m+2]});return d},t.parseImageAttributes=function(u){return u.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(l,{})})},t.parseSimulcastStreamList=function(u){return u.split(";").map(function(d){return d.split(",").map(function(h){var m,g=!1;return h[0]!=="~"?m=e(h):(m=e(h.substring(1,h.length)),g=!0),{scid:m,paused:g}})})}}(ug)),ug}var fg,LC;function xI(){if(LC)return fg;LC=1;var t=Oy(),e=/%[sdv%]/g,n=function(l){var u=1,d=arguments,h=d.length;return l.replace(e,function(m){if(u>=h)return m;var g=d[u];switch(u+=1,m){case"%%":return"%";case"%s":return String(g);case"%d":return Number(g);case"%v":return""}})},i=function(l,u,d){var h=u.format instanceof Function?u.format(u.push?d:d[u.name]):u.format,m=[l+"="+h];if(u.names)for(var g=0;g<u.names.length;g+=1){var y=u.names[g];u.name?m.push(d[u.name][y]):m.push(d[u.names[g]])}else m.push(d[u.name]);return n.apply(null,m)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return fg=function(l,u){u=u||{},l.version==null&&(l.version=0),l.name==null&&(l.name=" "),l.media.forEach(function(g){g.payloads==null&&(g.payloads="")});var d=u.outerOrder||a,h=u.innerOrder||o,m=[];return d.forEach(function(g){t[g].forEach(function(y){y.name in l&&l[y.name]!=null?m.push(i(g,y,l)):y.push in l&&l[y.push]!=null&&l[y.push].forEach(function(T){m.push(i(g,y,T))})})}),l.media.forEach(function(g){m.push(i("m",t.m[0],g)),h.forEach(function(y){t[y].forEach(function(T){T.name in g&&g[T.name]!=null?m.push(i(y,T,g)):T.push in g&&g[T.push]!=null&&g[T.push].forEach(function(E){m.push(i(y,T,E))})})})}),m.join(`\r
`)+`\r
`},fg}var IC;function RI(){if(IC)return xi;IC=1;var t=_I(),e=xI(),n=Oy();return xi.grammar=n,xi.write=e,xi.parse=t.parse,xi.parseParams=t.parseParams,xi.parseFmtpConfig=t.parseFmtpConfig,xi.parsePayloads=t.parsePayloads,xi.parseRemoteCandidates=t.parseRemoteCandidates,xi.parseImageAttributes=t.parseImageAttributes,xi.parseSimulcastStreamList=t.parseSimulcastStreamList,xi}var Na=RI();function Ny(t,e,n){var i,a,o;e===void 0&&(e=50),n===void 0&&(n={});var l=(i=n.isImmediate)!=null&&i,u=(a=n.callback)!=null&&a,d=n.maxWait,h=Date.now(),m=[];function g(){if(d!==void 0){var T=Date.now()-h;if(T+e>=d)return d-T}return e}var y=function(){var T=[].slice.call(arguments),E=this;return new Promise(function(C,w){var _=l&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,h=Date.now(),!l){var D=t.apply(E,T);u&&u(D),m.forEach(function(O){return(0,O.resolve)(D)}),m=[]}},g()),_){var N=t.apply(E,T);return u&&u(N),C(N)}m.push({resolve:C,reject:w})})};return y.cancel=function(T){o!==void 0&&clearTimeout(o),m.forEach(function(E){return(0,E.reject)(T)}),m=[]},y}const AI=.7,OI=20,Jo={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class jC extends pr.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=Qe,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Ny(a=>I(this,void 0,void 0,function*(){this.emit(Jo.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(a)a(o);else throw o}}),OI),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Gr((i=n.loggerName)!==null&&i!==void 0?i:Li.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new Pn}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return I(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return I(this,void 0,void 0,function*(){var i;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let a;if(e.type==="offer"){let{stereoMids:o,nackMids:l}=NI(e);this.remoteStereoMids=o,this.remoteNackMids=l}else if(e.type==="answer"){const o=Na.parse((i=e.sdp)!==null&&i!==void 0?i:"");o.media.forEach(l=>{l.type==="audio"&&this.trackBitrates.some(u=>{if(!u.transceiver||l.mid!=u.transceiver.mid)return!1;let d=0;if(l.rtp.some(m=>m.codec.toUpperCase()===u.codec.toUpperCase()?(d=m.payload,!0):!1),d===0)return!0;let h=!1;for(const m of l.fmtp)if(m.payload===d){m.config=m.config.split(";").filter(g=>!g.includes("maxaveragebitrate")).join(";"),u.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(u.maxbr*1e3)),h=!0;break}return h||u.maxbr>0&&l.fmtp.push({payload:d,config:"maxaveragebitrate=".concat(u.maxbr*1e3)}),!0})}),a=Na.write(o)}return yield this.setMungedSDP(e,a,!0),this.pendingCandidates.forEach(o=>{this.pc.addIceCandidate(o)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Jo.NegotiationComplete),e.sdp&&Na.parse(e.sdp).media.forEach(l=>{l.type==="video"&&this.emit(Jo.RTPVideoPayloadTypes,l.rtp)})),!0})}createAndSendOffer(e){return I(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const u=this._pc.remoteDescription;if(e?.iceRestart&&u)yield this._pc.setRemoteDescription(u);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const a=this.latestOfferId+1;this.latestOfferId=a;const o=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:o.sdp},this.logContext));const l=Na.parse((n=o.sdp)!==null&&n!==void 0?n:"");if(l.media.forEach(u=>{BC(u),u.type==="audio"?UC(u,[],[]):u.type==="video"&&this.trackBitrates.some(d=>{if(!u.msid||!d.cid||!u.msid.includes(d.cid))return!1;let h=0;if(u.rtp.some(g=>g.codec.toUpperCase()===d.codec.toUpperCase()?(h=g.payload,!0):!1),h===0||(ar(d.codec)&&!js()&&this.ensureVideoDDExtensionForSVC(u,l),d.codec!=="av1"))return!0;const m=Math.round(d.maxbr*AI);for(const g of u.fmtp)if(g.payload===h){g.config.includes("x-google-start-bitrate")||(g.config+=";x-google-start-bitrate=".concat(m));break}return!0})}),this.latestOfferId>a){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:a}));return}yield this.setMungedSDP(o,Na.write(l)),this.onOffer(o,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return I(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=Na.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(a=>{BC(a),a.type==="audio"&&UC(a,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Na.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Yt("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Yt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return I(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,a=new Map;if((yield this._pc.getStats()).forEach(u=>{switch(u.type){case"transport":n=u.selectedCandidatePairId;break;case"candidate-pair":n===""&&u.selected&&(n=u.id),i.set(u.id,u);break;case"remote-candidate":a.set(u.id,"".concat(u.address,":").concat(u.port));break}}),n==="")return;const l=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(l!==void 0)return a.get(l)})}setMungedSDP(e,n,i){return I(this,void 0,void 0,function*(){if(n){const a=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=a}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(a){let o="unknown error";a instanceof Error?o=a.message:typeof a=="string"&&(o=a);const l={error:o,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(l.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:l})),new Tv(o)}})}ensureVideoDDExtensionForSVC(e,n){var i,a;if(!((i=e.ext)===null||i===void 0?void 0:i.some(l=>l.uri===kC))){if(this.ddExtID===0){let l=0;n.media.forEach(u=>{var d;u.type==="video"&&((d=u.ext)===null||d===void 0||d.forEach(h=>{h.value>l&&(l=h.value)}))}),this.ddExtID=l+1}(a=e.ext)===null||a===void 0||a.push({value:this.ddExtID,uri:kC})}}}function UC(t,e,n){let i=0;t.rtp.some(a=>a.codec==="opus"?(i=a.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(a=>a.payload===i&&a.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(a=>a.payload===i?(a.config.includes("stereo=1")||(a.config+=";stereo=1"),!0):!1))}function NI(t){var e;const n=[],i=[],a=Na.parse((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return a.media.forEach(l=>{var u;l.type==="audio"&&(l.rtp.some(d=>d.codec==="opus"?(o=d.payload,!0):!1),!((u=l.rtcpFb)===null||u===void 0)&&u.some(d=>d.payload===o&&d.type==="nack")&&i.push(l.mid),l.fmtp.some(d=>d.payload===o?(d.config.includes("sprop-stereo=1")&&n.push(l.mid),!0):!1))}),{stereoMids:n,nackMids:i}}function BC(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const Dv="vp8",DI={audioPreset:Ev.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:xy.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Dv,backupCodec:!0,preConnectBuffer:!1},X1={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},Q1={deviceId:{ideal:"default"},resolution:tu.h720.resolution},PI={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new b2,disconnectOnPageLeave:!0,webAudioMix:!1},Dy={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Nt;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Nt||(Nt={}));class MI{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var a;this.peerConnectionTimeout=Dy.peerConnectionTimeout,this.log=Qe,this.updateState=()=>{var o;const l=this.state,u=this.requiredTransports.map(d=>d.getConnectionState());u.every(d=>d==="connected")?this.state=Nt.CONNECTED:u.some(d=>d==="failed")?this.state=Nt.FAILED:u.some(d=>d==="connecting")?this.state=Nt.CONNECTING:u.every(d=>d==="closed")?this.state=Nt.CLOSED:u.some(d=>d==="closed")?this.state=Nt.CLOSING:u.every(d=>d==="new")&&(this.state=Nt.NEW),l!==this.state&&(this.log.debug("pc state change: from ".concat(Nt[l]," to ").concat(Nt[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Gr((a=i.loggerName)!==null&&a!==void 0?a:Li.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new jC(e,i),this.subscriber=new jC(e,i),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var l;(l=this.onIceCandidate)===null||l===void 0||l.call(this,o,Ni.PUBLISHER)},this.subscriber.onIceCandidate=o=>{var l;(l=this.onIceCandidate)===null||l===void 0||l.call(this,o,Ni.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var l;(l=this.onDataChannel)===null||l===void 0||l.call(this,o)},this.subscriber.onTrack=o=>{var l;(l=this.onTrack)===null||l===void 0||l.call(this,o)},this.publisher.onOffer=(o,l)=>{var u;(u=this.onPublisherOffer)===null||u===void 0||u.call(this,o,l)},this.state=Nt.NEW,this.connectionLock=new Pn,this.remoteOfferLock=new Pn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return I(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return I(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return I(this,void 0,void 0,function*(){n===Ni.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return I(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const i=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(e,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{i()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return I(this,void 0,void 0,function*(){var i;const a=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(o=>this.ensureTransportConnected(o,e,n)))}finally{a()}})}negotiate(e){return I(this,void 0,void 0,function*(){return new Promise((n,i)=>I(this,void 0,void 0,function*(){const a=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(a),i("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(Jo.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Jo.NegotiationComplete,()=>{clearTimeout(a),n()})}),yield this.publisher.negotiate(l=>{clearTimeout(a),i(l)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Ni.PUBLISHER?this.publisher.getConnectedAddress():e===Ni.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return I(this,arguments,void 0,function(i,a){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(i.getConnectionState()!=="connected")return new Promise((d,h)=>I(o,void 0,void 0,function*(){const m=()=>{this.log.warn("abort transport connection",this.logContext),dn.clearTimeout(g),h(new vt("room connection has been cancelled",rt.Cancelled))};a?.signal.aborted&&m(),a?.signal.addEventListener("abort",m);const g=dn.setTimeout(()=>{a?.signal.removeEventListener("abort",m),h(new vt("could not establish pc connection",rt.InternalError))},l);for(;this.state!==Nt.CONNECTED;)if(yield Mn(50),a?.signal.aborted){h(new vt("room connection has been cancelled",rt.Cancelled));return}dn.clearTimeout(g),a?.signal.removeEventListener("abort",m),d()}))}()})}}class Pt extends Error{constructor(e,n,i){super(n),this.code=e,this.message=zC(n,Pt.MAX_MESSAGE_BYTES),this.data=i?zC(i,Pt.MAX_DATA_BYTES):void 0}static fromProto(e){return new Pt(e.code,e.message,e.data)}toProto(){return new q_({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Pt(Pt.ErrorCode[e],Pt.ErrorMessage[e],n)}}Pt.MAX_MESSAGE_BYTES=256;Pt.MAX_DATA_BYTES=15360;Pt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Pt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const J1=15360;function Py(t){return new TextEncoder().encode(t).length}function zC(t,e){if(Py(t)<=e)return t;let n=0,i=t.length;const a=new TextEncoder;for(;n<i;){const o=Math.floor((n+i+1)/2);a.encode(t.slice(0,o)).length<=e?n=o:i=o-1}return t.slice(0,n)}const My=2e3;function ph(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const Ly=typeof MediaRecorder<"u";class LI{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const II=Ly?MediaRecorder:LI;class jI extends II{constructor(e,n){if(!Ly)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let i,a;const o=()=>a===void 0,l=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",l),this.removeEventListener("error",u),a?.close(),a=void 0},u=d=>{a?.error(d),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",l),this.removeEventListener("error",u),a=void 0};this.byteStream=new ReadableStream({start:d=>{a=d,i=h=>I(this,void 0,void 0,function*(){let m;if(h.data.arrayBuffer){const g=yield h.data.arrayBuffer();m=new Uint8Array(g)}else if(h.data.byteArray)m=h.data.byteArray;else throw new Error("no data available!");o()||d.enqueue(m)}),this.addEventListener("dataavailable",i)},cancel:()=>{l()}}),this.addEventListener("stop",l),this.addEventListener("error",u)}}function UI(){return Ly}const BI=1e3,zI=1e4;class Z1 extends K{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Ny(()=>I(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>I(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ve.Ended,this)},this.reacquireTrack=!1,this.providedByUser=a,this.muteLock=new Pn,this.pauseUpstreamLock=new Pn,this.trackChangeLock=new Pn,this.trackChangeLock.lock().then(l=>I(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{l()}})),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==K.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return I(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(o=>{Qo(this._mediaStreamTrack,o)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let a;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&($o(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),a=this.processor.processedTrack}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(a??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(o=>{$o(a??e,o)}))})}waitForDimensions(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:BI;return function*(){var i;if(e.kind===K.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=Qn())===null||i===void 0?void 0:i.os)==="iOS"&&(yield Mn(10));const a=Date.now();for(;Date.now()-a<n;){const o=e.dimensions;if(o)return o;yield Mn(50)}throw new Hr("unable to get track dimensions after timeout")}()})}setDeviceId(e){return I(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ua(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Ua(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===K.Source.ScreenShare)return;const{deviceId:i,groupId:a}=e._mediaStreamTrack.getSettings(),o=e.kind===K.Kind.Audio?"audioinput":"videoinput";return n?nn.getInstance().normalizeDeviceId(o,i,a):i}()})}mute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return I(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return I(this,void 0,void 0,function*(){const i=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Hr("unable to replace an unpublished track");let a,o;return typeof n=="boolean"?a=n:n!==void 0&&(a=n.userProvidedTrack,o=n.stopProcessor),this.providedByUser=a??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),o&&this.processor&&(yield this.internalStopProcessor()),this}finally{i()}})}restart(e){return I(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:a}=e,o=S2(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const l={audio:!1,video:!1};this.kind===K.Kind.Video?l.video=i||a?{deviceId:i,facingMode:a}:!0:l.audio=i?Object.assign({deviceId:i},o):!0,this.attachedElements.forEach(h=>{Qo(this.mediaStreamTrack,h)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const d=(yield navigator.mediaDevices.getUserMedia(l)).getTracks()[0];return this.kind===K.Kind.Video&&(yield d.applyConstraints(o)),d.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(d),this._constraints=e,this.emit(ve.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ve.Muted:ve.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),V1()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return I(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ve.UpstreamPaused,this);const i=Qn();if(i?.name==="Safari"&&Ii(i.version,"12.0")<0)throw new _y("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return I(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ve.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return I(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;const l=yield i.trackChangeLock.lock();try{i.log.debug("setting up processor",i.logContext);const u=document.createElement(i.kind),d={kind:i.kind,track:i._mediaStreamTrack,element:u,audioContext:i.audioContext};if(yield n.init(d),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.internalStopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if($o(i._mediaStreamTrack,u),u.muted=!0,u.play().catch(h=>{h instanceof DOMException&&h.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:h})),setTimeout(()=>{u.play().catch(m=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:m}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:h}))}),i.processor=n,i.processorElement=u,i.processor.processedTrack){for(const h of i.attachedElements)h!==i.processorElement&&a&&(Qo(i._mediaStreamTrack,h),$o(i.processor.processedTrack,h));yield(o=i.sender)===null||o===void 0?void 0:o.replaceTrack(i.processor.processedTrack)}i.emit(ve.TrackProcessorUpdate,i.processor)}finally{l()}}()})}getProcessor(){return this.processor}stopProcessor(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const i=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{i()}}()})}internalStopProcessor(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var i,a;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((a=e.processorElement)===null||a===void 0||a.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(ve.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!UI()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new jI(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},zI)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class jf extends Z1{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,K.Kind.Audio,n,i,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let l;try{l=yield this.getSenderStats()}catch(u){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:u}));return}l&&this.prevStats&&(this._currentBitrate=ph(l,this.prevStats)),this.prevStats=l}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(ve.AudioTrackFeatureUpdate,this,tn.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(ve.AudioTrackFeatureUpdate,this,tn.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=a,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===K.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ua(this._constraints.deviceId);return this.source===K.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return I(this,void 0,void 0,function*(){let n;if(e){const i=Ry({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return I(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){On()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},My)))}setProcessor(e){return I(this,void 0,void 0,function*(){var n;const i=yield this.trackChangeLock.lock();try{if(!fr()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const a={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(a),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(ve.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return I(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(a=>{a.type==="outbound-rtp"&&(i={type:"audio",streamId:a.id,packetsSent:a.packetsSent,packetsLost:a.packetsLost,bytesSent:a.bytesSent,timestamp:a.timestamp,roundTripTime:a.roundTripTime,jitter:a.jitter})}),i})}checkForSilence(){return I(this,void 0,void 0,function*(){const e=yield G1(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ve.AudioSilenceDetected)),e})}}function FI(t,e,n){switch(t.kind){case"audio":return new jf(t,e,!1,void 0,n);case"video":return new Uf(t,e,!1,n);default:throw new Hr("unsupported track type: ".concat(t.kind))}}const VI=Object.values(tu),HI=Object.values(Cv),qI=Object.values(xy),$I=[tu.h180,tu.h360],GI=[Cv.h180,Cv.h360],KI=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,a;return new pt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((a=n.fps)!==null&&a!==void 0?a:30))))),n.fps,t.encoding.priority)}),Pv=["q","h","f"];function Mv(t,e,n,i){var a,o;let l=i?.videoEncoding;t&&(l=i?.screenShareEncoding);const u=i?.simulcast,d=i?.scalabilityMode,h=i?.videoCodec;if(!l&&!u&&!d||!e||!n)return[{}];l||(l=WI(t,e,n,h),Qe.debug("using video encoding",l));const m=l.maxFramerate,g=new pt(e,n,l.maxBitrate,l.maxFramerate,l.priority);if(d&&ar(h)){const E=new ex(d),C=[];if(E.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(d));const w=Qn();if(nu()||fr()||w?.name==="Chrome"&&Ii(w?.version,"113")<0){const _=E.suffix=="h"?2:3,N=J2(w);for(let D=0;D<E.spatial;D+=1)C.push({rid:Pv[2-D],maxBitrate:l.maxBitrate/Math.pow(_,D),maxFramerate:g.encoding.maxFramerate,scaleResolutionDownBy:N?Math.pow(2,D):void 0});C[0].scalabilityMode=d}else C.push({maxBitrate:l.maxBitrate,maxFramerate:g.encoding.maxFramerate,scalabilityMode:d});return g.encoding.priority&&(C[0].priority=g.encoding.priority,C[0].networkPriority=g.encoding.priority),Qe.debug("using svc encoding",{encodings:C}),C}if(!u)return[l];let y=[];t?y=(a=VC(i?.screenShareSimulcastLayers))!==null&&a!==void 0?a:FC(t,g):y=(o=VC(i?.videoSimulcastLayers))!==null&&o!==void 0?o:FC(t,g);let T;if(y.length>0){const E=y[0];y.length>1&&([,T]=y);const C=Math.max(e,n);if(C>=960&&T)return hg(e,n,[E,T,g],m);if(C>=480)return hg(e,n,[E,g],m)}return hg(e,n,[g])}function YI(t,e,n){var i,a,o,l;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Qe.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const u=t.mediaStreamTrack.getSettings(),d=(i=u.width)!==null&&i!==void 0?i:(a=t.dimensions)===null||a===void 0?void 0:a.width,h=(o=u.height)!==null&&o!==void 0?o:(l=t.dimensions)===null||l===void 0?void 0:l.height;return t.source===K.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Mv(t.source===K.Source.ScreenShare,d,h,n)}function WI(t,e,n,i){const a=XI(t,e,n);let{encoding:o}=a[0];const l=Math.max(e,n);for(let u=0;u<a.length;u+=1){const d=a[u];if(o=d.encoding,d.width>=l)break}if(i)switch(i){case"av1":case"h265":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function XI(t,e,n){if(t)return qI;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?VI:HI}function FC(t,e){if(t)return KI(e);const{width:n,height:i}=e,a=n>i?n/i:i/n;return Math.abs(a-16/9)<Math.abs(a-4/3)?$I:GI}function hg(t,e,n,i){const a=[];if(n.forEach((o,l)=>{if(l>=Pv.length)return;const u=Math.min(t,e),h={rid:Pv[l],scaleResolutionDownBy:Math.max(1,u/Math.min(o.width,o.height)),maxBitrate:o.encoding.maxBitrate},m=i&&o.encoding.maxFramerate?Math.min(i,o.encoding.maxFramerate):o.encoding.maxFramerate;m&&(h.maxFramerate=m);const g=Is()||l===0;o.encoding.priority&&g&&(h.priority=o.encoding.priority,h.networkPriority=o.encoding.priority),a.push(h)}),fr()&&q1()==="ios"){let o;a.forEach(u=>{o?u.maxFramerate&&u.maxFramerate>o&&(o=u.maxFramerate):o=u.maxFramerate});let l=!0;a.forEach(u=>{var d;u.maxFramerate!=o&&(l&&(l=!1,Qe.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Qe.info('Setting framerate of encoding "'.concat((d=u.rid)!==null&&d!==void 0?d:"",'" to ').concat(o)),u.maxFramerate=o)})}return a}function VC(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:a}=n;return i.maxBitrate>a.maxBitrate?1:i.maxBitrate<a.maxBitrate?-1:i.maxBitrate===a.maxBitrate&&i.maxFramerate&&a.maxFramerate?i.maxFramerate>a.maxFramerate?1:-1:0})}class ex{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function QI(t){return t.source===K.Source.ScreenShare||t.constraints.height&&Ua(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const JI=5e3;class Uf extends Z1{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=arguments.length>3?arguments[3]:void 0;super(e,K.Kind.Video,n,i,a),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>I(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(d){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}const l=new Map(o.map(d=>[d.rid,d])),u=o.some(d=>d.qualityLimitationReason==="cpu");if(u!==this.isCpuConstrained&&(this.isCpuConstrained=u,this.isCpuConstrained&&this.emit(ve.CpuConstrained)),this.prevStats){let d=0;l.forEach((h,m)=>{var g;const y=(g=this.prevStats)===null||g===void 0?void 0:g.get(m);d+=ph(h,y)}),this._currentBitrate=d}this.prevStats=l}),this.senderLock=new Pn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!On())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},My))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return I(this,void 0,void 0,function*(){var n,i,a,o,l;yield e.pauseUpstream.call(this);try{for(var u=!0,d=Vr(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;u=!0)o=h.value,u=!1,yield(l=o.sender)===null||l===void 0?void 0:l.replaceTrack(null)}catch(m){i={error:m}}finally{try{!u&&!n&&(a=d.return)&&(yield a.call(d))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return I(this,void 0,void 0,function*(){var n,i,a,o,l;yield e.resumeUpstream.call(this);try{for(var u=!0,d=Vr(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;u=!0){o=h.value,u=!1;const m=o;yield(l=m.sender)===null||l===void 0?void 0:l.replaceTrack(m.mediaStreamTrack)}}catch(m){i={error:m}}finally{try{!u&&!n&&(a=d.return)&&(yield a.call(d))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===K.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return I(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===K.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return I(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(a=>{var o;if(a.type==="outbound-rtp"){const l={type:"video",streamId:a.id,frameHeight:a.frameHeight,frameWidth:a.frameWidth,framesPerSecond:a.framesPerSecond,framesSent:a.framesSent,firCount:a.firCount,pliCount:a.pliCount,nackCount:a.nackCount,packetsSent:a.packetsSent,bytesSent:a.bytesSent,qualityLimitationReason:a.qualityLimitationReason,qualityLimitationDurations:a.qualityLimitationDurations,qualityLimitationResolutionChanges:a.qualityLimitationResolutionChanges,rid:(o=a.rid)!==null&&o!==void 0?o:a.id,retransmittedPacketsSent:a.retransmittedPacketsSent,targetBitrate:a.targetBitrate,timestamp:a.timestamp},u=i.get(a.remoteId);u&&(l.jitter=u.jitter,l.packetsLost=u.packetsLost,l.roundTripTime=u.roundTripTime),n.push(l)}}),n.sort((a,o)=>{var l,u;return((l=o.frameWidth)!==null&&l!==void 0?l:0)-((u=a.frameWidth)!==null&&u!==void 0?u:0)}),n})}setPublishingQuality(e){const n=[];for(let i=Xn.LOW;i<=Xn.HIGH;i+=1)n.push(new Cy({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(ar(this.codec),n)}restartTrack(e){return I(this,void 0,void 0,function*(){var n,i,a,o,l;let u;if(e){const g=Ry({video:e});typeof g.video!="boolean"&&(u=g.video)}yield this.restart(u),this.isCpuConstrained=!1;try{for(var d=!0,h=Vr(this.simulcastCodecs.values()),m;m=yield h.next(),n=m.done,!n;d=!0){o=m.value,d=!1;const g=o;g.sender&&((l=g.sender.transport)===null||l===void 0?void 0:l.state)!=="closed"&&(g.mediaStreamTrack=this.mediaStreamTrack.clone(),yield g.sender.replaceTrack(g.mediaStreamTrack))}}catch(g){i={error:g}}finally{try{!d&&!n&&(a=h.return)&&(yield a.call(h))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return I(this,arguments,void 0,function(i){var a=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var l,u,d,h,m,g;if(yield n.setProcessor.call(a,i,o),!((m=a.processor)===null||m===void 0)&&m.processedTrack)try{for(var y=!0,T=Vr(a.simulcastCodecs.values()),E;E=yield T.next(),l=E.done,!l;y=!0)h=E.value,y=!1,yield(g=h.sender)===null||g===void 0?void 0:g.replaceTrack(a.processor.processedTrack)}catch(C){u={error:C}}finally{try{!y&&!l&&(d=T.return)&&(yield d.call(T))}finally{if(u)throw u.error}}}()})}setDegradationPreference(e){return I(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},JI))}setPublishingCodecs(e){return I(this,void 0,void 0,function*(){var n,i,a,o,l,u,d;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(ar(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const h=[];try{for(n=!0,i=Vr(e);a=yield i.next(),o=a.done,!o;n=!0){d=a.value,n=!1;const m=d;if(!this.codec||this.codec===m.codec)yield this.setPublishingLayers(ar(m.codec),m.qualities);else{const g=this.simulcastCodecs.get(m.codec);if(this.log.debug("try setPublishingCodec for ".concat(m.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:g})),!g||!g.sender){for(const y of m.qualities)if(y.enabled){h.push(m.codec);break}}else g.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(m.codec),this.logContext),yield HC(g.sender,g.encodings,m.qualities,this.senderLock,ar(m.codec),this.log,this.logContext))}}}catch(m){l={error:m}}finally{try{!n&&!o&&(u=i.return)&&(yield u.call(i))}finally{if(l)throw l.error}}return h})}setPublishingLayers(e,n){return I(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield HC(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return I(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,a)=>{var o;return Object.assign(Object.assign({},i),{active:a===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((o=this.mediaStreamTrack.getSettings().height)!==null&&o!==void 0?o:360)/360)),scalabilityMode:a===0&&ar(this.codec)?"L1T3":void 0,maxFramerate:a===0?15:0,maxBitrate:a===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),V1()&&this.isInBackground&&this.source===K.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function HC(t,e,n,i,a,o,l){return I(this,void 0,void 0,function*(){const u=yield i.lock();o.debug("setPublishingLayersForSender",Object.assign(Object.assign({},l),{sender:t,qualities:n,senderEncodings:e}));try{const d=t.getParameters(),{encodings:h}=d;if(!h)return;if(h.length!==e.length){o.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},l),{encodings:h,senderEncodings:e}));return}let m=!1;!1&&h[0].scalabilityMode||(a&&n.some(T=>T.enabled)&&n.forEach(T=>T.enabled=!0),h.forEach((y,T)=>{var E;let C=(E=y.rid)!==null&&E!==void 0?E:"";C===""&&(C="q");const w=tx(C),_=n.find(N=>N.quality===w);_&&y.active!==_.enabled&&(m=!0,y.active=_.enabled,o.debug("setting layer ".concat(_.quality," to ").concat(y.active?"enabled":"disabled"),l),Is()&&(_.enabled?(y.scaleResolutionDownBy=e[T].scaleResolutionDownBy,y.maxBitrate=e[T].maxBitrate,y.maxFrameRate=e[T].maxFrameRate):(y.scaleResolutionDownBy=4,y.maxBitrate=10,y.maxFrameRate=2)))})),m&&(d.encodings=h,o.debug("setting encodings",Object.assign(Object.assign({},l),{encodings:d.encodings})),yield t.setParameters(d))}finally{u()}})}function tx(t){switch(t){case"f":return Xn.HIGH;case"h":return Xn.MEDIUM;case"q":return Xn.LOW;default:return Xn.HIGH}}function qC(t,e,n,i){if(!n)return[new As({quality:Xn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const a=n[0].scalabilityMode,o=new ex(a),l=[],u=o.suffix=="h"?1.5:2,d=o.suffix=="h"?2:3;for(let h=0;h<o.spatial;h+=1)l.push(new As({quality:Math.min(Xn.HIGH,o.spatial-1)-h,width:Math.ceil(t/Math.pow(u,h)),height:Math.ceil(e/Math.pow(u,h)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(d,h)):0,ssrc:0}));return l}return n.map(a=>{var o,l,u;const d=(o=a.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let h=tx((l=a.rid)!==null&&l!==void 0?l:"");return new As({quality:h,width:Math.ceil(t/d),height:Math.ceil(e/d),bitrate:(u=a.maxBitrate)!==null&&u!==void 0?u:0,ssrc:0})})}const $C="_lossy",GC="_reliable",ZI=2*1e3,mg="leave-reconnect",ej=3e4;var Ri;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Ri||(Ri={}));class tj extends pr.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Dy.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Ri.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Qe,this.reliableDataSequence=1,this.reliableMessageBuffer=new DC,this.reliableReceivedState=new wI(ej),this.handleDataChannel=i=>I(this,[i],void 0,function(a){var o=this;let{channel:l}=a;return function*(){if(l){if(l.label===GC)o.reliableDCSub=l;else if(l.label===$C)o.lossyDCSub=l;else return;o.log.debug("on data channel ".concat(l.id,", ").concat(l.label),o.logContext),l.onmessage=o.handleDataMessage}}()}),this.handleDataMessage=i=>I(this,void 0,void 0,function*(){var a,o;const l=yield this.dataProcessLock.lock();try{let u;if(i.data instanceof ArrayBuffer)u=i.data;else if(i.data instanceof Blob)u=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const d=Rn.fromBinary(new Uint8Array(u));if(d.sequence>0&&d.participantSid!==""){const h=this.reliableReceivedState.get(d.participantSid);if(h&&d.sequence<=h)return;this.reliableReceivedState.set(d.participantSid,d.sequence)}((a=d.value)===null||a===void 0?void 0:a.case)==="speaker"?this.emit(be.ActiveSpeakersUpdate,d.value.value.speakers):(((o=d.value)===null||o===void 0?void 0:o.case)==="user"&&ij(d,d.value.value),this.emit(be.DataPacketReceived,d))}finally{l()}}),this.handleDataError=i=>{const o=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:l}=i.error;this.log.error("DataChannel error on ".concat(o,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:l}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const o=i.currentTarget.maxRetransmits===0?Ye.LOSSY:Ye.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(i,a)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=d=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(d,"ms. giving up"),this.logContext),this.emit(be.Disconnected),this.close()},l=Date.now()-this.reconnectStart;let u=this.getNextRetryDelay({elapsedMs:l,retryCount:this.reconnectAttempts});if(u===null){o(l);return}i===mg&&(u=0),this.log.debug("reconnecting in ".concat(u,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=dn.setTimeout(()=>this.attemptReconnect(a).finally(()=>this.reconnectTimeout=void 0),u)},this.waitForRestarted=()=>new Promise((i,a)=>{this.pcState===Ri.Connected&&i();const o=()=>{this.off(be.Disconnected,l),i()},l=()=>{this.off(be.Restarted,o),a()};this.once(be.Restarted,o),this.once(be.Disconnected,l)}),this.updateAndEmitDCBufferStatus=i=>{const a=this.isBufferStatusLow(i);typeof a<"u"&&a!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,a),this.emit(be.DCBufferStatusChanged,a,i))},this.isBufferStatusLow=i=>{const a=this.dataChannelForKind(i);if(a)return i===Ye.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(a.bufferedAmount),a.bufferedAmount<=a.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Et.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Mo.RR_SIGNAL_DISCONNECTED))},this.log=Gr((n=e.loggerName)!==null&&n!==void 0?n:Li.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Ay(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Pn,this.dataProcessLock=new Pn,this.dcBufferStatus=new Map([[Ye.LOSSY,!0],[Ye.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(be.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(be.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(be.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(be.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(be.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(be.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(be.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(be.SignalRequestResponse,i)}get logContext(){var e,n,i,a,o,l;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(a=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||a===void 0?void 0:a.sid,participant:(l=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||l===void 0?void 0:l.identity,pID:this.participantSid}}join(e,n,i,a){return I(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,i,a);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),(!this.subscriberPrimary||o.fastPublish)&&this.negotiate(),this.clientConfiguration=o.clientConfiguration,this.emit(be.SignalConnected,o),o}catch(o){if(o instanceof vt&&o.reason===rt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,a);throw o}})}close(){return I(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(be.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return I(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new DC,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return I(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Hr("a track with the same ID has already been published");return new Promise((n,i)=>{const a=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(new vt("publication of local track timed out, no response from server",rt.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(a),n(o)},reject:()=>{clearTimeout(a),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return I(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return I(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==Nt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const a=this.makeRTCConfiguration(e);this.pcManager=new MI(a,e.subscriberPrimary,this.loggerOptions),this.emit(be.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(o,l)=>{this.client.sendIceCandidate(o,l)},this.pcManager.onPublisherOffer=(o,l)=>{this.client.sendOffer(o,l)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(o,l,u)=>I(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(o),this.logContext),["closed","disconnected","failed"].includes(l)&&(this.publisherConnectionPromise=void 0),o===Nt.CONNECTED){const m=this.pcState===Ri.New;this.pcState=Ri.Connected,m&&this.emit(be.Connected,e)}else o===Nt.FAILED&&this.pcState===Ri.Connected&&(this.pcState=Ri.Disconnected,this.handleDisconnect("peerconnection failed",u==="failed"?Mo.RR_SUBSCRIBER_FAILED:Mo.RR_PUBLISHER_FAILED));const d=this.client.isDisconnected||this.client.currentState===Et.RECONNECTING,h=[Nt.FAILED,Nt.CLOSING,Nt.CLOSED].includes(o);d&&h&&!this._isClosed&&this.emit(be.Offline)}),this.pcManager.onTrack=o=>{this.emit(be.MediaTrackAdded,o.track,o.streams[0],o.receiver)},nj((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n)=>I(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n)=>I(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(be.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(be.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(be.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(be.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(be.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Mo.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Wo.DISCONNECT:this.emit(be.Disconnected,e?.reason),this.close();break;case Wo.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(mg);break;case Wo.RESUME:this.handleDisconnect(mg)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const a=[];e.iceServers.forEach(o=>{const l={urls:o.urls};o.username&&(l.username=o.username),o.credential&&(l.credential=o.credential),a.push(l)}),i.iceServers=a}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Jc.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel($C,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(GC,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,i){return I(this,void 0,void 0,function*(){if(kv())return yield this.createTransceiverRTCRtpSender(e,n,i);if(wv())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Yt("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,a){return I(this,void 0,void 0,function*(){if(kv())return this.createSimulcastTransceiverSender(e,n,i,a);if(wv())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Yt("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yt("publisher is closed");const a=[];e.mediaStream&&a.push(e.mediaStream),Ka(e)&&(e.codec=n.videoCodec);const o={direction:"sendonly",streams:a};return i&&(o.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(e,n,i,a){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yt("publisher is closed");const o={direction:"sendonly"};a&&(o.sendEncodings=a);const l=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,l.sender),l.sender})}createRTCRtpSender(e){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yt("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return I(this,void 0,void 0,function*(){var n,i,a;if(!this._isClosed){if(this.attemptingReconnect){Qe.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Jc.DISABLED||((a=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&a!==void 0?a:Nt.NEW)===Nt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let l=!0;o instanceof Yt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),l=!1):o instanceof Lo||(this.fullReconnectOnNext=!0),l?this.handleDisconnect("reconnect",Mo.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(be.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return I(this,void 0,void 0,function*(){var n,i,a;try{if(!this.url||!this.token)throw new Yt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(be.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Lo;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(l){throw l instanceof vt&&l.reason===rt.NotAllowed?new Yt("could not reconnect, token might be expired"):new Lo}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(be.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Et.CONNECTED)throw new Lo("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(be.Restarted)}catch(o){const l=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(l){yield this.restartConnection(l);return}else throw(a=this.regionUrlProvider)===null||a===void 0||a.resetAttempts(),o}})}resumeConnection(e){return I(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Yt("could not reconnect, url or token not saved");if(!this.pcManager)throw new Yt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(be.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(a){let o="";throw a instanceof Error&&(o=a.message,this.log.error(a.message,Object.assign(Object.assign({},this.logContext),{error:a}))),a instanceof vt&&a.reason===rt.NotAllowed?new Yt("could not reconnect, token might be expired"):a instanceof vt&&a.reason===rt.LeaveRequest?a:new Lo(o)}if(this.emit(be.SignalResumed),i){const a=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(a),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Et.CONNECTED)throw new Lo("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i?.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(be.Resumed)})}waitForPCInitialConnection(e,n){return I(this,void 0,void 0,function*(){if(!this.pcManager)throw new Yt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return I(this,void 0,void 0,function*(){this.pcState=Ri.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Mn(ZI),!this.pcManager)throw new Yt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Ri.Connected}catch(e){throw this.pcState=Ri.Disconnected,new vt("could not establish PC connection, ".concat(e.message),rt.InternalError)}})}publishRpcResponse(e,n,i,a){return I(this,void 0,void 0,function*(){const o=new Rn({destinationIdentities:[e],kind:Ye.RELIABLE,value:{case:"rpcResponse",value:new H_({requestId:n,value:a?{case:"error",value:a.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(o,Ye.RELIABLE)})}publishRpcAck(e,n){return I(this,void 0,void 0,function*(){const i=new Rn({destinationIdentities:[e],kind:Ye.RELIABLE,value:{case:"rpcAck",value:new V_({requestId:n})}});yield this.sendDataPacket(i,Ye.RELIABLE)})}sendDataPacket(e,n){return I(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(n),n===Ye.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=e.toBinary(),a=this.dataChannelForKind(n);if(a){if(n===Ye.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:e.sequence}),this.attemptingReconnect)return;a.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return I(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(Ye.RELIABLE);const n=this.dataChannelForKind(Ye.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(Ye.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,i)=>I(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const a=()=>i("Engine closed");for(this.once(be.Closing,a);!this.dcBufferStatus.get(e);)yield Mn(10);this.off(be.Closing,a),n()}}))}ensureDataTransportConnected(e){return I(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var o;if(!i.pcManager)throw new Yt("PC manager is closed");const l=a?i.pcManager.subscriber:i.pcManager.publisher,u=a?"Subscriber":"Publisher";if(!l)throw new vt("".concat(u," connection not set"),rt.InternalError);let d=!1;!a&&!i.dataChannelForKind(n,a)&&(i.createDataChannels(),d=!0),!d&&!a&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(d=!0),d&&i.negotiate();const h=i.dataChannelForKind(n,a);if(h?.readyState==="open")return;const m=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<m;){if(l.isICEConnected&&((o=i.dataChannelForKind(n,a))===null||o===void 0?void 0:o.readyState)==="open")return;yield Mn(50)}throw new vt("could not establish ".concat(u," connection, state: ").concat(l.getICEConnectionState()),rt.InternalError)}()})}ensurePublisherConnected(e){return I(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Nt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return I(this,void 0,void 0,function*(){return new Promise((e,n)=>I(this,void 0,void 0,function*(){if(!this.pcManager){n(new Tv("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,a=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(be.Closing,a),this.pcManager.publisher.once(Jo.RTPVideoPayloadTypes,o=>{const l=new Map;o.forEach(u=>{const d=u.codec.toLowerCase();iI(d)&&l.set(u.payload,d)}),this.emit(be.RTPVideoMapUpdate,l)});try{yield this.pcManager.negotiate(i),e()}catch(o){o instanceof Tv&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Mo.RR_UNKNOWN),n(o)}finally{this.off(be.Closing,a)}}))})}dataChannelForKind(e,n){if(n){if(e===Ye.LOSSY)return this.lossyDCSub;if(e===Ye.RELIABLE)return this.reliableDCSub}else{if(e===Ye.LOSSY)return this.lossyDC;if(e===Ye.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,a;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),l=this.pcManager.subscriber.getRemoteDescription(),u=(a=(i=this.signalOpts)===null||i===void 0?void 0:i.autoSubscribe)!==null&&a!==void 0?a:!0,d=new Array,h=new Array;e.forEach(m=>{m.isDesired!==u&&d.push(m.trackSid),m.isEnabled||h.push(m.trackSid)}),this.client.sendSyncState(new s1({answer:o?If({sdp:o.sdp,type:o.type}):void 0,offer:l?If({sdp:l.sdp,type:l.type}):void 0,subscription:new fh({trackSids:d,subscribe:!u,participantTracks:[]}),publishTracks:fI(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:h,datachannelReceiveStates:this.reliableReceivedState.map((m,g)=>new o1({publisherSid:g,lastSeq:m}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,a)=>{i?.id!==void 0&&i.id!==null&&e.push(new l1({label:i.label,id:i.id,target:a}))};return n(this.dataChannelForKind(Ye.LOSSY),Ni.PUBLISHER),n(this.dataChannelForKind(Ye.RELIABLE),Ni.PUBLISHER),n(this.dataChannelForKind(Ye.LOSSY,!0),Ni.SUBSCRIBER),n(this.dataChannelForKind(Ye.RELIABLE,!0),Ni.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&dn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){On()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){On()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Lo extends Error{}function nj(t){return t!==void 0&&t>13}function ij(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class Lv{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return xv(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return I(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(i=>!this.attemptedRegions.find(a=>a.url===i.url));if(n.length>0){const i=n[0];return this.attemptedRegions.push(i),Qe.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return I(this,void 0,void 0,function*(){const n=yield fetch("".concat(rj(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const i=yield n.json();return this.lastUpdateAt=Date.now(),i}else throw new vt("Could not fetch region settings: ".concat(n.statusText),n.status===401?rt.NotAllowed:rt.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function rj(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class nx{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new Ma("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),Di.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Ma("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),Di.LengthExceeded)}}constructor(e,n,i,a){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=a}}class aj extends nx{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new sr,i=null,a=null;if(this.signal){const l=this.signal;a=()=>{var u;(u=n.reject)===null||u===void 0||u.call(n,l.reason)},l.addEventListener("abort",a),i=l}const o=()=>{e.releaseLock(),i&&a&&i.removeEventListener("abort",a),this.signal=void 0};return{next:()=>I(this,void 0,void 0,function*(){var l,u;try{const{done:d,value:h}=yield Promise.race([e.read(),n.promise,(u=(l=this.outOfBandFailureRejectingFuture)===null||l===void 0?void 0:l.promise)!==null&&u!==void 0?u:new Promise(()=>{})]);return d?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(h),{done:!1,value:h.content})}catch(d){throw o(),d}}),return(){return I(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var i,a,o,l;let u=new Set;const d=n.signal?e.withAbortSignal(n.signal):e;try{for(var h=!0,m=Vr(d),g;g=yield m.next(),i=g.done,!i;h=!0){l=g.value,h=!1;const y=l;u.add(y)}}catch(y){a={error:y}}finally{try{!h&&!i&&(o=m.return)&&(yield o.call(m))}finally{if(a)throw a.error}}return Array.from(u)}()})}}class sj extends nx{constructor(e,n,i,a){super(e,n,i,a),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=Cf(e.chunkIndex),a=this.receivedChunks.get(i);if(a&&a.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const o=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,o)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let i=new sr,a=null,o=null;if(this.signal){const u=this.signal;o=()=>{var d;(d=i.reject)===null||d===void 0||d.call(i,u.reason)},u.addEventListener("abort",o),a=u}const l=()=>{e.releaseLock(),a&&o&&a.removeEventListener("abort",o),this.signal=void 0};return{next:()=>I(this,void 0,void 0,function*(){var u,d;try{const{done:h,value:m}=yield Promise.race([e.read(),i.promise,(d=(u=this.outOfBandFailureRejectingFuture)===null||u===void 0?void 0:u.promise)!==null&&d!==void 0?d:new Promise(()=>{})]);if(h)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(m);let g;try{g=n.decode(m.content)}catch(y){throw new Ma("Cannot decode datastream chunk ".concat(m.chunkIndex," as text: ").concat(y),Di.DecodeFailed)}return{done:!1,value:g}}}catch(h){throw l(),h}}),return(){return I(this,void 0,void 0,function*(){return l(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return I(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function*(){var i,a,o,l;let u="";const d=n.signal?e.withAbortSignal(n.signal):e;try{for(var h=!0,m=Vr(d),g;g=yield m.next(),i=g.done,!i;h=!0)l=g.value,h=!1,u+=l}catch(y){a={error:y}}finally{try{!h&&!i&&(o=m.return)&&(yield o.call(m))}finally{if(a)throw a.error}}return u}()})}}class oj{constructor(){this.log=Qe,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new Ma('A text stream handler for topic "'.concat(e,'" has already been set.'),Di.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new Ma('A byte stream handler for topic "'.concat(e,'" has already been set.'),Di.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,i,a,o;const l=Array.from(this.textStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===e),u=Array.from(this.byteStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===e);if(l.length>0||u.length>0){const d=new Ma("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),Di.AbnormalEnd);for(const[h,m]of u)(i=(n=m.outOfBandFailureRejectingFuture).reject)===null||i===void 0||i.call(n,d),this.byteStreamControllers.delete(h);for(const[h,m]of l)(o=(a=m.outOfBandFailureRejectingFuture).reject)===null||o===void 0||o.call(a,d),this.textStreamControllers.delete(h)}}handleDataStreamPacket(e){return I(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity);case"streamChunk":return this.handleStreamChunk(e.value.value);case"streamTrailer":return this.handleStreamTrailer(e.value.value);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n){return I(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const a=this.byteStreamHandlers.get(e.topic);if(!a){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let o;const l=new sr,u={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Cf(e.timestamp),attributes:e.attributes},d=new ReadableStream({start:h=>{if(o=h,this.textStreamControllers.has(e.streamId))throw new Ma("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),Di.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});a(new aj(u,d,Cf(e.totalLength),l),{identity:n})}else if(e.contentHeader.case==="textHeader"){const a=this.textStreamHandlers.get(e.topic);if(!a){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let o;const l=new sr,u={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},d=new ReadableStream({start:h=>{if(o=h,this.textStreamControllers.has(e.streamId))throw new Ma("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),Di.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:u,controller:o,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});a(new sj(u,d,Cf(e.totalLength),l),{identity:n})}})}handleStreamChunk(e){const n=this.byteStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e);const i=this.textStreamControllers.get(e.streamId);i&&e.content.length>0&&i.controller.enqueue(e)}handleStreamTrailer(e){const n=this.textStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.textStreamControllers.delete(e.streamId));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.byteStreamControllers.delete(e.streamId))}}class ix{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return I(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class lj extends ix{}class cj extends ix{}const KC=15e3;class uj{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return I(this,void 0,void 0,function*(){var i;const a=crypto.randomUUID(),l=new TextEncoder().encode(e).byteLength,u=(i=n?.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),d=new Array(u?u.length+1:1).fill(0),h=(g,y)=>{var T;d[y]=g;const E=d.reduce((C,w)=>C+w,0);(T=n?.onProgress)===null||T===void 0||T.call(n,E)},m=yield this.streamText({streamId:a,totalSize:l,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:u,attributes:n?.attributes});return yield m.write(e),h(1,0),yield m.close(),n?.attachments&&u&&(yield Promise.all(n.attachments.map((g,y)=>I(this,void 0,void 0,function*(){return this._sendFile(u[y],g,{topic:n.topic,mimeType:g.type,onProgress:T=>{h(T,y+1)}})})))),m.info})}streamText(e){return I(this,void 0,void 0,function*(){var n,i;const a=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:a,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e?.topic)!==null&&i!==void 0?i:"",size:e?.totalSize,attributes:e?.attributes},l=new ov({streamId:a,mimeType:o.mimeType,topic:o.topic,timestamp:Cs(o.timestamp),totalLength:Cs(e?.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new Q_({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?sv.UPDATE:sv.CREATE})}}),u=e?.destinationIdentities,d=new Rn({destinationIdentities:u,value:{case:"streamHeader",value:l}});yield this.engine.sendDataPacket(d,Ye.RELIABLE);let h=0;const m=this.engine,g=new WritableStream({write(E){return I(this,void 0,void 0,function*(){for(const C of cI(E,KC)){yield m.waitForBufferStatusLow(Ye.RELIABLE);const w=new lv({content:C,streamId:a,chunkIndex:Cs(h)}),_=new Rn({destinationIdentities:u,value:{case:"streamChunk",value:w}});yield m.sendDataPacket(_,Ye.RELIABLE),h+=1}})},close(){return I(this,void 0,void 0,function*(){const E=new cv({streamId:a}),C=new Rn({destinationIdentities:u,value:{case:"streamTrailer",value:E}});yield m.sendDataPacket(C,Ye.RELIABLE)})},abort(E){console.log("Sink error:",E)}});let y=()=>I(this,void 0,void 0,function*(){yield T.close()});m.once(be.Closing,y);const T=new lj(g,o,()=>this.engine.off(be.Closing,y));return T})}sendFile(e,n){return I(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return I(this,void 0,void 0,function*(){var a;const o=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(a=i?.mimeType)!==null&&a!==void 0?a:n.type,topic:i?.topic,destinationIdentities:i?.destinationIdentities}),l=n.stream().getReader();for(;;){const{done:u,value:d}=yield l.read();if(u)break;yield o.write(d)}return yield o.close(),o.info})}streamBytes(e){return I(this,void 0,void 0,function*(){var n,i,a,o,l;const u=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d=e?.destinationIdentities,h={id:u,mimeType:(i=e?.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(a=e?.topic)!==null&&a!==void 0?a:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(o=e?.name)!==null&&o!==void 0?o:"unknown"},m=new ov({totalLength:Cs((l=h.size)!==null&&l!==void 0?l:0),mimeType:h.mimeType,streamId:u,topic:h.topic,timestamp:Cs(Date.now()),attributes:h.attributes,contentHeader:{case:"byteHeader",value:new J_({name:h.name})}}),g=new Rn({destinationIdentities:d,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(g,Ye.RELIABLE);let y=0;const T=new Pn,E=this.engine,C=this.log,w=new WritableStream({write(N){return I(this,void 0,void 0,function*(){const D=yield T.lock();let O=0;try{for(;O<N.byteLength;){const R=N.slice(O,O+KC);yield E.waitForBufferStatusLow(Ye.RELIABLE);const x=new Rn({destinationIdentities:d,value:{case:"streamChunk",value:new lv({content:R,streamId:u,chunkIndex:Cs(y)})}});yield E.sendDataPacket(x,Ye.RELIABLE),y+=1,O+=R.byteLength}}finally{D()}})},close(){return I(this,void 0,void 0,function*(){const N=new cv({streamId:u}),D=new Rn({destinationIdentities:d,value:{case:"streamTrailer",value:N}});yield E.sendDataPacket(D,Ye.RELIABLE)})},abort(N){C.error("Sink error:",N)}});return new cj(w,h)})}}class rx extends K{constructor(e,n,i,a,o){super(e,i,o),this.sid=n,this.receiver=a}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ve.Muted:ve.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(ve.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return I(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),My)),hI()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:a,rtpTimestamp:o}=i;o&&this.rtpTimestamp!==o&&(this.emit(ve.TimeSyncUpdate,{timestamp:a,rtpTimestamp:o}),this.rtpTimestamp=o)}};e()}}class ax extends rx{constructor(e,n,i,a,o,l){super(e,n,K.Kind.Audio,i,l),this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const u=yield this.getReceiverStats();u&&this.prevStats&&this.receiver&&(this._currentBitrate=ph(u,this.prevStats)),this.prevStats=u}),this.audioContext=a,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;fr()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(fr())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return I(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(_v(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&_v(e)&&e.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(a=>{i.connect(a),i=a}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ve.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(a=>{this.emit(ve.AudioPlaybackFailed,a)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const pg=100;class dj extends rx{constructor(e,n,i,a,o){super(e,n,K.Kind.Video,i,o),this.elementInfos=[],this.monitorReceiver=()=>I(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=ph(l,this.prevStats)),this.prevStats=l}),this.debouncedHandleResize=Ny(()=>{this.updateDimensions()},pg),this.adaptiveStreamSettings=a}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),console.log("setStreamState",e),e===K.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?Qo(this._mediaStreamTrack,n):$o(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new fj(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return I(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",a=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(i=o.codecId,n={type:"video",streamId:o.id,framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&a.set(o.id,o)}),n&&i!==""&&a.get(i)&&(n.mimeType=a.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return I(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,i;const a=this.elementInfos.reduce((d,h)=>Math.max(d,h.visibilityChangedAt||0),0),o=!((i=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&i!==void 0)||i?this.isInBackground:!1,l=this.elementInfos.some(d=>d.pictureInPicture),u=this.elementInfos.some(d=>d.visible)&&!o||l;if(!(this.lastVisible===u&&!e)){if(!u&&Date.now()-a<pg){dn.setTimeout(()=>{this.updateVisibility()},pg);return}this.lastVisible=u,this.emit(ve.VisibilityChanged,u,this)}}updateDimensions(){var e,n;let i=0,a=0;const o=this.getPixelDensity();for(const l of this.elementInfos){const u=l.width()*o,d=l.height()*o;u+d>i+a&&(i=u,a=d)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===a||(this.lastDimensions={width:i,height:a},this.emit(ve.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?wC():n||(wC()>2?2:1)}}class fj{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var a;const{target:o,isIntersecting:l}=i;o===this.element&&(this.isIntersecting=l,this.isPiP=Pc(this.element),this.visibilityChangedAt=Date.now(),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this))},this.onEnterPiP=()=>{var i,a,o;(a=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||a===void 0||a.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Pc(this.element),(o=this.handleVisibilityChanged)===null||o===void 0||o.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=Pc(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??Iv(e),this.isPiP=On()&&Pc(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=Iv(this.element),this.isPiP=Pc(this.element),this.element.handleResize=()=>{var a;(a=this.handleResize)===null||a===void 0||a.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,xC().observe(this.element),_C().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,a,o;(e=xC())===null||e===void 0||e.unobserve(this.element),(n=_C())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(o=(a=window.documentPictureInPicture)===null||a===void 0?void 0:a.window)===null||o===void 0||o.removeEventListener("pagehide",this.onLeavePiP)}}function Pc(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Iv(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Iv(t,e){const n=e||window;let i=t.offsetTop,a=t.offsetLeft;const o=t.offsetWidth,l=t.offsetHeight,{hidden:u}=t,{display:d}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,a+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&a<n.pageXOffset+n.innerWidth&&i+l>n.pageYOffset&&a+o>n.pageXOffset&&!u&&d!=="none"}class Br extends pr.EventEmitter{constructor(e,n,i,a){var o;super(),this.metadataMuted=!1,this.encryption=Wn.NONE,this.log=Qe,this.handleMuted=()=>{this.emit(ve.Muted)},this.handleUnmuted=()=>{this.emit(ve.Unmuted)},this.log=Gr((o=a?.loggerName)!==null&&o!==void 0?o:Li.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=K.Source.Unknown}setTrack(e){this.track&&(this.track.off(ve.Muted,this.handleMuted),this.track.off(ve.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ve.Muted,this.handleMuted),e.on(ve.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),tt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Wn.NONE}get audioTrack(){if(lr(this.track))return this.track}get videoTrack(){if(Ka(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=K.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===K.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Br||(Br={}));class Bf extends Br{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,a){super(e,n.sid,n.name,a),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ve.Ended)},this.handleCpuConstrained=()=>{this.track&&Ka(this.track)&&this.emit(ve.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&(this.track.off(ve.Ended,this.handleTrackEnded),this.track.off(ve.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(ve.Ended,this.handleTrackEnded),e.on(ve.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return I(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return I(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return I(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return I(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(lr(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(tn.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(tn.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(tn.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(tn.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(tn.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(tn.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function vl(t,e){return I(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:a,optionsWithoutProcessor:o}=Y1(t);let l=o.audio,u=o.video;if(i&&typeof o.audio=="object"&&(o.audio.processor=i),a&&typeof o.video=="object"&&(o.video.processor=a),t.audio&&typeof o.audio=="object"&&typeof o.audio.deviceId=="string"){const g=o.audio.deviceId;o.audio.deviceId={exact:g},n=!0,l=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:g}})}if(o.video&&typeof o.video=="object"&&typeof o.video.deviceId=="string"){const g=o.video.deviceId;o.video.deviceId={exact:g},n=!0,u=Object.assign(Object.assign({},o.video),{deviceId:{ideal:g}})}(o.audio===!0||typeof o.audio=="object"&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),o.video===!0?o.video={deviceId:"default"}:typeof o.video=="object"&&!o.video.deviceId&&(o.video.deviceId="default");const d=$1(o,X1,Q1),h=Ry(d),m=navigator.mediaDevices.getUserMedia(h);o.audio&&(nn.userMediaPromiseMap.set("audioinput",m),m.catch(()=>nn.userMediaPromiseMap.delete("audioinput"))),o.video&&(nn.userMediaPromiseMap.set("videoinput",m),m.catch(()=>nn.userMediaPromiseMap.delete("videoinput")));try{const g=yield m;return yield Promise.all(g.getTracks().map(y=>I(this,void 0,void 0,function*(){const T=y.kind==="audio";let E=T?d.audio:d.video;(typeof E=="boolean"||!E)&&(E={});let C;const w=T?h.audio:h.video;typeof w!="boolean"&&(C=w);const _=y.getSettings().deviceId;C?.deviceId&&Ua(C.deviceId)!==_?C.deviceId=_:C||(C={deviceId:_});const N=FI(y,C,e);return N.kind===K.Kind.Video?N.source=K.Source.Camera:N.kind===K.Kind.Audio&&(N.source=K.Source.Microphone),N.mediaStream=g,lr(N)&&i?yield N.setProcessor(i):Ka(N)&&a&&(yield N.setProcessor(a)),N})))}catch(g){if(!n)throw g;return vl(Object.assign(Object.assign({},t),{audio:l,video:u}),e)}})}function hj(t){return I(this,void 0,void 0,function*(){return(yield vl({audio:!1,video:!0}))[0]})}function mj(t){return I(this,void 0,void 0,function*(){return(yield vl({audio:!0,video:!1}))[0]})}var Pi;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Pi||(Pi={}));function pj(t){switch(t){case Fc.EXCELLENT:return Pi.Excellent;case Fc.GOOD:return Pi.Good;case Fc.POOR:return Pi.Poor;case Fc.LOST:return Pi.Lost;default:return Pi.Unknown}}class sx extends pr.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Zc.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Yo.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,a,o,l){let u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Zc.STANDARD;var d;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Pi.Unknown,this.log=Qe,this.log=Gr((d=l?.loggerName)!==null&&d!==void 0?d:Li.Participant),this.loggerOptions=l,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=a,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=u,this._attributes=o??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new sr,this.once(ie.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(K.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(K.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(K.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Yo.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Yo.ACTIVE&&this.emit(ie.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(ie.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ie.ParticipantNameChanged,e)}_setAttributes(e){const n=mI(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(ie.AttributesChanged,n)}setPermissions(e){var n,i,a,o,l,u;const d=this.permissions,h=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((a=this.permissions)===null||a===void 0?void 0:a.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((l=this.permissions)===null||l===void 0?void 0:l.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((m,g)=>{var y;return m!==((y=this.permissions)===null||y===void 0?void 0:y.canPublishSources[g])})||e.canSubscribeMetrics!==((u=this.permissions)===null||u===void 0?void 0:u.canSubscribeMetrics);return this.permissions=e,h&&this.emit(ie.ParticipantPermissionsChanged,d),h}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ie.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=pj(e),n!==this._connectionQuality&&this.emit(ie.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>lr(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(ve.Muted,()=>{this.emit(ie.TrackMuted,e)}),e.on(ve.Unmuted,()=>{this.emit(ie.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case K.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case K.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function gj(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new r1({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}class vj extends sx{constructor(e,n,i,a,o,l){super(e,n,void 0,void 0,void 0,{loggerName:a.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Wn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new sr)},this.handleReconnected=()=>{var u,d;(d=(u=this.reconnectFuture)===null||u===void 0?void 0:u.resolve)===null||d===void 0||d.call(u),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var u,d,h,m,g,y;this.reconnectFuture&&(this.reconnectFuture.promise.catch(T=>this.log.warn(T.message,this.logContext)),(d=(u=this.reconnectFuture)===null||u===void 0?void 0:u.reject)===null||d===void 0||d.call(u,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((m=(h=this.signalConnectedFuture).reject)===null||m===void 0||m.call(h,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(y=(g=this.activeAgentFuture)===null||g===void 0?void 0:g.reject)===null||y===void 0||y.call(g,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=u=>{var d,h;u.participant&&this.updateInfo(u.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new sr),(h=(d=this.signalConnectedFuture).resolve)===null||h===void 0||h.call(d)},this.handleSignalRequestResponse=u=>{const{requestId:d,reason:h,message:m}=u,g=this.pendingSignalRequests.get(d);g&&(h!==ky.OK&&g.reject(new TC(m,h)),this.pendingSignalRequests.delete(d))},this.handleDataPacket=u=>{switch(u.value.case){case"rpcResponse":let d=u.value.value,h=null,m=null;d.value.case==="payload"?h=d.value.value:d.value.case==="error"&&(m=Pt.fromProto(d.value.value)),this.handleIncomingRpcResponse(d.requestId,h,m);break;case"rpcAck":let g=u.value.value;this.handleIncomingRpcAck(g.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(u=>gj(u)))},this.onTrackUnmuted=u=>{this.onTrackMuted(u,u.isUpstreamPaused)},this.onTrackMuted=(u,d)=>{if(d===void 0&&(d=!0),!u.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),tt(u)));return}this.engine.updateMuteStatus(u.sid,d)},this.onTrackUpstreamPaused=u=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),tt(u))),this.onTrackMuted(u,!0)},this.onTrackUpstreamResumed=u=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),tt(u))),this.onTrackMuted(u,u.isMuted)},this.onTrackFeatureUpdate=u=>{const d=this.audioTrackPublications.get(u.sid);if(!d){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(u.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(d.trackSid,d.getTrackFeatures())},this.onTrackCpuConstrained=(u,d)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),tt(d))),this.emit(ie.LocalTrackCpuConstrained,u,d)},this.handleSubscribedQualityUpdate=u=>I(this,void 0,void 0,function*(){var d,h,m,g,y;if(!(!((y=this.roomOptions)===null||y===void 0)&&y.dynacast))return;const T=this.videoTrackPublications.get(u.trackSid);if(!T){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:u.trackSid}));return}if(!T.videoTrack)return;const E=yield T.videoTrack.setPublishingCodecs(u.subscribedCodecs);try{for(var C=!0,w=Vr(E),_;_=yield w.next(),d=_.done,!d;C=!0){g=_.value,C=!1;const N=g;$2(N)&&(this.log.debug("publish ".concat(N," for ").concat(T.videoTrack.sid),Object.assign(Object.assign({},this.logContext),tt(T))),yield this.publishAdditionalCodecForTrack(T.videoTrack,N,T.options))}}catch(N){h={error:N}}finally{try{!C&&!d&&(m=w.return)&&(yield m.call(w))}finally{if(h)throw h.error}}}),this.handleLocalTrackUnpublished=u=>{const d=this.trackPublications.get(u.trackSid);if(!d){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:u.trackSid}));return}this.unpublishTrack(d.track)},this.handleTrackEnded=u=>I(this,void 0,void 0,function*(){if(u.source===K.Source.ScreenShare||u.source===K.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),tt(u))),this.unpublishTrack(u);else if(u.isUserProvided)yield u.mute();else if(Ur(u)||xa(u))try{if(On())try{const d=yield navigator?.permissions.query({name:u.source===K.Source.Camera?"camera":"microphone"});if(d&&d.state==="denied")throw this.log.warn("user has revoked access to ".concat(u.source),Object.assign(Object.assign({},this.logContext),tt(u))),d.onchange=()=>{d.state!=="denied"&&(u.isMuted||u.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}u.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),tt(u))),Ur(u)?yield u.restartTrack({deviceId:"default"}):yield u.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),tt(u))),yield u.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=a,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=o,this.roomOutgoingDataStreamManager=l}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Wn.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(be.RemoteMute,(i,a)=>{const o=this.trackPublications.get(i);!o||!o.track||(a?o.mute():o.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(be.Connected,this.handleReconnected).on(be.SignalConnected,this.handleSignalConnected).on(be.SignalRestarted,this.handleReconnected).on(be.SignalResumed,this.handleReconnected).on(be.Restarting,this.handleReconnecting).on(be.Resuming,this.handleReconnecting).on(be.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(be.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(be.Closing,this.handleClosing).on(be.SignalRequestResponse,this.handleSignalRequestResponse).on(be.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return I(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return I(this,arguments,void 0,function(n){var i=this;let{metadata:a,name:o,attributes:l}=n;return function*(){return new Promise((u,d)=>I(i,void 0,void 0,function*(){var h,m;try{let g=!1;const y=yield this.engine.client.sendUpdateLocalMetadata((h=a??this.metadata)!==null&&h!==void 0?h:"",(m=o??this.name)!==null&&m!==void 0?m:"",l),T=performance.now();for(this.pendingSignalRequests.set(y,{resolve:u,reject:E=>{d(E),g=!0},values:{name:o,metadata:a,attributes:l}});performance.now()-T<5e3&&!g;){if((!o||this.name===o)&&(!a||this.metadata===a)&&(!l||Object.entries(l).every(E=>{let[C,w]=E;return this.attributes[C]===w||w===""&&!this.attributes[C]}))){this.pendingSignalRequests.delete(y),u();return}yield Mn(50)}d(new TC("Request to update local metadata timed out","TimeoutError"))}catch(g){g instanceof Error&&d(g)}}))}()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(K.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(K.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(K.Source.ScreenShare,e,n,i)}setPermissions(e){const n=this.permissions,i=super.setPermissions(e);return i&&n&&this.emit(ie.ParticipantPermissionsChanged,n),i}setE2EEEnabled(e){return I(this,void 0,void 0,function*(){this.encryptionType=e?Wn.GCM:Wn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,a){return I(this,void 0,void 0,function*(){var o,l;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let u=this.getTrackPublication(e);if(n)if(u)yield u.unmute();else{let d;if(this.pendingPublishing.has(e)){const h=yield this.waitForPendingPublicationOfSource(e);return h||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield h?.unmute(),h}this.pendingPublishing.add(e);try{switch(e){case K.Source.Camera:d=yield this.createTracks({video:(o=i)!==null&&o!==void 0?o:!0});break;case K.Source.Microphone:d=yield this.createTracks({audio:(l=i)!==null&&l!==void 0?l:!0});break;case K.Source.ScreenShare:d=yield this.createScreenTracks(Object.assign({},i));break;default:throw new Hr(e)}}catch(h){throw d?.forEach(m=>{m.stop()}),h instanceof Error&&this.emit(ie.MediaDevicesError,h,Nv(e)),this.pendingPublishing.delete(e),h}for(const h of d){const m=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);e===K.Source.Microphone&&lr(h)&&m.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),h.startPreConnectBuffer())}try{const h=[];for(const g of d)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),tt(g))),h.push(this.publishTrack(g,a));[u]=yield Promise.all(h)}catch(h){throw d?.forEach(m=>{m.stop()}),h}finally{this.pendingPublishing.delete(e)}}else if(!u?.track&&this.pendingPublishing.has(e)&&(u=yield this.waitForPendingPublicationOfSource(e),u||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),u&&u.track)if(e===K.Source.ScreenShare){u=yield this.unpublishTrack(u.track);const d=this.getTrackPublication(K.Source.ScreenShareAudio);d&&d.track&&this.unpublishTrack(d.track)}else yield u.mute();return u})}enableCameraAndMicrophone(){return I(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(K.Source.Camera)||this.pendingPublishing.has(K.Source.Microphone))){this.pendingPublishing.add(K.Source.Camera),this.pendingPublishing.add(K.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(K.Source.Camera),this.pendingPublishing.delete(K.Source.Microphone)}}})}createTracks(e){return I(this,void 0,void 0,function*(){var n,i;e??(e={});const a=$1(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield vl(a,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(u=>(lr(u)&&(this.microphoneError=void 0,u.setAudioContext(this.audioContext),u.source=K.Source.Microphone,this.emit(ie.AudioStreamAcquired)),Ka(u)&&(this.cameraError=void 0,u.source=K.Source.Camera),u))}catch(o){throw o instanceof Error&&(e.audio&&(this.microphoneError=o),e.video&&(this.cameraError=o)),o}})}createScreenTracks(e){return I(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new _y("getDisplayMedia not supported");e.resolution===void 0&&!Q2()&&(e.resolution=xy.h1080fps30.resolution);const n=dI(e),i=yield navigator.mediaDevices.getDisplayMedia(n),a=i.getVideoTracks();if(a.length===0)throw new Hr("no video track found");const o=new Uf(a[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=K.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const l=[o];if(i.getAudioTracks().length>0){this.emit(ie.AudioStreamAcquired);const u=new jf(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});u.source=K.Source.ScreenShareAudio,l.push(u)}return l})}publishTrack(e,n){return I(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return I(this,arguments,void 0,function(i,a){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var u,d,h,m;Ur(i)&&i.setAudioContext(o.audioContext),yield(u=o.reconnectFuture)===null||u===void 0?void 0:u.promise,o.republishPromise&&!l&&(yield o.republishPromise),Os(i)&&o.pendingPublishPromises.has(i)&&(yield o.pendingPublishPromises.get(i));let g;if(i instanceof MediaStreamTrack)g=i.getConstraints();else{g=i.constraints;let _;switch(i.source){case K.Source.Microphone:_="audioinput";break;case K.Source.Camera:_="videoinput"}_&&o.activeDeviceMap.has(_)&&(g=Object.assign(Object.assign({},g),{deviceId:o.activeDeviceMap.get(_)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new jf(i,g,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":i=new Uf(i,g,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new Hr("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let y;if(o.trackPublications.forEach(_=>{_.track&&_.track===i&&(y=_)}),y)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),tt(y))),y;const T="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,E=(d=a?.forceStereo)!==null&&d!==void 0?d:T;E&&(a||(a={}),a.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),tt(i))),a.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(h=a.dtx)!==null&&h!==void 0||(a.dtx=!1),(m=a.red)!==null&&m!==void 0||(a.red=!1));const C=Object.assign(Object.assign({},o.roomOptions.publishDefaults),a);!Z2()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),C.simulcast=!1),C.source&&(i.source=C.source);const w=new Promise((_,N)=>I(o,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Et.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:tt(i)}));const D=setTimeout(()=>{N(new SC("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(D);const O=yield this.publish(i,C,E);_(O)}else try{const D=yield this.publish(i,C,E);_(D)}catch(D){N(D)}}catch(D){N(D)}}));o.pendingPublishPromises.set(i,w);try{return yield w}catch(_){throw _}finally{o.pendingPublishPromises.delete(i)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new sr),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),tt(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(a=>pI(a)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),tt(e))),!1)}publish(e,n,i){return I(this,void 0,void 0,function*(){var a,o,l,u,d,h,m,g,y,T;if(!this.hasPermissionsToPublish(e))throw new SC("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(P=>Os(e)&&P.source===e.source)&&e.source!==K.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),tt(e))),n.stopMicTrackOnMute&&lr(e)&&(e.stopOnMute=!0),e.source===K.Source.ScreenShare&&Is()&&(n.simulcast=!1),n.videoCodec==="av1"&&!Y2()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!W2()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Dv),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(P=>n.videoCodec===$c(P.mime))||(n.videoCodec=$c(this.enabledPublishVideoCodecs[0].mime)));const C=n.videoCodec;e.on(ve.Muted,this.onTrackMuted),e.on(ve.Unmuted,this.onTrackUnmuted),e.on(ve.Ended,this.handleTrackEnded),e.on(ve.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ve.UpstreamResumed,this.onTrackUpstreamResumed),e.on(ve.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const w=[],_=!(!((a=n.dtx)!==null&&a!==void 0)||a),N=e.getSourceTrackSettings();N.autoGainControl&&w.push(tn.TF_AUTO_GAIN_CONTROL),N.echoCancellation&&w.push(tn.TF_ECHO_CANCELLATION),N.noiseSuppression&&w.push(tn.TF_NOISE_SUPPRESSION),N.channelCount&&N.channelCount>1&&w.push(tn.TF_STEREO),_&&w.push(tn.TF_NO_DTX),Ur(e)&&e.hasPreConnectBuffer&&w.push(tn.TF_PRECONNECT_BUFFER);const D=new fv({cid:e.mediaStreamTrack.id,name:n.name,type:K.kindToProto(e.kind),muted:e.isMuted,source:K.sourceToProto(e.source),disableDtx:_,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:w});let O;if(e.kind===K.Kind.Video){let P={width:0,height:0};try{P=yield e.waitForDimensions()}catch{const q=(u=(l=this.roomOptions.videoCaptureDefaults)===null||l===void 0?void 0:l.resolution)!==null&&u!==void 0?u:tu.h720.resolution;P={width:q.width,height:q.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),tt(e)),{dims:P}))}D.width=P.width,D.height=P.height,xa(e)&&(ar(C)&&(e.source===K.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),tt(e))))),n.scalabilityMode=(d=n.scalabilityMode)!==null&&d!==void 0?d:"L3T3_KEY"),D.simulcastCodecs=[new dv({codec:C,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Dv}),n.backupCodec&&C!==n.backupCodec.codec&&D.encryption===Wn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),D.simulcastCodecs.push(new dv({codec:n.backupCodec.codec,cid:""})))),O=Mv(e.source===K.Source.ScreenShare,D.width,D.height,n),D.layers=qC(D.width,D.height,O,ar(n.videoCodec))}else e.kind===K.Kind.Audio&&(O=[{maxBitrate:(h=n.audioPreset)===null||h===void 0?void 0:h.maxBitrate,priority:(g=(m=n.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&g!==void 0?g:"high",networkPriority:(T=(y=n.audioPreset)===null||y===void 0?void 0:y.priority)!==null&&T!==void 0?T:"high"}]);if(!this.engine||this.engine.isClosed)throw new Yt("cannot publish track when not connected");const R=()=>I(this,void 0,void 0,function*(){var P,z,q;if(!this.engine.pcManager)throw new Yt("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,O),this.emit(ie.LocalSenderCreated,e.sender,e),xa(e)&&((P=n.degradationPreference)!==null&&P!==void 0||(n.degradationPreference=QI(e)),e.setDegradationPreference(n.degradationPreference)),O)if(Is()&&e.kind===K.Kind.Audio){let re;for(const fe of this.engine.pcManager.publisher.getTransceivers())if(fe.sender===e.sender){re=fe;break}re&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:re,codec:"opus",maxbr:!((z=O[0])===null||z===void 0)&&z.maxBitrate?O[0].maxBitrate/1e3:0})}else e.codec&&ar(e.codec)&&(!((q=O[0])===null||q===void 0)&&q.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:D.cid,codec:e.codec,maxbr:O[0].maxBitrate/1e3});yield this.engine.negotiate()});let x;const B=new Promise((P,z)=>I(this,void 0,void 0,function*(){var q;try{x=yield this.engine.addTrack(D),P(x)}catch(re){e.sender&&(!((q=this.engine.pcManager)===null||q===void 0)&&q.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(fe=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),tt(e)),{error:fe}))})),z(re)}}));if(this.enabledPublishVideoCodecs.length>0)x=(yield Promise.all([B,R()]))[0];else{x=yield B;let P;if(x.codecs.forEach(z=>{P===void 0&&(P=z.mimeType)}),P&&e.kind===K.Kind.Video){const z=$c(P);z!==C&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),tt(e)),{codec:z})),n.videoCodec=z,O=Mv(e.source===K.Source.ScreenShare,D.width,D.height,n))}yield R()}const M=new Bf(e.kind,x,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(M.on(ve.CpuConstrained,P=>this.onTrackCpuConstrained(P,M)),M.options=n,e.sid=x.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:O,trackInfo:x})),xa(e)?e.startMonitor(this.engine.client):Ur(e)&&e.startMonitor(),this.addTrackPublication(M),this.emit(ie.LocalTrackPublished,M),Ur(e)&&x.audioFeatures.includes(tn.TF_PRECONNECT_BUFFER)){const P=e.getPreConnectBuffer(),z=e.getPreConnectBufferMimeType();this.on(ie.LocalTrackSubscribed,q=>{if(q.trackSid===x.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),tt(e))),e.stopPreConnectBuffer()}}),P&&new Promise((re,fe)=>I(this,void 0,void 0,function*(){var ye,we,F,se,Q,Se;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),tt(e)));const le=setTimeout(()=>{fe(new Error("agent not active within 10 seconds"))},1e4),ge=yield this.waitUntilActiveAgentPresent();clearTimeout(le),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),tt(e)));const Oe=yield this.streamBytes({name:"preconnect-buffer",mimeType:z,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[ge.identity],attributes:{trackId:M.trackSid,sampleRate:String((Q=N.sampleRate)!==null&&Q!==void 0?Q:"48000"),channels:String((Se=N.channelCount)!==null&&Se!==void 0?Se:"1")}});try{for(var L=!0,ne=Vr(P),he;he=yield ne.next(),ye=he.done,!ye;L=!0){se=he.value,L=!1;const Te=se;yield Oe.write(Te)}}catch(Te){we={error:Te}}finally{try{!L&&!ye&&(F=ne.return)&&(yield F.call(ne))}finally{if(we)throw we.error}}yield Oe.close(),re()}catch(le){fe(le)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),tt(e)))}).catch(re=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),tt(e)),{error:re}))})}return M})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return I(this,void 0,void 0,function*(){var a;if(this.encryptionType!==Wn.NONE)return;let o;if(this.trackPublications.forEach(T=>{T.track&&T.track===e&&(o=T)}),!o)throw new Hr("track is not published");if(!xa(e))throw new Hr("track is not a video track");const l=Object.assign(Object.assign({},(a=this.roomOptions)===null||a===void 0?void 0:a.publishDefaults),i),u=YI(e,n,l);if(!u){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),tt(e)));return}const d=e.addSimulcastTrack(n,u);if(!d)return;const h=new fv({cid:d.mediaStreamTrack.id,type:K.kindToProto(e.kind),muted:e.isMuted,source:K.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:l.videoCodec,cid:d.mediaStreamTrack.id}]});if(h.layers=qC(h.width,h.height,u),!this.engine||this.engine.isClosed)throw new Yt("cannot publish track when not connected");const m=()=>I(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,d,l,u),yield this.engine.negotiate()}),y=(yield Promise.all([this.engine.addTrack(h),m()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:u,trackInfo:y}))})}unpublishTrack(e,n){return I(this,void 0,void 0,function*(){var i,a;if(Os(e)){const h=this.pendingPublishPromises.get(e);h&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),tt(e))),yield h)}const o=this.getPublicationForTrack(e),l=o?tt(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),l)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),l));return}e=o.track,e.off(ve.Muted,this.onTrackMuted),e.off(ve.Unmuted,this.onTrackUnmuted),e.off(ve.Ended,this.handleTrackEnded),e.off(ve.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ve.UpstreamResumed,this.onTrackUpstreamResumed),e.off(ve.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(a=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&a!==void 0?a:!0),n?e.stop():e.stopMonitor();let u=!1;const d=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Nt.FAILED&&d)try{for(const h of this.engine.pcManager.publisher.getTransceivers())h.sender===d&&(h.direction="inactive",u=!0);if(this.engine.removeTrack(d)&&(u=!0),xa(e)){for(const[,h]of e.simulcastCodecs)h.sender&&(this.engine.removeTrack(h.sender)&&(u=!0),h.sender=void 0);e.simulcastCodecs.clear()}}catch(h){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),l),{error:h}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case K.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case K.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit(ie.LocalTrackUnpublished,o),o.setTrack(void 0),u&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return I(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return I(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((o,l)=>I(i,void 0,void 0,function*(){try{const u=[];this.trackPublications.forEach(d=>{d.track&&(n&&(d.options=Object.assign(Object.assign({},d.options),n)),u.push(d))}),yield Promise.all(u.map(d=>I(this,void 0,void 0,function*(){const h=d.track;yield this.unpublishTrack(h,!1),a&&!h.isMuted&&h.source!==K.Source.ScreenShare&&h.source!==K.Source.ScreenShareAudio&&(Ur(h)||xa(h))&&!h.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:d.trackSid})),yield h.restartTrack()),yield this.publishOrRepublishTrack(h,d.options,!0)}))),o()}catch(u){l(u)}finally{this.republishPromise=void 0}})),yield i.republishPromise}()})}publishData(e){return I(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const o=a.reliable?Ye.RELIABLE:Ye.LOSSY,l=a.destinationIdentities,u=a.topic,d=new Rn({kind:o,value:{case:"user",value:new B_({participantIdentity:i.identity,payload:n,destinationIdentities:l,topic:u})}});yield i.engine.sendDataPacket(d,o)}()})}publishDtmf(e,n){return I(this,void 0,void 0,function*(){const i=new Rn({kind:Ye.RELIABLE,value:{case:"sipDtmf",value:new z_({code:e,digit:n})}});yield this.engine.sendDataPacket(i,Ye.RELIABLE)})}sendChatMessage(e,n){return I(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},a=new Rn({value:{case:"chatMessage",value:new av(Object.assign(Object.assign({},i),{timestamp:wt.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(a,Ye.RELIABLE),this.emit(ie.ChatMessage,i),i})}editChatMessage(e,n){return I(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),a=new Rn({value:{case:"chatMessage",value:new av(Object.assign(Object.assign({},i),{timestamp:wt.parse(i.timestamp),editTimestamp:wt.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(a,Ye.RELIABLE),this.emit(ie.ChatMessage,i),i})}sendText(e,n){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return I(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return I(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:a,method:o,payload:l,responseTimeout:u=1e4}=n;return function*(){return new Promise((h,m)=>I(i,void 0,void 0,function*(){var g,y,T,E;if(Py(l)>J1){m(Pt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((y=(g=this.engine.latestJoinResponse)===null||g===void 0?void 0:g.serverInfo)===null||y===void 0)&&y.version&&Ii((E=(T=this.engine.latestJoinResponse)===null||T===void 0?void 0:T.serverInfo)===null||E===void 0?void 0:E.version,"1.8.0")<0){m(Pt.builtIn("UNSUPPORTED_SERVER"));return}const C=crypto.randomUUID();yield this.publishRpcRequest(a,C,o,l,u-2e3);const w=setTimeout(()=>{this.pendingAcks.delete(C),m(Pt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(C),clearTimeout(_)},2e3);this.pendingAcks.set(C,{resolve:()=>{clearTimeout(w)},participantIdentity:a});const _=setTimeout(()=>{this.pendingResponses.delete(C),m(Pt.builtIn("RESPONSE_TIMEOUT"))},u);this.pendingResponses.set(C,{resolve:(N,D)=>{clearTimeout(_),this.pendingAcks.has(C)&&(console.warn("RPC response received before ack",C),this.pendingAcks.delete(C),clearTimeout(w)),D?m(D):h(N??"")},participantIdentity:a})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const a=this.pendingResponses.get(e);a?(a.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,a,o){return I(this,void 0,void 0,function*(){const l=new Rn({destinationIdentities:[e],kind:Ye.RELIABLE,value:{case:"rpcRequest",value:new F_({id:n,method:i,payload:a,responseTimeoutMs:o,version:1})}});yield this.engine.sendDataPacket(l,Ye.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:a}]of this.pendingResponses)i===e&&(a(null,Pt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var i,a;const o=this.trackPublications.get(n.sid);if(o){const l=o.isMuted||((a=(i=o.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&a!==void 0?a:!1);l!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),tt(o)),{mutedOnServer:l})),this.engine.client.sendMuteTrack(n.sid,l))}}),!0):!1}setActiveAgent(e){var n,i,a,o;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,e):(o=(a=this.activeAgentFuture)===null||a===void 0?void 0:a.reject)===null||o===void 0||o.call(a,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new sr),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const a=i.track;a&&(e instanceof MediaStreamTrack?(Ur(a)||xa(a))&&a.mediaStreamTrack===e&&(n=i):e===a&&(n=i))}),n}waitForPendingPublicationOfSource(e){return I(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const a=Array.from(this.pendingPublishPromises.entries()).find(o=>{let[l]=o;return l.source===e});if(a)return a[1];yield Mn(20)}})}}class zf extends Br{constructor(e,n,i,a){super(e,n.sid,n.name,a),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=o=>{this.setTrack(void 0),this.emit(ve.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.visible=o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensionsAdaptiveStream=o,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const a=new fh({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new $_({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ve.UpdateSubscription,a),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?Br.SubscriptionStatus.Unsubscribed:super.isSubscribed?Br.SubscriptionStatus.Subscribed:Br.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Br.PermissionStatus.Allowed:Br.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===e.height||(lg(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&lg(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:Xn.HIGH}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,a=this.track;a!==e&&(a&&(a.off(ve.VideoDimensionsChanged,this.handleVideoDimensionsChange),a.off(ve.VisibilityChanged,this.handleVisibilityChange),a.off(ve.Ended,this.handleEnded),a.detach(),a.stopMonitor(),this.emit(ve.Unsubscribed,a)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ve.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ve.VisibilityChanged,this.handleVisibilityChange),e.on(ve.Ended,this.handleEnded),this.emit(ve.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(ve.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?ve.Muted:ve.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(ve.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ve.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return lg(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Z_({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===K.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)OC(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=gI(this.trackInfo,this.requestedMaxQuality);i&&OC(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Xn.HIGH})),e.quality=Xn.HIGH)}this.emit(ve.UpdateSettings,e)}}class Ff extends sx{static fromParticipantInfo(e,n,i){return new Ff(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,a,o,l,u){let d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Zc.STANDARD;super(n,i||"",a,o,l,u,d),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ve.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),tt(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(ve.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(ve.SubscriptionPermissionChanged,n=>{this.emit(ie.TrackSubscriptionPermissionChanged,e,n)}),e.on(ve.SubscriptionStatusChanged,n=>{this.emit(ie.TrackSubscriptionStatusChanged,e,n)}),e.on(ve.Subscribed,n=>{this.emit(ie.TrackSubscribed,n,e)}),e.on(ve.Unsubscribed,n=>{this.emit(ie.TrackUnsubscribed,n,e)}),e.on(ve.SubscriptionFailed,n=>{this.emit(ie.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,a,o,l){let u=this.getTrackPublicationBySid(n);if(u||n.startsWith("TR")||this.trackPublications.forEach(m=>{!u&&e.kind===m.kind.toString()&&(u=m)}),!u){if(l===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ie.TrackSubscriptionFailed,n);return}l===void 0&&(l=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,a,o,l-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),tt(u))),this.emit(ie.TrackSubscriptionFailed,n);return}const d=e.kind==="video";let h;return d?h=new dj(e,n,a,o):h=new ax(e,n,a,this.audioContext,this.audioOutput),h.source=u.source,h.isMuted=u.isMuted,h.setMediaStream(i),h.start(),u.setTrack(h),this.volumeMap.has(u.source)&&Av(h)&&lr(h)&&h.setVolume(this.volumeMap.get(u.source)),u}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(a=>{var o,l;let u=this.getTrackPublicationBySid(a.sid);if(u)u.updateInfo(a);else{const d=K.kindFromProto(a.type);if(!d)return;u=new zf(d,a,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(l=this.loggerOptions)===null||l===void 0?void 0:l.loggerName}),u.updateInfo(a),i.set(a.sid,u);const h=Array.from(this.trackPublications.values()).find(m=>m.source===u?.source);h&&u.source!==K.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(u.source),Object.assign(Object.assign({},this.logContext),{oldTrack:tt(h),newTrack:tt(u)})),this.addTrackPublication(u)}n.set(a.sid,u)}),this.trackPublications.forEach(a=>{n.has(a.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),tt(a))),this.unpublishTrack(a.trackSid,!0))}),i.forEach(a=>{this.emit(ie.TrackPublished,a)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:a}=i;switch(a&&(a.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case K.Kind.Audio:this.audioTrackPublications.delete(e);break;case K.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(ie.TrackUnpublished,i)}setAudioOutput(e){return I(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var a;lr(i.track)&&Av(i.track)&&n.push(i.track.setSinkId((a=e.deviceId)!==null&&a!==void 0?a:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var nt;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(nt||(nt={}));const yj=4*1e3;class ji extends pr.EventEmitter{constructor(e){var n,i,a,o;if(super(),n=this,this.state=nt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Qe,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(l,u,d)=>I(this,void 0,void 0,function*(){var h;if(!X2())throw fr()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const m=yield this.disconnectLock.lock();if(this.state===nt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),m(),Promise.resolve();if(this.connectFuture)return m(),this.connectFuture.promise;this.setAndEmitConnectionState(nt.Connecting),((h=this.regionUrlProvider)===null||h===void 0?void 0:h.getServerUrl().toString())!==l&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),xv(new URL(l))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Lv(l,u):this.regionUrlProvider.updateToken(u),this.regionUrlProvider.fetchRegionSettings().then(T=>{var E;(E=this.regionUrlProvider)===null||E===void 0||E.setServerReportedRegions(T)}).catch(T=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:T}))}));const g=(T,E,C)=>I(this,void 0,void 0,function*(){var w,_;this.abortController&&this.abortController.abort();const N=new AbortController;this.abortController=N,m?.();try{yield this.attemptConnection(C??l,u,d,N),this.abortController=void 0,T()}catch(D){if(this.regionUrlProvider&&D instanceof vt&&D.reason!==rt.Cancelled&&D.reason!==rt.NotAllowed){let O=null;try{O=yield this.regionUrlProvider.getNextBestRegionUrl((w=this.abortController)===null||w===void 0?void 0:w.signal)}catch(R){if(R instanceof vt&&(R.status===401||R.reason===rt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),E(R);return}}O&&!(!((_=this.abortController)===null||_===void 0)&&_.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(D.message,". Retrying with another region: ").concat(O),this.logContext),this.recreateEngine(),yield g(T,E,O)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,AC(D)),E(D))}else{let O=Mi.UNKNOWN_REASON;D instanceof vt&&(O=AC(D)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,O),E(D)}}}),y=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new sr((T,E)=>{g(T,E,y)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(l,u,d,h,m,g)=>I(this,void 0,void 0,function*(){var y,T,E;const C=yield d.join(l,u,{autoSubscribe:h.autoSubscribe,adaptiveStream:typeof m.adaptiveStream=="object"?!0:m.adaptiveStream,maxRetries:h.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:h.websocketTimeout},g.signal);let w=C.serverInfo;if(w||(w={version:C.serverVersion,region:C.serverRegion}),this.serverInfo=w,this.log.debug("connected to Livekit Server ".concat(Object.entries(w).map(_=>{let[N,D]=_;return"".concat(N,": ").concat(D)}).join(", ")),{room:(y=C.room)===null||y===void 0?void 0:y.name,roomSid:(T=C.room)===null||T===void 0?void 0:T.sid,identity:(E=C.participant)===null||E===void 0?void 0:E.identity}),!w.version)throw new L2("unknown server version");return w.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),m.dynacast=!1),C}),this.applyJoinResponse=l=>{const u=l.participant;if(this.localParticipant.sid=u.sid,this.localParticipant.identity=u.identity,this.localParticipant.setEnabledPublishCodecs(l.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(l.sifTrailer)}catch(d){this.log.error(d instanceof Error?d.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:d}))}this.handleParticipantUpdates([u,...l.otherParticipants]),l.room&&this.handleRoomUpdate(l.room)},this.attemptConnection=(l,u,d,h)=>I(this,void 0,void 0,function*(){var m,g;this.state===nt.Reconnecting||this.isResuming||!((m=this.engine)===null||m===void 0)&&m.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((g=this.regionUrlProvider)===null||g===void 0)&&g.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Dy),d),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const y=yield this.connectSignal(l,u,this.engine,this.connOptions,this.options,h);this.applyJoinResponse(y),this.setupLocalParticipantEvents(),this.emit(te.SignalConnected)}catch(y){yield this.engine.close(),this.recreateEngine();const T=new vt("could not establish signal connection",rt.ServerUnreachable);throw y instanceof Error&&(T.message="".concat(T.message,": ").concat(y.message)),y instanceof vt&&(T.reason=y.reason,T.status=y.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:y})),T}if(h.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new vt("Connection attempt aborted",rt.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,h)}catch(y){throw yield this.engine.close(),this.recreateEngine(),y}On()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),On()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(nt.Connected),this.emit(te.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return I(n,[...u],void 0,function(){var h=this;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var g,y,T,E;const C=yield h.disconnectLock.lock();try{if(h.state===nt.Disconnected){h.log.debug("already disconnected",h.logContext);return}h.log.info("disconnect from room",Object.assign({},h.logContext)),(h.state===nt.Connecting||h.state===nt.Reconnecting||h.isResuming)&&(h.log.warn("abort connection attempt",h.logContext),(g=h.abortController)===null||g===void 0||g.abort(),(T=(y=h.connectFuture)===null||y===void 0?void 0:y.reject)===null||T===void 0||T.call(y,new vt("Client initiated disconnect",rt.Cancelled)),h.connectFuture=void 0),!((E=h.engine)===null||E===void 0)&&E.client.isDisconnected||(yield h.engine.client.sendLeave()),h.engine&&(yield h.engine.close()),h.handleDisconnect(m,Mi.CLIENT_INITIATED),h.engine=void 0}finally{C()}}()})},this.onPageLeave=()=>I(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>I(this,void 0,void 0,function*(){const l=[],u=Qn();if(u&&u.os==="iOS"){const d="livekit-dummy-audio-el";let h=document.getElementById(d);if(!h){h=document.createElement("audio"),h.id=d,h.autoplay=!0,h.hidden=!0;const m=og();m.enabled=!0;const g=new MediaStream([m]);h.srcObject=g,document.addEventListener("visibilitychange",()=>{h&&(h.srcObject=document.hidden?null:g,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(h),this.once(te.Disconnected,()=>{h?.remove(),h=null})}l.push(h)}this.remoteParticipants.forEach(d=>{d.audioTrackPublications.forEach(h=>{h.track&&h.track.attachedElements.forEach(m=>{l.push(m)})})});try{yield Promise.all([this.acquireAudioContext(),...l.map(d=>(d.muted=!1,d.play()))]),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}),this.startVideo=()=>I(this,void 0,void 0,function*(){const l=[];for(const u of this.remoteParticipants.values())u.videoTrackPublications.forEach(d=>{var h;(h=d.track)===null||h===void 0||h.attachedElements.forEach(m=>{l.includes(m)||l.push(m)})});yield Promise.all(l.map(u=>u.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(u=>{u.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const l of this.remoteParticipants.values())this.handleParticipantDisconnected(l.identity,l);this.setAndEmitConnectionState(nt.Reconnecting)&&this.emit(te.Reconnecting)},this.handleSignalRestarted=l=>I(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(l.serverRegion),Object.assign(Object.assign({},this.logContext),{region:l.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(l);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(u){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:u}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:l.serverRegion}))}catch{return}this.setAndEmitConnectionState(nt.Connected),this.emit(te.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=l=>{l.forEach(u=>{var d;if(u.identity===this.localParticipant.identity){this.localParticipant.updateInfo(u);return}u.identity===""&&(u.identity=(d=this.sidToIdentity.get(u.sid))!==null&&d!==void 0?d:"");let h=this.remoteParticipants.get(u.identity);u.state===Yo.DISCONNECTED?this.handleParticipantDisconnected(u.identity,h):h=this.getOrCreateParticipant(u.identity,u)})},this.handleActiveSpeakersUpdate=l=>{const u=[],d={};l.forEach(h=>{if(d[h.sid]=!0,h.sid===this.localParticipant.sid)this.localParticipant.audioLevel=h.level,this.localParticipant.setIsSpeaking(!0),u.push(this.localParticipant);else{const m=this.getRemoteParticipantBySid(h.sid);m&&(m.audioLevel=h.level,m.setIsSpeaking(!0),u.push(m))}}),d[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(h=>{d[h.sid]||(h.audioLevel=0,h.setIsSpeaking(!1))}),this.activeSpeakers=u,this.emitWhenConnected(te.ActiveSpeakersChanged,u)},this.handleSpeakersChanged=l=>{const u=new Map;this.activeSpeakers.forEach(h=>{const m=this.remoteParticipants.get(h.identity);m&&m.sid!==h.sid||u.set(h.sid,h)}),l.forEach(h=>{let m=this.getRemoteParticipantBySid(h.sid);h.sid===this.localParticipant.sid&&(m=this.localParticipant),m&&(m.audioLevel=h.level,m.setIsSpeaking(h.active),h.active?u.set(h.sid,m):u.delete(h.sid))});const d=Array.from(u.values());d.sort((h,m)=>m.audioLevel-h.audioLevel),this.activeSpeakers=d,this.emitWhenConnected(te.ActiveSpeakersChanged,d)},this.handleStreamStateUpdate=l=>{l.streamStates.forEach(u=>{const d=this.getRemoteParticipantBySid(u.participantSid);if(!d)return;const h=d.getTrackPublicationBySid(u.trackSid);if(!h||!h.track)return;const m=K.streamStateFromProto(u.state);h.track.setStreamState(m),m!==h.track.streamState&&(d.emit(ie.TrackStreamStateChanged,h,h.track.streamState),this.emitWhenConnected(te.TrackStreamStateChanged,h,h.track.streamState,d))})},this.handleSubscriptionPermissionUpdate=l=>{const u=this.getRemoteParticipantBySid(l.participantSid);if(!u)return;const d=u.getTrackPublicationBySid(l.trackSid);d&&d.setAllowed(l.allowed)},this.handleSubscriptionError=l=>{const u=Array.from(this.remoteParticipants.values()).find(h=>h.trackPublications.has(l.trackSid));if(!u)return;const d=u.getTrackPublicationBySid(l.trackSid);d&&d.setSubscriptionError(l.err)},this.handleDataPacket=l=>{const u=this.remoteParticipants.get(l.participantIdentity);if(l.value.case==="user")this.handleUserPacket(u,l.value.value,l.kind);else if(l.value.case==="transcription")this.handleTranscription(u,l.value.value);else if(l.value.case==="sipDtmf")this.handleSipDtmf(u,l.value.value);else if(l.value.case==="chatMessage")this.handleChatMessage(u,l.value.value);else if(l.value.case==="metrics")this.handleMetrics(l.value.value,u);else if(l.value.case==="streamHeader"||l.value.case==="streamChunk"||l.value.case==="streamTrailer")this.handleDataStream(l);else if(l.value.case==="rpcRequest"){const d=l.value.value;this.handleIncomingRpcRequest(l.participantIdentity,d.id,d.method,d.payload,d.responseTimeoutMs,d.version)}},this.handleUserPacket=(l,u,d)=>{this.emit(te.DataReceived,u.payload,l,d,u.topic),l?.emit(ie.DataReceived,u.payload,d)},this.handleSipDtmf=(l,u)=>{this.emit(te.SipDTMFReceived,u,l),l?.emit(ie.SipDTMFReceived,u)},this.handleTranscription=(l,u)=>{const d=u.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(u.transcribedParticipantIdentity),h=d?.trackPublications.get(u.trackId),m=aI(u,this.transcriptionReceivedTimes);h?.emit(ve.TranscriptionReceived,m),d?.emit(ie.TranscriptionReceived,m,h),this.emit(te.TranscriptionReceived,m,d,h)},this.handleChatMessage=(l,u)=>{const d=sI(u);this.emit(te.ChatMessage,d,l)},this.handleMetrics=(l,u)=>{this.emit(te.MetricsReceived,l,u)},this.handleDataStream=l=>{this.incomingDataStreamManager.handleDataStreamPacket(l)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(te.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=l=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:l})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(te.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(te.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(te.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>I(this,void 0,void 0,function*(){var l;((l=Qn())===null||l===void 0?void 0:l.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(te.MediaDevicesChanged)}),this.handleRoomUpdate=l=>{const u=this.roomInfo;this.roomInfo=l,u&&u.metadata!==l.metadata&&this.emitWhenConnected(te.RoomMetadataChanged,l.metadata),u?.activeRecording!==l.activeRecording&&this.emitWhenConnected(te.RecordingStatusChanged,l.activeRecording)},this.handleConnectionQualityUpdate=l=>{l.updates.forEach(u=>{if(u.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(u.quality);return}const d=this.getRemoteParticipantBySid(u.participantSid);d&&d.setConnectionQuality(u.quality)})},this.onLocalParticipantMetadataChanged=l=>{this.emit(te.ParticipantMetadataChanged,l,this.localParticipant)},this.onLocalParticipantNameChanged=l=>{this.emit(te.ParticipantNameChanged,l,this.localParticipant)},this.onLocalAttributesChanged=l=>{this.emit(te.ParticipantAttributesChanged,l,this.localParticipant)},this.onLocalTrackMuted=l=>{this.emit(te.TrackMuted,l,this.localParticipant)},this.onLocalTrackUnmuted=l=>{this.emit(te.TrackUnmuted,l,this.localParticipant)},this.onTrackProcessorUpdate=l=>{var u;(u=l?.onPublish)===null||u===void 0||u.call(l,this)},this.onLocalTrackPublished=l=>I(this,void 0,void 0,function*(){var u,d,h,m,g,y;(u=l.track)===null||u===void 0||u.on(ve.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=l.track)===null||d===void 0||d.on(ve.Restarted,this.onLocalTrackRestarted),(g=(m=(h=l.track)===null||h===void 0?void 0:h.getProcessor())===null||m===void 0?void 0:m.onPublish)===null||g===void 0||g.call(m,this),this.emit(te.LocalTrackPublished,l,this.localParticipant),Ur(l.track)&&(yield l.track.checkForSilence())&&this.emit(te.LocalAudioSilenceDetected,l);const T=yield(y=l.track)===null||y===void 0?void 0:y.getDeviceId(!1),E=Nv(l.source);E&&T&&T!==this.localParticipant.activeDeviceMap.get(E)&&(this.localParticipant.activeDeviceMap.set(E,T),this.emit(te.ActiveDeviceChanged,E,T))}),this.onLocalTrackUnpublished=l=>{var u,d;(u=l.track)===null||u===void 0||u.off(ve.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=l.track)===null||d===void 0||d.off(ve.Restarted,this.onLocalTrackRestarted),this.emit(te.LocalTrackUnpublished,l,this.localParticipant)},this.onLocalTrackRestarted=l=>I(this,void 0,void 0,function*(){const u=yield l.getDeviceId(!1),d=Nv(l.source);d&&u&&u!==this.localParticipant.activeDeviceMap.get(d)&&(this.log.debug("local track restarted, setting ".concat(d," ").concat(u," active"),this.logContext),this.localParticipant.activeDeviceMap.set(d,u),this.emit(te.ActiveDeviceChanged,d,u))}),this.onLocalConnectionQualityChanged=l=>{this.emit(te.ConnectionQualityChanged,l,this.localParticipant)},this.onMediaDevicesError=(l,u)=>{this.emit(te.MediaDevicesError,l,u)},this.onLocalParticipantPermissionsChanged=l=>{this.emit(te.ParticipantPermissionsChanged,l,this.localParticipant)},this.onLocalChatMessageSent=l=>{this.emit(te.ChatMessage,l,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},PI),e),this.log=Gr((i=this.options.loggerName)!==null&&i!==void 0?i:Li.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},X1),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},Q1),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},DI),e?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new oj,this.outgoingDataStreamManager=new uj(this.engine,this.log),this.disconnectLock=new Pn,this.localParticipant=new vj("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ua(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ua(this.options.audioCaptureDefaults.deviceId)),!((a=this.options.audioOutput)===null||a===void 0)&&a.deviceId&&this.switchActiveDevice("audiooutput",Ua(this.options.audioOutput.deviceId)).catch(l=>this.log.warn("Could not set audio output: ".concat(l.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),On()){const l=new AbortController;(o=navigator.mediaDevices)===null||o===void 0||o.addEventListener("devicechange",this.handleDeviceChange,{signal:l.signal}),ji.cleanupRegistry&&ji.cleanupRegistry.register(this,()=>{l.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return I(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new vI(this.options.e2ee),this.e2eeManager.on(Ia.ParticipantEncryptionStatusChanged,(n,i)=>{lI(i)&&(this.isE2EEEnabled=n),this.emit(te.ParticipantEncryptionStatusChanged,n,i)}),this.e2eeManager.on(Ia.EncryptionError,n=>this.emit(te.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return I(this,void 0,void 0,function*(){return this.state===nt.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=a=>{a.sid!==""&&(this.engine.off(be.RoomUpdate,i),e(a.sid))};this.engine.on(be.RoomUpdate,i),this.once(te.Disconnected,()=>{this.engine.off(be.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new tj(this.options),this.engine.on(be.ParticipantUpdate,this.handleParticipantUpdates).on(be.RoomUpdate,this.handleRoomUpdate).on(be.SpeakersChanged,this.handleSpeakersChanged).on(be.StreamStateChanged,this.handleStreamStateUpdate).on(be.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(be.SubscriptionError,this.handleSubscriptionError).on(be.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(be.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(be.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(be.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(be.DataPacketReceived,this.handleDataPacket).on(be.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(nt.SignalReconnecting)&&this.emit(te.SignalReconnecting)}).on(be.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(nt.Connected)&&this.emit(te.Reconnected)}).on(be.SignalResumed,()=>{this.bufferedEvents=[],(this.state===nt.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(be.Restarting,this.handleRestarting).on(be.SignalRestarted,this.handleSignalRestarted).on(be.Offline,()=>{this.setAndEmitConnectionState(nt.Reconnecting)&&this.emit(te.Reconnecting)}).on(be.DCBufferStatusChanged,(e,n)=>{this.emit(te.DCBufferStatusChanged,e,n)}).on(be.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:a}=i;return a===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ie.LocalTrackSubscribed,n),this.emitWhenConnected(te.LocalTrackSubscribed,n,this.localParticipant)}).on(be.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(te.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return nn.getInstance().getDevices(e,n)}prepareConnection(e,n){return I(this,void 0,void 0,function*(){if(this.state===nt.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(xv(new URL(e))&&n){this.regionUrlProvider=new Lv(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===nt.Disconnected&&(this.regionUrl=i,yield fetch(Rv(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(Rv(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return I(this,void 0,void 0,function*(){let i=()=>{},a;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":a=new ir({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":a=new ir({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":a=new ir({scenario:{case:"serverLeave",value:!0}});break;case"migration":a=new ir({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),a=new ir({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>I(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),a=new ir({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":a=new ir({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>I(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new hh({reason:Mi.CLIENT_INITIATED,action:Wo.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");a=new ir({scenario:{case:"subscriberBandwidth",value:Cs(n)}});break;case"leave-full-reconnect":a=new ir({scenario:{case:"leaveRequestFullReconnect",value:!0}})}a&&(yield this.engine.client.sendSimulateScenario(a),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return I(this,arguments,void 0,function(i,a){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var u,d,h,m,g,y,T;let E=!0,C=!1;const w=l?{exact:a}:a;if(i==="audioinput"){C=o.localParticipant.audioTrackPublications.size===0;const _=(u=o.getActiveDevice(i))!==null&&u!==void 0?u:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=w;const N=Array.from(o.localParticipant.audioTrackPublications.values()).filter(O=>O.source===K.Source.Microphone);try{E=(yield Promise.all(N.map(O=>{var R;return(R=O.audioTrack)===null||R===void 0?void 0:R.setDeviceId(w)}))).every(O=>O===!0)}catch(O){throw o.options.audioCaptureDefaults.deviceId=_,O}const D=N.some(O=>{var R,x;return(x=(R=O.track)===null||R===void 0?void 0:R.isMuted)!==null&&x!==void 0?x:!1});E&&D&&(C=!0)}else if(i==="videoinput"){C=o.localParticipant.videoTrackPublications.size===0;const _=(d=o.getActiveDevice(i))!==null&&d!==void 0?d:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=w;const N=Array.from(o.localParticipant.videoTrackPublications.values()).filter(O=>O.source===K.Source.Camera);try{E=(yield Promise.all(N.map(O=>{var R;return(R=O.videoTrack)===null||R===void 0?void 0:R.setDeviceId(w)}))).every(O=>O===!0)}catch(O){throw o.options.videoCaptureDefaults.deviceId=_,O}const D=N.some(O=>{var R,x;return(x=(R=O.track)===null||R===void 0?void 0:R.isMuted)!==null&&x!==void 0?x:!1});E&&D&&(C=!0)}else if(i==="audiooutput"){if(C=!0,!_v()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");o.options.webAudioMix&&(a=(h=yield nn.getInstance().normalizeDeviceId("audiooutput",a))!==null&&h!==void 0?h:""),(m=(T=o.options).audioOutput)!==null&&m!==void 0||(T.audioOutput={});const _=(g=o.getActiveDevice(i))!==null&&g!==void 0?g:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=a;try{o.options.webAudioMix&&((y=o.audioContext)===null||y===void 0||y.setSinkId(a)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(N=>N.setAudioOutput({deviceId:a})))}catch(N){throw o.options.audioOutput.deviceId=_,N}}return C&&(o.localParticipant.activeDeviceMap.set(i,a),o.emit(te.ActiveDeviceChanged,i,a)),E}()})}setupLocalParticipantEvents(){this.localParticipant.on(ie.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ie.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ie.AttributesChanged,this.onLocalAttributesChanged).on(ie.TrackMuted,this.onLocalTrackMuted).on(ie.TrackUnmuted,this.onLocalTrackUnmuted).on(ie.LocalTrackPublished,this.onLocalTrackPublished).on(ie.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ie.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ie.MediaDevicesError,this.onMediaDevicesError).on(ie.AudioStreamAcquired,this.startAudio).on(ie.ChatMessage,this.onLocalChatMessageSent).on(ie.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===nt.Connecting||this.state===nt.Reconnecting){const g=()=>{this.onTrackAdded(e,n,i),y()},y=()=>{this.off(te.Reconnected,g),this.off(te.Connected,g),this.off(te.Disconnected,y)};this.once(te.Reconnected,g),this.once(te.Connected,g),this.once(te.Disconnected,y);return}if(this.state===nt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const a=K2(n.id),o=a[0];let l=a[1],u=e.id;if(l&&l.startsWith("TR")&&(u=l),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const d=Array.from(this.remoteParticipants.values()).find(g=>g.sid===o);if(!d){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let h;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?h=this.options.adaptiveStream:h={});const m=d.addSubscribedMediaTrack(e,u,n,i,h);m?.isEncrypted&&!this.e2eeManager&&this.emit(te.EncryptionError,new Error("Encrypted ".concat(m.source," track received from participant ").concat(d.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==nt.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(a=>{a.trackPublications.forEach(o=>{a.unpublishTrack(o.trackSid)})}),this.localParticipant.trackPublications.forEach(a=>{var o,l,u;a.track&&this.localParticipant.unpublishTrack(a.track,e),e?((o=a.track)===null||o===void 0||o.detach(),(l=a.track)===null||l===void 0||l.stop()):(u=a.track)===null||u===void 0||u.stopMonitor()}),this.localParticipant.off(ie.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ie.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ie.AttributesChanged,this.onLocalAttributesChanged).off(ie.TrackMuted,this.onLocalTrackMuted).off(ie.TrackUnmuted,this.onLocalTrackUnmuted).off(ie.LocalTrackPublished,this.onLocalTrackPublished).off(ie.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ie.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ie.MediaDevicesError,this.onMediaDevicesError).off(ie.AudioStreamAcquired,this.startAudio).off(ie.ChatMessage,this.onLocalChatMessageSent).off(ie.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),On()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(nt.Disconnected),this.emit(te.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(a=>{n.unpublishTrack(a.trackSid,!0)}),this.emit(te.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,i,a,o,l){return I(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),l!==1){yield this.engine.publishRpcResponse(e,n,null,Pt.builtIn("UNSUPPORTED_VERSION"));return}const u=this.rpcHandlers.get(i);if(!u){yield this.engine.publishRpcResponse(e,n,null,Pt.builtIn("UNSUPPORTED_METHOD"));return}let d=null,h=null;try{const m=yield u({requestId:n,callerIdentity:e,payload:a,responseTimeout:o});Py(m)>J1?(d=Pt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):h=m}catch(m){m instanceof Pt?d=m:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),m),d=Pt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,h,d)})}selectDefaultDevices(){return I(this,void 0,void 0,function*(){var e,n,i;const a=nn.getInstance().previousDevices,o=yield nn.getInstance().getDevices(void 0,!1),l=Qn();if(l?.name==="Chrome"&&l.os!=="iOS")for(let d of o){const h=a.find(m=>m.deviceId===d.deviceId);h&&h.label!==""&&h.kind===d.kind&&h.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(te.ActiveDeviceChanged,d.kind,d.deviceId)}const u=["audiooutput","audioinput","videoinput"];for(let d of u){const h=uI(d),m=this.localParticipant.getTrackPublication(h);if(m&&(!((e=m.track)===null||e===void 0)&&e.isUserProvided))continue;const g=o.filter(T=>T.kind===d),y=this.getActiveDevice(d);if(y===((n=a.filter(T=>T.kind===d)[0])===null||n===void 0?void 0:n.deviceId)&&g.length>0&&((i=g[0])===null||i===void 0?void 0:i.deviceId)!==y){yield this.switchActiveDevice(d,g[0].deviceId);continue}d==="audioinput"&&!nu()||d==="videoinput"||g.length>0&&!g.find(T=>T.deviceId===this.getActiveDevice(d))&&(d!=="audiooutput"||!nu())&&(yield this.switchActiveDevice(d,g[0].deviceId))}})}acquireAudioContext(){return I(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=K1())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(a=>a.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),Mn(200)])}catch(a){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:a}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(te.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let a;return n?a=Ff.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):a=new Ff(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&a.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&a.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),a}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const a=this.remoteParticipants.get(e);return n&&a.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),a}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(te.ParticipantConnected,i),i.on(ie.TrackPublished,a=>{this.emitWhenConnected(te.TrackPublished,a,i)}).on(ie.TrackSubscribed,(a,o)=>{a.kind===K.Kind.Audio?(a.on(ve.AudioPlaybackStarted,this.handleAudioPlaybackStarted),a.on(ve.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):a.kind===K.Kind.Video&&(a.on(ve.VideoPlaybackFailed,this.handleVideoPlaybackFailed),a.on(ve.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(te.TrackSubscribed,a,o,i)}).on(ie.TrackUnpublished,a=>{this.emit(te.TrackUnpublished,a,i)}).on(ie.TrackUnsubscribed,(a,o)=>{this.emit(te.TrackUnsubscribed,a,o,i)}).on(ie.TrackMuted,a=>{this.emitWhenConnected(te.TrackMuted,a,i)}).on(ie.TrackUnmuted,a=>{this.emitWhenConnected(te.TrackUnmuted,a,i)}).on(ie.ParticipantMetadataChanged,a=>{this.emitWhenConnected(te.ParticipantMetadataChanged,a,i)}).on(ie.ParticipantNameChanged,a=>{this.emitWhenConnected(te.ParticipantNameChanged,a,i)}).on(ie.AttributesChanged,a=>{this.emitWhenConnected(te.ParticipantAttributesChanged,a,i)}).on(ie.ConnectionQualityChanged,a=>{this.emitWhenConnected(te.ConnectionQualityChanged,a,i)}).on(ie.ParticipantPermissionsChanged,a=>{this.emitWhenConnected(te.ParticipantPermissionsChanged,a,i)}).on(ie.TrackSubscriptionStatusChanged,(a,o)=>{this.emitWhenConnected(te.TrackSubscriptionStatusChanged,a,o,i)}).on(ie.TrackSubscriptionFailed,(a,o)=>{this.emit(te.TrackSubscriptionFailed,a,i,o)}).on(ie.TrackSubscriptionPermissionChanged,(a,o)=>{this.emitWhenConnected(te.TrackSubscriptionPermissionChanged,a,o,i)}).on(ie.Active,()=>{this.emitWhenConnected(te.ParticipantActive,i),i.kind===Zc.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,a)=>(i.push(...a.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&oI(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=dn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Mi.STATE_MISMATCH))):e=0},yj)}clearConnectionReconcile(){this.connectionReconcileInterval&&dn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(te.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(this.state===nt.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===nt.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return I(this,void 0,void 0,function*(){var n,i;const a=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new dh({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:wt.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Ms({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(te.SignalConnected),this.emit(te.Connected),this.setAndEmitConnectionState(nt.Connected),a.video){const l=new Bf(K.Kind.Video,new qo({source:Vt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Oi.AUDIO,name:"video-dummy"}),new Uf(a.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:RC(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(l),this.localParticipant.emit(ie.LocalTrackPublished,l)}if(a.audio){const l=new Bf(K.Kind.Audio,new qo({source:Vt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Oi.AUDIO}),new jf(a.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:og(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(l),this.localParticipant.emit(ie.LocalTrackPublished,l)}for(let l=0;l<o.count-1;l+=1){let u=new Ms({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(l),state:Yo.ACTIVE,tracks:[],joinedAt:wt.parse(Date.now())});const d=this.getOrCreateParticipant(u.identity,u);if(o.video){const h=RC(160*((i=o.aspectRatios[l%o.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),m=new qo({source:Vt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Oi.AUDIO});d.addSubscribedMediaTrack(h,m.sid,new MediaStream([h]),new RTCRtpReceiver),u.tracks=[...u.tracks,m]}if(o.audio){const h=og(),m=new qo({source:Vt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Oi.AUDIO});d.addSubscribedMediaTrack(h,m.sid,new MediaStream([h]),new RTCRtpReceiver),u.tracks=[...u.tracks,m]}d.updateInfo(u)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(e!==te.ActiveSpeakersChanged&&e!==te.TranscriptionReceived){const o=ox(i).filter(l=>l!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...i)}}ji.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function ox(t){return t.map(e=>{if(e)return Array.isArray(e)?ox(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var Ai;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Ai||(Ai={}));class Ya extends pr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Ai.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new ji(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return I(this,void 0,void 0,function*(){if(this.status!==Ai.IDLE)throw Error("check is running already");this.setStatus(Ai.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Ai.SKIPPED&&this.setStatus(this.isSuccess()?Ai.SUCCESS:Ai.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return I(this,void 0,void 0,function*(){return this.room.state===nt.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return I(this,void 0,void 0,function*(){this.room&&this.room.state!==nt.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Ai.SKIPPED)}switchProtocol(e){return I(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(te.Reconnecting,()=>{n=!0}),this.room.once(te.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(o=>setTimeout(o,1e3)),!n)return;const a=Date.now()+1e4;for(;Date.now()<a;){if(i)return;yield Mn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class bj extends Ya{get description(){return"Cloud regions"}perform(){return I(this,void 0,void 0,function*(){const e=new Lv(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let o=0;o<3;o++){const l=yield e.getNextBestRegionUrl();if(!l)break;if(i.has(l))continue;i.add(l);const u=yield this.checkCloudRegion(l);this.appendMessage("".concat(u.region," RTT: ").concat(u.rtt,"ms, duration: ").concat(u.duration,"ms")),n.push(u)}n.sort((o,l)=>(o.duration-l.duration)*.5+(o.rtt-l.rtt)*.5);const a=n[0];this.bestStats=a,this.appendMessage("best Cloud region: ".concat(a.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return I(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const a=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!a)throw new Error("Region not found");const o=yield this.room.localParticipant.streamText({topic:"test"}),l=1e3,d=1e6/l,h="A".repeat(l),m=Date.now();for(let E=0;E<d;E++)yield o.write(h);yield o.close();const g=Date.now(),y=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),T={region:a,rtt:1e4,duration:g-m};return y?.forEach(E=>{E.type==="candidate-pair"&&E.nominated&&(T.rtt=E.currentRoundTripTime*1e3)}),yield this.disconnect(),T})}}const gg=1e4;class Sj extends Ya{get description(){return"Connection via UDP vs TCP"}perform(){return I(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(gg/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(gg/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return I(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let a=0;const o=()=>{a=(a+1)%360,i.fillStyle="hsl(".concat(a,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(o)};o();const u=n.captureStream(30).getVideoTracks()[0],h=(yield this.room.localParticipant.publishTrack(u,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,m={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},g=setInterval(()=>I(this,void 0,void 0,function*(){const y=yield h.getRTCStatsReport();y?.forEach(T=>{T.type==="outbound-rtp"?(m.packetsSent=T.packetsSent,m.qualityLimitationDurations=T.qualityLimitationDurations,m.bitrateTotal+=T.targetBitrate,m.count++):T.type==="remote-inbound-rtp"&&(m.packetsLost=T.packetsLost,m.rttTotal+=T.roundTripTime,m.jitterTotal+=T.jitter)})}),1e3);return yield new Promise(y=>setTimeout(y,gg)),clearInterval(g),u.stop(),n.remove(),yield this.disconnect(),m})}}class Tj extends Ya{get description(){return"Can publish audio"}perform(){return I(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield mj();if(yield G1(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(u=>setTimeout(u,3e3));const o=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!o)throw new Error("Could not get RTCStats");let l=0;if(o.forEach(u=>{u.type==="outbound-rtp"&&(u.kind==="audio"||!u.kind&&u.mediaType==="audio")&&(l=u.packetsSent)}),l===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(l," audio packets"))})}}class Ej extends Ya{get description(){return"Can publish video"}perform(){return I(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield hj();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(l=>setTimeout(l,5e3));const a=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!a)throw new Error("Could not get RTCStats");let o=0;if(a.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="video"||!l.kind&&l.mediaType==="video")&&(o+=l.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}checkForVideo(e){return I(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,yield new Promise(a=>{i.onplay=()=>{setTimeout(()=>{var o,l,u,d;const h=document.createElement("canvas"),m=e.getSettings(),g=(l=(o=m.width)!==null&&o!==void 0?o:i.videoWidth)!==null&&l!==void 0?l:1280,y=(d=(u=m.height)!==null&&u!==void 0?u:i.videoHeight)!==null&&d!==void 0?d:720;h.width=g,h.height=y;const T=h.getContext("2d");T.drawImage(i,0,0);const C=T.getImageData(0,0,h.width,h.height).data;let w=!0;for(let _=0;_<C.length;_+=4)if(C[_]!==0||C[_+1]!==0||C[_+2]!==0){w=!1;break}w?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),a()},1e3)},i.play()}),n.getTracks().forEach(a=>a.stop()),i.remove()})}}class Cj extends Ya{get description(){return"Resuming connection after interruption"}perform(){return I(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,a=!1,o;const l=new Promise(h=>{setTimeout(h,5e3),o=h}),u=()=>{i=!0};n.on(te.SignalReconnecting,u).on(te.Reconnecting,u).on(te.Reconnected,()=>{a=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const d=n.engine.client.onClose;if(d&&d(""),yield l,i){if(!a||n.state!==nt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class kj extends Ya{get description(){return"Can connect via TURN"}perform(){return I(this,void 0,void 0,function*(){var e,n;const i=new Ay,a=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,l=!1,u=!1;for(let d of a.iceServers)for(let h of d.urls)h.startsWith("turn:")?(l=!0,u=!0):h.startsWith("turns:")&&(l=!0,u=!0,o=!0),h.startsWith("stun:")&&(u=!0);u?l&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||l?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class wj extends Ya{get description(){return"Establishing WebRTC connection"}perform(){return I(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(te.SignalConnected,()=>{const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(a,o)=>{if(a.candidate){const l=new RTCIceCandidate(a);let u="".concat(l.protocol," ").concat(l.address,":").concat(l.port," ").concat(l.type);l.address&&(_j(l.address)?u+=" (private)":l.protocol==="tcp"&&l.tcpType==="passive"?(e=!0,u+=" (passive)"):l.protocol==="udp"&&(n=!0)),this.appendMessage(u)}i&&i(a,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=a=>{a instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(a.errorCode," ").concat(a.errorText," ").concat(a.url))})});try{yield this.connect(),Qe.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function _j(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class xj extends Ya{get description(){return"Connecting to signal connection via WebSocket"}perform(){return I(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let a=new Ay;const o=yield a.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===K_.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=o.serverInfo)===null||i===void 0?void 0:i.region)),yield a.close()})}}class QH extends pr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Ai.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Ai.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return I(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),a=l=>{this.updateCheck(n,l)};i.on("update",a);const o=yield i.run();return i.off("update",a),o})}checkWebsocket(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(xj)})}checkWebRTC(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(wj)})}checkTURN(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(kj)})}checkReconnect(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Cj)})}checkPublishAudio(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Tj)})}checkPublishVideo(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(Ej)})}checkConnectionProtocol(){return I(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(Sj);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return I(this,void 0,void 0,function*(){return this.createAndRunCheck(bj)})}}function Rj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const i=Os(t)?t.mediaStreamTrack:t,a=i.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in a){const l=a.facingMode;Qe.trace("rawFacingMode",{rawFacingMode:l}),l&&typeof l=="string"&&Nj(l)&&(o={facingMode:l,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Qe.trace("Try to get facing mode from device label: (".concat(i.label,")"));const l=Oj(i.label);l!==void 0&&(o=l)}return o}const YC=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),Aj=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function Oj(t){var e;const n=t.trim().toLowerCase();if(n!=="")return YC.has(n)?YC.get(n):(e=Array.from(Aj.entries()).find(i=>{let[a]=i;return n.includes(a)}))===null||e===void 0?void 0:e[1]}function Nj(t){return t===void 0||["user","environment","left","right"].includes(t)}function Dj(){const{role:t,code:e}=lu(),[n,i]=b.useState("ready"),a=b.useRef(null),o=b.useRef(null);return b.useEffect(()=>{let l;return(async()=>{try{i("exchanging token...");const u=await fetch("/api/exchange-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:t,code:e})});if(!u.ok)throw new Error("token exchange failed");const{token:d,livekit_url:h}=await u.json();i("connecting...");const m=new ji;await m.connect(h,d),m.on(te.TrackSubscribed,(y,T)=>{const E=T??y?.track;E?.kind===K.Kind.Video&&o.current&&E.attach(o.current)});const g=await vl({audio:!0,video:{width:1280,height:720}});for(const y of g)await m.localParticipant.publishTrack(y),y.kind===K.Kind.Video&&a.current&&y.attach(a.current);l=()=>{g.forEach(y=>y.stop()),m.disconnect()},i("connected")}catch(u){i("error: "+(u?.message??u))}})(),()=>l?.()},[t,e]),S.jsxs("div",{className:"p-6 space-y-4",children:[S.jsxs("p",{children:["Status: ",n]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full bg-black rounded-lg"}),S.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,className:"w-full bg-black rounded-lg"})]})]})}const Vf=Math.min,Ns=Math.max,Hf=Math.round,qd=Math.floor,cr=t=>({x:t,y:t}),Pj={left:"right",right:"left",bottom:"top",top:"bottom"},Mj={start:"end",end:"start"};function WC(t,e,n){return Ns(t,Vf(e,n))}function gh(t,e){return typeof t=="function"?t(e):t}function Us(t){return t.split("-")[0]}function vh(t){return t.split("-")[1]}function lx(t){return t==="x"?"y":"x"}function cx(t){return t==="y"?"height":"width"}function il(t){return["top","bottom"].includes(Us(t))?"y":"x"}function ux(t){return lx(il(t))}function Lj(t,e,n){n===void 0&&(n=!1);const i=vh(t),a=ux(t),o=cx(a);let l=a==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=qf(l)),[l,qf(l)]}function Ij(t){const e=qf(t);return[jv(t),e,jv(e)]}function jv(t){return t.replace(/start|end/g,e=>Mj[e])}function jj(t,e,n){const i=["left","right"],a=["right","left"],o=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?a:i:e?i:a;case"left":case"right":return e?o:l;default:return[]}}function Uj(t,e,n,i){const a=vh(t);let o=jj(Us(t),n==="start",i);return a&&(o=o.map(l=>l+"-"+a),e&&(o=o.concat(o.map(jv)))),o}function qf(t){return t.replace(/left|right|bottom|top/g,e=>Pj[e])}function Bj(t){return{top:0,right:0,bottom:0,left:0,...t}}function zj(t){return typeof t!="number"?Bj(t):{top:t,right:t,bottom:t,left:t}}function $f(t){const{x:e,y:n,width:i,height:a}=t;return{width:i,height:a,top:n,left:e,right:e+i,bottom:n+a,x:e,y:n}}function XC(t,e,n){let{reference:i,floating:a}=t;const o=il(e),l=ux(e),u=cx(l),d=Us(e),h=o==="y",m=i.x+i.width/2-a.width/2,g=i.y+i.height/2-a.height/2,y=i[u]/2-a[u]/2;let T;switch(d){case"top":T={x:m,y:i.y-a.height};break;case"bottom":T={x:m,y:i.y+i.height};break;case"right":T={x:i.x+i.width,y:g};break;case"left":T={x:i.x-a.width,y:g};break;default:T={x:i.x,y:i.y}}switch(vh(e)){case"start":T[l]-=y*(n&&h?-1:1);break;case"end":T[l]+=y*(n&&h?-1:1);break}return T}const Fj=async(t,e,n)=>{const{placement:i="bottom",strategy:a="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:a}),{x:m,y:g}=XC(h,i,d),y=i,T={},E=0;for(let C=0;C<u.length;C++){const{name:w,fn:_}=u[C],{x:N,y:D,data:O,reset:R}=await _({x:m,y:g,initialPlacement:i,placement:y,strategy:a,middlewareData:T,rects:h,platform:l,elements:{reference:t,floating:e}});m=N??m,g=D??g,T={...T,[w]:{...T[w],...O}},R&&E<=50&&(E++,typeof R=="object"&&(R.placement&&(y=R.placement),R.rects&&(h=R.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:a}):R.rects),{x:m,y:g}=XC(h,y,d)),C=-1)}return{x:m,y:g,placement:y,strategy:a,middlewareData:T}};async function dx(t,e){var n;e===void 0&&(e={});const{x:i,y:a,platform:o,rects:l,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:y=!1,padding:T=0}=gh(e,t),E=zj(T),C=u[y?g==="floating"?"reference":"floating":g],w=$f(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:m,strategy:d})),_=g==="floating"?{x:i,y:a,width:l.floating.width,height:l.floating.height}:l.reference,N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),D=await(o.isElement==null?void 0:o.isElement(N))?await(o.getScale==null?void 0:o.getScale(N))||{x:1,y:1}:{x:1,y:1},O=$f(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:N,strategy:d}):_);return{top:(w.top-O.top+E.top)/D.y,bottom:(O.bottom-w.bottom+E.bottom)/D.y,left:(w.left-O.left+E.left)/D.x,right:(O.right-w.right+E.right)/D.x}}const Vj=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:a,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:h}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:C=!0,...w}=gh(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=Us(a),N=il(u),D=Us(u)===u,O=await(d.isRTL==null?void 0:d.isRTL(h.floating)),R=y||(D||!C?[qf(u)]:Ij(u)),x=E!=="none";!y&&x&&R.push(...Uj(u,C,E,O));const B=[u,...R],M=await dx(e,w),P=[];let z=((i=o.flip)==null?void 0:i.overflows)||[];if(m&&P.push(M[_]),g){const ye=Lj(a,l,O);P.push(M[ye[0]],M[ye[1]])}if(z=[...z,{placement:a,overflows:P}],!P.every(ye=>ye<=0)){var q,re;const ye=(((q=o.flip)==null?void 0:q.index)||0)+1,we=B[ye];if(we)return{data:{index:ye,overflows:z},reset:{placement:we}};let F=(re=z.filter(se=>se.overflows[0]<=0).sort((se,Q)=>se.overflows[1]-Q.overflows[1])[0])==null?void 0:re.placement;if(!F)switch(T){case"bestFit":{var fe;const se=(fe=z.filter(Q=>{if(x){const Se=il(Q.placement);return Se===N||Se==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(Se=>Se>0).reduce((Se,L)=>Se+L,0)]).sort((Q,Se)=>Q[1]-Se[1])[0])==null?void 0:fe[0];se&&(F=se);break}case"initialPlacement":F=u;break}if(a!==F)return{reset:{placement:F}}}return{}}}};async function Hj(t,e){const{placement:n,platform:i,elements:a}=t,o=await(i.isRTL==null?void 0:i.isRTL(a.floating)),l=Us(n),u=vh(n),d=il(n)==="y",h=["left","top"].includes(l)?-1:1,m=o&&d?-1:1,g=gh(e,t);let{mainAxis:y,crossAxis:T,alignmentAxis:E}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof E=="number"&&(T=u==="end"?E*-1:E),d?{x:T*m,y:y*h}:{x:y*h,y:T*m}}const qj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:a,y:o,placement:l,middlewareData:u}=e,d=await Hj(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:a+d.x,y:o+d.y,data:{...d,placement:l}}}}},$j=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:a}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:w=>{let{x:_,y:N}=w;return{x:_,y:N}}},...d}=gh(t,e),h={x:n,y:i},m=await dx(e,d),g=il(Us(a)),y=lx(g);let T=h[y],E=h[g];if(o){const w=y==="y"?"top":"left",_=y==="y"?"bottom":"right",N=T+m[w],D=T-m[_];T=WC(N,T,D)}if(l){const w=g==="y"?"top":"left",_=g==="y"?"bottom":"right",N=E+m[w],D=E-m[_];E=WC(N,E,D)}const C=u.fn({...e,[y]:T,[g]:E});return{...C,data:{x:C.x-n,y:C.y-i,enabled:{[y]:o,[g]:l}}}}}};function yh(){return typeof window<"u"}function yl(t){return fx(t)?(t.nodeName||"").toLowerCase():"#document"}function Jn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gr(t){var e;return(e=(fx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fx(t){return yh()?t instanceof Node||t instanceof Jn(t).Node:!1}function Ui(t){return yh()?t instanceof Element||t instanceof Jn(t).Element:!1}function hr(t){return yh()?t instanceof HTMLElement||t instanceof Jn(t).HTMLElement:!1}function QC(t){return!yh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jn(t).ShadowRoot}function mu(t){const{overflow:e,overflowX:n,overflowY:i,display:a}=Bi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(a)}function Gj(t){return["table","td","th"].includes(yl(t))}function bh(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Iy(t){const e=jy(),n=Ui(t)?Bi(t):t;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Kj(t){let e=Va(t);for(;hr(e)&&!rl(e);){if(Iy(e))return e;if(bh(e))return null;e=Va(e)}return null}function jy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rl(t){return["html","body","#document"].includes(yl(t))}function Bi(t){return Jn(t).getComputedStyle(t)}function Sh(t){return Ui(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Va(t){if(yl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||QC(t)&&t.host||gr(t);return QC(e)?e.host:e}function hx(t){const e=Va(t);return rl(e)?t.ownerDocument?t.ownerDocument.body:t.body:hr(e)&&mu(e)?e:hx(e)}function iu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=hx(t),o=a===((i=t.ownerDocument)==null?void 0:i.body),l=Jn(a);if(o){const u=Uv(l);return e.concat(l,l.visualViewport||[],mu(a)?a:[],u&&n?iu(u):[])}return e.concat(a,iu(a,[],n))}function Uv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function mx(t){const e=Bi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=hr(t),o=a?t.offsetWidth:n,l=a?t.offsetHeight:i,u=Hf(n)!==o||Hf(i)!==l;return u&&(n=o,i=l),{width:n,height:i,$:u}}function Uy(t){return Ui(t)?t:t.contextElement}function Zo(t){const e=Uy(t);if(!hr(e))return cr(1);const n=e.getBoundingClientRect(),{width:i,height:a,$:o}=mx(e);let l=(o?Hf(n.width):n.width)/i,u=(o?Hf(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const Yj=cr(0);function px(t){const e=Jn(t);return!jy()||!e.visualViewport?Yj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Wj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Jn(t)?!1:e}function Bs(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),o=Uy(t);let l=cr(1);e&&(i?Ui(i)&&(l=Zo(i)):l=Zo(t));const u=Wj(o,n,i)?px(o):cr(0);let d=(a.left+u.x)/l.x,h=(a.top+u.y)/l.y,m=a.width/l.x,g=a.height/l.y;if(o){const y=Jn(o),T=i&&Ui(i)?Jn(i):i;let E=y,C=Uv(E);for(;C&&i&&T!==E;){const w=Zo(C),_=C.getBoundingClientRect(),N=Bi(C),D=_.left+(C.clientLeft+parseFloat(N.paddingLeft))*w.x,O=_.top+(C.clientTop+parseFloat(N.paddingTop))*w.y;d*=w.x,h*=w.y,m*=w.x,g*=w.y,d+=D,h+=O,E=Jn(C),C=Uv(E)}}return $f({width:m,height:g,x:d,y:h})}function By(t,e){const n=Sh(t).scrollLeft;return e?e.left+n:Bs(gr(t)).left+n}function gx(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=i.left+e.scrollLeft-(n?0:By(t,i)),o=i.top+e.scrollTop;return{x:a,y:o}}function Xj(t){let{elements:e,rect:n,offsetParent:i,strategy:a}=t;const o=a==="fixed",l=gr(i),u=e?bh(e.floating):!1;if(i===l||u&&o)return n;let d={scrollLeft:0,scrollTop:0},h=cr(1);const m=cr(0),g=hr(i);if((g||!g&&!o)&&((yl(i)!=="body"||mu(l))&&(d=Sh(i)),hr(i))){const T=Bs(i);h=Zo(i),m.x=T.x+i.clientLeft,m.y=T.y+i.clientTop}const y=l&&!g&&!o?gx(l,d,!0):cr(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+m.x+y.x,y:n.y*h.y-d.scrollTop*h.y+m.y+y.y}}function Qj(t){return Array.from(t.getClientRects())}function Jj(t){const e=gr(t),n=Sh(t),i=t.ownerDocument.body,a=Ns(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=Ns(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let l=-n.scrollLeft+By(t);const u=-n.scrollTop;return Bi(i).direction==="rtl"&&(l+=Ns(e.clientWidth,i.clientWidth)-a),{width:a,height:o,x:l,y:u}}function Zj(t,e){const n=Jn(t),i=gr(t),a=n.visualViewport;let o=i.clientWidth,l=i.clientHeight,u=0,d=0;if(a){o=a.width,l=a.height;const h=jy();(!h||h&&e==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}return{width:o,height:l,x:u,y:d}}function eU(t,e){const n=Bs(t,!0,e==="fixed"),i=n.top+t.clientTop,a=n.left+t.clientLeft,o=hr(t)?Zo(t):cr(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,d=a*o.x,h=i*o.y;return{width:l,height:u,x:d,y:h}}function JC(t,e,n){let i;if(e==="viewport")i=Zj(t,n);else if(e==="document")i=Jj(gr(t));else if(Ui(e))i=eU(e,n);else{const a=px(t);i={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return $f(i)}function vx(t,e){const n=Va(t);return n===e||!Ui(n)||rl(n)?!1:Bi(n).position==="fixed"||vx(n,e)}function tU(t,e){const n=e.get(t);if(n)return n;let i=iu(t,[],!1).filter(u=>Ui(u)&&yl(u)!=="body"),a=null;const o=Bi(t).position==="fixed";let l=o?Va(t):t;for(;Ui(l)&&!rl(l);){const u=Bi(l),d=Iy(l);!d&&u.position==="fixed"&&(a=null),(o?!d&&!a:!d&&u.position==="static"&&a&&["absolute","fixed"].includes(a.position)||mu(l)&&!d&&vx(t,l))?i=i.filter(h=>h!==l):a=u,l=Va(l)}return e.set(t,i),i}function nU(t){let{element:e,boundary:n,rootBoundary:i,strategy:a}=t;const o=[...n==="clippingAncestors"?bh(e)?[]:tU(e,this._c):[].concat(n),i],l=o[0],u=o.reduce((d,h)=>{const m=JC(e,h,a);return d.top=Ns(m.top,d.top),d.right=Vf(m.right,d.right),d.bottom=Vf(m.bottom,d.bottom),d.left=Ns(m.left,d.left),d},JC(e,l,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function iU(t){const{width:e,height:n}=mx(t);return{width:e,height:n}}function rU(t,e,n){const i=hr(e),a=gr(e),o=n==="fixed",l=Bs(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=cr(0);if(i||!i&&!o)if((yl(e)!=="body"||mu(a))&&(u=Sh(e)),i){const y=Bs(e,!0,o,e);d.x=y.x+e.clientLeft,d.y=y.y+e.clientTop}else a&&(d.x=By(a));const h=a&&!i&&!o?gx(a,u):cr(0),m=l.left+u.scrollLeft-d.x-h.x,g=l.top+u.scrollTop-d.y-h.y;return{x:m,y:g,width:l.width,height:l.height}}function vg(t){return Bi(t).position==="static"}function ZC(t,e){if(!hr(t)||Bi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return gr(t)===n&&(n=n.ownerDocument.body),n}function yx(t,e){const n=Jn(t);if(bh(t))return n;if(!hr(t)){let a=Va(t);for(;a&&!rl(a);){if(Ui(a)&&!vg(a))return a;a=Va(a)}return n}let i=ZC(t,e);for(;i&&Gj(i)&&vg(i);)i=ZC(i,e);return i&&rl(i)&&vg(i)&&!Iy(i)?n:i||Kj(t)||n}const aU=async function(t){const e=this.getOffsetParent||yx,n=this.getDimensions,i=await n(t.floating);return{reference:rU(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function sU(t){return Bi(t).direction==="rtl"}const oU={convertOffsetParentRelativeRectToViewportRelativeRect:Xj,getDocumentElement:gr,getClippingRect:nU,getOffsetParent:yx,getElementRects:aU,getClientRects:Qj,getDimensions:iU,getScale:Zo,isElement:Ui,isRTL:sU};function bx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function lU(t,e){let n=null,i;const a=gr(t);function o(){var u;clearTimeout(i),(u=n)==null||u.disconnect(),n=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const h=t.getBoundingClientRect(),{left:m,top:g,width:y,height:T}=h;if(u||e(),!y||!T)return;const E=qd(g),C=qd(a.clientWidth-(m+y)),w=qd(a.clientHeight-(g+T)),_=qd(m),N={rootMargin:-E+"px "+-C+"px "+-w+"px "+-_+"px",threshold:Ns(0,Vf(1,d))||1};let D=!0;function O(R){const x=R[0].intersectionRatio;if(x!==d){if(!D)return l();x?l(!1,x):i=setTimeout(()=>{l(!1,1e-7)},1e3)}x===1&&!bx(h,t.getBoundingClientRect())&&l(),D=!1}try{n=new IntersectionObserver(O,{...N,root:a.ownerDocument})}catch{n=new IntersectionObserver(O,N)}n.observe(t)}return l(!0),o}function cU(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,h=Uy(t),m=a||o?[...h?iu(h):[],...iu(e)]:[];m.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const g=h&&u?lU(h,n):null;let y=-1,T=null;l&&(T=new ResizeObserver(_=>{let[N]=_;N&&N.target===h&&T&&(T.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var D;(D=T)==null||D.observe(e)})),n()}),h&&!d&&T.observe(h),T.observe(e));let E,C=d?Bs(t):null;d&&w();function w(){const _=Bs(t);C&&!bx(C,_)&&n(),C=_,E=requestAnimationFrame(w)}return n(),()=>{var _;m.forEach(N=>{a&&N.removeEventListener("scroll",n),o&&N.removeEventListener("resize",n)}),g?.(),(_=T)==null||_.disconnect(),T=null,d&&cancelAnimationFrame(E)}}const uU=qj,dU=$j,fU=Vj,hU=(t,e,n)=>{const i=new Map,a={platform:oU,...n},o={...a.platform,_c:i};return Fj(t,e,{...a,platform:o})};var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bv={exports:{}},mU=Bv.exports,ek;function pU(){return ek||(ek=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(mU,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],o={},l=null;function u(C,w){var _=C[w];if(typeof _.bind=="function")return _.bind(C);try{return Function.prototype.bind.call(_,C)}catch{return function(){return Function.prototype.apply.apply(_,[C,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(C){return C==="debug"&&(C="log"),typeof console===n?!1:C==="trace"&&i?d:console[C]!==void 0?u(console,C):console.log!==void 0?u(console,"log"):e}function m(){for(var C=this.getLevel(),w=0;w<a.length;w++){var _=a[w];this[_]=w<C?e:this.methodFactory(_,C,this.name)}if(this.log=this.debug,typeof console===n&&C<this.levels.SILENT)return"No console available for logging"}function g(C){return function(){typeof console!==n&&(m.call(this),this[C].apply(this,arguments))}}function y(C,w,_){return h(C)||g.apply(this,arguments)}function T(C,w){var _=this,N,D,O,R="loglevel";typeof C=="string"?R+=":"+C:typeof C=="symbol"&&(R=void 0);function x(q){var re=(a[q]||"silent").toUpperCase();if(!(typeof window===n||!R)){try{window.localStorage[R]=re;return}catch{}try{window.document.cookie=encodeURIComponent(R)+"="+re+";"}catch{}}}function B(){var q;if(!(typeof window===n||!R)){try{q=window.localStorage[R]}catch{}if(typeof q===n)try{var re=window.document.cookie,fe=encodeURIComponent(R),ye=re.indexOf(fe+"=");ye!==-1&&(q=/^([^;]+)/.exec(re.slice(ye+fe.length+1))[1])}catch{}return _.levels[q]===void 0&&(q=void 0),q}}function M(){if(!(typeof window===n||!R)){try{window.localStorage.removeItem(R)}catch{}try{window.document.cookie=encodeURIComponent(R)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(q){var re=q;if(typeof re=="string"&&_.levels[re.toUpperCase()]!==void 0&&(re=_.levels[re.toUpperCase()]),typeof re=="number"&&re>=0&&re<=_.levels.SILENT)return re;throw new TypeError("log.setLevel() called with invalid level: "+q)}_.name=C,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=w||y,_.getLevel=function(){return O??D??N},_.setLevel=function(q,re){return O=P(q),re!==!1&&x(O),m.call(_)},_.setDefaultLevel=function(q){D=P(q),B()||_.setLevel(q,!1)},_.resetLevel=function(){O=null,M(),m.call(_)},_.enableAll=function(q){_.setLevel(_.levels.TRACE,q)},_.disableAll=function(q){_.setLevel(_.levels.SILENT,q)},_.rebuild=function(){if(l!==_&&(N=P(l.getLevel())),m.call(_),l===_)for(var q in o)o[q].rebuild()},N=P(l?l.getLevel():"WARN");var z=B();z!=null&&(O=P(z)),m.call(_)}l=new T,l.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var w=o[C];return w||(w=o[C]=new T(C,l.methodFactory)),w};var E=typeof window!==n?window.log:void 0;return l.noConflict=function(){return typeof window!==n&&window.log===l&&(window.log=E),l},l.getLoggers=function(){return o},l.default=l,l})}(Bv)),Bv.exports}var gU=pU();const vU=Sx(gU);var zv=function(t,e){return zv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},zv(t,e)};function Wr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function yU(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(m){try{h(i.next(m))}catch(g){l(g)}}function d(m){try{h(i.throw(m))}catch(g){l(g)}}function h(m){m.done?o(m.value):a(m.value).then(u,d)}h((i=i.apply(t,[])).next())})}function Tx(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,a,o,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(m){return d([h,m])}}function d(h){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(n=0)),n;)try{if(i=1,a&&(o=h[0]&2?a.return:h[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,h[1])).done)return o;switch(a=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,a=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],a=0}finally{i=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function al(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sl(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),a,o=[],l;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function ru(t,e,n){if(arguments.length===2)for(var i=0,a=e.length,o;i<a;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function el(t){return this instanceof el?(this.v=t,this):new el(t)}function bU(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(T){return function(E){return Promise.resolve(E).then(T,g)}}function u(T,E){i[T]&&(a[T]=function(C){return new Promise(function(w,_){o.push([T,C,w,_])>1||d(T,C)})},E&&(a[T]=E(a[T])))}function d(T,E){try{h(i[T](E))}catch(C){y(o[0][3],C)}}function h(T){T.value instanceof el?Promise.resolve(T.value.v).then(m,g):y(o[0][2],T)}function m(T){d("next",T)}function g(T){d("throw",T)}function y(T,E){T(E),o.shift(),o.length&&d(o[0][0],o[0][1])}}function SU(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof al=="function"?al(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(u,d){l=t[o](l),a(u,d,l.done,l.value)})}}function a(o,l,u,d){Promise.resolve(d).then(function(h){o({value:h,done:u})},l)}}function St(t){return typeof t=="function"}function zy(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var yg=zy(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Gf(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var pu=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,a,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var u=al(l),d=u.next();!d.done;d=u.next()){var h=d.value;h.remove(this)}}catch(C){e={error:C}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}else l.remove(this);var m=this.initialTeardown;if(St(m))try{m()}catch(C){o=C instanceof yg?C.errors:[C]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var y=al(g),T=y.next();!T.done;T=y.next()){var E=T.value;try{tk(E)}catch(C){o=o??[],C instanceof yg?o=ru(ru([],sl(o)),sl(C.errors)):o.push(C)}}}catch(C){i={error:C}}finally{try{T&&!T.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}}if(o)throw new yg(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)tk(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Gf(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Gf(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Ex=pu.EMPTY;function Cx(t){return t instanceof pu||t&&"closed"in t&&St(t.remove)&&St(t.add)&&St(t.unsubscribe)}function tk(t){St(t)?t():t.unsubscribe()}var TU={Promise:void 0},EU={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,ru([t,e],sl(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function kx(t){EU.setTimeout(function(){throw t})}function Kf(){}function kf(t){t()}var Fy=function(t){Wr(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,Cx(n)&&n.add(i)):i.destination=wU,i}return e.create=function(n,i,a){return new Fv(n,i,a)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(pu),CU=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){Gd(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){Gd(i)}else Gd(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Gd(n)}},t}(),Fv=function(t){Wr(e,t);function e(n,i,a){var o=t.call(this)||this,l;return St(n)||!n?l={next:n??void 0,error:i??void 0,complete:a??void 0}:l=n,o.destination=new CU(l),o}return e}(Fy);function Gd(t){kx(t)}function kU(t){throw t}var wU={closed:!0,next:Kf,error:kU,complete:Kf},Vy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Hy(t){return t}function _U(t){return t.length===0?Hy:t.length===1?t[0]:function(e){return t.reduce(function(n,i){return i(n)},e)}}var Qt=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var a=this,o=RU(e)?e:new Fv(e,n,i);return kf(function(){var l=a,u=l.operator,d=l.source;o.add(u?u.call(o,d):d?a._subscribe(o):a._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=nk(n),new n(function(a,o){var l=new Fv({next:function(u){try{e(u)}catch(d){o(d),l.unsubscribe()}},error:o,complete:a});i.subscribe(l)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Vy]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return _U(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=nk(e),new e(function(i,a){var o;n.subscribe(function(l){return o=l},function(l){return a(l)},function(){return i(o)})})},t.create=function(e){return new t(e)},t}();function nk(t){var e;return(e=t??TU.Promise)!==null&&e!==void 0?e:Promise}function xU(t){return t&&St(t.next)&&St(t.error)&&St(t.complete)}function RU(t){return t&&t instanceof Fy||xU(t)&&Cx(t)}function AU(t){return St(t?.lift)}function $i(t){return function(e){if(AU(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function zi(t,e,n,i,a){return new OU(t,e,n,i,a)}var OU=function(t){Wr(e,t);function e(n,i,a,o,l,u){var d=t.call(this,n)||this;return d.onFinalize=l,d.shouldUnsubscribe=u,d._next=i?function(h){try{i(h)}catch(m){n.error(m)}}:t.prototype._next,d._error=o?function(h){try{o(h)}catch(m){n.error(m)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=a?function(){try{a()}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._complete,d}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Fy),NU=zy(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),zs=function(t){Wr(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var i=new ik(this,this);return i.operator=n,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new NU},e.prototype.next=function(n){var i=this;kf(function(){var a,o;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var l=al(i.currentObservers),u=l.next();!u.done;u=l.next()){var d=u.value;d.next(n)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}}})},e.prototype.error=function(n){var i=this;kf(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var a=i.observers;a.length;)a.shift().error(n)}})},e.prototype.complete=function(){var n=this;kf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var i=this,a=this,o=a.hasError,l=a.isStopped,u=a.observers;return o||l?Ex:(this.currentObservers=null,u.push(n),new pu(function(){i.currentObservers=null,Gf(u,n)}))},e.prototype._checkFinalizedStatuses=function(n){var i=this,a=i.hasError,o=i.thrownError,l=i.isStopped;a?n.error(o):l&&n.complete()},e.prototype.asObservable=function(){var n=new Qt;return n.source=this,n},e.create=function(n,i){return new ik(n,i)},e}(Qt),ik=function(t){Wr(e,t);function e(n,i){var a=t.call(this)||this;return a.destination=n,a.source=i,a}return e.prototype.next=function(n){var i,a;(a=(i=this.destination)===null||i===void 0?void 0:i.next)===null||a===void 0||a.call(i,n)},e.prototype.error=function(n){var i,a;(a=(i=this.destination)===null||i===void 0?void 0:i.error)===null||a===void 0||a.call(i,n)},e.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},e.prototype._subscribe=function(n){var i,a;return(a=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&a!==void 0?a:Ex},e}(zs),wx=function(t){Wr(e,t);function e(n){var i=t.call(this)||this;return i._value=n,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},e.prototype.getValue=function(){var n=this,i=n.hasError,a=n.thrownError,o=n._value;if(i)throw a;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(zs),DU={now:function(){return Date.now()}},PU=function(t){Wr(e,t);function e(n,i){return t.call(this)||this}return e.prototype.schedule=function(n,i){return this},e}(pu),rk={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,ru([t,e],sl(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},MU=function(t){Wr(e,t);function e(n,i){var a=t.call(this,n,i)||this;return a.scheduler=n,a.work=i,a.pending=!1,a}return e.prototype.schedule=function(n,i){var a;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var o=this.id,l=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(l,o,i)),this.pending=!0,this.delay=i,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(l,this.id,i),this},e.prototype.requestAsyncId=function(n,i,a){return a===void 0&&(a=0),rk.setInterval(n.flush.bind(n,this),a)},e.prototype.recycleAsyncId=function(n,i,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return i;i!=null&&rk.clearInterval(i)},e.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(n,i);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,i){var a=!1,o;try{this.work(n)}catch(l){a=!0,o=l||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,a=n.scheduler,o=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Gf(o,this),i!=null&&(this.id=this.recycleAsyncId(a,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(PU),ak=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(i,n)},t.now=DU.now,t}(),LU=function(t){Wr(e,t);function e(n,i){i===void 0&&(i=ak.now);var a=t.call(this,n,i)||this;return a.actions=[],a._active=!1,a}return e.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var a;this._active=!0;do if(a=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,a){for(;n=i.shift();)n.unsubscribe();throw a}},e}(ak),IU=new LU(MU);function jU(t){return t&&St(t.schedule)}function UU(t){return t[t.length-1]}function qy(t){return jU(UU(t))?t.pop():void 0}var $y=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function _x(t){return St(t?.then)}function xx(t){return St(t[Vy])}function Rx(t){return Symbol.asyncIterator&&St(t?.[Symbol.asyncIterator])}function Ax(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function BU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ox=BU();function Nx(t){return St(t?.[Ox])}function Dx(t){return bU(this,arguments,function(){var e,n,i,a;return Tx(this,function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,el(e.read())];case 3:return n=o.sent(),i=n.value,a=n.done,a?[4,el(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,el(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Px(t){return St(t?.getReader)}function Xr(t){if(t instanceof Qt)return t;if(t!=null){if(xx(t))return zU(t);if($y(t))return FU(t);if(_x(t))return VU(t);if(Rx(t))return Mx(t);if(Nx(t))return HU(t);if(Px(t))return qU(t)}throw Ax(t)}function zU(t){return new Qt(function(e){var n=t[Vy]();if(St(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FU(t){return new Qt(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function VU(t){return new Qt(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,kx)})}function HU(t){return new Qt(function(e){var n,i;try{for(var a=al(t),o=a.next();!o.done;o=a.next()){var l=o.value;if(e.next(l),e.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}e.complete()})}function Mx(t){return new Qt(function(e){$U(t,e).catch(function(n){return e.error(n)})})}function qU(t){return Mx(Dx(t))}function $U(t,e){var n,i,a,o;return yU(this,void 0,void 0,function(){var l,u;return Tx(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=SU(t),d.label=1;case 1:return[4,n.next()];case 2:if(i=d.sent(),!!i.done)return[3,4];if(l=i.value,e.next(l),e.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=d.sent(),a={error:u},[3,11];case 6:return d.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Ba(t,e,n,i,a){i===void 0&&(i=0),a===void 0&&(a=!1);var o=e.schedule(function(){n(),a?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!a)return o}function Lx(t,e){return e===void 0&&(e=0),$i(function(n,i){n.subscribe(zi(i,function(a){return Ba(i,t,function(){return i.next(a)},e)},function(){return Ba(i,t,function(){return i.complete()},e)},function(a){return Ba(i,t,function(){return i.error(a)},e)}))})}function Ix(t,e){return e===void 0&&(e=0),$i(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function GU(t,e){return Xr(t).pipe(Ix(e),Lx(e))}function KU(t,e){return Xr(t).pipe(Ix(e),Lx(e))}function YU(t,e){return new Qt(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function WU(t,e){return new Qt(function(n){var i;return Ba(n,e,function(){i=t[Ox](),Ba(n,e,function(){var a,o,l;try{a=i.next(),o=a.value,l=a.done}catch(u){n.error(u);return}l?n.complete():n.next(o)},0,!0)}),function(){return St(i?.return)&&i.return()}})}function jx(t,e){if(!t)throw new Error("Iterable cannot be null");return new Qt(function(n){Ba(n,e,function(){var i=t[Symbol.asyncIterator]();Ba(n,e,function(){i.next().then(function(a){a.done?n.complete():n.next(a.value)})},0,!0)})})}function XU(t,e){return jx(Dx(t),e)}function QU(t,e){if(t!=null){if(xx(t))return GU(t,e);if($y(t))return YU(t,e);if(_x(t))return KU(t,e);if(Rx(t))return jx(t,e);if(Nx(t))return WU(t,e);if(Px(t))return XU(t,e)}throw Ax(t)}function Gy(t,e){return e?QU(t,e):Xr(t)}function sk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=qy(t);return Gy(t,n)}function JU(t){return t instanceof Date&&!isNaN(t)}var ZU=zy(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function e3(t,e){var n=JU(t)?{first:t}:typeof t=="number"?{each:t}:t,i=n.first,a=n.each,o=n.with,l=o===void 0?t3:o,u=n.scheduler,d=u===void 0?IU:u,h=n.meta,m=h===void 0?null:h;if(i==null&&a==null)throw new TypeError("No timeout provided.");return $i(function(g,y){var T,E,C=null,w=0,_=function(N){E=Ba(y,d,function(){try{T.unsubscribe(),Xr(l({meta:m,lastValue:C,seen:w})).subscribe(y)}catch(D){y.error(D)}},N)};T=g.subscribe(zi(y,function(N){E?.unsubscribe(),w++,y.next(C=N),a>0&&_(a)},void 0,void 0,function(){E!=null&&E.closed||E==null||E.unsubscribe(),C=null})),!w&&_(i!=null?typeof i=="number"?i:+i-d.now():a)})}function t3(t){throw new ZU(t)}function Ht(t,e){return $i(function(n,i){var a=0;n.subscribe(zi(i,function(o){i.next(t.call(e,o,a++))}))})}var n3=Array.isArray;function i3(t,e){return n3(e)?t.apply(void 0,ru([],sl(e))):t(e)}function r3(t){return Ht(function(e){return i3(t,e)})}function a3(t,e,n,i,a,o,l,u){var d=[],h=0,m=0,g=!1,y=function(){g&&!d.length&&!h&&e.complete()},T=function(C){return h<i?E(C):d.push(C)},E=function(C){h++;var w=!1;Xr(n(C,m++)).subscribe(zi(e,function(_){e.next(_)},function(){w=!0},void 0,function(){if(w)try{h--;for(var _=function(){var N=d.shift();l||E(N)};d.length&&h<i;)_();y()}catch(N){e.error(N)}}))};return t.subscribe(zi(e,T,function(){g=!0,y()})),function(){}}function Ky(t,e,n){return n===void 0&&(n=1/0),St(e)?Ky(function(i,a){return Ht(function(o,l){return e(i,o,a,l)})(Xr(t(i,a)))},n):(typeof e=="number"&&(n=e),$i(function(i,a){return a3(i,a,t,n)}))}function s3(t){return Ky(Hy,t)}function o3(){return s3(1)}function Yf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o3()(Gy(t,qy(t)))}var l3=["addListener","removeListener"],c3=["addEventListener","removeEventListener"],u3=["on","off"];function Vv(t,e,n,i){if(St(n)&&(i=n,n=void 0),i)return Vv(t,e,n).pipe(r3(i));var a=sl(h3(t)?c3.map(function(u){return function(d){return t[u](e,d,n)}}):d3(t)?l3.map(ok(t,e)):f3(t)?u3.map(ok(t,e)):[],2),o=a[0],l=a[1];if(!o&&$y(t))return Ky(function(u){return Vv(u,e,n)})(Xr(t));if(!o)throw new TypeError("Invalid event target");return new Qt(function(u){var d=function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];return u.next(1<h.length?h:h[0])};return o(d),function(){return l(d)}})}function ok(t,e){return function(n){return function(i){return t[n](e,i)}}}function d3(t){return St(t.addListener)&&St(t.removeListener)}function f3(t){return St(t.on)&&St(t.off)}function h3(t){return St(t.addEventListener)&&St(t.removeEventListener)}function Th(t,e){return $i(function(n,i){var a=0;n.subscribe(zi(i,function(o){return t.call(e,o,a++)&&i.next(o)}))})}function m3(t,e,n,i,a){return function(o,l){var u=n,d=e,h=0;o.subscribe(zi(l,function(m){var g=h++;d=u?t(d,m,g):(u=!0,m),l.next(d)},a))}}function p3(t,e){return e===void 0&&(e=Hy),t=t??g3,$i(function(n,i){var a,o=!0;n.subscribe(zi(i,function(l){var u=e(l);(o||!t(a,u))&&(o=!1,a=u,i.next(l))}))})}function g3(t,e){return t===e}function lk(t,e){return $i(m3(t,e,arguments.length>=2,!0))}function v3(t){return $i(function(e,n){var i=!1,a=zi(n,function(){a?.unsubscribe(),i=!0},Kf);Xr(t).subscribe(a),e.subscribe(zi(n,function(o){return i&&n.next(o)}))})}function Gi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=qy(t);return $i(function(i,a){(n?Yf(t,i,n):Yf(t,i)).subscribe(a)})}function ck(t){return $i(function(e,n){Xr(t).subscribe(zi(n,function(){return n.complete()},Kf)),!n.closed&&e.subscribe(n)})}var y3=Object.defineProperty,b3=Object.defineProperties,S3=Object.getOwnPropertyDescriptors,uk=Object.getOwnPropertySymbols,T3=Object.prototype.hasOwnProperty,E3=Object.prototype.propertyIsEnumerable,dk=(t,e,n)=>e in t?y3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,La=(t,e)=>{for(var n in e||(e={}))T3.call(e,n)&&dk(t,n,e[n]);if(uk)for(var n of uk(e))E3.call(e,n)&&dk(t,n,e[n]);return t},Mc=(t,e)=>b3(t,S3(e)),Fi=(t,e,n)=>new Promise((i,a)=>{var o=d=>{try{u(n.next(d))}catch(h){a(h)}},l=d=>{try{u(n.throw(d))}catch(h){a(h)}},u=d=>d.done?i(d.value):Promise.resolve(d.value).then(o,l);u((n=n.apply(t,e)).next())}),Ux="lk";function Xt(t){return typeof t>"u"?!1:C3(t)||k3(t)}function C3(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function k3(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function au(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function rn(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(au(t))return`${t.participant.identity}_${t.source}_placeholder`;if(Xt(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function w3(t,e){return t===void 0||e===void 0?!1:Xt(t)&&Xt(e)?t.publication.trackSid===e.publication.trackSid:rn(t)===rn(e)}function Bx(t,e){return typeof e>"u"?!1:Xt(t)?e.some(n=>n.participant.identity===t.participant.identity&&Xt(n)&&n.publication.trackSid===t.publication.trackSid):au(t)?e.some(n=>n.participant.identity===t.participant.identity&&au(n)&&n.source===t.source):!1}function _3(t,e){return au(t)&&Xt(e)&&e.participant.identity===t.participant.identity&&e.source===t.source}function x3(){const t=document.createElement("p");t.style.width="100%",t.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let i=t.offsetWidth;return n===i&&(i=e.clientWidth),document.body.removeChild(e),n-i}function R3(){return typeof document<"u"}function A3(t,e,n){return cU(t,e,()=>Fi(this,null,function*(){const{x:i,y:a}=yield hU(t,e,{placement:"top",middleware:[uU(6),fU(),dU({padding:5})]});n?.(i,a)}))}function O3(t,e){return!t.contains(e.target)}var N3=[te.ConnectionStateChanged,te.RoomMetadataChanged,te.ActiveSpeakersChanged,te.ConnectionQualityChanged,te.ParticipantConnected,te.ParticipantDisconnected,te.ParticipantPermissionsChanged,te.ParticipantMetadataChanged,te.ParticipantNameChanged,te.ParticipantAttributesChanged,te.TrackMuted,te.TrackUnmuted,te.TrackPublished,te.TrackUnpublished,te.TrackStreamStateChanged,te.TrackSubscriptionFailed,te.TrackSubscriptionPermissionChanged,te.TrackSubscriptionStatusChanged],D3=[...N3,te.LocalTrackPublished,te.LocalTrackUnpublished];ie.TrackPublished,ie.TrackUnpublished,ie.TrackMuted,ie.TrackUnmuted,ie.TrackStreamStateChanged,ie.TrackSubscribed,ie.TrackUnsubscribed,ie.TrackSubscriptionPermissionChanged,ie.TrackSubscriptionFailed,ie.LocalTrackPublished,ie.LocalTrackUnpublished;var P3=[ie.ConnectionQualityChanged,ie.IsSpeakingChanged,ie.ParticipantMetadataChanged,ie.ParticipantPermissionsChanged,ie.TrackMuted,ie.TrackUnmuted,ie.TrackPublished,ie.TrackUnpublished,ie.TrackStreamStateChanged,ie.TrackSubscriptionFailed,ie.TrackSubscriptionPermissionChanged,ie.TrackSubscriptionStatusChanged];[...P3,ie.LocalTrackPublished,ie.LocalTrackUnpublished];var We=vU.getLogger("lk-components-js");We.setDefaultLevel("WARN");var M3=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function zx(t,e,n,i){if(t.length<1)throw new Error("At least one grid layout definition must be provided.");const a=L3(t);if(n<=0||i<=0)return a[0];let o=0;const l=n/i>1?"landscape":"portrait";let u=a.find((d,h,m)=>{o=h;const g=m.findIndex((y,T)=>{const E=!y.orientation||y.orientation===l,C=T>h,w=y.maxTiles===d.maxTiles;return C&&w&&E})!==-1;return d.maxTiles>=e&&!g});if(u===void 0)if(u=a[a.length-1],u)We.warn(`No layout found for: participantCount: ${e}, width/height: ${n}/${i} fallback to biggest available layout (${u}).`);else throw new Error("No layout or fallback layout found.");if((n<u.minWidth||i<u.minHeight)&&o>0){const d=a[o-1];u=zx(a.slice(0,o),d.maxTiles,n,i)}return u}function L3(t){return[...t].map(e=>{var n,i;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:(n=e.minWidth)!=null?n:0,minHeight:(i=e.minHeight)!=null?i:0,orientation:e.orientation}}).sort((e,n)=>e.maxTiles!==n.maxTiles?e.maxTiles-n.maxTiles:e.minWidth!==0||n.minWidth!==0?e.minWidth-n.minWidth:e.minHeight!==0||n.minHeight!==0?e.minHeight-n.minHeight:0)}function I3(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var Fx=[],Vx={showChat:!1,unreadMessages:0,showSettings:!1};function Hx(t){return typeof t=="object"}function qx(t){return Array.isArray(t)&&t.filter(Hx).length>0}function j3(t,e){return e.audioLevel-t.audioLevel}function U3(t,e){return t.isSpeaking===e.isSpeaking?0:t.isSpeaking?-1:1}function B3(t,e){var n,i,a,o;return t.lastSpokeAt!==void 0||e.lastSpokeAt!==void 0?((i=(n=e.lastSpokeAt)==null?void 0:n.getTime())!=null?i:0)-((o=(a=t.lastSpokeAt)==null?void 0:a.getTime())!=null?o:0):0}function Hv(t,e){var n,i,a,o;return((i=(n=t.joinedAt)==null?void 0:n.getTime())!=null?i:0)-((o=(a=e.joinedAt)==null?void 0:a.getTime())!=null?o:0)}function z3(t,e){return Xt(t)?Xt(e)?0:-1:Xt(e)?1:0}function F3(t,e){const n=t.participant.isCameraEnabled,i=e.participant.isCameraEnabled;return n!==i?n?-1:1:0}function V3(t){const e=[],n=[],i=[],a=[];t.forEach(u=>{u.participant.isLocal&&u.source===K.Source.Camera?e.push(u):u.source===K.Source.ScreenShare?n.push(u):u.source===K.Source.Camera?i.push(u):a.push(u)});const o=H3(n),l=q3(i);return[...e,...o,...l,...a]}function H3(t){const e=[],n=[];return t.forEach(i=>{i.participant.isLocal?e.push(i):n.push(i)}),e.sort((i,a)=>Hv(i.participant,a.participant)),n.sort((i,a)=>Hv(i.participant,a.participant)),[...n,...e]}function q3(t){const e=[],n=[];return t.forEach(i=>{i.participant.isLocal?e.push(i):n.push(i)}),n.sort((i,a)=>i.participant.isSpeaking&&a.participant.isSpeaking?j3(i.participant,a.participant):i.participant.isSpeaking!==a.participant.isSpeaking?U3(i.participant,a.participant):i.participant.lastSpokeAt!==a.participant.lastSpokeAt?B3(i.participant,a.participant):Xt(i)!==Xt(a)?z3(i,a):i.participant.isCameraEnabled!==a.participant.isCameraEnabled?F3(i,a):Hv(i.participant,a.participant)),[...e,...n]}function $3(t,e){return t.reduce((n,i,a)=>a%e===0?[...n,[i]]:[...n.slice(0,-1),[...n.slice(-1)[0],i]],[])}function fk(t,e){const n=Math.max(t.length,e.length);return new Array(n).fill([]).map((i,a)=>[t[a],e[a]])}function Wf(t,e,n){return t.filter(i=>!e.map(a=>n(a)).includes(n(i)))}function qv(t){return t.map(e=>typeof e=="string"||typeof e=="number"?`${e}`:rn(e))}function G3(t,e){return{dropped:Wf(t,e,rn),added:Wf(e,t,rn)}}function K3(t){return t.added.length!==0||t.dropped.length!==0}function $v(t,e){const n=e.findIndex(i=>rn(i)===rn(t));if(n===-1)throw new Error(`Element not part of the array: ${rn(t)} not in ${qv(e)}`);return n}function Y3(t,e,n){const i=$v(t,n),a=$v(e,n);return n.splice(i,1,e),n.splice(a,1,t),n}function W3(t,e){const n=$v(t,e);return e.splice(n,1),e}function X3(t,e){return[...e,t]}function bg(t,e){return $3(t,e)}function Q3(t,e,n){let i=J3(t,e);if(i.length<e.length){const l=Wf(e,i,rn);i=[...i,...l]}const a=bg(i,n),o=bg(e,n);if(fk(a,o).forEach(([l,u],d)=>{if(l&&u){const h=bg(i,n)[d],m=G3(h,u);K3(m)&&(We.debug(`Detected visual changes on page: ${d}, current: ${qv(l)}, next: ${qv(u)}`,{changes:m}),m.added.length===m.dropped.length&&fk(m.added,m.dropped).forEach(([g,y])=>{if(g&&y)i=Y3(g,y,i);else throw new Error(`For a swap action we need a addition and a removal one is missing: ${g}, ${y}`)}),m.added.length===0&&m.dropped.length>0&&m.dropped.forEach(g=>{i=W3(g,i)}),m.added.length>0&&m.dropped.length===0&&m.added.forEach(g=>{i=X3(g,i)}))}}),i.length>e.length){const l=Wf(i,e,rn);i=i.filter(u=>!l.map(rn).includes(rn(u)))}return i}function J3(t,e){return t.map(n=>e.find(a=>rn(n)===rn(a)||typeof n!="number"&&au(n)&&Xt(a)&&_3(n,a))??n)}function Ln(t){return`${Ux}-${t}`}function Z3(t){const e=Gv(t),n=$x(t.participant).pipe(Ht(()=>Gv(t)),Gi(e));return{className:Ln(t.source===K.Source.Camera||t.source===K.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function Gv(t){if(Xt(t))return t.publication;{const{source:e,name:n,participant:i}=t;if(e&&n)return i.getTrackPublications().find(a=>a.source===e&&a.trackName===n);if(n)return i.getTrackPublicationByName(n);if(e)return i.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function Yy(t,...e){return new Qt(n=>{const i=()=>{n.next(t)};return e.forEach(a=>{t.on(a,i)}),()=>{e.forEach(a=>{t.off(a,i)})}}).pipe(Gi(t))}function Eh(t,e){return new Qt(n=>{const i=(...a)=>{n.next(a)};return t.on(e,i),()=>{t.off(e,i)}})}function e4(t){return Eh(t,te.ConnectionStateChanged).pipe(Ht(([e])=>e),Gi(t.state))}function t4(t,e,n=!0){const i=new Qt(o=>{ji.getLocalDevices(t,n).then(l=>{o.next(l),o.complete()}).catch(l=>{e?.(l),o.next([]),o.complete()})}),a=new Qt(o=>{var l;const u=()=>Fi(this,null,function*(){try{const d=yield ji.getLocalDevices(t,n);o.next(d)}catch(d){e?.(d)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(l=navigator?.mediaDevices)==null||l.addEventListener("devicechange",u)}return()=>{var d;(d=navigator?.mediaDevices)==null||d.removeEventListener("devicechange",u)}});return Yf(i,a)}function n4(t){return Eh(t,te.DataReceived)}function i4(t){return Yy(t,te.AudioPlaybackStatusChanged).pipe(Ht(e=>({canPlayAudio:e.canPlaybackAudio})))}function r4(t){return Yy(t,te.VideoPlaybackStatusChanged).pipe(Ht(e=>({canPlayVideo:e.canPlaybackVideo})))}function a4(t,e){return Eh(t,te.ActiveDeviceChanged).pipe(Th(([n])=>n===e),Ht(([n,i])=>(We.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:i}),i)))}function s4(t,e){return Eh(t,te.ParticipantEncryptionStatusChanged).pipe(Th(([,n])=>e?.identity===n?.identity||!n&&e?.identity===t.localParticipant.identity),Ht(([n])=>n),Gi(e!=null&&e.isLocal?e.isE2EEEnabled:!!(e!=null&&e.isEncrypted)))}function Wy(t,...e){return new Qt(n=>{const i=()=>{n.next(t)};return e.forEach(a=>{t.on(a,i)}),()=>{e.forEach(a=>{t.off(a,i)})}}).pipe(Gi(t))}function $x(t){return Wy(t,ie.TrackMuted,ie.TrackUnmuted,ie.ParticipantPermissionsChanged,ie.TrackPublished,ie.TrackUnpublished,ie.LocalTrackPublished,ie.LocalTrackUnpublished,ie.MediaDevicesError,ie.TrackSubscriptionStatusChanged).pipe(Ht(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:i,isScreenShareEnabled:a}=e,o=e.getTrackPublication(K.Source.Microphone),l=e.getTrackPublication(K.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:n,isScreenShareEnabled:a,cameraTrack:l,microphoneTrack:o,participant:e}}))}function o4(t){return t?Wy(t,ie.ParticipantMetadataChanged,ie.ParticipantNameChanged).pipe(Ht(({name:e,identity:n,metadata:i})=>({name:e,identity:n,metadata:i})),Gi({name:t.name,identity:t.identity,metadata:t.metadata})):void 0}function l4(t){return Xy(t,ie.ConnectionQualityChanged).pipe(Ht(([e])=>e),Gi(t.connectionQuality))}function Xy(t,e){return new Qt(n=>{const i=(...a)=>{n.next(a)};return t.on(e,i),()=>{t.off(e,i)}})}function Gx(t){var e,n,i,a;return Wy(t.participant,ie.TrackMuted,ie.TrackUnmuted,ie.TrackSubscribed,ie.TrackUnsubscribed,ie.LocalTrackPublished,ie.LocalTrackUnpublished).pipe(Ht(o=>{var l,u;const d=(l=t.publication)!=null?l:o.getTrackPublication(t.source);return(u=d?.isMuted)!=null?u:!0}),Gi((a=(i=(e=t.publication)==null?void 0:e.isMuted)!=null?i:(n=t.participant.getTrackPublication(t.source))==null?void 0:n.isMuted)!=null?a:!0))}function c4(t){return Xy(t,ie.IsSpeakingChanged).pipe(Ht(([e])=>e))}function u4(t){return Xy(t,ie.ParticipantPermissionsChanged).pipe(Ht(()=>t.permissions),Gi(t.permissions))}function d4(t,e,n,i,a){const{localParticipant:o}=e,l=(m,g)=>{let y=!1;switch(m){case K.Source.Camera:y=g.isCameraEnabled;break;case K.Source.Microphone:y=g.isMicrophoneEnabled;break;case K.Source.ScreenShare:y=g.isScreenShareEnabled;break}return y},u=$x(o).pipe(Ht(m=>l(t,m.participant)),Gi(l(t,o))),d=new zs,h=(m,g)=>Fi(this,null,function*(){try{switch(g??(g=n),d.next(!0),t){case K.Source.Camera:return yield o.setCameraEnabled(m??!o.isCameraEnabled,g,i),o.isCameraEnabled;case K.Source.Microphone:return yield o.setMicrophoneEnabled(m??!o.isMicrophoneEnabled,g,i),o.isMicrophoneEnabled;case K.Source.ScreenShare:return yield o.setScreenShareEnabled(m??!o.isScreenShareEnabled,g,i),o.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(y){if(a&&y instanceof Error){a?.(y);return}else throw y}finally{d.next(!1)}});return{className:Ln("button"),toggle:h,enabledObserver:u,pendingObserver:d.asObservable()}}function f4(){let t=!1;const e=new zs,n=new zs,i=a=>Fi(this,null,function*(){n.next(!0),t=a??!t,e.next(t),n.next(!1)});return{className:Ln("button"),toggle:i,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function h4(t,e,n){const i=new wx(void 0),a=a4(e,t),o=(l,...u)=>Fi(this,[l,...u],function*(d,h={}){var m,g,y;if(e){We.debug(`Switching active device of kind "${t}" with id ${d}.`),yield e.switchActiveDevice(t,d,h.exact);const T=(m=e.getActiveDevice(t))!=null?m:d;T!==d&&d!=="default"&&We.info(`We tried to select the device with id (${d}), but the browser decided to select the device with id (${T}) instead.`);let E;t==="audioinput"?E=(g=e.localParticipant.getTrackPublication(K.Source.Microphone))==null?void 0:g.track:t==="videoinput"&&(E=(y=e.localParticipant.getTrackPublication(K.Source.Camera))==null?void 0:y.track);const C=d==="default"&&!E||d==="default"&&E?.mediaStreamTrack.label.startsWith("Default");i.next(C?d:T)}});return{className:Ln("media-device-select"),activeDeviceObservable:a,setActiveMediaDevice:o}}function m4(t){const e=n=>{t.disconnect(n)};return{className:Ln("disconnect-button"),disconnect:e}}function p4(t){const e=Ln("connection-quality"),n=l4(t);return{className:e,connectionQualityObserver:n}}function g4(t){let e="track-muted-indicator-camera";switch(t.source){case K.Source.Camera:e="track-muted-indicator-camera";break;case K.Source.Microphone:e="track-muted-indicator-microphone";break}const n=Ln(e),i=Gx(t);return{className:n,mediaMutedObserver:i}}function v4(t){return{className:"lk-participant-name",infoObserver:o4(t)}}function y4(){return{className:Ln("participant-tile")}}var b4={CHAT:"lk.chat"},S4={CHAT:"lk-chat-topic"};function Kx(t,e){return Fi(this,arguments,function*(n,i,a={}){const{reliable:o,destinationIdentities:l,topic:u}=a;yield n.publishData(i,{destinationIdentities:l,topic:u,reliable:o})})}function T4(t,e,n){const i=Array.isArray(e)?e:[e],a=n4(t).pipe(Th(([,,,u])=>e===void 0||u!==void 0&&i.includes(u)),Ht(([u,d,,h])=>({payload:u,topic:h,from:d})));let o;const l=new Qt(u=>{o=u});return{messageObservable:a,isSendingObservable:l,send:(u,...d)=>Fi(this,[u,...d],function*(h,m={}){o.next(!0);try{yield Kx(t.localParticipant,h,La({topic:i[0]},m))}finally{o.next(!1)}})}}var Kd=new WeakMap;function E4(t){return t.ignoreLegacy==!0}var C4=t=>JSON.parse(new TextDecoder().decode(t)),k4=t=>new TextEncoder().encode(JSON.stringify(t));function w4(t,e){var n,i,a,o,l,u;const d=()=>{var R,x,B;return((R=t.serverInfo)==null?void 0:R.edition)===1||!!((x=t.serverInfo)!=null&&x.version)&&Ii((B=t.serverInfo)==null?void 0:B.version,"1.8.2")>0},h=new zs,m=(n=e?.channelTopic)!=null?n:b4.CHAT,g=(i=e?.channelTopic)!=null?i:S4.CHAT;let y=!1;Kd.has(t)||(y=!0);const T=(a=Kd.get(t))!=null?a:new Map,E=(o=T.get(m))!=null?o:new zs;T.set(m,E),Kd.set(t,T);const C=(l=e?.messageDecoder)!=null?l:C4;if(y){t.registerTextStreamHandler(m,(x,B)=>Fi(this,null,function*(){const{id:M,timestamp:P}=x.info;Gy(x).pipe(lk((z,q)=>z+q),Ht(z=>({id:M,timestamp:P,message:z,from:t.getParticipantByIdentity(B.identity)}))).subscribe({next:z=>E.next(z)})}));const{messageObservable:R}=T4(t,[g]);R.pipe(Ht(x=>{const B=C(x.payload);return E4(B)?void 0:Mc(La({},B),{from:x.from})}),Th(x=>!!x),ck(h)).subscribe(E)}const w=E.pipe(lk((R,x)=>{if("id"in x&&R.find(B=>{var M,P;return((M=B.from)==null?void 0:M.identity)===((P=x.from)==null?void 0:P.identity)&&B.id===x.id})){const B=R.findIndex(M=>M.id===x.id);if(B>-1){const M=R[B];R[B]=Mc(La({},x),{timestamp:M.timestamp,editTimestamp:x.timestamp})}return[...R]}return[...R,x]},[]),ck(h)),_=new wx(!1),N=(u=e?.messageEncoder)!=null?u:k4,D=(R,x)=>Fi(this,null,function*(){x||(x={}),x.topic!=null||(x.topic=m),_.next(!0);try{const B={id:(yield t.localParticipant.sendText(R,x)).id,timestamp:Date.now(),message:R},M=Mc(La({},B),{attachedFiles:x.attachments}),P=Mc(La({},M),{from:t.localParticipant,attributes:x.attributes});E.next(P);const z=N(Mc(La({},B),{ignoreLegacy:d()}));try{yield Kx(t.localParticipant,z,{reliable:!0,topic:g})}catch(q){We.info("could not send message in legacy chat format",q)}return P}finally{_.next(!1)}});function O(){h.next(),h.complete(),E.complete(),Kd.delete(t),t.unregisterTextStreamHandler(m)}return t.once(te.Disconnected,O),{messageObservable:w,isSendingObservable:_,send:D}}function _4(){const t=e=>Fi(this,null,function*(){We.info("Start Audio for room: ",e),yield e.startAudio()});return{className:Ln("start-audio-button"),roomAudioPlaybackAllowedObservable:i4,handleStartAudioPlayback:t}}function x4(){const t=e=>Fi(this,null,function*(){We.info("Start Video for room: ",e),yield e.startVideo()});return{className:Ln("start-audio-button"),roomVideoPlaybackAllowedObservable:r4,handleStartVideoPlayback:t}}function R4(){return{className:[Ln("button"),Ln("chat-toggle")].join(" ")}}function A4(){return{className:[Ln("button"),Ln("focus-toggle-button")].join(" ")}}function O4(){return{className:"lk-room-container"}}function hk(t,e,n=!0){const i=[t.localParticipant,...Array.from(t.remoteParticipants.values())],a=[];return i.forEach(o=>{e.forEach(l=>{const u=Array.from(o.trackPublications.values()).filter(d=>d.source===l&&(!n||d.track)).map(d=>({participant:o,publication:d,source:d.source}));a.push(...u)})}),{trackReferences:a,participants:i}}function N4(t,e,n){var i,a;const o=(i=n.additionalRoomEvents)!=null?i:D3,l=(a=n.onlySubscribed)!=null?a:!0,u=Array.from(new Set([te.ParticipantConnected,te.ParticipantDisconnected,te.ConnectionStateChanged,te.LocalTrackPublished,te.LocalTrackUnpublished,te.TrackPublished,te.TrackUnpublished,te.TrackSubscriptionStatusChanged,...o]).values());return Yy(t,...u).pipe(Ht(d=>{const h=hk(d,e,l);return We.debug(`TrackReference[] was updated. (length ${h.trackReferences.length})`,h),h}),Gi(hk(t,e,l)))}function D4(t,e=1e3){if(t===null)return sk(!1);const n=Vv(t,"mousemove",{passive:!0}).pipe(Ht(()=>!0)),i=n.pipe(e3({each:e,with:()=>Yf(sk(!1),i.pipe(v3(n)))}),p3());return i}function P4(t,e){if(typeof localStorage>"u"){We.error("Local storage is not available.");return}try{if(e){const n=Object.fromEntries(Object.entries(e).filter(([,i])=>i!==""));localStorage.setItem(t,JSON.stringify(n))}}catch(n){We.error(`Error setting item to local storage: ${n}`)}}function M4(t){if(typeof localStorage>"u"){We.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){We.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){We.error(`Error getting item from local storage: ${e}`);return}}function L4(t){return{load:()=>M4(t),save:e=>P4(t,e)}}var I4=`${Ux}-user-choices`,Lc={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:j4,save:U4}=L4(I4);function B4(t,e=!1){e!==!0&&U4(t)}function z4(t,e=!1){var n,i,a,o,l;const u={videoEnabled:(n=t?.videoEnabled)!=null?n:Lc.videoEnabled,audioEnabled:(i=t?.audioEnabled)!=null?i:Lc.audioEnabled,videoDeviceId:(a=t?.videoDeviceId)!=null?a:Lc.videoDeviceId,audioDeviceId:(o=t?.audioDeviceId)!=null?o:Lc.audioDeviceId,username:(l=t?.username)!=null?l:Lc.username};if(e)return u;{const d=j4();return La(La({},u),d??{})}}function Yx(t,e){if(e.msg==="show_chat")return{...t,showChat:!0,unreadMessages:0};if(e.msg==="hide_chat")return{...t,showChat:!1};if(e.msg==="toggle_chat"){const n={...t,showChat:!t.showChat};return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?{...t,unreadMessages:e.count}:e.msg==="toggle_settings"?{...t,showSettings:!t.showSettings}:{...t}}function Wx(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:{...t}}const Ch=b.createContext(void 0);function Xx(){const t=b.useContext(Ch);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function F4(t){const e=gu();if(t??(t=e),!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function V4(){const[t,e]=b.useReducer(Wx,Fx),[n,i]=b.useReducer(Yx,Vx);return{pin:{dispatch:e,state:t},widget:{dispatch:i,state:n}}}function H4(t){const[e,n]=b.useReducer(Wx,Fx),[i,a]=b.useReducer(Yx,Vx);return t??{pin:{dispatch:n,state:e},widget:{dispatch:a,state:i}}}function gu(){return b.useContext(Ch)}const Qy=b.createContext(void 0);function kh(){return b.useContext(Qy)}function bl(t){const e=kh(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const Qx=b.createContext(void 0);function Jx(){return b.useContext(Qx)}function vu(t){const e=Jx(),n=kh(),i=t??e??n?.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}const Jy=b.createContext(void 0);function wh(){const t=b.useContext(Jy);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function _h(){return b.useContext(Jy)}function yu(t){const e=_h(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const Zx=b.createContext(void 0);function q4(t){return b.useContext(Zx)}var mk={};function eR(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=eR(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function tR(){for(var t,e,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=eR(t))&&(i&&(i+=" "),i+=e);return i}function $4(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(i){console.error(i)}}}function vr(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const i=t[n];for(const a in i){const o=e[a],l=i[a];typeof o=="function"&&typeof l=="function"&&a[0]==="o"&&a[1]==="n"&&a.charCodeAt(2)>=65&&a.charCodeAt(2)<=90?e[a]=$4(o,l):(a==="className"||a==="UNSAFE_className")&&typeof o=="string"&&typeof l=="string"?e[a]=tR(o,l):e[a]=l!==void 0?l:o}}return e}function G4(t){return t!==void 0}function Qr(...t){return vr(...t.filter(G4))}function nR(t,e,n){return b.Children.map(t,i=>b.isValidElement(i)&&b.Children.only(t)?(i.props.className&&(e??(e={}),e.className=tR(i.props.className,e.className),e.style={...i.props.style,...e.style}),b.cloneElement(i,{...e,key:n})):i)}function K4(t){var e,n;if(typeof window<"u"&&typeof process<"u"&&(((e=process==null?void 0:mk)==null?void 0:e.NODE_ENV)==="dev"||((n=process==null?void 0:mk)==null?void 0:n.NODE_ENV)==="development")){const i=document.querySelector(".lk-room-container");i&&!getComputedStyle(i).getPropertyValue("--lk-has-imported-styles")&&We.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function Y4(t,e){return t==="processor"&&e&&typeof e=="object"&&"name"in e?e.name:t==="e2ee"&&e?"e2ee-enabled":e}const W4={connect:!0,audio:!1,video:!1};function X4(t){const{token:e,serverUrl:n,options:i,room:a,connectOptions:o,connect:l,audio:u,video:d,screen:h,onConnected:m,onDisconnected:g,onError:y,onMediaDeviceFailure:T,onEncryptionError:E,simulateParticipants:C,...w}={...W4,...t};i&&a&&We.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[_,N]=b.useState(),D=b.useRef(l);b.useEffect(()=>{N(a??new ji(i))},[a,JSON.stringify(i,Y4)]);const O=b.useMemo(()=>{const{className:R}=O4();return vr(w,{className:R})},[w]);return b.useEffect(()=>{if(!_)return;const R=()=>{const z=_.localParticipant;We.debug("trying to publish local tracks"),Promise.all([z.setMicrophoneEnabled(!!u,typeof u!="boolean"?u:void 0),z.setCameraEnabled(!!d,typeof d!="boolean"?d:void 0),z.setScreenShareEnabled(!!h,typeof h!="boolean"?h:void 0)]).catch(q=>{We.warn(q),y?.(q)})},x=(z,q)=>{const re=eu.getFailure(z);T?.(re,q)},B=z=>{E?.(z)},M=z=>{g?.(z)},P=()=>{m?.()};return _.on(te.SignalConnected,R).on(te.MediaDevicesError,x).on(te.EncryptionError,B).on(te.Disconnected,M).on(te.Connected,P),()=>{_.off(te.SignalConnected,R).off(te.MediaDevicesError,x).off(te.EncryptionError,B).off(te.Disconnected,M).off(te.Connected,P)}},[_,u,d,h,y,E,T,m,g]),b.useEffect(()=>{if(_){if(C){_.simulateParticipants({participants:{count:C},publish:{audio:!0,useRealTracks:!0}});return}if(l){if(D.current=!0,We.debug("connecting"),!e){We.debug("no token yet");return}if(!n){We.warn("no livekit url provided"),y?.(Error("no livekit url provided"));return}_.connect(n,e,o).catch(R=>{We.warn(R),D.current===!0&&y?.(R)})}else We.debug("disconnecting because connect is false"),D.current=!1,_.disconnect()}},[l,e,JSON.stringify(o),_,y,n,C]),b.useEffect(()=>{if(_)return()=>{We.info("disconnecting on onmount"),_.disconnect()}},[_]),{room:_,htmlProps:O}}const iR=b.forwardRef(function(t,e){const{room:n,htmlProps:i}=X4(t);return b.createElement("div",{ref:e,...i},n&&b.createElement(Jy.Provider,{value:n},b.createElement(Zx.Provider,{value:t.featureFlags},t.children)))}),Q4=t=>{const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),e};function J4(t,e){const n=e6(),i=Q4(e);return b.useLayoutEffect(()=>{let a=!1;const o=t.current;if(!o)return;function l(u,d){a||i.current(u,d)}return n?.subscribe(o,l),()=>{a=!0,n?.unsubscribe(o,l)}},[t.current,n,i]),n?.observer}function Z4(){let t=!1,e=[];const n=new Map;if(typeof window>"u")return;const i=new ResizeObserver((a,o)=>{e=e.concat(a),t||window.requestAnimationFrame(()=>{const l=new Set;for(let u=0;u<e.length;u++){if(l.has(e[u].target))continue;l.add(e[u].target);const d=n.get(e[u].target);d?.forEach(h=>h(e[u],o))}e=[],t=!1}),t=!0});return{observer:i,subscribe(a,o){i.observe(a);const l=n.get(a)??[];l.push(o),n.set(a,l)},unsubscribe(a,o){const l=n.get(a)??[];if(l.length===1){i.unobserve(a),n.delete(a);return}const u=l.indexOf(o);u!==-1&&l.splice(u,1),n.set(a,l)}}}let pk;const e6=()=>pk||(pk=Z4()),rR=t=>{const[e,n]=b.useState({width:0,height:0});b.useLayoutEffect(()=>{if(t.current){const{width:a,height:o}=t.current.getBoundingClientRect();n({width:a,height:o})}},[t.current]);const i=b.useCallback(a=>n(a.contentRect),[]);return J4(t,i),e};function In(t,e,n=!0){const[i,a]=b.useState(e);return b.useEffect(()=>{if(n&&a(e),typeof window>"u"||!t)return;const o=t.subscribe(a);return()=>o.unsubscribe()},[t,n]),i}function t6(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,i]=b.useState(e(t));function a(){i(e(t))}return b.useEffect(()=>{const o=window.matchMedia(t);return a(),o.addListener?o.addListener(a):o.addEventListener("change",a),()=>{o.removeListener?o.removeListener(a):o.removeEventListener("change",a)}},[t]),n}function n6(t={}){const e=vu(t.participant),{className:n,connectionQualityObserver:i}=b.useMemo(()=>p4(e),[e]),a=In(i,e.connectionQuality);return{className:n,quality:a}}function Zy(t){const e=yu(t),n=b.useMemo(()=>e4(e),[e]);return In(n,e.state)}function i6(t){const e=wh(),n=Zy(e);return{buttonProps:b.useMemo(()=>{const{className:i,disconnect:a}=m4(e);return vr(t,{className:i,onClick:()=>a(t.stopTracks??!0),disabled:n===nt.Disconnected})},[e,t,n])}}function r6(t){if(t.publication instanceof Bf){const e=t.publication.track;if(e){const{facingMode:n}=Rj(e);return n}}return"undefined"}function a6({trackRef:t,props:e}){const n=bl(t),i=gu(),{className:a}=b.useMemo(()=>A4(),[]),o=b.useMemo(()=>Bx(n,i?.pin.state),[n,i?.pin.state]);return{mergedProps:b.useMemo(()=>vr(e,{className:a,onClick:l=>{var u,d,h,m,g;(u=e.onClick)==null||u.call(e,l),o?(h=i==null?void 0:(d=i.pin).dispatch)==null||h.call(d,{msg:"clear_pin"}):(g=i==null?void 0:(m=i.pin).dispatch)==null||g.call(m,{msg:"set_pin",trackReference:n})}}),[e,a,n,o,i?.pin]),inFocus:o}}function s6(t,e,n={}){const i=n.gridLayouts??M3,{width:a,height:o}=rR(t),l=zx(i,e,a,o);return b.useEffect(()=>{t.current&&l&&(t.current.style.setProperty("--lk-col-count",l?.columns.toString()),t.current.style.setProperty("--lk-row-count",l?.rows.toString()))},[t,l]),{layout:l,containerWidth:a,containerHeight:o}}function gk(t,e={}){var n,i;const a=typeof t=="string"?e.participant:t.participant,o=vu(a),l=typeof t=="string"?{participant:o,source:t}:t,[u,d]=b.useState(!!((n=l.publication)!=null&&n.isMuted||(i=o.getTrackPublication(l.source))!=null&&i.isMuted));return b.useEffect(()=>{const h=Gx(l).subscribe(d);return()=>h.unsubscribe()},[rn(l)]),u}function o6(t){const e=vu(t),n=b.useMemo(()=>c4(e),[e]);return In(n,e.isSpeaking)}function l6(){const t=wh(),e=b.useMemo(()=>u4(t.localParticipant),[t]);return In(e,t.localParticipant.permissions)}function c6({kind:t,room:e,track:n,requestPermissions:i,onError:a}){const o=_h(),l=b.useMemo(()=>e??o??new ji,[e,o]),u=b.useMemo(()=>t4(t,a,i),[t,i,a]),d=In(u,[]),[h,m]=b.useState(l?.getActiveDevice(t)??"default"),{className:g,activeDeviceObservable:y,setActiveMediaDevice:T}=b.useMemo(()=>h4(t,l),[t,l,n]);return b.useEffect(()=>{const E=y.subscribe(C=>{C&&(We.info("setCurrentDeviceId",C),m(C))});return()=>{E?.unsubscribe()}},[y]),{devices:d,className:g,activeDeviceId:h,setActiveMediaDevice:T}}function aR(t,e,n={}){const i=b.useRef([]),a=b.useRef(-1),o=e!==a.current,l=typeof n.customSortFunction=="function"?n.customSortFunction(t):V3(t);let u=[...l];if(o===!1)try{u=Q3(i.current,l,e)}catch(d){We.error("Error while running updatePages(): ",d)}return o?i.current=l:i.current=u,a.current=e,u}function u6(t,e){const[n,i]=b.useState(1),a=Math.max(Math.ceil(e.length/t),1);n>a&&i(a);const o=n*t,l=o-t,u=m=>{i(g=>m==="next"?g===a?g:g+1:g===1?g:g-1)},d=m=>{m>a?i(a):m<1?i(1):i(m)},h=aR(e,t).slice(l,o);return{totalPageCount:a,nextPage:()=>u("next"),prevPage:()=>u("previous"),setPage:d,firstItemIndex:l,lastItemIndex:o,tracks:h,currentPage:n}}function d6({trackRef:t,onParticipantClick:e,disableSpeakingIndicator:n,htmlProps:i}){const a=bl(t),o=b.useMemo(()=>{const{className:y}=y4();return vr(i,{className:y,onClick:T=>{var E;if((E=i.onClick)==null||E.call(i,T),typeof e=="function"){const C=a.publication??a.participant.getTrackPublication(a.source);e({participant:a.participant,track:C})}}})},[i,e,a.publication,a.source,a.participant]),l=a.participant.getTrackPublication(K.Source.Microphone),u=b.useMemo(()=>({participant:a.participant,source:K.Source.Microphone,publication:l}),[l,a.participant]),d=gk(a),h=gk(u),m=o6(a.participant),g=r6(a);return{elementProps:{"data-lk-audio-muted":h,"data-lk-video-muted":d,"data-lk-speaking":n===!0?!1:m,"data-lk-local-participant":a.participant.isLocal,"data-lk-source":a.source,"data-lk-facing-mode":g,...o}}}function f6(t){return t=F4(t),b.useMemo(()=>t?.pin.state!==void 0&&t.pin.state.length>=1?t.pin.state:[],[t.pin.state])}function h6({room:t,props:e}){const n=yu(t),{className:i,roomAudioPlaybackAllowedObservable:a,handleStartAudioPlayback:o}=b.useMemo(()=>_4(),[]),l=b.useMemo(()=>a(n),[n,a]),{canPlayAudio:u}=In(l,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:b.useMemo(()=>vr(e,{className:i,onClick:()=>{o(n)},style:{display:u?"none":"block"}}),[e,i,u,o,n]),canPlayAudio:u}}function m6({room:t,props:e}){const n=yu(t),{className:i,roomVideoPlaybackAllowedObservable:a,handleStartVideoPlayback:o}=b.useMemo(()=>x4(),[]),l=b.useMemo(()=>a(n),[n,a]),{canPlayVideo:u}=In(l,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:b.useMemo(()=>vr(e,{className:i,onClick:()=>{o(n)},style:{display:u?"none":"block"}}),[e,i,u,o,n]),canPlayVideo:u}}function p6(t,e={}){const n=b.useRef(null),i=b.useRef(null),a=e.minSwipeDistance??50,o=d=>{i.current=null,n.current=d.targetTouches[0].clientX},l=d=>{i.current=d.targetTouches[0].clientX},u=b.useCallback(()=>{if(!n.current||!i.current)return;const d=n.current-i.current,h=d>a,m=d<-a;h&&e.onLeftSwipe&&e.onLeftSwipe(),m&&e.onRightSwipe&&e.onRightSwipe()},[a,e]);b.useEffect(()=>{const d=t.current;return d&&(d.addEventListener("touchstart",o,{passive:!0}),d.addEventListener("touchmove",l,{passive:!0}),d.addEventListener("touchend",u,{passive:!0})),()=>{d&&(d.removeEventListener("touchstart",o),d.removeEventListener("touchmove",l),d.removeEventListener("touchend",u))}},[t,u])}function g6({props:t}){const{dispatch:e,state:n}=Xx().widget,{className:i}=b.useMemo(()=>R4(),[]);return{mergedProps:b.useMemo(()=>vr(t,{className:i,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,i,e,n])}}function v6(t){var e,n;const i=bl(t),{className:a,mediaMutedObserver:o}=b.useMemo(()=>g4(i),[rn(i)]);return{isMuted:In(o,!!((e=i.publication)!=null&&e.isMuted||(n=i.participant.getTrackPublication(i.source))!=null&&n.isMuted)),className:a}}function y6({source:t,onChange:e,initialState:n,captureOptions:i,publishOptions:a,onDeviceError:o,...l}){var u;const d=_h(),h=(u=d?.localParticipant)==null?void 0:u.getTrackPublication(t),m=b.useRef(!1),{toggle:g,className:y,pendingObserver:T,enabledObserver:E}=b.useMemo(()=>d?d4(t,d,i,a,o):f4(),[d,t,JSON.stringify(i),a]),C=In(T,!1),w=In(E,n??!!(h!=null&&h.isEnabled));b.useEffect(()=>{e?.(w,m.current),m.current=!1},[w,e]),b.useEffect(()=>{n!==void 0&&(We.debug("forcing initial toggle state",t,n),g(n))},[]);const _=b.useMemo(()=>vr(l,{className:y}),[l,y]),N=b.useCallback(D=>{var O;m.current=!0,g().catch(()=>m.current=!1),(O=l.onClick)==null||O.call(l,D)},[l,g]);return{toggle:g,enabled:w,pending:C,track:h,buttonProps:{..._,"aria-pressed":w,"data-lk-source":t,"data-lk-enabled":w,disabled:C,onClick:N}}}function sR(t=[K.Source.Camera,K.Source.Microphone,K.Source.ScreenShare,K.Source.ScreenShareAudio,K.Source.Unknown],e={}){const n=yu(e.room),[i,a]=b.useState([]),[o,l]=b.useState([]),u=b.useMemo(()=>t.map(d=>Hx(d)?d.source:d),[JSON.stringify(t)]);return b.useEffect(()=>{const d=N4(n,u,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:h,participants:m})=>{We.debug("setting track bundles",h,m),a(h),l(m)});return()=>d.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),b.useMemo(()=>{if(qx(t)){const d=S6(t,o),h=Array.from(i);return o.forEach(m=>{d.has(m.identity)&&(d.get(m.identity)??[]).forEach(g=>{if(i.find(({participant:T,publication:E})=>m.identity===T.identity&&E.source===g))return;We.debug(`Add ${g} placeholder for participant ${m.identity}.`);const y={participant:m,source:g};h.push(y)})}),h}else return i},[i,o,t])}function b6(t,e){const n=new Set(t);for(const i of e)n.delete(i);return n}function S6(t,e){const n=new Map;if(qx(t)){const i=t.filter(a=>a.withPlaceholder).map(a=>a.source);e.forEach(a=>{const o=a.getTrackPublications().map(u=>{var d;return(d=u.track)==null?void 0:d.source}).filter(u=>u!==void 0),l=Array.from(b6(new Set(i),new Set(o)));l.length>0&&n.set(a.identity,l)})}return n}function T6(t){const e=wh(),n=Zy(e),i=b.useMemo(()=>n===nt.Disconnected,[n]),a=b.useMemo(()=>w4(e,t),[e,t,i]),o=In(a.isSendingObservable,!1),l=In(a.messageObservable,[]);return{send:a.send,chatMessages:l,isSending:o}}function E6(t={}){const[e,n]=b.useState(z4(t.defaults,t.preventLoad??!1)),i=b.useCallback(d=>{n(h=>({...h,audioEnabled:d}))},[]),a=b.useCallback(d=>{n(h=>({...h,videoEnabled:d}))},[]),o=b.useCallback(d=>{n(h=>({...h,audioDeviceId:d}))},[]),l=b.useCallback(d=>{n(h=>({...h,videoDeviceId:d}))},[]),u=b.useCallback(d=>{n(h=>({...h,username:d}))},[]);return b.useEffect(()=>{B4(e,t.preventSave??!1)},[e,t.preventSave]),{userChoices:e,saveAudioInputEnabled:i,saveVideoInputEnabled:a,saveAudioInputDeviceId:o,saveVideoInputDeviceId:l,saveUsername:u}}function C6(t,e={}){const n=vu(t),i=yu(e.room),a=b.useMemo(()=>s4(i,n),[i,n]);return In(a,n.isLocal?n.isE2EEEnabled:!!(n!=null&&n.isEncrypted))}const oR=b.forwardRef(function(t,e){const{mergedProps:n}=g6({props:t});return b.createElement("button",{ref:e,...n},t.children)}),k6=b.forwardRef(function(t,e){const{buttonProps:n}=i6(t);return b.createElement("button",{ref:e,...n},t.children)}),w6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},b.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),b.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),_6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},b.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),x6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...t},b.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),R6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...t},b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),vk=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},b.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),A6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},b.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},b.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),O6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},b.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),N6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),D6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},b.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),P6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},b.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),b.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),M6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},b.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),b.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),L6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),I6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),j6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),U6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},b.createElement("g",{opacity:.25},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),lR=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),B6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},b.createElement("g",{fill:"currentColor"},b.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),b.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),yk=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),z6=t=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},b.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},b.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),F6=b.forwardRef(function({trackRef:t,...e},n){const i=kh(),{mergedProps:a,inFocus:o}=a6({trackRef:t??i,props:e});return b.createElement(Ch.Consumer,null,l=>l!==void 0&&b.createElement("button",{ref:n,...a},e.children?e.children:o?b.createElement(z6,null):b.createElement(A6,null)))}),Sg=b.forwardRef(function({kind:t,initialSelection:e,onActiveDeviceChange:n,onDeviceListChange:i,onDeviceSelectError:a,exactMatch:o,track:l,requestPermissions:u,onError:d,...h},m){const g=_h(),y=b.useRef("default"),T=b.useCallback(x=>{g&&g.emit(te.MediaDevicesError,x),d?.(x)},[g,d]),{devices:E,activeDeviceId:C,setActiveMediaDevice:w,className:_}=c6({kind:t,room:g,track:l,requestPermissions:u,onError:T});b.useEffect(()=>{e!==void 0&&w(e)},[w]),b.useEffect(()=>{typeof i=="function"&&i(E)},[i,E]),b.useEffect(()=>{C!==y.current&&n?.(C),y.current=C},[C]);const N=async x=>{try{await w(x,{exact:o??!0})}catch(B){if(B instanceof Error)a?.(B);else throw B}},D=b.useMemo(()=>Qr(h,{className:_},{className:"lk-list"}),[_,h]),O=!!E.find(x=>x.label.toLowerCase().startsWith("default"));function R(x,B,M){return x===B||!O&&M===0&&B==="default"}return b.createElement("ul",{ref:m,...D},E.map((x,B)=>b.createElement("li",{key:x.deviceId,id:x.deviceId,"data-lk-active":R(x.deviceId,C,B),"aria-selected":R(x.deviceId,C,B),role:"option"},b.createElement("button",{className:"lk-button",onClick:()=>N(x.deviceId)},x.label))))}),V6=b.forwardRef(function({label:t,...e},n){const i=wh(),{mergedProps:a,canPlayAudio:o}=h6({room:i,props:e}),{mergedProps:l,canPlayVideo:u}=m6({room:i,props:a}),{style:d,...h}=l;return d.display=o&&u?"none":"block",b.createElement("button",{ref:n,style:d,...h},t??`Start ${o?"Video":"Audio"}`)});function cR(t,e){switch(t){case K.Source.Microphone:return e?b.createElement(M6,null):b.createElement(P6,null);case K.Source.Camera:return e?b.createElement(_6,null):b.createElement(w6,null);case K.Source.ScreenShare:return e?b.createElement(B6,null):b.createElement(lR,null);default:return}}function H6(t){switch(t){case Pi.Excellent:return b.createElement(L6,null);case Pi.Good:return b.createElement(I6,null);case Pi.Poor:return b.createElement(j6,null);default:return b.createElement(U6,null)}}const Tg=b.forwardRef(function({showIcon:t,...e},n){const{buttonProps:i,enabled:a}=y6(e),[o,l]=b.useState(!1);return b.useEffect(()=>{l(!0)},[]),o&&b.createElement("button",{ref:n,...i},(t??!0)&&cR(e.source,a),e.children)}),q6=b.forwardRef(function(t,e){const{className:n,quality:i}=n6(t),a=b.useMemo(()=>({...Qr(t,{className:n}),"data-lk-quality":i}),[i,t,n]);return b.createElement("div",{ref:e,...a},t.children??H6(i))}),bk=b.forwardRef(function({participant:t,...e},n){const i=vu(t),{className:a,infoObserver:o}=b.useMemo(()=>v4(i),[i]),{identity:l,name:u}=In(o,{name:i.name,identity:i.identity,metadata:i.metadata}),d=b.useMemo(()=>Qr(e,{className:a,"data-lk-participant-name":u}),[e,a,u]);return b.createElement("span",{ref:n,...d},u!==""?u:l,e.children)}),$6=b.forwardRef(function({trackRef:t,show:e="always",...n},i){const{className:a,isMuted:o}=v6(t),l=e==="always"||e==="muted"&&o||e==="unmuted"&&!o,u=b.useMemo(()=>Qr(n,{className:a}),[a,n]);return l?b.createElement("div",{ref:i,...u,"data-lk-muted":o},n.children??cR(t.source,!o)):null}),G6=t=>b.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},b.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),b.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function uR(t,e={}){const[n,i]=b.useState(Gv(t)),[a,o]=b.useState(n?.isMuted),[l,u]=b.useState(n?.isSubscribed),[d,h]=b.useState(n?.track),[m,g]=b.useState("landscape"),y=b.useRef(),{className:T,trackObserver:E}=b.useMemo(()=>Z3(t),[t.participant.sid??t.participant.identity,t.source,Xt(t)&&t.publication.trackSid]);return b.useEffect(()=>{const C=E.subscribe(w=>{We.debug("update track",w),i(w),o(w?.isMuted),u(w?.isSubscribed),h(w?.track)});return()=>C?.unsubscribe()},[E]),b.useEffect(()=>{var C,w;return d&&(y.current&&d.detach(y.current),(C=e.element)!=null&&C.current&&!(t.participant.isLocal&&d?.kind==="audio")&&d.attach(e.element.current)),y.current=(w=e.element)==null?void 0:w.current,()=>{y.current&&d?.detach(y.current)}},[d,e.element]),b.useEffect(()=>{var C,w;if(typeof((C=n?.dimensions)==null?void 0:C.width)=="number"&&typeof((w=n?.dimensions)==null?void 0:w.height)=="number"){const _=n.dimensions.width>n.dimensions.height?"landscape":"portrait";g(_)}},[n]),{publication:n,isMuted:a,isSubscribed:l,track:d,elementProps:Qr(e.props,{className:T,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":m}})}}var Eg,Sk;function K6(){if(Sk)return Eg;Sk=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,d=typeof $d=="object"&&$d&&$d.Object===Object&&$d,h=typeof self=="object"&&self&&self.Object===Object&&self,m=d||h||Function("return this")(),g=Object.prototype,y=g.toString,T=Math.max,E=Math.min,C=function(){return m.Date.now()};function w(R,x,B){var M,P,z,q,re,fe,ye=0,we=!1,F=!1,se=!0;if(typeof R!="function")throw new TypeError(t);x=O(x)||0,_(B)&&(we=!!B.leading,F="maxWait"in B,z=F?T(O(B.maxWait)||0,x):z,se="trailing"in B?!!B.trailing:se);function Q(Ne){var ze=M,Tt=P;return M=P=void 0,ye=Ne,q=R.apply(Tt,ze),q}function Se(Ne){return ye=Ne,re=setTimeout(he,x),we?Q(Ne):q}function L(Ne){var ze=Ne-fe,Tt=Ne-ye,lt=x-ze;return F?E(lt,z-Tt):lt}function ne(Ne){var ze=Ne-fe,Tt=Ne-ye;return fe===void 0||ze>=x||ze<0||F&&Tt>=z}function he(){var Ne=C();if(ne(Ne))return le(Ne);re=setTimeout(he,L(Ne))}function le(Ne){return re=void 0,se&&M?Q(Ne):(M=P=void 0,q)}function ge(){re!==void 0&&clearTimeout(re),ye=0,M=fe=P=re=void 0}function Oe(){return re===void 0?q:le(C())}function Te(){var Ne=C(),ze=ne(Ne);if(M=arguments,P=this,fe=Ne,ze){if(re===void 0)return Se(fe);if(F)return re=setTimeout(he,x),Q(fe)}return re===void 0&&(re=setTimeout(he,x)),q}return Te.cancel=ge,Te.flush=Oe,Te}function _(R){var x=typeof R;return!!R&&(x=="object"||x=="function")}function N(R){return!!R&&typeof R=="object"}function D(R){return typeof R=="symbol"||N(R)&&y.call(R)==n}function O(R){if(typeof R=="number")return R;if(D(R))return e;if(_(R)){var x=typeof R.valueOf=="function"?R.valueOf():R;R=_(x)?x+"":x}if(typeof R!="string")return R===0?R:+R;R=R.replace(i,"");var B=o.test(R);return B||l.test(R)?u(R.slice(2),B?2:8):a.test(R)?e:+R}return Eg=w,Eg}var Y6=K6();const Tk=Sx(Y6);function W6(t){const e=b.useRef(t);e.current=t,b.useEffect(()=>()=>{e.current()},[])}function X6(t,e=500,n){const i=b.useRef();W6(()=>{i.current&&i.current.cancel()});const a=b.useMemo(()=>{const o=Tk(t,e,n),l=(...u)=>o(...u);return l.cancel=()=>{o.cancel()},l.isPending=()=>!!i.current,l.flush=()=>o.flush(),l},[t,e,n]);return b.useEffect(()=>{i.current=Tk(t,e,n)},[t,e,n]),a}function Q6(t,e,n){const i=(h,m)=>h===m,a=t instanceof Function?t():t,[o,l]=b.useState(a),u=b.useRef(a),d=X6(l,e,n);return i(u.current,a)||(d(a),u.current=a),[o,d]}function J6({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:i=!1,initialIsIntersecting:a=!1,onChange:o}={}){var l;const[u,d]=b.useState(null),[h,m]=b.useState(()=>({isIntersecting:a,entry:void 0})),g=b.useRef();g.current=o;const y=((l=h.entry)==null?void 0:l.isIntersecting)&&i;b.useEffect(()=>{if(!u||!("IntersectionObserver"in window)||y)return;const C=new IntersectionObserver(w=>{const _=Array.isArray(C.thresholds)?C.thresholds:[C.thresholds];w.forEach(N=>{const D=N.isIntersecting&&_.some(O=>N.intersectionRatio>=O);m({isIntersecting:D,entry:N}),g.current&&g.current(D,N)})},{threshold:t,root:e,rootMargin:n});return C.observe(u),()=>{C.disconnect()}},[u,JSON.stringify(t),e,n,y,i]);const T=b.useRef(null);b.useEffect(()=>{var C;!u&&(C=h.entry)!=null&&C.target&&!i&&!y&&T.current!==h.entry.target&&(T.current=h.entry.target,m({isIntersecting:a,entry:void 0}))},[u,h.entry,i,y,a]);const E=[d,!!h.isIntersecting,h.entry];return E.ref=E[0],E.isIntersecting=E[1],E.entry=E[2],E}const Z6=b.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:i,manageSubscription:a,...o},l){const u=bl(i),d=b.useRef(null);b.useImperativeHandle(l,()=>d.current);const h=J6({root:d.current}),[m]=Q6(h,3e3);b.useEffect(()=>{a&&u.publication instanceof zf&&m?.isIntersecting===!1&&h?.isIntersecting===!1&&u.publication.setSubscribed(!1)},[m,u,a]),b.useEffect(()=>{a&&u.publication instanceof zf&&h?.isIntersecting===!0&&u.publication.setSubscribed(!0)},[h,u,a]);const{elementProps:g,publication:y,isSubscribed:T}=uR(u,{element:d,props:o});b.useEffect(()=>{n?.(!!T)},[T,n]);const E=C=>{e?.(C),t?.({participant:u?.participant,track:y})};return b.createElement("video",{ref:d,...g,muted:!0,onClick:E})}),dR=b.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...i},a){const o=bl(t),l=b.useRef(null);b.useImperativeHandle(a,()=>l.current);const{elementProps:u,isSubscribed:d,track:h,publication:m}=uR(o,{element:l,props:i});return b.useEffect(()=>{e?.(!!d)},[d,e]),b.useEffect(()=>{h===void 0||n===void 0||(h instanceof ax?h.setVolume(n):We.warn("Volume can only be set on remote audio tracks."))},[n,h]),b.useEffect(()=>{m===void 0||i.muted===void 0||(m instanceof zf?m.setEnabled(!i.muted):We.warn("Can only call setEnabled on remote track publications."))},[i.muted,m,h]),b.createElement("audio",{ref:l,...u})});function eB(t){const e=!!Jx();return t.participant&&!e?b.createElement(Qx.Provider,{value:t.participant},t.children):b.createElement(b.Fragment,null,t.children)}function tB(t){const e=!!kh();return t.trackRef&&!e?b.createElement(Qy.Provider,{value:t.trackRef},t.children):b.createElement(b.Fragment,null,t.children)}const Kv=b.forwardRef(function({trackRef:t,children:e,onParticipantClick:n,disableSpeakingIndicator:i,...a},o){var l,u;const d=bl(t),{elementProps:h}=d6({htmlProps:a,disableSpeakingIndicator:i,onParticipantClick:n,trackRef:d}),m=C6(d.participant),g=gu(),y=(l=q4())==null?void 0:l.autoSubscription,T=b.useCallback(E=>{d.source&&!E&&g&&g.pin.dispatch&&Bx(d,g.pin.state)&&g.pin.dispatch({msg:"clear_pin"})},[d,g]);return b.createElement("div",{ref:o,style:{position:"relative"},...h},b.createElement(tB,{trackRef:d},b.createElement(eB,{participant:d.participant},e??b.createElement(b.Fragment,null,Xt(d)&&(((u=d.publication)==null?void 0:u.kind)==="video"||d.source===K.Source.Camera||d.source===K.Source.ScreenShare)?b.createElement(Z6,{trackRef:d,onSubscriptionStatusChanged:T,manageSubscription:y}):Xt(d)&&b.createElement(dR,{trackRef:d,onSubscriptionStatusChanged:T}),b.createElement("div",{className:"lk-participant-placeholder"},b.createElement(G6,null)),b.createElement("div",{className:"lk-participant-metadata"},b.createElement("div",{className:"lk-participant-metadata-item"},d.source===K.Source.Camera?b.createElement(b.Fragment,null,m&&b.createElement(D6,{style:{marginRight:"0.25rem"}}),b.createElement($6,{trackRef:{participant:d.participant,source:K.Source.Microphone},show:"muted"}),b.createElement(bk,null)):b.createElement(b.Fragment,null,b.createElement(lR,{style:{marginRight:"0.25rem"}}),b.createElement(bk,null,"'s screen"))),b.createElement(q6,{className:"lk-participant-metadata-item"}))),b.createElement(F6,{trackRef:d}))))});function nB(t){const e=Qr(t,{className:"lk-focus-layout"});return b.createElement("div",{...e},t.children)}function iB({trackRef:t,...e}){return b.createElement(Kv,{trackRef:t,...e})}function fR({tracks:t,...e}){return b.createElement(b.Fragment,null,t.map(n=>b.createElement(Qy.Provider,{value:n,key:rn(n)},nR(e.children))))}function rB({totalPageCount:t,nextPage:e,prevPage:n,currentPage:i,pagesContainer:a}){const[o,l]=b.useState(!1);return b.useEffect(()=>{let u;return a&&(u=D4(a.current,2e3).subscribe(l)),()=>{u&&u.unsubscribe()}},[a]),b.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":o},b.createElement("button",{className:"lk-button",onClick:n},b.createElement(vk,null)),b.createElement("span",{className:"lk-pagination-count"},`${i} of ${t}`),b.createElement("button",{className:"lk-button",onClick:e},b.createElement(vk,null)))}const aB=b.forwardRef(function({totalPageCount:t,currentPage:e},n){const i=new Array(t).fill("").map((a,o)=>o+1===e?b.createElement("span",{"data-lk-active":!0,key:o}):b.createElement("span",{key:o}));return b.createElement("div",{ref:n,className:"lk-pagination-indicator"},i)});function sB({tracks:t,...e}){const n=b.createRef(),i=b.useMemo(()=>Qr(e,{className:"lk-grid-layout"}),[e]),{layout:a}=s6(n,t.length),o=u6(a.maxTiles,t);return p6(n,{onLeftSwipe:o.nextPage,onRightSwipe:o.prevPage}),b.createElement("div",{ref:n,"data-lk-pagination":o.totalPageCount>1,...i},b.createElement(fR,{tracks:o.tracks},e.children),t.length>a.maxTiles&&b.createElement(b.Fragment,null,b.createElement(aB,{totalPageCount:o.totalPageCount,currentPage:o.currentPage}),b.createElement(rB,{pagesContainer:n,...o})))}const oB=130,lB=140,cB=1,hR=16/10,uB=(1-hR)*-1;function dB({tracks:t,orientation:e,...n}){const i=b.useRef(null),[a,o]=b.useState(0),{width:l,height:u}=rR(i),d=e||(u>=l?"vertical":"horizontal"),h=d==="vertical"?Math.max(l*uB,oB):Math.max(u*hR,lB),m=x3(),g=Math.max(d==="vertical"?(u-m)/h:(l-m)/h,cB);let y=Math.round(g);Math.abs(g-a)<.5?y=Math.round(a):a!==g&&o(g);const T=aR(t,y);return b.useLayoutEffect(()=>{i.current&&(i.current.dataset.lkOrientation=d,i.current.style.setProperty("--lk-max-visible-tiles",y.toString()))},[y,d]),b.createElement("aside",{key:d,className:"lk-carousel",ref:i,...n},b.createElement(fR,{tracks:T},n.children))}function fB({value:t,onPinChange:e,onWidgetChange:n,children:i}){const a=H4(t);return b.useEffect(()=>{We.debug("PinState Updated",{state:a.pin.state}),e&&a.pin.state&&e(a.pin.state)},[a.pin.state,e]),b.useEffect(()=>{We.debug("Widget Updated",{widgetState:a.widget.state}),n&&a.widget.state&&n(a.widget.state)},[n,a.widget.state]),b.createElement(Ch.Provider,{value:a},i)}function hB({volume:t,muted:e}){const n=sR([K.Source.Microphone,K.Source.ScreenShareAudio,K.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(i=>!i.participant.isLocal&&i.publication.kind===K.Kind.Audio);return b.createElement("div",{style:{display:"none"}},n.map(i=>b.createElement(dR,{key:rn(i),trackRef:i,volume:t,muted:e})))}function mB(t){const e=b.useMemo(()=>Qr(t,{className:"lk-toast"}),[t]);return b.createElement("div",{...e},t.children)}function pB(t){const[e,n]=b.useState(void 0),i=Zy(t.room);return b.useEffect(()=>{switch(i){case nt.Reconnecting:n(b.createElement(b.Fragment,null,b.createElement(yk,{className:"lk-spinner"})," Reconnecting"));break;case nt.Connecting:n(b.createElement(b.Fragment,null,b.createElement(yk,{className:"lk-spinner"})," Connecting"));break;case nt.Disconnected:n(b.createElement(b.Fragment,null,"Disconnected"));break;default:n(void 0);break}},[i]),e?b.createElement(mB,{className:"lk-toast-connection-state"},e):b.createElement(b.Fragment,null)}const gB=b.forwardRef(function({entry:t,hideName:e=!1,hideTimestamp:n=!1,messageFormatter:i,...a},o){var l,u,d,h;const m=b.useMemo(()=>i?i(t.message):t.message,[t.message,i]),g=!!t.editTimestamp,y=new Date(t.timestamp),T=typeof navigator<"u"?navigator.language:"en-US",E=((l=t.from)==null?void 0:l.name)??((u=t.from)==null?void 0:u.identity);return b.createElement("li",{ref:o,className:"lk-chat-entry",title:y.toLocaleTimeString(T,{timeStyle:"full"}),"data-lk-message-origin":(d=t.from)!=null&&d.isLocal?"local":"remote",...a},(!n||!e||g)&&b.createElement("span",{className:"lk-meta-data"},!e&&b.createElement("strong",{className:"lk-participant-name"},E),(!n||g)&&b.createElement("span",{className:"lk-timestamp"},g&&"edited ",y.toLocaleTimeString(T,{timeStyle:"short"}))),b.createElement("span",{className:"lk-message-body"},m),b.createElement("span",{className:"lk-message-attachements"},(h=t.attachedFiles)==null?void 0:h.map(C=>C.type.startsWith("image/")&&b.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:C.name,src:URL.createObjectURL(C),alt:C.name}))))});function vB({messageFormatter:t,messageDecoder:e,messageEncoder:n,channelTopic:i,...a}){const o=b.useRef(null),l=b.useRef(null),u=b.useMemo(()=>({messageDecoder:e,messageEncoder:n,channelTopic:i}),[e,n,i]),{chatMessages:d,send:h,isSending:m}=T6(u),g=gu(),y=b.useRef(0);async function T(E){E.preventDefault(),l.current&&l.current.value.trim()!==""&&(await h(l.current.value),l.current.value="",l.current.focus())}return b.useEffect(()=>{var E;o&&((E=o.current)==null||E.scrollTo({top:o.current.scrollHeight}))},[o,d]),b.useEffect(()=>{var E,C,w,_,N;if(!g||d.length===0)return;if((E=g.widget.state)!=null&&E.showChat&&d.length>0&&y.current!==((C=d[d.length-1])==null?void 0:C.timestamp)){y.current=(w=d[d.length-1])==null?void 0:w.timestamp;return}const D=d.filter(R=>!y.current||R.timestamp>y.current).length,{widget:O}=g;D>0&&((_=O.state)==null?void 0:_.unreadMessages)!==D&&((N=O.dispatch)==null||N.call(O,{msg:"unread_msg",count:D}))},[d,g?.widget]),b.createElement("div",{...a,className:"lk-chat"},b.createElement("div",{className:"lk-chat-header"},"Messages",g&&b.createElement(oR,{className:"lk-close-button"},b.createElement(x6,null))),b.createElement("ul",{className:"lk-list lk-chat-messages",ref:o},a.children?d.map((E,C)=>nR(a.children,{entry:E,key:E.id??C,messageFormatter:t})):d.map((E,C,w)=>{const _=C>=1&&w[C-1].from===E.from,N=C>=1&&E.timestamp-w[C-1].timestamp<6e4;return b.createElement(gB,{key:E.id??C,hideName:_,hideTimestamp:_===!1?!1:N,entry:E,messageFormatter:t})})),b.createElement("form",{className:"lk-chat-form",onSubmit:T},b.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:m,ref:l,type:"text",placeholder:"Enter a message...",onInput:E=>E.stopPropagation(),onKeyDown:E=>E.stopPropagation(),onKeyUp:E=>E.stopPropagation()}),b.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:m},"Send")))}function Ek({kind:t,initialSelection:e,onActiveDeviceChange:n,tracks:i,requestPermissions:a=!1,...o}){const[l,u]=b.useState(!1),[d,h]=b.useState([]),[m,g]=b.useState(!0),[y,T]=b.useState(a),E=(N,D)=>{We.debug("handle device change"),u(!1),n?.(N,D)},C=b.useRef(null),w=b.useRef(null);b.useLayoutEffect(()=>{l&&T(!0)},[l]),b.useLayoutEffect(()=>{let N;return C.current&&w.current&&(d||m)&&(N=A3(C.current,w.current,(D,O)=>{w.current&&Object.assign(w.current.style,{left:`${D}px`,top:`${O}px`})})),g(!1),()=>{N?.()}},[C,w,d,m]);const _=b.useCallback(N=>{w.current&&N.target!==C.current&&l&&O3(w.current,N)&&u(!1)},[l,w,C]);return b.useEffect(()=>(document.addEventListener("click",_),()=>{document.removeEventListener("click",_)}),[_]),b.createElement(b.Fragment,null,b.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":l,...o,onClick:()=>u(!l),ref:C},o.children),!o.disabled&&b.createElement("div",{className:"lk-device-menu",ref:w,style:{visibility:l?"visible":"hidden"}},t?b.createElement(Sg,{initialSelection:e,onActiveDeviceChange:N=>E(t,N),onDeviceListChange:h,kind:t,track:i?.[t],requestPermissions:y}):b.createElement(b.Fragment,null,b.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),b.createElement(Sg,{kind:"audioinput",onActiveDeviceChange:N=>E("audioinput",N),onDeviceListChange:h,track:i?.audioinput,requestPermissions:y}),b.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),b.createElement(Sg,{kind:"videoinput",onActiveDeviceChange:N=>E("videoinput",N),onDeviceListChange:h,track:i?.videoinput,requestPermissions:y}))))}function yB(){b.useEffect(()=>{K4()},[])}function bB({props:t}){const{dispatch:e,state:n}=Xx().widget,i="lk-button lk-settings-toggle";return{mergedProps:b.useMemo(()=>vr(t,{className:i,onClick:()=>{e&&e({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[t,i,e,n])}}const SB=b.forwardRef(function(t,e){const{mergedProps:n}=bB({props:t});return b.createElement("button",{ref:e,...n},t.children)}),TB=t=>{switch(t){case K.Source.Camera:return 1;case K.Source.Microphone:return 2;case K.Source.ScreenShare:return 3;default:return 0}};function EB({variation:t,controls:e,saveUserChoices:n=!0,onDeviceError:i,...a}){var o;const[l,u]=b.useState(!1),d=gu();b.useEffect(()=>{var P,z;((P=d?.widget.state)==null?void 0:P.showChat)!==void 0&&u((z=d?.widget.state)==null?void 0:z.showChat)},[(o=d?.widget.state)==null?void 0:o.showChat]);const h=t6(`(max-width: ${l?1e3:760}px)`)?"minimal":"verbose";t??(t=h);const m={leave:!0,...e},g=l6();if(!g)m.camera=!1,m.chat=!1,m.microphone=!1,m.screenShare=!1;else{const P=z=>g.canPublish&&(g.canPublishSources.length===0||g.canPublishSources.includes(TB(z)));m.camera??(m.camera=P(K.Source.Camera)),m.microphone??(m.microphone=P(K.Source.Microphone)),m.screenShare??(m.screenShare=P(K.Source.ScreenShare)),m.chat??(m.chat=g.canPublishData&&e?.chat)}const y=b.useMemo(()=>t==="minimal"||t==="verbose",[t]),T=b.useMemo(()=>t==="textOnly"||t==="verbose",[t]),E=I3(),[C,w]=b.useState(!1),_=b.useCallback(P=>{w(P)},[w]),N=Qr({className:"lk-control-bar"},a),{saveAudioInputEnabled:D,saveVideoInputEnabled:O,saveAudioInputDeviceId:R,saveVideoInputDeviceId:x}=E6({preventSave:!n}),B=b.useCallback((P,z)=>z?D(P):null,[D]),M=b.useCallback((P,z)=>z?O(P):null,[O]);return b.createElement("div",{...N},m.microphone&&b.createElement("div",{className:"lk-button-group"},b.createElement(Tg,{source:K.Source.Microphone,showIcon:y,onChange:B,onDeviceError:P=>i?.({source:K.Source.Microphone,error:P})},T&&"Microphone"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(Ek,{kind:"audioinput",onActiveDeviceChange:(P,z)=>R(z??"default")}))),m.camera&&b.createElement("div",{className:"lk-button-group"},b.createElement(Tg,{source:K.Source.Camera,showIcon:y,onChange:M,onDeviceError:P=>i?.({source:K.Source.Camera,error:P})},T&&"Camera"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(Ek,{kind:"videoinput",onActiveDeviceChange:(P,z)=>x(z??"default")}))),m.screenShare&&E&&b.createElement(Tg,{source:K.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:y,onChange:_,onDeviceError:P=>i?.({source:K.Source.ScreenShare,error:P})},T&&(C?"Stop screen share":"Share screen")),m.chat&&b.createElement(oR,null,y&&b.createElement(R6,null),T&&"Chat"),m.settings&&b.createElement(SB,null,y&&b.createElement(O6,null),T&&"Settings"),m.leave&&b.createElement(k6,null,y&&b.createElement(N6,null),T&&"Leave"),b.createElement(V6,null))}function mR({chatMessageFormatter:t,chatMessageDecoder:e,chatMessageEncoder:n,SettingsComponent:i,...a}){var o,l;const[u,d]=b.useState({showChat:!1,unreadMessages:0,showSettings:!1}),h=b.useRef(null),m=sR([{source:K.Source.Camera,withPlaceholder:!0},{source:K.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[te.ActiveSpeakersChanged],onlySubscribed:!1}),g=w=>{We.debug("updating widget state",w),d(w)},y=V4(),T=m.filter(Xt).filter(w=>w.publication.source===K.Source.ScreenShare),E=(o=f6(y))==null?void 0:o[0],C=m.filter(w=>!w3(w,E));return b.useEffect(()=>{var w,_,N,D,O,R;if(T.some(x=>x.publication.isSubscribed)&&h.current===null?(We.debug("Auto set screen share focus:",{newScreenShareTrack:T[0]}),(_=(w=y.pin).dispatch)==null||_.call(w,{msg:"set_pin",trackReference:T[0]}),h.current=T[0]):h.current&&!T.some(x=>{var B,M;return x.publication.trackSid===((M=(B=h.current)==null?void 0:B.publication)==null?void 0:M.trackSid)})&&(We.debug("Auto clearing screen share focus."),(D=(N=y.pin).dispatch)==null||D.call(N,{msg:"clear_pin"}),h.current=null),E&&!Xt(E)){const x=m.find(B=>B.participant.identity===E.participant.identity&&B.source===E.source);x!==E&&Xt(x)&&((R=(O=y.pin).dispatch)==null||R.call(O,{msg:"set_pin",trackReference:x}))}},[T.map(w=>`${w.publication.trackSid}_${w.publication.isSubscribed}`).join(),(l=E?.publication)==null?void 0:l.trackSid,m]),yB(),b.createElement("div",{className:"lk-video-conference",...a},R3()&&b.createElement(fB,{value:y,onWidgetChange:g},b.createElement("div",{className:"lk-video-conference-inner"},E?b.createElement("div",{className:"lk-focus-layout-wrapper"},b.createElement(nB,null,b.createElement(dB,{tracks:C},b.createElement(Kv,null)),E&&b.createElement(iB,{trackRef:E}))):b.createElement("div",{className:"lk-grid-layout-wrapper"},b.createElement(sB,{tracks:m},b.createElement(Kv,null))),b.createElement(EB,{controls:{chat:!0,settings:!!i}})),b.createElement(vB,{style:{display:u.showChat?"grid":"none"},messageFormatter:t,messageEncoder:n,messageDecoder:e}),i&&b.createElement("div",{className:"lk-settings-menu-modal",style:{display:u.showSettings?"block":"none"}},b.createElement(i,null))),b.createElement(hB,null),b.createElement(pB,null))}const Ck=Zn;function CB(){const[t,e]=b.useState({});if(b.useEffect(()=>{(async()=>{try{const o=new URLSearchParams(location.search);let l=o.get("room")||void 0;if(!l){const h=o.get("ticket"),m=o.get("aid");if(!h&&!m)throw new Error("room  ticket ");const g=h?`/wait/resolve?ticket=${encodeURIComponent(h)}`:`/wait/resolve?aid=${encodeURIComponent(m)}`;if(l=(await Ck.get(g)).room,!l)throw new Error("ticket/aid ")}const u="guest-"+crypto.randomUUID().slice(0,8),d=await Ck.post("dev/token",{room:l,identity:u,name:u});e({room:l,token:d.token})}catch(o){e({err:o.message||String(o)})}})()},[]),t.err)return S.jsxs("div",{children:[": ",t.err]});if(!t.token)return S.jsx("div",{children:""});const n=void 0,i=location.hostname==="localhost"?"ws://localhost:7880":void 0,a=t.url??n??i??"ws://localhost:7880";return S.jsx("div",{style:{height:"100vh"},children:S.jsx(iR,{serverUrl:a,token:t.token,connect:!0,audio:!0,video:!0,style:{height:"100%"},children:S.jsx(mR,{})})})}const un=[];for(let t=0;t<256;++t)un.push((t+256).toString(16).slice(1));function kB(t,e=0){return(un[t[e+0]]+un[t[e+1]]+un[t[e+2]]+un[t[e+3]]+"-"+un[t[e+4]]+un[t[e+5]]+"-"+un[t[e+6]]+un[t[e+7]]+"-"+un[t[e+8]]+un[t[e+9]]+"-"+un[t[e+10]]+un[t[e+11]]+un[t[e+12]]+un[t[e+13]]+un[t[e+14]]+un[t[e+15]]).toLowerCase()}let Cg;const wB=new Uint8Array(16);function _B(){if(!Cg){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Cg=crypto.getRandomValues.bind(crypto)}return Cg(wB)}const xB=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kk={randomUUID:xB};function RB(t,e,n){t=t||{};const i=t.random??t.rng?.()??_B();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,kB(i)}function AB(t,e,n){return kk.randomUUID&&!t?kk.randomUUID():RB(t)}const OB="/api",NB=(t,e)=>t.replace(/\/$/,"")+"/"+e.replace(/^\//,"");function DB(t,e){const n=JSON.stringify(e),i=new Blob([n],{type:"application/json"});return navigator.sendBeacon&&document.visibilityState==="hidden"?(navigator.sendBeacon(t,i),Promise.resolve()):fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:n,keepalive:!0,credentials:"omit"}).then(()=>{}).catch(()=>{})}function Ss(t,e,n={}){if(!t)return;const i={room:t,type:e,ts:new Date().toISOString(),event_id:AB(),...n};return console.debug("[emit]",e,t,i),DB(NB(OB,"/calls/event"),i)}function PB(){const[t,e]=b.useState({}),n=t.room??"";if(b.useEffect(()=>{const d=new URLSearchParams(location.search).get("room"),h=d||`room_${crypto.randomUUID().slice(0,8)}`;if(!d){const m=new URL(location.href);m.searchParams.set("room",h),history.replaceState({},"",m.toString())}e(m=>({...m,room:h}))},[]),b.useEffect(()=>{t.room&&(async()=>{try{const u="host-"+crypto.randomUUID().slice(0,8),d=await Zn.post("/dev/token",{room:t.room,identity:u,name:"host"});e(h=>({...h,token:d.token}))}catch(u){e(d=>({...d,err:u.message??String(u)}))}})()},[t.room]),b.useEffect(()=>{n&&Ss(n,"start")},[n]),b.useEffect(()=>{if(!n)return;const u=setInterval(()=>Ss(n,"heartbeat"),3e4);return()=>clearInterval(u)},[n]),b.useEffect(()=>{if(!n)return;const u=()=>Ss(n,"end");return window.addEventListener("pagehide",u),window.addEventListener("beforeunload",u),()=>{window.removeEventListener("pagehide",u),window.removeEventListener("beforeunload",u)}},[n]),t.err)return S.jsxs("div",{children:[": ",t.err]});if(!t.token||!t.room)return S.jsx("div",{children:""});const i=void 0,a=location.hostname==="localhost"?"ws://localhost:7880":void 0,o=t.url??i??a??"ws://localhost:7880",l=b.useMemo(()=>{const u=new URL(location.origin+"/wait");return u.searchParams.set("room",t.room),u.toString()},[t.room]);return S.jsxs("div",{style:{height:"100vh"},children:[S.jsxs("div",{style:{position:"absolute",zIndex:10,top:8,left:8,background:"white",padding:8,borderRadius:8},children:[S.jsx("div",{style:{fontSize:12,marginBottom:4},children:"URL"}),S.jsxs("div",{style:{display:"flex",gap:8},children:[S.jsx("input",{value:l,readOnly:!0,style:{width:320}}),S.jsx("button",{onClick:()=>navigator.clipboard.writeText(l),children:""})]})]}),S.jsx(iR,{token:t.token,serverUrl:o,connect:!0,audio:!0,video:!0,onConnected:u=>{u?.name&&(Ss(u.name,"start"),u.on(te.LocalTrackPublished,d=>{const h=d.track;if(h?.mediaStreamTrack){const m=new AudioContext,g=m.createMediaStreamSource(new MediaStream([h.mediaStreamTrack])),y=m.createAnalyser();g.connect(y);const T=new Uint8Array(y.fftSize);let E=0;const C=()=>{y.getByteTimeDomainData(T),E=T.reduce((_,N)=>_+Math.abs(N-128),0)/T.length<1.5?E+1:0,E===60&&Ss(u.name,"silence",{message:"silence detected on local audio track"}),u.state==="connected"&&requestAnimationFrame(C)};C()}}))},onDisconnected:(u,d)=>{u?.name&&Ss(u.name,"end")},onError:u=>{n&&Ss(n,"error",{message:String(u)})},style:{height:"100%"},children:S.jsx(mR,{})})]})}async function MB(t,e){const n=await fetch("/api/dev/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room:t,identity:e})}),i=await n.text();if(!n.ok)throw new Error(i);let a;try{a=JSON.parse(i)}catch{throw new Error(`Token API returned non-JSON: ${i.slice(0,120)}`)}return{token:a.token,url:a.url??a.livekit_url}}function LB(){const[t,e]=b.useState("ready"),n=b.useRef(null),i=b.useRef(null);return b.useEffect(()=>{let a;return(async()=>{try{e("requesting token");const o="demo",l="user_"+crypto.randomUUID(),{token:u,url:d}=await MB(o,l);e("connecting room");const h=await new ji;await h.connect(d,u,{videoCaptureDefaults:{facingMode:"user"},publishDefaults:{simulcast:!1}}),h.on(te.TrackSubscribed,(y,T)=>{T?.kind===K.Kind.Video&&i.current&&T.attach(i.current)}),h.on(te.TrackUnsubscribed,(y,T)=>{T?.kind===K.Kind.Video&&i.current&&T.detach(i.current)});const m=h.participants??h.remoteParticipants??new Map;for(const[,y]of m){const T=y.tracks??new Map;for(const[,E]of T){const C=E.track;C?.kind===K.Kind.Video&&i.current&&C.attach(i.current)}}const g=await vl({audio:{echoCancellation:!0,noiseSuppression:!0},video:{width:1280,height:720}});for(const y of g)await h.localParticipant.publishTrack(y),y.kind===K.Kind.Video&&n.current&&y.attach(n.current);a=()=>{g.forEach(y=>y.stop()),h.disconnect()},e("connected")}catch(o){e("error: "+String(o?.message??o))}})(),()=>a?.()},[]),S.jsxs("div",{style:{padding:12},children:[S.jsxs("p",{children:["Status: ",t]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[S.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",background:"#000"}}),S.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,style:{width:"100%",background:"#000"}})]})]})}const pR=b.createContext({user:null,loading:!0,login:async()=>{},logout:()=>{},refresh:async()=>{}});function IB({children:t}){const[e,n]=b.useState(null),[i,a]=b.useState(!0),o=async()=>{try{const d=await HE.me();n(d.user??null)}catch{n(null)}};b.useEffect(()=>{(async()=>(await o(),a(!1)))()},[]);const l=async(d,h)=>{const m=await HE.login(d,h);Df(m.token),n(m.user)},u=()=>{Df(null),n(null)};return S.jsx(pR.Provider,{value:{user:e,loading:i,login:l,logout:u,refresh:o},children:t})}const gR=()=>b.useContext(pR);function jB(){const t=qs(),{login:e,refresh:n}=gR(),[i,a]=b.useState("admin@example.com"),[o,l]=b.useState("password"),[u,d]=b.useState(!1),[h,m]=b.useState(null);async function g(y){y.preventDefault(),m(null),d(!0);try{await e(i,o),await n(),t("/admin/site",{replace:!0})}catch(T){const E=T?.response?.status;m(E===401?"":T?.response?.data?.message||"")}finally{d(!1)}}return S.jsx("div",{className:"min-h-screen grid place-items-center bg-slate-50 px-4",children:S.jsxs("form",{onSubmit:g,className:"w-full max-w-sm rounded-2xl border bg-white p-6 shadow-sm",children:[S.jsx("h1",{className:"text-xl font-semibold",children:""}),S.jsx("input",{className:"mt-4 w-full rounded-xl border px-4 py-3",placeholder:"",value:i,onChange:y=>a(y.target.value),autoComplete:"email"}),S.jsx("input",{className:"mt-3 w-full rounded-xl border px-4 py-3",type:"password",placeholder:"",value:o,onChange:y=>l(y.target.value),autoComplete:"current-password"}),h&&S.jsx("p",{className:"mt-3 text-sm text-red-600",children:h}),S.jsx("button",{className:"mt-5 w-full rounded-xl bg-indigo-600 text-white py-3 hover:bg-indigo-500 disabled:opacity-60",disabled:u,children:u?"":""})]})})}function UB(){const[t,e]=b.useState(!0);return S.jsxs("div",{className:`sb-nav-fixed sb ${t?"":"sb-sidenav-toggled"}`,children:[S.jsxs("nav",{className:"sb-topnav navbar navbar-expand navbar-dark bg-dark",children:[S.jsx(Yn,{className:"navbar-brand ps-3",to:"/admin",children:"Start Bootstrap"}),S.jsx("button",{type:"button",className:"btn btn-link btn-sm me-4","aria-label":"Toggle sidebar",onClick:()=>e(n=>!n),children:S.jsx("i",{className:"fas fa-bars"})}),S.jsx("form",{className:"d-none d-md-inline-block ms-auto me-3 my-2 my-md-0",children:S.jsxs("div",{className:"input-group",children:[S.jsx("input",{className:"form-control",placeholder:"Search for..."}),S.jsx("button",{className:"btn btn-primary",type:"button",children:S.jsx("i",{className:"fas fa-search"})})]})}),S.jsx("ul",{className:"navbar-nav ms-auto me-3",children:S.jsxs("li",{className:"nav-item dropdown",children:[S.jsx("button",{className:"nav-link dropdown-toggle btn btn-link p-0 text-decoration-none",id:"userMenu","data-bs-toggle":"dropdown","aria-expanded":"false",type:"button",children:S.jsx("i",{className:"fas fa-user fa-fw"})}),S.jsxs("ul",{className:"dropdown-menu dropdown-menu-end","aria-labelledby":"userMenu",children:[S.jsx("li",{children:S.jsx("button",{className:"dropdown-item",type:"button",children:"Settings"})}),S.jsx("li",{children:S.jsx("button",{className:"dropdown-item",type:"button",children:"Activity Log"})}),S.jsx("li",{children:S.jsx("hr",{className:"dropdown-divider"})}),S.jsx("li",{children:S.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{localStorage.removeItem("admin_token"),location.href="/admin/login"},children:"Logout"})})]})]})})]}),S.jsxs("div",{id:"layoutSidenav",children:[S.jsx("div",{id:"layoutSidenav_nav",children:S.jsxs("nav",{className:"sb-sidenav accordion sb-sidenav-dark",children:[S.jsx("div",{className:"sb-sidenav-menu",children:S.jsxs("div",{className:"nav",children:[S.jsx("div",{className:"sb-sidenav-menu-heading",children:"Core"}),S.jsxs(zc,{className:"nav-link",to:"dashboard",children:[S.jsx("div",{className:"sb-nav-link-icon",children:S.jsx("i",{className:"fas fa-tachometer-alt"})}),"Dashboard"]}),S.jsx("div",{className:"sb-sidenav-menu-heading",children:"Addons"}),S.jsxs(zc,{className:"nav-link",to:"charts",children:[S.jsx("div",{className:"sb-nav-link-icon",children:S.jsx("i",{className:"fas fa-chart-area"})}),"Charts"]}),S.jsxs(zc,{className:"nav-link",to:"tables",children:[S.jsx("div",{className:"sb-nav-link-icon",children:S.jsx("i",{className:"fas fa-table"})}),"Tables"]}),S.jsxs(zc,{className:"nav-link",to:"site",children:[S.jsx("div",{className:"sb-nav-link-icon",children:S.jsx("i",{className:"fas fa-home"})}),"Site Builder"]})]})}),S.jsxs("div",{className:"sb-sidenav-footer",children:[S.jsx("div",{className:"small",children:"Logged in as:"}),"Admin"]})]})}),S.jsxs("div",{id:"layoutSidenav_content",children:[S.jsx("main",{className:"p-4",children:S.jsx(dy,{})}),S.jsx("footer",{className:"py-4 bg-light mt-auto",children:S.jsxs("div",{className:"container-fluid px-4 d-flex align-items-center justify-content-between small",children:[S.jsx("div",{className:"text-muted",children:"Copyright  Your Website 2025"}),S.jsxs("div",{children:[S.jsx("a",{href:"#",children:"Privacy Policy"}),"  ",S.jsx("a",{href:"#",children:"Terms & Conditions"})]})]})})]})]})]})}const BB="admin.token";function zB(){const[t,e]=b.useState([]),[n,i]=b.useState(null),[a,o]=b.useState(null),[l,u]=b.useState(!1),d=b.useRef(null);b.useEffect(()=>{fetch("/api/appointments/nearby?lawyer_id=1").then(_=>_.ok?_.json():Promise.reject(_)).then(e).catch(_=>console.error("fetch appointments failed",_))},[]);function h(_){const N=new Date(_).getTime(),D=Date.now(),O=N-300*1e3,R=N+3600*1e3;return D>=O&&D<=R}b.useMemo(()=>{const _=new Date,N=new Date(_),D=(_.getDay()+6)%7;N.setDate(_.getDate()-D);const O=[...Array(5)].map((x,B)=>new Date(N.getFullYear(),N.getMonth(),N.getDate()+B)),R=[...Array(17)].map((x,B)=>B);return{days:O,slots:R}},[]);const m=qs();b.useEffect(()=>{localStorage.getItem(BB)||m("/admin",{replace:!0})},[m]);const g=y_(),[y,T]=b.useState({...g});async function E(_){u(!0),d.current?.abort();const N=new AbortController;d.current=N,u(!0),o(null),i(null);const D=t.find(O=>O.id===_);D&&i({id:D.id,client_name:D.client_name,starts_at:D.starts_at});try{const O=await fetch(`/api/appointments/${_}`,{signal:N.signal});if(!O.ok)throw new Error(`HTTP ${O.status}`);const R=await O.json();i(R)}catch(O){if(O?.name==="AbortError")return;console.error("openDetail failed:",O),o("")}finally{u(!1)}}function C(_){const N=_.hostJoinPath??`/host?aid=${_.id}`,D=_.clientJoinPath??`/wait?aid=${_.id}`;return{host:N,guest:D}}function w(_){if(!_.client_email)return;const{guest:N}=C(_),D=encodeURIComponent(""),O=encodeURIComponent(`
${location.origin}${N}

: ${new Date(_.starts_at).toLocaleString()}`);location.href=`mailto:${_.client_email}?subject=${D}&body=${O}`}return S.jsx("div",{children:S.jsxs("div",{className:"mt-8 grid md:grid-cols-2 gap-8",children:[S.jsx("div",{className:"min-w-0",children:S.jsxs("div",{className:"rounded-2xl border bg-white p-6 shadow-sm min-w-0 overflow-x-hidden",children:[S.jsx("h2",{className:"font-semibold mb-3",children:""}),S.jsxs("ul",{className:"list-none p-0 mb-4",children:[t.map(_=>S.jsxs("li",{className:"flex items-center gap-3 py-1",children:[S.jsx("div",{className:"time w-16 tabular-nums",children:new Date(_.starts_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),S.jsx("div",{className:"name flex-1",children:_.client_name}),h(_.starts_at)?S.jsx("a",{href:`/host?aid=${_.id}`,className:"btn btn-sm btn-primary no-underline",children:""}):S.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>E(_.id),children:""}),new Date(_.starts_at).getTime()<Date.now()&&!h(_.starts_at)&&S.jsx("span",{className:"text-gray-400 text-sm",children:""})]},_.id)),t.length===0&&S.jsx("li",{className:"text-sm text-gray-500",children:""})]})]})}),S.jsx("div",{className:"rounded-2xl border bg-white p-6 shadow-sm min-w-0 overflow-x-hidden",children:n?S.jsxs(S.Fragment,{children:[S.jsx("h2",{className:"fw-semibold mb-3",children:""}),l?S.jsx("div",{className:"text-muted",children:""}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"mb-3",children:[S.jsx("div",{className:"text-muted text-sm",children:""}),S.jsx("div",{className:"fw-semibold",children:new Date(n.starts_at).toLocaleString()})]}),S.jsxs("div",{className:"mb-3",children:[S.jsx("div",{className:"text-muted text-sm",children:""}),S.jsx("div",{children:n.client_name}),n.client_email&&S.jsx("div",{className:"text-muted small",children:n.client_email})]}),S.jsxs("div",{className:"mb-3",children:[S.jsx("div",{className:"text-muted text-sm",children:""}),(()=>{const{host:_,guest:N}=C(n);return S.jsxs("ul",{className:"list-unstyled",children:[S.jsxs("li",{children:[": ",S.jsx("a",{href:N,target:"_blank",rel:"noreferrer",children:location.origin+N})]}),S.jsxs("li",{children:[": ",S.jsx("a",{href:_,target:"_blank",rel:"noreferrer",children:location.origin+_})]})]})})()]}),S.jsxs("div",{className:"d-flex gap-2",children:[S.jsx("button",{className:"btn btn-primary",onClick:()=>w(n),disabled:!n.client_email,title:n.client_email?"":"",children:""}),S.jsx("a",{className:"btn btn-outline-secondary",href:C(n).host,target:"_blank",rel:"noreferrer",children:""}),S.jsx("button",{className:"btn btn-light",onClick:()=>i(null),children:""})]})]})]}):S.jsx(S.Fragment,{children:S.jsx("h2",{className:"fw-semibold mb-3",children:" / "})})})]})})}function FB(){return S.jsxs("div",{className:"container-fluid px-4",children:[S.jsx("h1",{className:"mt-4",children:"Charts"}),S.jsx("p",{children:" Chart.js "})]})}function VB(){return S.jsxs("div",{className:"container-fluid px-4",children:[S.jsx("h1",{className:"mt-4",children:"Tables"}),S.jsx("p",{children:" Simple-DataTables "})]})}var kg={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var wk;function HB(){return wk||(wk=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(o=a(o,i(u)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var u in o)e.call(o,u)&&o[u]&&(l=a(l,u));return l}function a(o,l){return l?o?o+" "+l:o+l:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(kg)),kg.exports}var qB=HB();const $B=Sw(qB),GB=["xxl","xl","lg","md","sm","xs"],KB="xs",vR=b.createContext({prefixes:{},breakpoints:GB,minBreakpoint:KB}),{Consumer:JH,Provider:ZH}=vR;function YB(t,e){const{prefixes:n}=b.useContext(vR);return t||n[e]||e}const WB=["as","disabled"];function XB(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function QB(t){return!t||t.trim()==="#"}function yR({tagName:t,disabled:e,href:n,target:i,rel:a,role:o,onClick:l,tabIndex:u=0,type:d}){t||(n!=null||i!=null||a!=null?t="a":t="button");const h={tagName:t};if(t==="button")return[{type:d||"button",disabled:e},h];const m=y=>{if((e||t==="a"&&QB(n))&&y.preventDefault(),e){y.stopPropagation();return}l?.(y)},g=y=>{y.key===" "&&(y.preventDefault(),m(y))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:u,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?a:void 0,onClick:m,onKeyDown:g},h]}const JB=b.forwardRef((t,e)=>{let{as:n,disabled:i}=t,a=XB(t,WB);const[o,{tagName:l}]=yR(Object.assign({tagName:n,disabled:i},a));return S.jsx(l,Object.assign({},a,o,{ref:e}))});JB.displayName="Button";const Wt=b.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:a=!1,disabled:o=!1,className:l,...u},d)=>{const h=YB(e,"btn"),[m,{tagName:g}]=yR({tagName:t,disabled:o,...u}),y=g;return S.jsx(y,{...m,...u,ref:d,disabled:o,className:$B(l,h,a&&"active",n&&`${h}-${n}`,i&&`${h}-${i}`,u.href&&o&&"disabled")})});Wt.displayName="Button";var yn="top",ei="bottom",ti="right",bn="left",xh="auto",Sl=[yn,ei,ti,bn],Fs="start",ol="end",bR="clippingParents",eb="viewport",Fo="popper",SR="reference",Yv=Sl.reduce(function(t,e){return t.concat([e+"-"+Fs,e+"-"+ol])},[]),tb=[].concat(Sl,[xh]).reduce(function(t,e){return t.concat([e,e+"-"+Fs,e+"-"+ol])},[]),TR="beforeRead",ER="read",CR="afterRead",kR="beforeMain",wR="main",_R="afterMain",xR="beforeWrite",RR="write",AR="afterWrite",OR=[TR,ER,CR,kR,wR,_R,xR,RR,AR];function ur(t){return t.split("-")[0]}function ni(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Vs(t){var e=ni(t).Element;return t instanceof e||t instanceof Element}function gi(t){var e=ni(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function nb(t){if(typeof ShadowRoot>"u")return!1;var e=ni(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Ds=Math.max,Xf=Math.min,ll=Math.round;function Wv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function NR(){return!/^((?!chrome|android).)*safari/i.test(Wv())}function cl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),a=1,o=1;e&&gi(t)&&(a=t.offsetWidth>0&&ll(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&ll(i.height)/t.offsetHeight||1);var l=Vs(t)?ni(t):window,u=l.visualViewport,d=!NR()&&n,h=(i.left+(d&&u?u.offsetLeft:0))/a,m=(i.top+(d&&u?u.offsetTop:0))/o,g=i.width/a,y=i.height/o;return{width:g,height:y,top:m,right:h+g,bottom:m+y,left:h,x:h,y:m}}function ib(t){var e=cl(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function DR(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&nb(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function mr(t){return t?(t.nodeName||"").toLowerCase():null}function Kr(t){return ni(t).getComputedStyle(t)}function ZB(t){return["table","td","th"].indexOf(mr(t))>=0}function Wa(t){return((Vs(t)?t.ownerDocument:t.document)||window.document).documentElement}function Rh(t){return mr(t)==="html"?t:t.assignedSlot||t.parentNode||(nb(t)?t.host:null)||Wa(t)}function _k(t){return!gi(t)||Kr(t).position==="fixed"?null:t.offsetParent}function e7(t){var e=/firefox/i.test(Wv()),n=/Trident/i.test(Wv());if(n&&gi(t)){var i=Kr(t);if(i.position==="fixed")return null}var a=Rh(t);for(nb(a)&&(a=a.host);gi(a)&&["html","body"].indexOf(mr(a))<0;){var o=Kr(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function bu(t){for(var e=ni(t),n=_k(t);n&&ZB(n)&&Kr(n).position==="static";)n=_k(n);return n&&(mr(n)==="html"||mr(n)==="body"&&Kr(n).position==="static")?e:n||e7(t)||e}function rb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Kc(t,e,n){return Ds(t,Xf(e,n))}function t7(t,e,n){var i=Kc(t,e,n);return i>n?n:i}function PR(){return{top:0,right:0,bottom:0,left:0}}function MR(t){return Object.assign({},PR(),t)}function LR(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var n7=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,MR(typeof e!="number"?e:LR(e,Sl))};function i7(t){var e,n=t.state,i=t.name,a=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,u=ur(n.placement),d=rb(u),h=[bn,ti].indexOf(u)>=0,m=h?"height":"width";if(!(!o||!l)){var g=n7(a.padding,n),y=ib(o),T=d==="y"?yn:bn,E=d==="y"?ei:ti,C=n.rects.reference[m]+n.rects.reference[d]-l[d]-n.rects.popper[m],w=l[d]-n.rects.reference[d],_=bu(o),N=_?d==="y"?_.clientHeight||0:_.clientWidth||0:0,D=C/2-w/2,O=g[T],R=N-y[m]-g[E],x=N/2-y[m]/2+D,B=Kc(O,x,R),M=d;n.modifiersData[i]=(e={},e[M]=B,e.centerOffset=B-x,e)}}function r7(t){var e=t.state,n=t.options,i=n.element,a=i===void 0?"[data-popper-arrow]":i;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||DR(e.elements.popper,a)&&(e.elements.arrow=a))}const IR={name:"arrow",enabled:!0,phase:"main",fn:i7,effect:r7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ul(t){return t.split("-")[1]}var a7={top:"auto",right:"auto",bottom:"auto",left:"auto"};function s7(t,e){var n=t.x,i=t.y,a=e.devicePixelRatio||1;return{x:ll(n*a)/a||0,y:ll(i*a)/a||0}}function xk(t){var e,n=t.popper,i=t.popperRect,a=t.placement,o=t.variation,l=t.offsets,u=t.position,d=t.gpuAcceleration,h=t.adaptive,m=t.roundOffsets,g=t.isFixed,y=l.x,T=y===void 0?0:y,E=l.y,C=E===void 0?0:E,w=typeof m=="function"?m({x:T,y:C}):{x:T,y:C};T=w.x,C=w.y;var _=l.hasOwnProperty("x"),N=l.hasOwnProperty("y"),D=bn,O=yn,R=window;if(h){var x=bu(n),B="clientHeight",M="clientWidth";if(x===ni(n)&&(x=Wa(n),Kr(x).position!=="static"&&u==="absolute"&&(B="scrollHeight",M="scrollWidth")),x=x,a===yn||(a===bn||a===ti)&&o===ol){O=ei;var P=g&&x===R&&R.visualViewport?R.visualViewport.height:x[B];C-=P-i.height,C*=d?1:-1}if(a===bn||(a===yn||a===ei)&&o===ol){D=ti;var z=g&&x===R&&R.visualViewport?R.visualViewport.width:x[M];T-=z-i.width,T*=d?1:-1}}var q=Object.assign({position:u},h&&a7),re=m===!0?s7({x:T,y:C},ni(n)):{x:T,y:C};if(T=re.x,C=re.y,d){var fe;return Object.assign({},q,(fe={},fe[O]=N?"0":"",fe[D]=_?"0":"",fe.transform=(R.devicePixelRatio||1)<=1?"translate("+T+"px, "+C+"px)":"translate3d("+T+"px, "+C+"px, 0)",fe))}return Object.assign({},q,(e={},e[O]=N?C+"px":"",e[D]=_?T+"px":"",e.transform="",e))}function o7(t){var e=t.state,n=t.options,i=n.gpuAcceleration,a=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,u=n.roundOffsets,d=u===void 0?!0:u,h={placement:ur(e.placement),variation:ul(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,xk(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,xk(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ab={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:o7,data:{}};var Yd={passive:!0};function l7(t){var e=t.state,n=t.instance,i=t.options,a=i.scroll,o=a===void 0?!0:a,l=i.resize,u=l===void 0?!0:l,d=ni(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(m){m.addEventListener("scroll",n.update,Yd)}),u&&d.addEventListener("resize",n.update,Yd),function(){o&&h.forEach(function(m){m.removeEventListener("scroll",n.update,Yd)}),u&&d.removeEventListener("resize",n.update,Yd)}}const sb={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:l7,data:{}};var c7={left:"right",right:"left",bottom:"top",top:"bottom"};function wf(t){return t.replace(/left|right|bottom|top/g,function(e){return c7[e]})}var u7={start:"end",end:"start"};function Rk(t){return t.replace(/start|end/g,function(e){return u7[e]})}function ob(t){var e=ni(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function lb(t){return cl(Wa(t)).left+ob(t).scrollLeft}function d7(t,e){var n=ni(t),i=Wa(t),a=n.visualViewport,o=i.clientWidth,l=i.clientHeight,u=0,d=0;if(a){o=a.width,l=a.height;var h=NR();(h||!h&&e==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}return{width:o,height:l,x:u+lb(t),y:d}}function f7(t){var e,n=Wa(t),i=ob(t),a=(e=t.ownerDocument)==null?void 0:e.body,o=Ds(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=Ds(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),u=-i.scrollLeft+lb(t),d=-i.scrollTop;return Kr(a||n).direction==="rtl"&&(u+=Ds(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:l,x:u,y:d}}function cb(t){var e=Kr(t),n=e.overflow,i=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+i)}function jR(t){return["html","body","#document"].indexOf(mr(t))>=0?t.ownerDocument.body:gi(t)&&cb(t)?t:jR(Rh(t))}function Yc(t,e){var n;e===void 0&&(e=[]);var i=jR(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),o=ni(i),l=a?[o].concat(o.visualViewport||[],cb(i)?i:[]):i,u=e.concat(l);return a?u:u.concat(Yc(Rh(l)))}function Xv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function h7(t,e){var n=cl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ak(t,e,n){return e===eb?Xv(d7(t,n)):Vs(e)?h7(e,n):Xv(f7(Wa(t)))}function m7(t){var e=Yc(Rh(t)),n=["absolute","fixed"].indexOf(Kr(t).position)>=0,i=n&&gi(t)?bu(t):t;return Vs(i)?e.filter(function(a){return Vs(a)&&DR(a,i)&&mr(a)!=="body"}):[]}function p7(t,e,n,i){var a=e==="clippingParents"?m7(t):[].concat(e),o=[].concat(a,[n]),l=o[0],u=o.reduce(function(d,h){var m=Ak(t,h,i);return d.top=Ds(m.top,d.top),d.right=Xf(m.right,d.right),d.bottom=Xf(m.bottom,d.bottom),d.left=Ds(m.left,d.left),d},Ak(t,l,i));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function UR(t){var e=t.reference,n=t.element,i=t.placement,a=i?ur(i):null,o=i?ul(i):null,l=e.x+e.width/2-n.width/2,u=e.y+e.height/2-n.height/2,d;switch(a){case yn:d={x:l,y:e.y-n.height};break;case ei:d={x:l,y:e.y+e.height};break;case ti:d={x:e.x+e.width,y:u};break;case bn:d={x:e.x-n.width,y:u};break;default:d={x:e.x,y:e.y}}var h=a?rb(a):null;if(h!=null){var m=h==="y"?"height":"width";switch(o){case Fs:d[h]=d[h]-(e[m]/2-n[m]/2);break;case ol:d[h]=d[h]+(e[m]/2-n[m]/2);break}}return d}function dl(t,e){e===void 0&&(e={});var n=e,i=n.placement,a=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,u=n.boundary,d=u===void 0?bR:u,h=n.rootBoundary,m=h===void 0?eb:h,g=n.elementContext,y=g===void 0?Fo:g,T=n.altBoundary,E=T===void 0?!1:T,C=n.padding,w=C===void 0?0:C,_=MR(typeof w!="number"?w:LR(w,Sl)),N=y===Fo?SR:Fo,D=t.rects.popper,O=t.elements[E?N:y],R=p7(Vs(O)?O:O.contextElement||Wa(t.elements.popper),d,m,l),x=cl(t.elements.reference),B=UR({reference:x,element:D,placement:a}),M=Xv(Object.assign({},D,B)),P=y===Fo?M:x,z={top:R.top-P.top+_.top,bottom:P.bottom-R.bottom+_.bottom,left:R.left-P.left+_.left,right:P.right-R.right+_.right},q=t.modifiersData.offset;if(y===Fo&&q){var re=q[a];Object.keys(z).forEach(function(fe){var ye=[ti,ei].indexOf(fe)>=0?1:-1,we=[yn,ei].indexOf(fe)>=0?"y":"x";z[fe]+=re[we]*ye})}return z}function g7(t,e){e===void 0&&(e={});var n=e,i=n.placement,a=n.boundary,o=n.rootBoundary,l=n.padding,u=n.flipVariations,d=n.allowedAutoPlacements,h=d===void 0?tb:d,m=ul(i),g=m?u?Yv:Yv.filter(function(E){return ul(E)===m}):Sl,y=g.filter(function(E){return h.indexOf(E)>=0});y.length===0&&(y=g);var T=y.reduce(function(E,C){return E[C]=dl(t,{placement:C,boundary:a,rootBoundary:o,padding:l})[ur(C)],E},{});return Object.keys(T).sort(function(E,C){return T[E]-T[C]})}function v7(t){if(ur(t)===xh)return[];var e=wf(t);return[Rk(t),e,Rk(e)]}function y7(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var a=n.mainAxis,o=a===void 0?!0:a,l=n.altAxis,u=l===void 0?!0:l,d=n.fallbackPlacements,h=n.padding,m=n.boundary,g=n.rootBoundary,y=n.altBoundary,T=n.flipVariations,E=T===void 0?!0:T,C=n.allowedAutoPlacements,w=e.options.placement,_=ur(w),N=_===w,D=d||(N||!E?[wf(w)]:v7(w)),O=[w].concat(D).reduce(function(ge,Oe){return ge.concat(ur(Oe)===xh?g7(e,{placement:Oe,boundary:m,rootBoundary:g,padding:h,flipVariations:E,allowedAutoPlacements:C}):Oe)},[]),R=e.rects.reference,x=e.rects.popper,B=new Map,M=!0,P=O[0],z=0;z<O.length;z++){var q=O[z],re=ur(q),fe=ul(q)===Fs,ye=[yn,ei].indexOf(re)>=0,we=ye?"width":"height",F=dl(e,{placement:q,boundary:m,rootBoundary:g,altBoundary:y,padding:h}),se=ye?fe?ti:bn:fe?ei:yn;R[we]>x[we]&&(se=wf(se));var Q=wf(se),Se=[];if(o&&Se.push(F[re]<=0),u&&Se.push(F[se]<=0,F[Q]<=0),Se.every(function(ge){return ge})){P=q,M=!1;break}B.set(q,Se)}if(M)for(var L=E?3:1,ne=function(Oe){var Te=O.find(function(Ne){var ze=B.get(Ne);if(ze)return ze.slice(0,Oe).every(function(Tt){return Tt})});if(Te)return P=Te,"break"},he=L;he>0;he--){var le=ne(he);if(le==="break")break}e.placement!==P&&(e.modifiersData[i]._skip=!0,e.placement=P,e.reset=!0)}}const BR={name:"flip",enabled:!0,phase:"main",fn:y7,requiresIfExists:["offset"],data:{_skip:!1}};function Ok(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Nk(t){return[yn,ti,ei,bn].some(function(e){return t[e]>=0})}function b7(t){var e=t.state,n=t.name,i=e.rects.reference,a=e.rects.popper,o=e.modifiersData.preventOverflow,l=dl(e,{elementContext:"reference"}),u=dl(e,{altBoundary:!0}),d=Ok(l,i),h=Ok(u,a,o),m=Nk(d),g=Nk(h);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:m,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":g})}const zR={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:b7};function S7(t,e,n){var i=ur(t),a=[bn,yn].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],u=o[1];return l=l||0,u=(u||0)*a,[bn,ti].indexOf(i)>=0?{x:u,y:l}:{x:l,y:u}}function T7(t){var e=t.state,n=t.options,i=t.name,a=n.offset,o=a===void 0?[0,0]:a,l=tb.reduce(function(m,g){return m[g]=S7(g,e.rects,o),m},{}),u=l[e.placement],d=u.x,h=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=h),e.modifiersData[i]=l}const FR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:T7};function E7(t){var e=t.state,n=t.name;e.modifiersData[n]=UR({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const ub={name:"popperOffsets",enabled:!0,phase:"read",fn:E7,data:{}};function C7(t){return t==="x"?"y":"x"}function k7(t){var e=t.state,n=t.options,i=t.name,a=n.mainAxis,o=a===void 0?!0:a,l=n.altAxis,u=l===void 0?!1:l,d=n.boundary,h=n.rootBoundary,m=n.altBoundary,g=n.padding,y=n.tether,T=y===void 0?!0:y,E=n.tetherOffset,C=E===void 0?0:E,w=dl(e,{boundary:d,rootBoundary:h,padding:g,altBoundary:m}),_=ur(e.placement),N=ul(e.placement),D=!N,O=rb(_),R=C7(O),x=e.modifiersData.popperOffsets,B=e.rects.reference,M=e.rects.popper,P=typeof C=="function"?C(Object.assign({},e.rects,{placement:e.placement})):C,z=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),q=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,re={x:0,y:0};if(x){if(o){var fe,ye=O==="y"?yn:bn,we=O==="y"?ei:ti,F=O==="y"?"height":"width",se=x[O],Q=se+w[ye],Se=se-w[we],L=T?-M[F]/2:0,ne=N===Fs?B[F]:M[F],he=N===Fs?-M[F]:-B[F],le=e.elements.arrow,ge=T&&le?ib(le):{width:0,height:0},Oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:PR(),Te=Oe[ye],Ne=Oe[we],ze=Kc(0,B[F],ge[F]),Tt=D?B[F]/2-L-ze-Te-z.mainAxis:ne-ze-Te-z.mainAxis,lt=D?-B[F]/2+L+ze+Ne+z.mainAxis:he+ze+Ne+z.mainAxis,qt=e.elements.arrow&&bu(e.elements.arrow),jn=qt?O==="y"?qt.clientTop||0:qt.clientLeft||0:0,Zr=(fe=q?.[O])!=null?fe:0,Un=se+Tt-Zr-jn,_l=se+lt-Zr,Ys=Kc(T?Xf(Q,Un):Q,se,T?Ds(Se,_l):Se);x[O]=Ys,re[O]=Ys-se}if(u){var fn,xl=O==="x"?yn:bn,Ws=O==="x"?ei:ti,ii=x[R],Ei=R==="y"?"height":"width",ri=ii+w[xl],Ci=ii-w[Ws],ea=[yn,bn].indexOf(_)!==-1,ta=(fn=q?.[R])!=null?fn:0,an=ea?ri:ii-B[Ei]-M[Ei]-ta+z.altAxis,yt=ea?ii+B[Ei]+M[Ei]-ta-z.altAxis:Ci,Sn=T&&ea?t7(an,ii,yt):Kc(T?an:ri,ii,T?yt:Ci);x[R]=Sn,re[R]=Sn-ii}e.modifiersData[i]=re}}const VR={name:"preventOverflow",enabled:!0,phase:"main",fn:k7,requiresIfExists:["offset"]};function w7(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function _7(t){return t===ni(t)||!gi(t)?ob(t):w7(t)}function x7(t){var e=t.getBoundingClientRect(),n=ll(e.width)/t.offsetWidth||1,i=ll(e.height)/t.offsetHeight||1;return n!==1||i!==1}function R7(t,e,n){n===void 0&&(n=!1);var i=gi(e),a=gi(e)&&x7(e),o=Wa(e),l=cl(t,a,n),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(i||!i&&!n)&&((mr(e)!=="body"||cb(o))&&(u=_7(e)),gi(e)?(d=cl(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):o&&(d.x=lb(o))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function A7(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function a(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!n.has(u)){var d=e.get(u);d&&a(d)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||a(o)}),i}function O7(t){var e=A7(t);return OR.reduce(function(n,i){return n.concat(e.filter(function(a){return a.phase===i}))},[])}function N7(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function D7(t){var e=t.reduce(function(n,i){var a=n[i.name];return n[i.name]=a?Object.assign({},a,i,{options:Object.assign({},a.options,i.options),data:Object.assign({},a.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Dk={placement:"bottom",modifiers:[],strategy:"absolute"};function Pk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Ah(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,a=e.defaultOptions,o=a===void 0?Dk:a;return function(u,d,h){h===void 0&&(h=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},Dk,o),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},g=[],y=!1,T={state:m,setOptions:function(_){var N=typeof _=="function"?_(m.options):_;C(),m.options=Object.assign({},o,m.options,N),m.scrollParents={reference:Vs(u)?Yc(u):u.contextElement?Yc(u.contextElement):[],popper:Yc(d)};var D=O7(D7([].concat(i,m.options.modifiers)));return m.orderedModifiers=D.filter(function(O){return O.enabled}),E(),T.update()},forceUpdate:function(){if(!y){var _=m.elements,N=_.reference,D=_.popper;if(Pk(N,D)){m.rects={reference:R7(N,bu(D),m.options.strategy==="fixed"),popper:ib(D)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(z){return m.modifiersData[z.name]=Object.assign({},z.data)});for(var O=0;O<m.orderedModifiers.length;O++){if(m.reset===!0){m.reset=!1,O=-1;continue}var R=m.orderedModifiers[O],x=R.fn,B=R.options,M=B===void 0?{}:B,P=R.name;typeof x=="function"&&(m=x({state:m,options:M,name:P,instance:T})||m)}}}},update:N7(function(){return new Promise(function(w){T.forceUpdate(),w(m)})}),destroy:function(){C(),y=!0}};if(!Pk(u,d))return T;T.setOptions(h).then(function(w){!y&&h.onFirstUpdate&&h.onFirstUpdate(w)});function E(){m.orderedModifiers.forEach(function(w){var _=w.name,N=w.options,D=N===void 0?{}:N,O=w.effect;if(typeof O=="function"){var R=O({state:m,name:_,instance:T,options:D}),x=function(){};g.push(R||x)}})}function C(){g.forEach(function(w){return w()}),g=[]}return T}}var P7=Ah();const M7=Zn;function L7({data:t,onSave:e}){const[n,i]=b.useState({kicker:t?.kicker??"",title:t?.title??"",subtitle:t?.subtitle??"",btnText:t?.btnText??"",btnHref:t?.btnHref??"",imgId:t?.imgId??null,bgUrl:t?.bgUrl??"",avatarUrl:t?.avatarUrl??""}),[a,o]=b.useState(!1),[l,u]=b.useState(null);async function d(){o(!0);try{const m={...n};console.log("[HeroEditor] save click payload:",m),await e(n)}finally{o(!1)}}async function h(m,g="bgUrl"){if(m){o(!0),u(null);try{const y=new FormData;y.append("file",m);const T=await M7.jupload("/media",y);i(E=>{const C={...E,[g]:T.url};return e(C),C})}catch(y){u(y.message||"")}finally{o(!1)}}}return S.jsxs("div",{className:"row g-3",children:[["kicker","title","subtitle","btnText","btnHref"].map(m=>S.jsxs("div",{className:m==="subtitle"?"col-12":"col-md-6",children:[S.jsx("label",{className:"form-label",children:m}),S.jsx("input",{className:"form-control",value:n[m]||"",onChange:g=>i({...n,[m]:g.target.value})})]},m)),S.jsxs("div",{className:"col-12",children:[S.jsx("label",{className:"form-label",children:""}),S.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:m=>h(m.target.files?.[0],"bgUrl"),disabled:a}),l&&S.jsx("div",{className:"text-danger small mt-2",children:l}),n.bgUrl&&S.jsx("img",{src:n.bgUrl,className:"img-fluid mt-2 rounded-3",alt:""})]}),S.jsxs("div",{className:"col-12",children:[S.jsx("label",{className:"form-label",children:""}),S.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:m=>h(m.target.files?.[0],"avatarUrl"),disabled:a}),n.avatarUrl&&S.jsx("img",{src:n.avatarUrl,className:"img-thumbnail mt-2 rounded-circle",style:{width:120,height:120,objectFit:"cover"},alt:""})]}),S.jsx("div",{className:"col-12",children:S.jsx(Wt,{onClick:d,disabled:a,children:""})})]})}function I7({data:t,onSave:e}){const[n,i]=b.useState(t?.items||[]);return S.jsxs("div",{children:[n.map((a,o)=>S.jsxs("div",{className:"row g-2 align-items-end mb-2",children:[S.jsxs("div",{className:"col-md-4",children:[S.jsx("label",{className:"form-label",children:"title"}),S.jsx("input",{className:"form-control",value:a.title||"",onChange:l=>{const u=[...n];u[o]={...u[o],title:l.target.value},i(u)}})]}),S.jsxs("div",{className:"col-md-6",children:[S.jsx("label",{className:"form-label",children:"text"}),S.jsx("input",{className:"form-control",value:a.text||"",onChange:l=>{const u=[...n];u[o]={...u[o],text:l.target.value},i(u)}})]}),S.jsx("div",{className:"col-md-2",children:S.jsx(Wt,{size:"sm",variant:"outline-danger",onClick:()=>{const l=[...n];l.splice(o,1),i(l)},children:""})})]},o)),S.jsx(Wt,{size:"sm",className:"me-2",onClick:()=>i([...n,{title:"",text:""}]),children:"+ "}),S.jsx(Wt,{onClick:()=>e({items:n}),children:""})]})}function j7({data:t,onSave:e}){const[n,i]=b.useState({text:t?.text||"",btnText:t?.btnText||"",btnHref:t?.btnHref||""});return S.jsxs("div",{className:"row g-3",children:[["text","btnText","btnHref"].map(a=>S.jsxs("div",{className:"col-md-6",children:[S.jsx("label",{className:"form-label",children:a}),S.jsx("input",{className:"form-control",value:n[a]||"",onChange:o=>i({...n,[a]:o.target.value})})]},a)),S.jsx("div",{className:"col-12",children:S.jsx(Wt,{onClick:()=>e(n),children:""})})]})}const wg=1,Ts=Zn;function U7(){const[t,e]=b.useState(null),[n,i]=b.useState([]),[a,o]=b.useState(!0),[l,u]=b.useState(null),[d,h]=b.useState(!1),[m,g]=b.useState(null),[y,T]=b.useState(null),[E,C]=b.useState(null);async function w(){o(!0);try{const P=await Ts.get(`/admin/sites/${wg}`),z=P?.site??(P&&P.id?P:null),q=P?.pages??P?.site?.pages??[];if(!z)throw new Error(" / ");e(z),i(Array.isArray(q)?q:[]),!l&&q?.length&&u(q[0])}catch(P){console.error("[Builder] load error:",P),alert(`: ${P?.message??String(P)}`)}finally{o(!1)}}b.useEffect(()=>{w()},[]);async function _(P="/",z="Home"){await Ts.post(`/admin/sites/${wg}/pages`,{path:P,title:z}),await w()}async function N(P,z){await Ts.post(`/admin/pages/${P}/blocks`,{type:z,data:{}}),await w()}async function D(){t&&(await Ts.jput(`/admin/sites/${wg}`,{title:t.title,slug:t.slug,meta:t.meta}),alert(""))}async function O(P,z){await Ts.jput(`/admin/blocks/${P.id}`,{data:z,sort:P.sort}),i(q=>q.map(re=>({...re,blocks:re.blocks.map(fe=>fe.id===P.id?{...fe,data:z}:fe)}))),await w()}async function R(P,z,q){const re=P.blocks.findIndex(we=>we.id===z),fe=[...P.blocks],ye=re+q;ye<0||ye>=fe.length||([fe[re],fe[ye]]=[fe[ye],fe[re]],await Ts.post(`/admin/pages/${P.id}/reorder`,{ids:fe.map(we=>we.id)}),await w())}async function x(P){confirm("")&&(await Ts.jdel(`/admin/blocks/${P}`),await w())}function B(P,z){const q=z.startsWith("/")?z:`/${z}`,re=`/s/${P}${q.replace(/\/?$/,"/")}`;window.open(re,"_blank")}const M=async P=>{if(!l)return alert("");await N(l.id,P)};return a?S.jsx("div",{className:"p-4",children:""}):t?S.jsxs("div",{className:"container py-4",children:[S.jsxs("div",{className:"d-flex gap-3 align-items-end",children:[S.jsxs("div",{className:"flex-grow-1",children:[S.jsx("div",{className:"form-label",children:""}),S.jsx("input",{className:"form-control",value:t.title,onChange:P=>e({...t,title:P.target.value})})]}),S.jsxs("div",{children:[S.jsx("div",{className:"form-label",children:""}),S.jsx("input",{className:"form-control",value:t.slug,onChange:P=>e({...t,slug:P.target.value})})]}),S.jsx(Wt,{className:"ms-auto",onClick:D,children:""})]}),S.jsxs("div",{className:"ms-auto d-flex gap-2 mt-2",children:[S.jsx(Wt,{size:"sm",onClick:()=>M("hero"),children:"+ Hero"}),S.jsx(Wt,{size:"sm",onClick:()=>M("features"),children:"+ Features"}),S.jsx(Wt,{size:"sm",onClick:()=>M("cta"),children:"+ CTA"}),S.jsx(Wt,{size:"sm",variant:"outline-primary",onClick:()=>l&&B(t.slug,l.path),children:""}),S.jsx(Wt,{size:"sm",variant:"outline-secondary",onClick:()=>_("/new","New Page"),children:"+ Page"})]}),n.map(P=>S.jsxs("div",{className:"mt-4",children:[S.jsxs("div",{className:"d-flex align-items-center mb-2",children:[S.jsxs("h5",{className:"mb-0",children:[P.title," ",S.jsx("small",{className:"text-muted",children:P.path})]}),S.jsxs("div",{className:"ms-auto d-flex gap-2",children:[S.jsx(Wt,{size:"sm",onClick:()=>N(P.id,"hero"),children:"+ Hero"}),S.jsx(Wt,{size:"sm",onClick:()=>N(P.id,"features"),children:"+ Features"}),S.jsx(Wt,{size:"sm",onClick:()=>N(P.id,"cta"),children:"+ CTA"}),S.jsx(Wt,{size:"sm",variant:"outline-secondary",onClick:()=>_("/new","New Page"),children:"+ Page"})]})]}),P.blocks.map(z=>S.jsxs("div",{className:"border rounded-4 p-3 mb-3",children:[S.jsxs("div",{className:"d-flex align-items-center mb-2",children:[S.jsx("div",{className:"badge text-bg-secondary me-2",children:z.type}),S.jsxs("div",{className:"ms-auto d-flex gap-2",children:[S.jsx(Wt,{size:"sm",variant:"light",onClick:()=>R(P,z.id,-1),children:""}),S.jsx(Wt,{size:"sm",variant:"light",onClick:()=>R(P,z.id,1),children:""}),S.jsx(Wt,{size:"sm",variant:"outline-danger",onClick:()=>x(z.id),children:""})]})]}),z.type==="hero"&&S.jsx(L7,{data:z.data,onSave:q=>O(z,q)}),z.type==="features"&&S.jsx(I7,{data:z.data,onSave:q=>O(z,q)}),z.type==="cta"&&S.jsx(j7,{data:z.data,onSave:q=>O(z,q)})]},z.id??`${z.type}-${z.sort??0}`))]},P.id))]}):S.jsx("div",{className:"p-4",children:""})}const Io=Zn;function Mk(){const{tenant:t}=lu(),e=new URLSearchParams(Hi().search),[n,i]=b.useState(null),[a,o]=b.useState([]),[l,u]=b.useState(null),[d,h]=b.useState([]),[m,g]=b.useState(""),[y,T]=b.useState(""),[E,C]=b.useState(""),[w,_]=b.useState(""),[N,D]=b.useState(!1),[O,R]=b.useState(null);b.useEffect(()=>{(async()=>{const M=t||e.get("slug")||e.get("tenant")||e.get("tenant_id")||"";if(!M)return;let P=null;if(/^\d+$/.test(M)?P={id:Number(M)}:P=await Io.get(`public/tenants/resolve?slug=${encodeURIComponent(M)}`).catch(async()=>Io.get(`public/tenants/resolve?key=${encodeURIComponent(M)}`)).catch(()=>null),!P)throw new Error("tenant not found");i({id:P.id,display_name:P.display_name??""})})().catch(M=>console.error(M))},[]),b.useEffect(()=>{n&&(async()=>{const M=await Io.get(`public/tenants/${n.id}/pros`).catch(()=>[]);o(M);const P=e.get("lawyer_id");P&&/^\d+$/.test(P)?u(Number(P)):M[0]&&u(M[0].user_id??M[0].id??null)})()},[n?.id]),b.useEffect(()=>{if(!n||!l){h([]),g("");return}(async()=>{const M=await Io.get(`public/tenants/${n.id}/slots?lawyer_id=${l}`).catch(()=>null),z=(Array.isArray(M)?M:M?.days??[]).map(q=>({date:q.date,slots:q.slots??q.times??[]}));h(z)})()},[n?.id,l]);const x=b.useMemo(()=>!!n?.id&&!!l&&!!m&&!!y&&/\S+@\S+/.test(E),[n?.id,l,m,y,E]);async function B(){try{if(!n?.id||!l||!m)return;D(!0);const M=await Io.post("clients/upsert",{name:y,email:E}),P={lawyer_id:l,client_name:y,client_email:E,start_at:new Date(m).toISOString(),starts_at:new Date(m).toISOString(),visitor_id:String(M.user_id??"public"),purpose_title:"",purpose_detail:w},z=await Io.post(`tenants/${n.id}/appointments`,P);R({host:z.hostJoinPath,guest:z.clientJoinPath,starts_at:m})}catch(M){alert(M?.message??""),console.error(M)}finally{D(!1)}}return S.jsxs("div",{className:"container py-4",style:{maxWidth:900},children:[S.jsx("h2",{className:"mb-3",children:""}),S.jsxs("div",{className:"card mb-3",children:[S.jsx("div",{className:"card-header",children:""}),S.jsxs("div",{className:"card-body",children:[S.jsx("div",{className:"text-muted",children:"()"}),S.jsx("div",{className:"mt-2",children:n?n.display_name||`#${n.id}`:""})]})]}),S.jsxs("div",{className:"card mb-3",children:[S.jsx("div",{className:"card-header",children:"1. "}),S.jsxs("div",{className:"card-body",children:[!n&&S.jsx("div",{className:"text-muted",children:""}),n&&!l&&S.jsx("div",{className:"text-muted",children:""}),n&&l&&d.length===0&&S.jsx("div",{className:"text-muted",children:""}),d.map(M=>S.jsxs("div",{className:"mb-2",children:[S.jsx("div",{className:"fw-semibold mb-1",children:M.date}),S.jsx("div",{className:"d-flex flex-wrap gap-2",children:M.slots.map(P=>S.jsx("button",{type:"button",className:"btn btn-sm "+(m===P?"btn-primary":"btn-outline-secondary"),onClick:()=>g(P),children:new Date(P).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},P))})]},M.date))]})]}),S.jsxs("div",{className:"card mb-3",children:[S.jsx("div",{className:"card-header",children:"2. "}),S.jsxs("div",{className:"card-body",children:[S.jsxs("div",{className:"row g-2",children:[S.jsxs("div",{className:"col-md-6",children:[S.jsx("label",{className:"form-label",children:""}),S.jsx("input",{className:"form-control",value:y,onChange:M=>T(M.target.value)})]}),S.jsxs("div",{className:"col-md-6",children:[S.jsx("label",{className:"form-label",children:""}),S.jsx("input",{className:"form-control",value:E,onChange:M=>C(M.target.value)})]})]}),S.jsxs("div",{className:"mt-3",children:[S.jsx("label",{className:"form-label",children:""}),S.jsx("input",{className:"form-control",placeholder:" /  /  ",value:w,onChange:M=>_(M.target.value)})]})]})]}),S.jsx("div",{className:"d-flex gap-2",children:S.jsx("button",{className:"btn btn-primary",disabled:!x||N,onClick:B,children:N?"":""})}),O&&S.jsxs("div",{className:"alert alert-success mt-3",children:[S.jsxs("div",{className:"mb-1",children:["",new Date(O.starts_at).toLocaleString()]}),S.jsxs("div",{children:["",S.jsx("a",{href:O.guest,target:"_blank",rel:"noreferrer",children:O.guest})]}),S.jsxs("div",{children:["",S.jsx("a",{href:O.host,target:"_blank",rel:"noreferrer",children:O.host})]})]})]})}function _g(t){if(!t)return"";const e=new Date(t),n=i=>String(i).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}T${n(e.getHours())}:${n(e.getMinutes())}`}function B7(t){const e=new Date(t);e.setSeconds(0,0);const n=e.getMinutes(),i=n%30===0?0:30-n%30;return e.setMinutes(n+i),e}function Lk(t){const n=B7(t??new Date),i=a=>String(a).padStart(2,"0");return`${n.getFullYear()}-${i(n.getMonth()+1)}-${i(n.getDate())}T${i(n.getHours())}:${i(n.getMinutes())}`}function Ik(){let t=localStorage.getItem("visitor_id");return t||(t=1),t}function z7({tenant:t,lawyerId:e,defaultStartsAt:n}){const[i,a]=b.useState(""),[o,l]=b.useState(""),[u,d]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[T,E]=b.useState(n?_g(n):Lk());b.useEffect(()=>{if(n){const M=new Date(n);E(Lk(M))}},[n]);const[C,w]=b.useState(!1),_=b.useRef(null),[N,D]=b.useState(),[O,R]=b.useState(null);b.useEffect(()=>{const M=Ik();fetch(`/api/tenants/${t}/my/appointments?visitor_id=${M}`).then(P=>P.ok?P.json():[]).then(P=>{if(P?.[0]){const z=P[0];R({when:_g(z.starts_at),clientPath:`/wait?aid=${z.id}`,hostPath:`/host?aid=${z.id}`})}}).catch(()=>{})},[t]);const x=b.useMemo(()=>!i||!h||!T?!1:new Date(T).getTime()>=Date.now()+240*1e3,[i,h,T]);async function B(M){if(M.preventDefault(),!x||C)return;_.current?.abort();const P=new AbortController;_.current=P,w(!0),D(void 0);try{const z={lawyer_id:e,client_name:i,client_email:o,client_phone:u,start_at:new Date(T).toISOString(),visitor_id:Ik(),purpose_title:h,purpose_detail:g},q=await fetch(`/api/tenants/${t}/appointments`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(z),signal:P.signal}),fe=(q.headers.get("content-type")||"").includes("application/json")?await q.json():await q.text();if(!q.ok){if(q.status===409&&fe?.suggested_start_at){E(_g(fe.suggested_start_at)),D("");return}throw new Error(typeof fe=="string"?fe:fe?.message||"")}const ye=fe;R({when:T,clientPath:ye.clientJoinPath||"",hostPath:ye.hostJoinPath||""}),localStorage.setItem("last_aid",String(ye.appointmentId))}catch(z){D(String(z?.message||z))}finally{w(!1)}}if(O){const M=`${location.origin}/${t}`,P=`${M}${O.clientPath}`,z=`${M}${O.hostPath}`;return S.jsxs("div",{style:{background:"#f7f7ff",padding:12,borderRadius:12,marginBottom:12},children:[S.jsxs("div",{children:["",S.jsx("b",{children:O.when.replace("T"," ")})]}),S.jsx(Yn,{to:`/${t}/reserve`,children:""}),S.jsxs("div",{style:{marginTop:8,lineHeight:1.7},children:["URL",S.jsx("a",{href:P,children:P}),S.jsx("br",{}),"URL",S.jsx("a",{href:z,children:z})]})]})}return S.jsxs("form",{onSubmit:B,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr auto",gap:8,alignItems:"center"},children:[S.jsx("input",{value:i,onChange:M=>a(M.target.value),name:"name",placeholder:"",required:!0}),S.jsx("input",{value:o,onChange:M=>l(M.target.value),name:"email",placeholder:""}),S.jsx("input",{value:u,onChange:M=>d(M.target.value),name:"phone",placeholder:""}),S.jsxs("div",{style:{gridColumn:"1 / 3"},children:[S.jsx("label",{className:"block text-sm mb-1",children:""}),S.jsx("input",{value:h,onChange:M=>m(M.target.value),placeholder:"",required:!0})]}),S.jsxs("div",{style:{gridColumn:"1 / 4"},children:[S.jsx("label",{className:"block text-sm mb-1",children:""}),S.jsx("textarea",{value:g,onChange:M=>y(M.target.value),placeholder:"",rows:5})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1",children:""}),S.jsx("input",{name:"start_at",type:"datetime-local",value:T,readOnly:!0,className:"opacity-50 pointer-events-none"})]}),S.jsx("button",{type:"submit",disabled:!x||C,style:{padding:"10px 14px",borderRadius:12,border:"none",background:!x||C?"#c9c9d6":"#6c63ff",color:"#fff",cursor:!x||C?"not-allowed":"pointer",boxShadow:"0 3px 8px rgba(0,0,0,.08)"},onMouseDown:M=>M.currentTarget.style.transform="translateY(1px)",onMouseUp:M=>M.currentTarget.style.transform="translateY(0)",formNoValidate:!0,children:C?"":""}),N&&S.jsx("div",{style:{gridColumn:"1 / -1",color:"#c00"},children:N})]})}function F7(){const{tenant:t=""}=lu(),[e,n]=b.useState([]),[i,a]=b.useState(new URLSearchParams(location.search).get("prefill")??void 0);return b.useEffect(()=>{const o=new Date().toISOString();fetch(`/api/tenants/${t}/availability?from=${encodeURIComponent(o)}&days=7&duration=30`).then(l=>l.ok?l.json():Promise.reject(l)).then(l=>n(l.days||[])).catch(console.error)},[t]),t?S.jsxs("div",{style:{padding:16},children:[S.jsx("h2",{children:""}),S.jsx(z7,{tenant:t,lawyerId:1,defaultStartsAt:i}),S.jsx("h3",{style:{marginTop:16},children:"301"}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:12},children:e.map(o=>S.jsxs("div",{style:{border:"1px solid #eee",borderRadius:12,padding:12},children:[S.jsx("strong",{children:new Date(o.date).toLocaleDateString("ja-JP",{weekday:"short",month:"numeric",day:"numeric"})}),S.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:o.slots.map(l=>S.jsx("button",{type:"button",onClick:()=>a(l),style:{padding:"6px 10px",borderRadius:10,border:"1px solid #ddd"},children:new Date(l).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})},l))})]},o.date))})]}):null}function V7({data:t}){const e=t?.kicker??"",n=t?.headline??t?.title??"",i=t?.subtitle??"",a=t?.btnText??"",o=t?.btnHref??"#",l=t?.bgUrl??t?.imageUrl??t?.imgUrl,u=t?.avatarUrl;return console.log("bg =",l),console.log("av =",u),S.jsx("div",{className:"relative",children:S.jsxs("section",{className:"position-relative text-center text-white",style:l?{backgroundImage:`url(${l})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[e&&S.jsx("div",{className:"text-sm text-slate-500",children:e}),n&&S.jsx("h1",{className:"text-4xl font-extrabold my-3",children:n}),i&&S.jsx("p",{className:"text-slate-600",children:i}),a&&S.jsx("div",{className:"mt-4",children:S.jsx("a",{href:o,className:"px-5 py-3 rounded-2xl bg-indigo-600 text-white hover:bg-indigo-700",children:a})}),u&&S.jsx("img",{src:u,className:"rounded-circle mb-3",style:{width:120,height:120,objectFit:"cover",border:"4px solid #fff"},alt:""})]})})}function H7({data:t}){const e=t.items??[];return S.jsx("section",{className:"py-2",children:S.jsx("div",{className:"row g-3",children:e.map((n,i)=>S.jsx("div",{className:"col-md-4",children:S.jsxs("div",{className:"border rounded-4 p-4 h-100",children:[S.jsx("div",{className:"fw-semibold",children:n.title??""}),n.text&&S.jsx("p",{className:"text-muted mt-2 mb-0",children:n.text})]})},i))})})}const q7=Zn;function $7({siteSlug:t="demo"}){const[e,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[u,d]=b.useState(""),[h,m]=b.useState(!1),[g,y]=b.useState(!1);async function T(E){if(E.preventDefault(),!i||!u){alert("");return}m(!0);try{await q7.post("inquiries",{site_slug:t,name:e,email:i,topic:o,message:u}),y(!0),n(""),a(""),l(""),d("")}catch(C){console.error(C),alert("")}finally{m(!1)}}return S.jsxs("form",{onSubmit:T,className:"space-y-3",children:[g&&S.jsx("div",{className:"alert alert-success",children:""}),S.jsx("input",{className:"form-control",placeholder:"",value:e,onChange:E=>n(E.target.value)}),S.jsx("input",{className:"form-control",placeholder:" *",value:i,onChange:E=>a(E.target.value)}),S.jsx("input",{className:"form-control",placeholder:" / ",value:o,onChange:E=>l(E.target.value)}),S.jsx("textarea",{className:"form-control",rows:5,placeholder:" *",value:u,onChange:E=>d(E.target.value)}),S.jsx("button",{className:"btn btn-primary",disabled:h,children:h?"...":""})]})}function G7({data:t}){return t?.imgUrl?S.jsxs("div",{className:"relative w-full h-40 md:h-60",children:[S.jsx("img",{src:t.imgUrl,alt:t.altText??"",className:"w-full h-full object-cover"}),S.jsx("div",{className:"absolute inset-0 bg-black/20"})," "]}):null}function K7({data:t}){if(!t?.imgUrl)return null;const e=t.radius==="xl"?"rounded-2xl":t.radius==="md"?"rounded-md":"",n=t.shadow?"shadow-md":"",i=t.width==="half"?"max-w-xl":t.width==="content"?"max-w-3xl":"w-full",a=t.align==="left"?"mx-0":t.align==="right"?"ml-auto":"mx-auto",o=S.jsx("img",{src:t.imgUrl,alt:t.alt||"",loading:"lazy",className:`${i} ${a} ${e} ${n} block object-cover`});return S.jsxs("figure",{className:"my-6",children:[t.linkUrl?S.jsx("a",{href:t.linkUrl,children:o}):o,t.caption&&S.jsx("figcaption",{className:"text-center text-sm text-slate-500 mt-2",children:t.caption})]})}function Y7({data:t}){const{imgUrl:e,caption:n,align:i="center",width:a=680,shadow:o=!0,rounded:l=!0}=t||{};if(!e)return null;const u=i==="left"?"md:mr-auto md:ml-0":i==="right"?"md:ml-auto md:mr-0":"mx-auto";return S.jsxs("figure",{className:`my-6 ${u}`,style:{maxWidth:a},children:[S.jsx("img",{src:e,alt:n??"",className:["w-full h-auto",o?"shadow-lg":"",l?"rounded-2xl":"","border border-slate-200"].join(" "),loading:"lazy"}),n&&S.jsx("figcaption",{className:"text-sm text-slate-500 mt-2",children:n})]})}function W7({data:t}){const e=t.columns??{sm:2,md:3,lg:4},n=t.radius==="xl"?"rounded-2xl":t.radius==="md"?"rounded-md":"",i=t.gap??12;return S.jsxs("div",{className:"grid",style:{gap:i,gridTemplateColumns:`repeat(${e.sm}, 1fr)`},children:[S.jsx("style",{children:`
        @media (min-width: 768px){ .gallery-md { grid-template-columns: repeat(${e.md}, 1fr); } }
        @media (min-width: 1024px){ .gallery-lg { grid-template-columns: repeat(${e.lg}, 1fr); } }
      `}),S.jsx("div",{className:"contents gallery-md gallery-lg",children:t.items?.map((a,o)=>S.jsx("img",{src:a.imgUrl,alt:a.alt||"",loading:"lazy",className:`${n} w-full h-full object-cover`},o))})]})}const X7={hero:t=>S.jsx(V7,{data:t.data}),features:t=>S.jsx(H7,{data:t.data}),cta:t=>S.jsx($7,{data:t.data}),header:t=>S.jsx(G7,{data:t.data}),image:t=>S.jsx(K7,{data:t.data}),mediacard:t=>S.jsx(Y7,{data:t.data}),gallery:t=>S.jsx(W7,{data:t.data})};function Q7(){fP();const{slug:t}=lu(),e=Hi(),n=b.useMemo(()=>{const m=e.pathname.replace(/^\/s\/[^/]+/,"")||"/";return m.startsWith("/")?m:`/${m}`},[e.pathname]),i=t?`/reserve?slug=${encodeURIComponent(t)}`:void 0,[a,o]=b.useState(null),[l,u]=b.useState(null);if(b.useEffect(()=>{let m=!1;return(async()=>{try{u(null),o(null);const g=await fetch(`http://localhost:8000/api/public/sites/${t}/page?path=${encodeURIComponent(n)}`);if(!g.ok)throw new Error(`HTTP ${g.status}`);const y=await g.json();m||(o(y),document.title=`${y.page.title} | ${y.site.title}`)}catch(g){m||u(g.message||"Error")}})(),()=>{m=!0}},[t,n]),l)return S.jsxs("div",{style:{padding:24},children:[": ",l]});if(!a)return S.jsx("div",{style:{padding:24},children:""});const h=a.page.blocks.find(m=>String(m.type).toLowerCase()==="hero")?.data?.imgUrl;return S.jsxs("div",{className:"relative isolate",children:[h&&S.jsxs("div",{className:"absolute inset-x-0 top-0 z-0 h-[260px] md:h-[360px]",children:[S.jsx("img",{src:h,alt:"",className:"w-full h-full object-cover"}),S.jsx("div",{className:"absolute inset-x-0 top-0 h-16 bg-gradient-to-b from-white/70 to-transparent"}),S.jsx("div",{className:"absolute inset-x-0 bottom-0 h-24 bg-gradient-to-b from-transparent to-white"})]}),S.jsxs("header",{className:"container py-4 d-flex gap-3 relative z-10",children:[S.jsx(Yn,{to:`/s/${a.site.slug}/`,className:"fw-bold text-decoration-none fs-5",children:a.site.title}),S.jsx("nav",{className:"ms-auto d-flex gap-3",children:(a.nav??[]).map(m=>S.jsx(Yn,{to:`/s/${a.site.slug}${m.path}`,className:"link-secondary",children:m.title},m.path))}),i&&S.jsx(Yn,{className:"btn btn-success btn-sm",to:i,children:""})]}),S.jsx("main",{className:"container py-4 d-grid gap-5 relative z-10",children:a.page.blocks.slice().sort((m,g)=>(m.sort??0)-(g.sort??0)).map(m=>{const g=String(m.type||"").toLowerCase(),y=X7[g],T=m.id??`${g}-${m.sort??0}`;return S.jsx("div",{children:y?S.jsx(y,{data:m.data}):S.jsxs("div",{className:"border rounded-4 p-4",children:[S.jsx("div",{className:"fw-semibold mb-2",children:m.type}),S.jsx("pre",{className:"mb-0",children:JSON.stringify(m.data,null,2)})]})},T)})}),S.jsxs("footer",{className:"container py-4 border-top text-muted small",children:[" ",new Date().getFullYear()," ",a.site.title]})]})}const jk=t=>["default","law","beauty","edu"].includes(t);function J7(t){const[e,n]=b.useState();return b.useEffect(()=>{try{const i=new URL(window.location.href),a=(i.searchParams.get("v")||"").toLowerCase(),o=i.pathname.replace(/^\/+|\/+$/g,"").split("/")[0]||"";jk(a)?n(a):jk(o)&&n(o)}catch{}},[]),t||e||"default"}const Z7=[{title:"/",desc:""},{title:"/",desc:"Stripe"},{title:"",desc:""},{title:"HP",desc:"/SEO"},{title:"/",desc:""},{title:"",desc:"IP"}],ez=[{q:"",a:""},{q:"",a:""},{q:"HP",a:" or "}],tz=[{name:"",price:"19,800 / ",points:["HP +  +  + ","","/"]},{name:"",price:"217,800 / ",points:["2","",""]},{name:"",price:"",points:["/","SLA/",""]}],Uk={default:{badge:"MULTI-INDUSTRY",headline:"",subhead:"",heroBullets:["URL ","HP1"],trust:[""],features:Z7,faq:ez,demoLink:"/demo",PublicReserve:"/Offices",signupLink:"/signup"}};function nz({badge:t,vertical:e}){return S.jsx("header",{className:"sticky top-0 z-40 backdrop-blur bg-white/70 border-b border-slate-200",children:S.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"h-8 w-8 rounded-2xl bg-gradient-to-br from-fuchsia-500 to-indigo-500"}),S.jsx("span",{className:"font-semibold tracking-tight",children:"PLASMIC"}),e!=="default"&&S.jsx("span",{className:"ml-2 text-xs rounded-full px-2 py-0.5 bg-slate-100 border border-slate-200",children:t})]}),S.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm",children:[S.jsx("a",{href:"#features",className:"hover:text-slate-600",children:""}),S.jsx("a",{href:"#pricing",className:"hover:text-slate-600",children:""}),S.jsx("a",{href:"#security",className:"hover:text-slate-600",children:""}),S.jsx("a",{href:"#faq",className:"hover:text-slate-600",children:"FAQ"})]}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("a",{href:"/admin",className:"text-sm px-3 py-1.5 rounded-xl border border-slate-300 hover:bg-slate-50",children:""}),S.jsx("a",{href:"#cta",className:"text-sm px-3 py-1.5 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700",children:""})]})]})})}function iz({headline:t,subhead:e,bullets:n,trust:i,reserveHref:a}){return S.jsx("section",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-16 pb-12",children:S.jsxs("div",{className:"grid lg:grid-cols-2 gap-10 items-center",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold leading-tight tracking-tight",children:t}),S.jsx("p",{className:"mt-5 text-lg text-slate-600",children:e}),S.jsxs("div",{className:"mt-8 flex flex-wrap gap-3",children:[S.jsx("a",{id:"cta",href:a,className:"px-5 py-3 rounded-2xl bg-indigo-600 text-white hover:bg-indigo-700",children:""}),S.jsx("a",{href:"#pricing",className:"px-5 py-3 rounded-2xl border border-slate-300 hover:bg-slate-50",children:""})]}),S.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:i.map(o=>S.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-100 border border-slate-200",children:o},o))})]}),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute -inset-4 rounded-3xl bg-gradient-to-tr from-indigo-200/60 to-fuchsia-200/60 blur-2xl"}),S.jsxs("div",{className:"relative rounded-3xl border border-slate-200 shadow-xl bg-white p-4",children:[S.jsx("div",{className:"aspect-video w-full rounded-2xl bg-slate-100 grid place-items-center text-slate-500",children:S.jsx("img",{src:"/reserve.bmp",alt:"",className:"w-full h-auto rounded-2xl object-cover"})}),S.jsx("ul",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:n.map(o=>S.jsx("li",{className:"px-3 py-2 rounded-xl bg-slate-50 border border-slate-200",children:o},o))})]})]})]})})}function rz({signupHref:t}){return S.jsxs("section",{id:"pricing",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12",children:[S.jsx("h2",{className:"text-2xl font-bold",children:""}),S.jsx("p",{className:"text-slate-600 mt-2",children:"HP"}),S.jsx("div",{className:"mt-8 grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:tz.map(e=>S.jsxs("div",{className:"rounded-2xl border border-slate-200 p-6 bg-white shadow-sm flex flex-col",children:[S.jsx("div",{className:"text-sm font-semibold",children:e.name}),S.jsx("div",{className:"mt-4 text-3xl font-extrabold",children:e.price}),S.jsx("ul",{className:"mt-4 space-y-2 text-sm text-slate-600",children:e.points.map(n=>S.jsxs("li",{children:[" ",n]},n))}),S.jsx("a",{href:t,className:"mt-6 px-4 py-2 rounded-xl bg-indigo-600 text-white text-center hover:bg-indigo-700",children:""})]},e.name))}),S.jsx("p",{className:"text-xs text-slate-500 mt-4",children:" "})]})}async function xg(t,e){const n=await fetch(t,{headers:{"Content-Type":"application/json"},...e});if(!n.ok)throw new Error(`${n.status} ${n.statusText}`);return n.json()}function Bk(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function az(...t){return e=>{let n=!1;const i=t.map(a=>{const o=Bk(a,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<i.length;a++){const o=i[a];typeof o=="function"?o():Bk(t[a],null)}}}}function sz(t){const e=lz(t),n=b.forwardRef((i,a)=>{const{children:o,...l}=i,u=b.Children.toArray(o),d=u.find(uz);if(d){const h=d.props.children,m=u.map(g=>g===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:g);return S.jsx(e,{...l,ref:a,children:b.isValidElement(h)?b.cloneElement(h,void 0,m):null})}return S.jsx(e,{...l,ref:a,children:o})});return n.displayName=`${t}.Slot`,n}var oz=sz("Slot");function lz(t){const e=b.forwardRef((n,i)=>{const{children:a,...o}=n;if(b.isValidElement(a)){const l=fz(a),u=dz(o,a.props);return a.type!==b.Fragment&&(u.ref=i?az(i,l):l),b.cloneElement(a,u)}return b.Children.count(a)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cz=Symbol("radix.slottable");function uz(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cz}function dz(t,e){const n={...e};for(const i in e){const a=t[i],o=e[i];/^on[A-Z]/.test(i)?a&&o?n[i]=(...u)=>{const d=o(...u);return a(...u),d}:a&&(n[i]=a):i==="style"?n[i]={...a,...o}:i==="className"&&(n[i]=[a,o].filter(Boolean).join(" "))}return{...t,...n}}function fz(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function HR(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=HR(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function qR(){for(var t,e,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=HR(t))&&(i&&(i+=" "),i+=e);return i}const zk=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Fk=qR,hz=(t,e)=>n=>{var i;if(e?.variants==null)return Fk(t,n?.class,n?.className);const{variants:a,defaultVariants:o}=e,l=Object.keys(a).map(h=>{const m=n?.[h],g=o?.[h];if(m===null)return null;const y=zk(m)||zk(g);return a[h][y]}),u=n&&Object.entries(n).reduce((h,m)=>{let[g,y]=m;return y===void 0||(h[g]=y),h},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((h,m)=>{let{class:g,className:y,...T}=m;return Object.entries(T).every(E=>{let[C,w]=E;return Array.isArray(w)?w.includes({...o,...u}[C]):{...o,...u}[C]===w})?[...h,g,y]:h},[]);return Fk(t,l,d,n?.class,n?.className)},db="-",mz=t=>{const e=gz(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:l=>{const u=l.split(db);return u[0]===""&&u.length!==1&&u.shift(),$R(u,e)||pz(l)},getConflictingClassGroupIds:(l,u)=>{const d=n[l]||[];return u&&i[l]?[...d,...i[l]]:d}}},$R=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),a=i?$R(t.slice(1),i):void 0;if(a)return a;if(e.validators.length===0)return;const o=t.join(db);return e.validators.find(({validator:l})=>l(o))?.classGroupId},Vk=/^\[(.+)\]$/,pz=t=>{if(Vk.test(t)){const e=Vk.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},gz=t=>{const{theme:e,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const a in n)Qv(n[a],i,a,e);return i},Qv=(t,e,n,i)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?e:Hk(e,a);o.classGroupId=n;return}if(typeof a=="function"){if(vz(a)){Qv(a(i),e,n,i);return}e.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,l])=>{Qv(l,Hk(e,o),n,i)})})},Hk=(t,e)=>{let n=t;return e.split(db).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},vz=t=>t.isThemeGetter,yz=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const a=(o,l)=>{n.set(o,l),e++,e>t&&(e=0,i=n,n=new Map)};return{get(o){let l=n.get(o);if(l!==void 0)return l;if((l=i.get(o))!==void 0)return a(o,l),l},set(o,l){n.has(o)?n.set(o,l):a(o,l)}}},Jv="!",Zv=":",bz=Zv.length,Sz=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=a=>{const o=[];let l=0,u=0,d=0,h;for(let E=0;E<a.length;E++){let C=a[E];if(l===0&&u===0){if(C===Zv){o.push(a.slice(d,E)),d=E+bz;continue}if(C==="/"){h=E;continue}}C==="["?l++:C==="]"?l--:C==="("?u++:C===")"&&u--}const m=o.length===0?a:a.substring(d),g=Tz(m),y=g!==m,T=h&&h>d?h-d:void 0;return{modifiers:o,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:T}};if(e){const a=e+Zv,o=i;i=l=>l.startsWith(a)?o(l.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(n){const a=i;i=o=>n({className:o,parseClassName:a})}return i},Tz=t=>t.endsWith(Jv)?t.substring(0,t.length-1):t.startsWith(Jv)?t.substring(1):t,Ez=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let o=[];return i.forEach(l=>{l[0]==="["||e[l]?(a.push(...o.sort(),l),o=[]):o.push(l)}),a.push(...o.sort()),a}},Cz=t=>({cache:yz(t.cacheSize),parseClassName:Sz(t),sortModifiers:Ez(t),...mz(t)}),kz=/\s+/,wz=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:o}=e,l=[],u=t.trim().split(kz);let d="";for(let h=u.length-1;h>=0;h-=1){const m=u[h],{isExternal:g,modifiers:y,hasImportantModifier:T,baseClassName:E,maybePostfixModifierPosition:C}=n(m);if(g){d=m+(d.length>0?" "+d:d);continue}let w=!!C,_=i(w?E.substring(0,C):E);if(!_){if(!w){d=m+(d.length>0?" "+d:d);continue}if(_=i(E),!_){d=m+(d.length>0?" "+d:d);continue}w=!1}const N=o(y).join(":"),D=T?N+Jv:N,O=D+_;if(l.includes(O))continue;l.push(O);const R=a(_,w);for(let x=0;x<R.length;++x){const B=R[x];l.push(D+B)}d=m+(d.length>0?" "+d:d)}return d};function _z(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=GR(e))&&(i&&(i+=" "),i+=n);return i}const GR=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=GR(t[i]))&&(n&&(n+=" "),n+=e);return n};function xz(t,...e){let n,i,a,o=l;function l(d){const h=e.reduce((m,g)=>g(m),t());return n=Cz(h),i=n.cache.get,a=n.cache.set,o=u,u(d)}function u(d){const h=i(d);if(h)return h;const m=wz(d,n);return a(d,m),m}return function(){return o(_z.apply(null,arguments))}}const Kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},KR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,YR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Rz=/^\d+\/\d+$/,Az=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Oz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Dz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Pz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jo=t=>Rz.test(t),Ke=t=>!!t&&!Number.isNaN(Number(t)),Ra=t=>!!t&&Number.isInteger(Number(t)),Rg=t=>t.endsWith("%")&&Ke(t.slice(0,-1)),jr=t=>Az.test(t),Mz=()=>!0,Lz=t=>Oz.test(t)&&!Nz.test(t),WR=()=>!1,Iz=t=>Dz.test(t),jz=t=>Pz.test(t),Uz=t=>!Ce(t)&&!ke(t),Bz=t=>Tl(t,JR,WR),Ce=t=>KR.test(t),Es=t=>Tl(t,ZR,Lz),Ag=t=>Tl(t,qz,Ke),qk=t=>Tl(t,XR,WR),zz=t=>Tl(t,QR,jz),Wd=t=>Tl(t,eA,Iz),ke=t=>YR.test(t),Ic=t=>El(t,ZR),Fz=t=>El(t,$z),$k=t=>El(t,XR),Vz=t=>El(t,JR),Hz=t=>El(t,QR),Xd=t=>El(t,eA,!0),Tl=(t,e,n)=>{const i=KR.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},El=(t,e,n=!1)=>{const i=YR.exec(t);return i?i[1]?e(i[1]):n:!1},XR=t=>t==="position"||t==="percentage",QR=t=>t==="image"||t==="url",JR=t=>t==="length"||t==="size"||t==="bg-size",ZR=t=>t==="length",qz=t=>t==="number",$z=t=>t==="family-name",eA=t=>t==="shadow",Gz=()=>{const t=Kt("color"),e=Kt("font"),n=Kt("text"),i=Kt("font-weight"),a=Kt("tracking"),o=Kt("leading"),l=Kt("breakpoint"),u=Kt("container"),d=Kt("spacing"),h=Kt("radius"),m=Kt("shadow"),g=Kt("inset-shadow"),y=Kt("text-shadow"),T=Kt("drop-shadow"),E=Kt("blur"),C=Kt("perspective"),w=Kt("aspect"),_=Kt("ease"),N=Kt("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...O(),ke,Ce],x=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],M=()=>[ke,Ce,d],P=()=>[jo,"full","auto",...M()],z=()=>[Ra,"none","subgrid",ke,Ce],q=()=>["auto",{span:["full",Ra,ke,Ce]},Ra,ke,Ce],re=()=>[Ra,"auto",ke,Ce],fe=()=>["auto","min","max","fr",ke,Ce],ye=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],we=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...M()],se=()=>[jo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...M()],Q=()=>[t,ke,Ce],Se=()=>[...O(),$k,qk,{position:[ke,Ce]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ne=()=>["auto","cover","contain",Vz,Bz,{size:[ke,Ce]}],he=()=>[Rg,Ic,Es],le=()=>["","none","full",h,ke,Ce],ge=()=>["",Ke,Ic,Es],Oe=()=>["solid","dashed","dotted","double"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[Ke,Rg,$k,qk],ze=()=>["","none",E,ke,Ce],Tt=()=>["none",Ke,ke,Ce],lt=()=>["none",Ke,ke,Ce],qt=()=>[Ke,ke,Ce],jn=()=>[jo,"full",...M()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[jr],breakpoint:[jr],color:[Mz],container:[jr],"drop-shadow":[jr],ease:["in","out","in-out"],font:[Uz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[jr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[jr],shadow:[jr],spacing:["px",Ke],text:[jr],"text-shadow":[jr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",jo,Ce,ke,w]}],container:["container"],columns:[{columns:[Ke,Ce,ke,u]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Ra,"auto",ke,Ce]}],basis:[{basis:[jo,"full","auto",u,...M()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ke,jo,"auto","initial","none",Ce]}],grow:[{grow:["",Ke,ke,Ce]}],shrink:[{shrink:["",Ke,ke,Ce]}],order:[{order:[Ra,"first","last","none",ke,Ce]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":re()}],"col-end":[{"col-end":re()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":re()}],"row-end":[{"row-end":re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":fe()}],"auto-rows":[{"auto-rows":fe()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[...ye(),"normal"]}],"justify-items":[{"justify-items":[...we(),"normal"]}],"justify-self":[{"justify-self":["auto",...we()]}],"align-content":[{content:["normal",...ye()]}],"align-items":[{items:[...we(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...we(),{baseline:["","last"]}]}],"place-content":[{"place-content":ye()}],"place-items":[{"place-items":[...we(),"baseline"]}],"place-self":[{"place-self":["auto",...we()]}],p:[{p:M()}],px:[{px:M()}],py:[{py:M()}],ps:[{ps:M()}],pe:[{pe:M()}],pt:[{pt:M()}],pr:[{pr:M()}],pb:[{pb:M()}],pl:[{pl:M()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":M()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":M()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[u,"screen",...se()]}],"min-w":[{"min-w":[u,"screen","none",...se()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,Ic,Es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ke,Ag]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Rg,Ce]}],"font-family":[{font:[Fz,Ce,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ke,Ce]}],"line-clamp":[{"line-clamp":[Ke,"none",ke,Ag]}],leading:[{leading:[o,...M()]}],"list-image":[{"list-image":["none",ke,Ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ke,Ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ke,"from-font","auto",ke,Es]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[Ke,"auto",ke,Ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke,Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke,Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Se()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:ne()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ra,ke,Ce],radial:["",ke,Ce],conic:[Ra,ke,Ce]},Hz,zz]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:le()}],"rounded-s":[{"rounded-s":le()}],"rounded-e":[{"rounded-e":le()}],"rounded-t":[{"rounded-t":le()}],"rounded-r":[{"rounded-r":le()}],"rounded-b":[{"rounded-b":le()}],"rounded-l":[{"rounded-l":le()}],"rounded-ss":[{"rounded-ss":le()}],"rounded-se":[{"rounded-se":le()}],"rounded-ee":[{"rounded-ee":le()}],"rounded-es":[{"rounded-es":le()}],"rounded-tl":[{"rounded-tl":le()}],"rounded-tr":[{"rounded-tr":le()}],"rounded-br":[{"rounded-br":le()}],"rounded-bl":[{"rounded-bl":le()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Oe(),"hidden","none"]}],"divide-style":[{divide:[...Oe(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...Oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ke,ke,Ce]}],"outline-w":[{outline:["",Ke,Ic,Es]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",m,Xd,Wd]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",g,Xd,Wd]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[Ke,Es]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",y,Xd,Wd]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[Ke,ke,Ce]}],"mix-blend":[{"mix-blend":[...Te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[ke,Ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[Ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Se()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:ne()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ke,Ce]}],filter:[{filter:["","none",ke,Ce]}],blur:[{blur:ze()}],brightness:[{brightness:[Ke,ke,Ce]}],contrast:[{contrast:[Ke,ke,Ce]}],"drop-shadow":[{"drop-shadow":["","none",T,Xd,Wd]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",Ke,ke,Ce]}],"hue-rotate":[{"hue-rotate":[Ke,ke,Ce]}],invert:[{invert:["",Ke,ke,Ce]}],saturate:[{saturate:[Ke,ke,Ce]}],sepia:[{sepia:["",Ke,ke,Ce]}],"backdrop-filter":[{"backdrop-filter":["","none",ke,Ce]}],"backdrop-blur":[{"backdrop-blur":ze()}],"backdrop-brightness":[{"backdrop-brightness":[Ke,ke,Ce]}],"backdrop-contrast":[{"backdrop-contrast":[Ke,ke,Ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ke,ke,Ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ke,ke,Ce]}],"backdrop-invert":[{"backdrop-invert":["",Ke,ke,Ce]}],"backdrop-opacity":[{"backdrop-opacity":[Ke,ke,Ce]}],"backdrop-saturate":[{"backdrop-saturate":[Ke,ke,Ce]}],"backdrop-sepia":[{"backdrop-sepia":["",Ke,ke,Ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":M()}],"border-spacing-x":[{"border-spacing-x":M()}],"border-spacing-y":[{"border-spacing-y":M()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ke,Ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ke,"initial",ke,Ce]}],ease:[{ease:["linear","initial",_,ke,Ce]}],delay:[{delay:[Ke,ke,Ce]}],animate:[{animate:["none",N,ke,Ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,ke,Ce]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:Tt()}],"rotate-x":[{"rotate-x":Tt()}],"rotate-y":[{"rotate-y":Tt()}],"rotate-z":[{"rotate-z":Tt()}],scale:[{scale:lt()}],"scale-x":[{"scale-x":lt()}],"scale-y":[{"scale-y":lt()}],"scale-z":[{"scale-z":lt()}],"scale-3d":["scale-3d"],skew:[{skew:qt()}],"skew-x":[{"skew-x":qt()}],"skew-y":[{"skew-y":qt()}],transform:[{transform:[ke,Ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:jn()}],"translate-x":[{"translate-x":jn()}],"translate-y":[{"translate-y":jn()}],"translate-z":[{"translate-z":jn()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke,Ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke,Ce]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[Ke,Ic,Es,Ag]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Kz=xz(Gz);function Yz(...t){return Kz(qR(t))}const Wz=hz("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ey=b.forwardRef(({className:t,variant:e,size:n,asChild:i=!1,...a},o)=>{const l=i?oz:"button";return S.jsx(l,{className:Yz(Wz({variant:e,size:n,className:t})),ref:o,...a})});ey.displayName="Button";function Xz(t){console.log(t);const[e,n]=b.useState({}),[i,a]=b.useState([]),[o,l]=b.useState([]),[u,d]=b.useState();return b.useEffect(()=>{(async()=>a(await xg("/api/public/tenants")))()},[]),b.useEffect(()=>{u&&(async()=>{const h=new Date().toISOString(),m=new Date(Date.now()+7*864e5).toISOString();l(await xg(`/api/public/tenants/${u}/slots?from=${h}&to=${m}`))})()},[u]),b.useEffect(()=>{(async()=>n(await xg("/api/settings")))()},[]),S.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[S.jsxs("header",{className:"flex items-center justify-between py-4",children:[S.jsx("div",{className:"font-semibold text-lg",children:e["site.name"]??"Regal"}),S.jsxs("nav",{className:"space-x-4 text-sm",children:[S.jsx(Yn,{to:"/",children:""}),S.jsx(Yn,{to:":tenant/reserve",children:""}),S.jsx(Yn,{to:"s/:slug",children:"TenantHome"}),S.jsx(Yn,{to:"/offices",children:"Offices"}),S.jsx(Yn,{to:"/admin",className:"px-3 py-1 rounded bg-primary text-primary-foreground",children:""})]})]}),S.jsxs("section",{className:"py-16 text-center",children:[S.jsx("h1",{className:"text-4xl md:text-6xl font-bold",children:e["hero.title"]??""}),S.jsx("p",{className:"mt-4 text-muted-foreground",children:e["hero.subtitle"]??"URL"}),S.jsxs("div",{className:"mt-8 flex gap-4 justify-center",children:[S.jsx(Yn,{to:e["cta.primary.href"]??"/reserve",children:S.jsx(ey,{children:e["cta.primary.label"]??""})}),S.jsx("a",{href:e["cta.secondary.href"]??"#features",children:S.jsx(ey,{variant:"secondary",children:e["cta.secondary.label"]??""})})]})]})]})}function Qz(){return S.jsx("div",{children:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"})}function Jz(t){return S.jsx("div",{children:S.jsx("h1",{children:"fdfdsafdsafdsafdsafdsafdsafdsa"})})}function Zz(){return S.jsx("footer",{className:"border-t border-slate-200 py-10",children:S.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-4",children:[S.jsxs("div",{className:"text-sm text-slate-500",children:[" ",new Date().getFullYear()," PLASMIC"]}),S.jsx("div",{className:"text-xs text-slate-400",children:"/law, /beauty, /edu  ?v=law "})]})})}function e8(t){const e=J7(t.vertical),n=b.useMemo(()=>Uk[e]??Uk.default,[e]);return S.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-900",children:[S.jsx(nz,{badge:n.badge,vertical:e}),S.jsx(iz,{headline:n.headline,subhead:n.subhead,bullets:n.heroBullets,trust:n.trust,reserveHref:n.PublicReserve}),S.jsx(Xz,{features:n.features}),S.jsx(rz,{signupHref:n.signupLink}),S.jsx(Qz,{}),S.jsx(Jz,{items:n.faq}),S.jsx(Zz,{})]})}const t8=Zn;function n8(){const[t,e]=b.useState([]),[n,i]=b.useState(1),[a,o]=b.useState(""),[l,u]=b.useState(""),[d,h]=b.useState(""),[m,g]=b.useState(null);return b.useEffect(()=>{(async()=>{const y=new URLSearchParams({page:String(n),q:a,region:l,type:d}),T=await t8.get(`/public/tenants/list?${y}`);e(T.data),g(T.meta)})()},[n,a,l,d]),S.jsxs("div",{className:"mx-auto max-w-5xl p-6",children:[S.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),S.jsxs("div",{className:"flex gap-2 mb-6",children:[S.jsx("input",{type:"text",placeholder:"",value:a,onChange:y=>o(y.target.value),className:"border rounded p-2 flex-1"}),S.jsxs("select",{value:l,onChange:y=>u(y.target.value),className:"border rounded p-2",children:[S.jsx("option",{value:"",children:""}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]})]}),S.jsxs("select",{value:d,onChange:y=>h(y.target.value),className:"border rounded p-2",children:[S.jsx("option",{value:"",children:""}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsx("optgroup",{label:"",children:S.jsx("option",{value:"",children:""})}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]}),S.jsxs("optgroup",{label:"",children:[S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""}),S.jsx("option",{value:"",children:""})]})]})]}),S.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:t.map(y=>S.jsxs("div",{className:"border rounded-xl p-4",children:[S.jsx("div",{className:"font-semibold",children:y.display_name}),S.jsxs("div",{className:"text-sm text-slate-500 mb-3",children:[y.region,"",y.type," /s/",y.slug]}),S.jsxs("div",{className:"flex gap-2",children:[y.home_url?S.jsx("a",{className:"btn btn-light",href:y.home_url,target:"_blank",rel:"noreferrer",children:"HP"}):S.jsx("a",{className:"btn btn-light",href:`/s/${y.slug}`,children:""}),S.jsx("a",{className:"btn btn-primary",href:`/s/${y.slug}/reserve`,children:""})]})]},y.id))}),m&&S.jsx("div",{className:"flex justify-center gap-2 mt-6",children:Array.from({length:m.total_pages},(y,T)=>T+1).map(y=>S.jsx("button",{onClick:()=>i(y),className:`px-3 py-1 rounded ${y===n?"bg-indigo-600 text-white":"bg-slate-100"}`,children:y},y))})]})}const i8=Zn;function r8(){const t=qs(),{slug:e}=lu(),[n]=QP(),i=e||n.get("slug")||"",[a,o]=b.useState(null),[l,u]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{if(!i)throw new Error("no-slug");const d=await i8.get(`/public/tenants/resolve?slug=${encodeURIComponent(i)}`);if(!d.ok)throw new Error("resolve-failed");const h=await d.json();o(h)}catch{t("/offices",{replace:!0,state:{msg:""}})}finally{u(!1)}})()},[i,t]),{tenant:a,loading:l}}function a8(){const{tenant:t,loading:e}=r8();return e?S.jsx("div",{className:"p-8 text-center",children:""}):t?S.jsxs("div",{className:"mx-auto max-w-5xl p-6",children:[S.jsx("h1",{className:"text-2xl font-bold mb-4",children:t.display_name}),S.jsx("p",{className:"text-slate-600 mb-6",children:""}),S.jsx("a",{className:"btn btn-primary",href:`/s/${t.slug}/reserve`,children:""})]}):null}const Og="/api".trim(),s8=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16",children:S.jsx("g",{fill:"#E184DF",children:S.jsx("path",{d:"M127,50 L126,50 C123.238576,50 121,47.7614237 121,45 C121,42.2385763 123.238576,40 126,40 L135,40 L135,56 L133,56 L133,42 L129,42 L129,56 L127,56 L127,50 Z M127,48 L127,42 L126,42 C124.343146,42 123,43.3431458 123,45 C123,46.6568542 124.343146,48 126,48 L127,48 Z",transform:"translate(-121 -40)"})})});function o8(){const[t,e]=b.useState(""),[n,i]=b.useState(""),[a,o]=b.useState(""),[l,u]=b.useState("price_1S8tvULGwIgaytjJcfgsahwn"),[d,h]=b.useState(!1),[m,g]=b.useState(null),[y,T]=b.useState(null);b.useEffect(()=>{const C=new URLSearchParams(location.search);C.get("success")&&T(""),C.get("canceled")&&T("")},[]);async function E(C){C.preventDefault(),g(null),T(null),h(!0);try{const w=Og&&Og!=="/"?`${Og}/signup-and-checkout`:"/signup-and-checkout",_=await fetch(w,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({name:t,email:n,password:a,price_id:l})}),N=await _.json().catch(()=>({}));if(!_.ok)throw new Error(N?.message||`: ${_.status}`);if(!N?.url)throw new Error("Checkout URL ");window.location.href=N.url}catch(w){g(w?.message||"")}finally{h(!1)}}return S.jsx("div",{className:"min-h-screen grid place-items-center bg-slate-50 px-4",children:S.jsxs("form",{onSubmit:E,className:"w-full max-w-sm rounded-2xl border bg-white p-6 shadow-sm",children:[S.jsx("section",{className:"mb-4",children:S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("div",{className:"mt-1",children:S.jsx(s8,{})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-base font-semibold",children:""}),S.jsx("p",{className:"text-sm text-slate-600",children:"1119,800"})]})]})}),S.jsx("h1",{className:"text-xl font-semibold",children:" & "}),S.jsx("input",{className:"mt-4 w-full rounded-xl border px-4 py-3",placeholder:"",value:t,onChange:C=>e(C.target.value)}),S.jsx("input",{className:"mt-3 w-full rounded-xl border px-4 py-3",placeholder:"",value:n,onChange:C=>i(C.target.value),autoComplete:"email"}),S.jsx("input",{className:"mt-3 w-full rounded-xl border px-4 py-3",type:"password",placeholder:"",value:a,onChange:C=>o(C.target.value),autoComplete:"new-password"}),y&&S.jsx("p",{className:"mt-3 text-sm text-emerald-600",children:y}),m&&S.jsx("p",{className:"mt-3 text-sm text-red-600",children:m}),S.jsx("button",{className:"mt-5 w-full rounded-xl bg-indigo-600 text-white py-3 hover:bg-indigo-500 disabled:opacity-60",disabled:d||!t||!n||!a||!l,children:d?"":""}),S.jsxs("p",{className:"mt-4 text-center text-sm text-slate-500",children:[""," ",S.jsx("a",{className:"text-indigo-600 underline",href:"/admin/login",children:""})]})]})})}const l8=Zn;function c8(){const t=qs();return b.useEffect(()=>{const e=new URLSearchParams(location.search).get("session_id");e&&(async()=>(await l8.get(`/api/billing/thanks?session_id=${e}`),t("/admin/site",{replace:!0})))()},[]),S.jsx("div",{className:"p-8",children:""})}function u8(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},a=e.attributes[n]||{},o=e.elements[n];!gi(o)||!mr(o)||(Object.assign(o.style,i),Object.keys(a).forEach(function(l){var u=a[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function d8(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var a=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),u=l.reduce(function(d,h){return d[h]="",d},{});!gi(a)||!mr(a)||(Object.assign(a.style,u),Object.keys(o).forEach(function(d){a.removeAttribute(d)}))})}}const fb={name:"applyStyles",enabled:!0,phase:"write",fn:u8,effect:d8,requires:["computeStyles"]};var f8=[sb,ub,ab,fb],h8=Ah({defaultModifiers:f8}),m8=[sb,ub,ab,fb,FR,BR,VR,IR,zR],hb=Ah({defaultModifiers:m8});const tA=Object.freeze(Object.defineProperty({__proto__:null,afterMain:_R,afterRead:CR,afterWrite:AR,applyStyles:fb,arrow:IR,auto:xh,basePlacements:Sl,beforeMain:kR,beforeRead:TR,beforeWrite:xR,bottom:ei,clippingParents:bR,computeStyles:ab,createPopper:hb,createPopperBase:P7,createPopperLite:h8,detectOverflow:dl,end:ol,eventListeners:sb,flip:BR,hide:zR,left:bn,main:wR,modifierPhases:OR,offset:FR,placements:tb,popper:Fo,popperGenerator:Ah,popperOffsets:ub,preventOverflow:VR,read:ER,reference:SR,right:ti,start:Fs,top:yn,variationPlacements:Yv,viewport:eb,write:RR},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Aa=new Map,Ng={set(t,e,n){Aa.has(t)||Aa.set(t,new Map);const i=Aa.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return Aa.has(t)&&Aa.get(t).get(e)||null},remove(t,e){if(!Aa.has(t))return;const n=Aa.get(t);n.delete(e),n.size===0&&Aa.delete(t)}},p8=1e6,g8=1e3,ty="transitionend",nA=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),v8=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),y8=t=>{do t+=Math.floor(Math.random()*p8);while(document.getElementById(t));return t},b8=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),a=Number.parseFloat(n);return!i&&!a?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*g8)},iA=t=>{t.dispatchEvent(new Event(ty))},qr=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Ha=t=>qr(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(nA(t)):null,Cl=t=>{if(!qr(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},qa=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",rA=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?rA(t.parentNode):null},Qf=()=>{},Su=t=>{t.offsetHeight},aA=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Dg=[],S8=t=>{document.readyState==="loading"?(Dg.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Dg)e()}),Dg.push(t)):t()},yi=()=>document.documentElement.dir==="rtl",Ti=t=>{S8(()=>{const e=aA();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},An=(t,e=[],n=t)=>typeof t=="function"?t.call(...e):n,sA=(t,e,n=!0)=>{if(!n){An(t);return}const a=b8(e)+5;let o=!1;const l=({target:u})=>{u===e&&(o=!0,e.removeEventListener(ty,l),An(t))};e.addEventListener(ty,l),setTimeout(()=>{o||iA(e)},a)},mb=(t,e,n,i)=>{const a=t.length;let o=t.indexOf(e);return o===-1?!n&&i?t[a-1]:t[0]:(o+=n?1:-1,i&&(o=(o+a)%a),t[Math.max(0,Math.min(o,a-1))])},T8=/[^.]*(?=\..*)\.|.*/,E8=/\..*/,C8=/::\d+$/,Pg={};let Gk=1;const oA={mouseenter:"mouseover",mouseleave:"mouseout"},k8=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function lA(t,e){return e&&`${e}::${Gk++}`||t.uidEvent||Gk++}function cA(t){const e=lA(t);return t.uidEvent=e,Pg[e]=Pg[e]||{},Pg[e]}function w8(t,e){return function n(i){return pb(i,{delegateTarget:t}),n.oneOff&&me.off(t,i.type,e),e.apply(t,[i])}}function _8(t,e,n){return function i(a){const o=t.querySelectorAll(e);for(let{target:l}=a;l&&l!==this;l=l.parentNode)for(const u of o)if(u===l)return pb(a,{delegateTarget:l}),i.oneOff&&me.off(t,a.type,e,n),n.apply(l,[a])}}function uA(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function dA(t,e,n){const i=typeof e=="string",a=i?n:e||n;let o=fA(t);return k8.has(o)||(o=t),[i,a,o]}function Kk(t,e,n,i,a){if(typeof e!="string"||!t)return;let[o,l,u]=dA(e,n,i);e in oA&&(l=(E=>function(C){if(!C.relatedTarget||C.relatedTarget!==C.delegateTarget&&!C.delegateTarget.contains(C.relatedTarget))return E.call(this,C)})(l));const d=cA(t),h=d[u]||(d[u]={}),m=uA(h,l,o?n:null);if(m){m.oneOff=m.oneOff&&a;return}const g=lA(l,e.replace(T8,"")),y=o?_8(t,n,l):w8(t,l);y.delegationSelector=o?n:null,y.callable=l,y.oneOff=a,y.uidEvent=g,h[g]=y,t.addEventListener(u,y,o)}function ny(t,e,n,i,a){const o=uA(e[n],i,a);o&&(t.removeEventListener(n,o,!!a),delete e[n][o.uidEvent])}function x8(t,e,n,i){const a=e[n]||{};for(const[o,l]of Object.entries(a))o.includes(i)&&ny(t,e,n,l.callable,l.delegationSelector)}function fA(t){return t=t.replace(E8,""),oA[t]||t}const me={on(t,e,n,i){Kk(t,e,n,i,!1)},one(t,e,n,i){Kk(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;const[a,o,l]=dA(e,n,i),u=l!==e,d=cA(t),h=d[l]||{},m=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(h).length)return;ny(t,d,l,o,a?n:null);return}if(m)for(const g of Object.keys(d))x8(t,d,g,e.slice(1));for(const[g,y]of Object.entries(h)){const T=g.replace(C8,"");(!u||e.includes(T))&&ny(t,d,l,y.callable,y.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const i=aA(),a=fA(e),o=e!==a;let l=null,u=!0,d=!0,h=!1;o&&i&&(l=i.Event(e,n),i(t).trigger(l),u=!l.isPropagationStopped(),d=!l.isImmediatePropagationStopped(),h=l.isDefaultPrevented());const m=pb(new Event(e,{bubbles:u,cancelable:!0}),n);return h&&m.preventDefault(),d&&t.dispatchEvent(m),m.defaultPrevented&&l&&l.preventDefault(),m}};function pb(t,e={}){for(const[n,i]of Object.entries(e))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}function Yk(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Mg(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const $r={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Mg(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Mg(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let a=i.replace(/^bs/,"");a=a.charAt(0).toLowerCase()+a.slice(1),e[a]=Yk(t.dataset[i])}return e},getDataAttribute(t,e){return Yk(t.getAttribute(`data-bs-${Mg(e)}`))}};class Tu{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const i=qr(n)?$r.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...qr(n)?$r.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[i,a]of Object.entries(n)){const o=e[i],l=qr(o)?"element":v8(o);if(!new RegExp(a).test(l))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${l}" but expected type "${a}".`)}}}const R8="5.3.8";class Ki extends Tu{constructor(e,n){super(),e=Ha(e),e&&(this._element=e,this._config=this._getConfig(n),Ng.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ng.remove(this._element,this.constructor.DATA_KEY),me.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){sA(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Ng.get(Ha(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return R8}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Lg=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>nA(n)).join(","):null},Le={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!qa(n)&&Cl(n))},getSelectorFromElement(t){const e=Lg(t);return e&&Le.findOne(e)?e:null},getElementFromSelector(t){const e=Lg(t);return e?Le.findOne(e):null},getMultipleElementsFromSelector(t){const e=Lg(t);return e?Le.find(e):[]}},Oh=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;me.on(document,n,`[data-bs-dismiss="${i}"]`,function(a){if(["A","AREA"].includes(this.tagName)&&a.preventDefault(),qa(this))return;const o=Le.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(o)[e]()})},A8="alert",O8="bs.alert",hA=`.${O8}`,N8=`close${hA}`,D8=`closed${hA}`,P8="fade",M8="show";class Nh extends Ki{static get NAME(){return A8}close(){if(me.trigger(this._element,N8).defaultPrevented)return;this._element.classList.remove(M8);const n=this._element.classList.contains(P8);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),me.trigger(this._element,D8),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Nh.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Oh(Nh,"close");Ti(Nh);const L8="button",I8="bs.button",j8=`.${I8}`,U8=".data-api",B8="active",Wk='[data-bs-toggle="button"]',z8=`click${j8}${U8}`;class Dh extends Ki{static get NAME(){return L8}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(B8))}static jQueryInterface(e){return this.each(function(){const n=Dh.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}me.on(document,z8,Wk,t=>{t.preventDefault();const e=t.target.closest(Wk);Dh.getOrCreateInstance(e).toggle()});Ti(Dh);const F8="swipe",kl=".bs.swipe",V8=`touchstart${kl}`,H8=`touchmove${kl}`,q8=`touchend${kl}`,$8=`pointerdown${kl}`,G8=`pointerup${kl}`,K8="touch",Y8="pen",W8="pointer-event",X8=40,Q8={endCallback:null,leftCallback:null,rightCallback:null},J8={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Jf extends Tu{constructor(e,n){super(),this._element=e,!(!e||!Jf.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Q8}static get DefaultType(){return J8}static get NAME(){return F8}dispose(){me.off(this._element,kl)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),An(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=X8)return;const n=e/this._deltaX;this._deltaX=0,n&&An(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(me.on(this._element,$8,e=>this._start(e)),me.on(this._element,G8,e=>this._end(e)),this._element.classList.add(W8)):(me.on(this._element,V8,e=>this._start(e)),me.on(this._element,H8,e=>this._move(e)),me.on(this._element,q8,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Y8||e.pointerType===K8)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Z8="carousel",e9="bs.carousel",Xa=`.${e9}`,mA=".data-api",t9="ArrowLeft",n9="ArrowRight",i9=500,jc="next",Uo="prev",Vo="left",_f="right",r9=`slide${Xa}`,Ig=`slid${Xa}`,a9=`keydown${Xa}`,s9=`mouseenter${Xa}`,o9=`mouseleave${Xa}`,l9=`dragstart${Xa}`,c9=`load${Xa}${mA}`,u9=`click${Xa}${mA}`,pA="carousel",Qd="active",d9="slide",f9="carousel-item-end",h9="carousel-item-start",m9="carousel-item-next",p9="carousel-item-prev",gA=".active",vA=".carousel-item",g9=gA+vA,v9=".carousel-item img",y9=".carousel-indicators",b9="[data-bs-slide], [data-bs-slide-to]",S9='[data-bs-ride="carousel"]',T9={[t9]:_f,[n9]:Vo},E9={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},C9={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Eu extends Ki{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Le.findOne(y9,this._element),this._addEventListeners(),this._config.ride===pA&&this.cycle()}static get Default(){return E9}static get DefaultType(){return C9}static get NAME(){return Z8}next(){this._slide(jc)}nextWhenVisible(){!document.hidden&&Cl(this._element)&&this.next()}prev(){this._slide(Uo)}pause(){this._isSliding&&iA(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){me.one(this._element,Ig,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){me.one(this._element,Ig,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const a=e>i?jc:Uo;this._slide(a,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&me.on(this._element,a9,e=>this._keydown(e)),this._config.pause==="hover"&&(me.on(this._element,s9,()=>this.pause()),me.on(this._element,o9,()=>this._maybeEnableCycle())),this._config.touch&&Jf.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Le.find(v9,this._element))me.on(i,l9,a=>a.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Vo)),rightCallback:()=>this._slide(this._directionToOrder(_f)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),i9+this._config.interval))}};this._swipeHelper=new Jf(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=T9[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Le.findOne(gA,this._indicatorsElement);n.classList.remove(Qd),n.removeAttribute("aria-current");const i=Le.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Qd),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const i=this._getActive(),a=e===jc,o=n||mb(this._getItems(),i,a,this._config.wrap);if(o===i)return;const l=this._getItemIndex(o),u=T=>me.trigger(this._element,T,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:l});if(u(r9).defaultPrevented||!i||!o)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(l),this._activeElement=o;const m=a?h9:f9,g=a?m9:p9;o.classList.add(g),Su(o),i.classList.add(m),o.classList.add(m);const y=()=>{o.classList.remove(m,g),o.classList.add(Qd),i.classList.remove(Qd,g,m),this._isSliding=!1,u(Ig)};this._queueCallback(y,i,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(d9)}_getActive(){return Le.findOne(g9,this._element)}_getItems(){return Le.find(vA,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return yi()?e===Vo?Uo:jc:e===Vo?jc:Uo}_orderToDirection(e){return yi()?e===Uo?Vo:_f:e===Uo?_f:Vo}static jQueryInterface(e){return this.each(function(){const n=Eu.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}me.on(document,u9,b9,function(t){const e=Le.getElementFromSelector(this);if(!e||!e.classList.contains(pA))return;t.preventDefault();const n=Eu.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if($r.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});me.on(window,c9,()=>{const t=Le.find(S9);for(const e of t)Eu.getOrCreateInstance(e)});Ti(Eu);const k9="collapse",w9="bs.collapse",Cu=`.${w9}`,_9=".data-api",x9=`show${Cu}`,R9=`shown${Cu}`,A9=`hide${Cu}`,O9=`hidden${Cu}`,N9=`click${Cu}${_9}`,jg="show",Go="collapse",Jd="collapsing",D9="collapsed",P9=`:scope .${Go} .${Go}`,M9="collapse-horizontal",L9="width",I9="height",j9=".collapse.show, .collapse.collapsing",iy='[data-bs-toggle="collapse"]',U9={parent:null,toggle:!0},B9={parent:"(null|element)",toggle:"boolean"};class su extends Ki{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const i=Le.find(iy);for(const a of i){const o=Le.getSelectorFromElement(a),l=Le.find(o).filter(u=>u===this._element);o!==null&&l.length&&this._triggerArray.push(a)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return U9}static get DefaultType(){return B9}static get NAME(){return k9}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(j9).filter(u=>u!==this._element).map(u=>su.getOrCreateInstance(u,{toggle:!1}))),e.length&&e[0]._isTransitioning||me.trigger(this._element,x9).defaultPrevented)return;for(const u of e)u.hide();const i=this._getDimension();this._element.classList.remove(Go),this._element.classList.add(Jd),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const a=()=>{this._isTransitioning=!1,this._element.classList.remove(Jd),this._element.classList.add(Go,jg),this._element.style[i]="",me.trigger(this._element,R9)},l=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(a,this._element,!0),this._element.style[i]=`${this._element[l]}px`}hide(){if(this._isTransitioning||!this._isShown()||me.trigger(this._element,A9).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Su(this._element),this._element.classList.add(Jd),this._element.classList.remove(Go,jg);for(const a of this._triggerArray){const o=Le.getElementFromSelector(a);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([a],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Jd),this._element.classList.add(Go),me.trigger(this._element,O9)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(jg)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Ha(e.parent),e}_getDimension(){return this._element.classList.contains(M9)?L9:I9}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(iy);for(const n of e){const i=Le.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){const n=Le.find(P9,this._config.parent);return Le.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const i of e)i.classList.toggle(D9,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const i=su.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}me.on(document,N9,iy,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of Le.getMultipleElementsFromSelector(this))su.getOrCreateInstance(e,{toggle:!1}).toggle()});Ti(su);const Xk="dropdown",z9="bs.dropdown",Gs=`.${z9}`,gb=".data-api",F9="Escape",Qk="Tab",V9="ArrowUp",Jk="ArrowDown",H9=2,q9=`hide${Gs}`,$9=`hidden${Gs}`,G9=`show${Gs}`,K9=`shown${Gs}`,yA=`click${Gs}${gb}`,bA=`keydown${Gs}${gb}`,Y9=`keyup${Gs}${gb}`,Ho="show",W9="dropup",X9="dropend",Q9="dropstart",J9="dropup-center",Z9="dropdown-center",_s='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',eF=`${_s}.${Ho}`,xf=".dropdown-menu",tF=".navbar",nF=".navbar-nav",iF=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",rF=yi()?"top-end":"top-start",aF=yi()?"top-start":"top-end",sF=yi()?"bottom-end":"bottom-start",oF=yi()?"bottom-start":"bottom-end",lF=yi()?"left-start":"right-start",cF=yi()?"right-start":"left-start",uF="top",dF="bottom",fF={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},hF={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class dr extends Ki{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Le.next(this._element,xf)[0]||Le.prev(this._element,xf)[0]||Le.findOne(xf,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return fF}static get DefaultType(){return hF}static get NAME(){return Xk}toggle(){return this._isShown()?this.hide():this.show()}show(){if(qa(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!me.trigger(this._element,G9,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(nF))for(const i of[].concat(...document.body.children))me.on(i,"mouseover",Qf);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ho),this._element.classList.add(Ho),me.trigger(this._element,K9,e)}}hide(){if(qa(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!me.trigger(this._element,q9,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))me.off(i,"mouseover",Qf);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ho),this._element.classList.remove(Ho),this._element.setAttribute("aria-expanded","false"),$r.removeDataAttribute(this._menu,"popper"),me.trigger(this._element,$9,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!qr(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Xk.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof tA>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:qr(this._config.reference)?e=Ha(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=hb(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Ho)}_getPlacement(){const e=this._parent;if(e.classList.contains(X9))return lF;if(e.classList.contains(Q9))return cF;if(e.classList.contains(J9))return uF;if(e.classList.contains(Z9))return dF;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(W9)?n?aF:rF:n?oF:sF}_detectNavbar(){return this._element.closest(tF)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&($r.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...An(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:n}){const i=Le.find(iF,this._menu).filter(a=>Cl(a));i.length&&mb(i,n,e===Jk,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=dr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===H9||e.type==="keyup"&&e.key!==Qk)return;const n=Le.find(eF);for(const i of n){const a=dr.getInstance(i);if(!a||a._config.autoClose===!1)continue;const o=e.composedPath(),l=o.includes(a._menu);if(o.includes(a._element)||a._config.autoClose==="inside"&&!l||a._config.autoClose==="outside"&&l||a._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Qk||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const u={relatedTarget:a._element};e.type==="click"&&(u.clickEvent=e),a._completeHide(u)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),i=e.key===F9,a=[V9,Jk].includes(e.key);if(!a&&!i||n&&!i)return;e.preventDefault();const o=this.matches(_s)?this:Le.prev(this,_s)[0]||Le.next(this,_s)[0]||Le.findOne(_s,e.delegateTarget.parentNode),l=dr.getOrCreateInstance(o);if(a){e.stopPropagation(),l.show(),l._selectMenuItem(e);return}l._isShown()&&(e.stopPropagation(),l.hide(),o.focus())}}me.on(document,bA,_s,dr.dataApiKeydownHandler);me.on(document,bA,xf,dr.dataApiKeydownHandler);me.on(document,yA,dr.clearMenus);me.on(document,Y9,dr.clearMenus);me.on(document,yA,_s,function(t){t.preventDefault(),dr.getOrCreateInstance(this).toggle()});Ti(dr);const SA="backdrop",mF="fade",Zk="show",ew=`mousedown.bs.${SA}`,pF={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gF={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class TA extends Tu{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return pF}static get DefaultType(){return gF}static get NAME(){return SA}show(e){if(!this._config.isVisible){An(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Su(n),n.classList.add(Zk),this._emulateAnimation(()=>{An(e)})}hide(e){if(!this._config.isVisible){An(e);return}this._getElement().classList.remove(Zk),this._emulateAnimation(()=>{this.dispose(),An(e)})}dispose(){this._isAppended&&(me.off(this._element,ew),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(mF),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ha(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),me.on(e,ew,()=>{An(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){sA(e,this._getElement(),this._config.isAnimated)}}const vF="focustrap",yF="bs.focustrap",Zf=`.${yF}`,bF=`focusin${Zf}`,SF=`keydown.tab${Zf}`,TF="Tab",EF="forward",tw="backward",CF={autofocus:!0,trapElement:null},kF={autofocus:"boolean",trapElement:"element"};class EA extends Tu{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return CF}static get DefaultType(){return kF}static get NAME(){return vF}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),me.off(document,Zf),me.on(document,bF,e=>this._handleFocusin(e)),me.on(document,SF,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,me.off(document,Zf))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const i=Le.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===tw?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===TF&&(this._lastTabNavDirection=e.shiftKey?tw:EF)}}const nw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",iw=".sticky-top",Zd="padding-right",rw="margin-right";class ry{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Zd,n=>n+e),this._setElementAttributes(nw,Zd,n=>n+e),this._setElementAttributes(iw,rw,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Zd),this._resetElementAttributes(nw,Zd),this._resetElementAttributes(iw,rw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){const a=this.getWidth(),o=l=>{if(l!==this._element&&window.innerWidth>l.clientWidth+a)return;this._saveInitialAttribute(l,n);const u=window.getComputedStyle(l).getPropertyValue(n);l.style.setProperty(n,`${i(Number.parseFloat(u))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){const i=e.style.getPropertyValue(n);i&&$r.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){const i=a=>{const o=$r.getDataAttribute(a,n);if(o===null){a.style.removeProperty(n);return}$r.removeDataAttribute(a,n),a.style.setProperty(n,o)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(qr(e)){n(e);return}for(const i of Le.find(e,this._element))n(i)}}const wF="modal",_F="bs.modal",bi=`.${_F}`,xF=".data-api",RF="Escape",AF=`hide${bi}`,OF=`hidePrevented${bi}`,CA=`hidden${bi}`,kA=`show${bi}`,NF=`shown${bi}`,DF=`resize${bi}`,PF=`click.dismiss${bi}`,MF=`mousedown.dismiss${bi}`,LF=`keydown.dismiss${bi}`,IF=`click${bi}${xF}`,aw="modal-open",jF="fade",sw="show",Ug="modal-static",UF=".modal.show",BF=".modal-dialog",zF=".modal-body",FF='[data-bs-toggle="modal"]',VF={backdrop:!0,focus:!0,keyboard:!0},HF={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class fl extends Ki{constructor(e,n){super(e,n),this._dialog=Le.findOne(BF,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ry,this._addEventListeners()}static get Default(){return VF}static get DefaultType(){return HF}static get NAME(){return wF}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||me.trigger(this._element,kA,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(aw),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||me.trigger(this._element,AF).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(sw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){me.off(window,bi),me.off(this._dialog,bi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new TA({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new EA({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Le.findOne(zF,this._dialog);n&&(n.scrollTop=0),Su(this._element),this._element.classList.add(sw);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,me.trigger(this._element,NF,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){me.on(this._element,LF,e=>{if(e.key===RF){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),me.on(window,DF,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),me.on(this._element,MF,e=>{me.one(this._element,PF,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(aw),this._resetAdjustments(),this._scrollBar.reset(),me.trigger(this._element,CA)})}_isAnimated(){return this._element.classList.contains(jF)}_triggerBackdropTransition(){if(me.trigger(this._element,OF).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Ug)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Ug),this._queueCallback(()=>{this._element.classList.remove(Ug),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){const a=yi()?"paddingLeft":"paddingRight";this._element.style[a]=`${n}px`}if(!i&&e){const a=yi()?"paddingRight":"paddingLeft";this._element.style[a]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const i=fl.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}}me.on(document,IF,FF,function(t){const e=Le.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),me.one(e,kA,a=>{a.defaultPrevented||me.one(e,CA,()=>{Cl(this)&&this.focus()})});const n=Le.findOne(UF);n&&fl.getInstance(n).hide(),fl.getOrCreateInstance(e).toggle(this)});Oh(fl);Ti(fl);const qF="offcanvas",$F="bs.offcanvas",Jr=`.${$F}`,wA=".data-api",GF=`load${Jr}${wA}`,KF="Escape",ow="show",lw="showing",cw="hiding",YF="offcanvas-backdrop",_A=".offcanvas.show",WF=`show${Jr}`,XF=`shown${Jr}`,QF=`hide${Jr}`,uw=`hidePrevented${Jr}`,xA=`hidden${Jr}`,JF=`resize${Jr}`,ZF=`click${Jr}${wA}`,eV=`keydown.dismiss${Jr}`,tV='[data-bs-toggle="offcanvas"]',nV={backdrop:!0,keyboard:!0,scroll:!1},iV={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class $a extends Ki{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return nV}static get DefaultType(){return iV}static get NAME(){return qF}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||me.trigger(this._element,WF,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ry().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(lw);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(ow),this._element.classList.remove(lw),me.trigger(this._element,XF,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||me.trigger(this._element,QF).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(cw),this._backdrop.hide();const n=()=>{this._element.classList.remove(ow,cw),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ry().reset(),me.trigger(this._element,xA)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){me.trigger(this._element,uw);return}this.hide()},n=!!this._config.backdrop;return new TA({className:YF,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new EA({trapElement:this._element})}_addEventListeners(){me.on(this._element,eV,e=>{if(e.key===KF){if(this._config.keyboard){this.hide();return}me.trigger(this._element,uw)}})}static jQueryInterface(e){return this.each(function(){const n=$a.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}me.on(document,ZF,tV,function(t){const e=Le.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),qa(this))return;me.one(e,xA,()=>{Cl(this)&&this.focus()});const n=Le.findOne(_A);n&&n!==e&&$a.getInstance(n).hide(),$a.getOrCreateInstance(e).toggle(this)});me.on(window,GF,()=>{for(const t of Le.find(_A))$a.getOrCreateInstance(t).show()});me.on(window,JF,()=>{for(const t of Le.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&$a.getOrCreateInstance(t).hide()});Oh($a);Ti($a);const rV=/^aria-[\w-]*$/i,RA={"*":["class","dir","id","lang","role",rV],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},aV=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),sV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,oV=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?aV.has(n)?!!sV.test(t.nodeValue):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))};function lV(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const a=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...a.body.querySelectorAll("*"));for(const l of o){const u=l.nodeName.toLowerCase();if(!Object.keys(e).includes(u)){l.remove();continue}const d=[].concat(...l.attributes),h=[].concat(e["*"]||[],e[u]||[]);for(const m of d)oV(m,h)||l.removeAttribute(m.nodeName)}return a.body.innerHTML}const cV="TemplateFactory",uV={allowList:RA,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dV={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},fV={entry:"(string|element|function|null)",selector:"(string|element)"};class hV extends Tu{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return uV}static get DefaultType(){return dV}static get NAME(){return cV}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[a,o]of Object.entries(this._config.content))this._setContent(e,o,a);const n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},fV)}_setContent(e,n,i){const a=Le.findOne(i,e);if(a){if(n=this._resolvePossibleFunction(n),!n){a.remove();return}if(qr(n)){this._putElementInTemplate(Ha(n),a);return}if(this._config.html){a.innerHTML=this._maybeSanitize(n);return}a.textContent=n}}_maybeSanitize(e){return this._config.sanitize?lV(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return An(e,[void 0,this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const mV="tooltip",pV=new Set(["sanitize","allowList","sanitizeFn"]),Bg="fade",gV="modal",ef="show",vV=".tooltip-inner",dw=`.${gV}`,fw="hide.bs.modal",Uc="hover",zg="focus",Fg="click",yV="manual",bV="hide",SV="hidden",TV="show",EV="shown",CV="inserted",kV="click",wV="focusin",_V="focusout",xV="mouseenter",RV="mouseleave",AV={AUTO:"auto",TOP:"top",RIGHT:yi()?"left":"right",BOTTOM:"bottom",LEFT:yi()?"right":"left"},OV={allowList:RA,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},NV={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class wl extends Ki{constructor(e,n){if(typeof tA>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return OV}static get DefaultType(){return NV}static get NAME(){return mV}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),me.off(this._element.closest(dw),fw,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=me.trigger(this._element,this.constructor.eventName(TV)),i=(rA(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const a=this._getTipElement();this._element.setAttribute("aria-describedby",a.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(a),me.trigger(this._element,this.constructor.eventName(CV))),this._popper=this._createPopper(a),a.classList.add(ef),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))me.on(u,"mouseover",Qf);const l=()=>{me.trigger(this._element,this.constructor.eventName(EV)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(l,this.tip,this._isAnimated())}hide(){if(!this._isShown()||me.trigger(this._element,this.constructor.eventName(bV)).defaultPrevented)return;if(this._getTipElement().classList.remove(ef),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))me.off(a,"mouseover",Qf);this._activeTrigger[Fg]=!1,this._activeTrigger[zg]=!1,this._activeTrigger[Uc]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),me.trigger(this._element,this.constructor.eventName(SV)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Bg,ef),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=y8(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(Bg),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new hV({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[vV]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Bg)}_isShown(){return this.tip&&this.tip.classList.contains(ef)}_createPopper(e){const n=An(this._config.placement,[this,e,this._element]),i=AV[n.toUpperCase()];return hb(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return An(e,[this._element,this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...An(this._config.popperConfig,[void 0,n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")me.on(this._element,this.constructor.eventName(kV),this._config.selector,i=>{const a=this._initializeOnDelegatedTarget(i);a._activeTrigger[Fg]=!(a._isShown()&&a._activeTrigger[Fg]),a.toggle()});else if(n!==yV){const i=n===Uc?this.constructor.eventName(xV):this.constructor.eventName(wV),a=n===Uc?this.constructor.eventName(RV):this.constructor.eventName(_V);me.on(this._element,i,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusin"?zg:Uc]=!0,l._enter()}),me.on(this._element,a,this._config.selector,o=>{const l=this._initializeOnDelegatedTarget(o);l._activeTrigger[o.type==="focusout"?zg:Uc]=l._element.contains(o.relatedTarget),l._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},me.on(this._element.closest(dw),fw,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=$r.getDataAttributes(this._element);for(const i of Object.keys(n))pV.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Ha(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(e[n]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=wl.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Ti(wl);const DV="popover",PV=".popover-header",MV=".popover-body",LV={...wl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},IV={...wl.DefaultType,content:"(null|string|element|function)"};class vb extends wl{static get Default(){return LV}static get DefaultType(){return IV}static get NAME(){return DV}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[PV]:this._getTitle(),[MV]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=vb.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Ti(vb);const jV="scrollspy",UV="bs.scrollspy",yb=`.${UV}`,BV=".data-api",zV=`activate${yb}`,hw=`click${yb}`,FV=`load${yb}${BV}`,VV="dropdown-item",Bo="active",HV='[data-bs-spy="scroll"]',Vg="[href]",qV=".nav, .list-group",mw=".nav-link",$V=".nav-item",GV=".list-group-item",KV=`${mw}, ${$V} > ${mw}, ${GV}`,YV=".dropdown",WV=".dropdown-toggle",XV={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},QV={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ph extends Ki{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return XV}static get DefaultType(){return QV}static get NAME(){return jV}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ha(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(me.off(this._config.target,hw),me.on(this._config.target,hw,Vg,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const i=this._rootElement||window,a=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:a,behavior:"smooth"});return}i.scrollTop=a}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=l=>this._targetLinks.get(`#${l.target.id}`),i=l=>{this._previousScrollData.visibleEntryTop=l.target.offsetTop,this._process(n(l))},a=(this._rootElement||document.documentElement).scrollTop,o=a>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=a;for(const l of e){if(!l.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(l));continue}const u=l.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&u){if(i(l),!a)return;continue}!o&&!u&&i(l)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Le.find(Vg,this._config.target);for(const n of e){if(!n.hash||qa(n))continue;const i=Le.findOne(decodeURI(n.hash),this._element);Cl(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Bo),this._activateParents(e),me.trigger(this._element,zV,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(VV)){Le.findOne(WV,e.closest(YV)).classList.add(Bo);return}for(const n of Le.parents(e,qV))for(const i of Le.prev(n,KV))i.classList.add(Bo)}_clearActiveClass(e){e.classList.remove(Bo);const n=Le.find(`${Vg}.${Bo}`,e);for(const i of n)i.classList.remove(Bo)}static jQueryInterface(e){return this.each(function(){const n=Ph.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}me.on(window,FV,()=>{for(const t of Le.find(HV))Ph.getOrCreateInstance(t)});Ti(Ph);const JV="tab",ZV="bs.tab",Ks=`.${ZV}`,eH=`hide${Ks}`,tH=`hidden${Ks}`,nH=`show${Ks}`,iH=`shown${Ks}`,rH=`click${Ks}`,aH=`keydown${Ks}`,sH=`load${Ks}`,oH="ArrowLeft",pw="ArrowRight",lH="ArrowUp",gw="ArrowDown",Hg="Home",vw="End",xs="active",yw="fade",qg="show",cH="dropdown",AA=".dropdown-toggle",uH=".dropdown-menu",$g=`:not(${AA})`,dH='.list-group, .nav, [role="tablist"]',fH=".nav-item, .list-group-item",hH=`.nav-link${$g}, .list-group-item${$g}, [role="tab"]${$g}`,OA='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gg=`${hH}, ${OA}`,mH=`.${xs}[data-bs-toggle="tab"], .${xs}[data-bs-toggle="pill"], .${xs}[data-bs-toggle="list"]`;class hl extends Ki{constructor(e){super(e),this._parent=this._element.closest(dH),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),me.on(this._element,aH,n=>this._keydown(n)))}static get NAME(){return JV}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),i=n?me.trigger(n,eH,{relatedTarget:e}):null;me.trigger(e,nH,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(xs),this._activate(Le.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(qg);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),me.trigger(e,iH,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(yw))}_deactivate(e,n){if(!e)return;e.classList.remove(xs),e.blur(),this._deactivate(Le.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(qg);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),me.trigger(e,tH,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(yw))}_keydown(e){if(![oH,pw,lH,gw,Hg,vw].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(a=>!qa(a));let i;if([Hg,vw].includes(e.key))i=n[e.key===Hg?0:n.length-1];else{const a=[pw,gw].includes(e.key);i=mb(n,e.target,a,!0)}i&&(i.focus({preventScroll:!0}),hl.getOrCreateInstance(i).show())}_getChildren(){return Le.find(Gg,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=Le.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const i=this._getOuterElement(e);if(!i.classList.contains(cH))return;const a=(o,l)=>{const u=Le.findOne(o,i);u&&u.classList.toggle(l,n)};a(AA,xs),a(uH,qg),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(xs)}_getInnerElement(e){return e.matches(Gg)?e:Le.findOne(Gg,e)}_getOuterElement(e){return e.closest(fH)||e}static jQueryInterface(e){return this.each(function(){const n=hl.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}me.on(document,rH,OA,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!qa(this)&&hl.getOrCreateInstance(this).show()});me.on(window,sH,()=>{for(const t of Le.find(mH))hl.getOrCreateInstance(t)});Ti(hl);const pH="toast",gH="bs.toast",Qa=`.${gH}`,vH=`mouseover${Qa}`,yH=`mouseout${Qa}`,bH=`focusin${Qa}`,SH=`focusout${Qa}`,TH=`hide${Qa}`,EH=`hidden${Qa}`,CH=`show${Qa}`,kH=`shown${Qa}`,wH="fade",bw="hide",tf="show",nf="showing",_H={animation:"boolean",autohide:"boolean",delay:"number"},xH={animation:!0,autohide:!0,delay:5e3};class Mh extends Ki{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return xH}static get DefaultType(){return _H}static get NAME(){return pH}show(){if(me.trigger(this._element,CH).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(wH);const n=()=>{this._element.classList.remove(nf),me.trigger(this._element,kH),this._maybeScheduleHide()};this._element.classList.remove(bw),Su(this._element),this._element.classList.add(tf,nf),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||me.trigger(this._element,TH).defaultPrevented)return;const n=()=>{this._element.classList.add(bw),this._element.classList.remove(nf,tf),me.trigger(this._element,EH)};this._element.classList.add(nf),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(tf),super.dispose()}isShown(){return this._element.classList.contains(tf)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){me.on(this._element,vH,e=>this._onInteraction(e,!0)),me.on(this._element,yH,e=>this._onInteraction(e,!1)),me.on(this._element,bH,e=>this._onInteraction(e,!0)),me.on(this._element,SH,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Mh.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Oh(Mh);Ti(Mh);function RH(){const[t,e]=b.useState("");return b.useEffect(()=>{const n=new URLSearchParams(location.search).get("session_id");if(!n){e("ID");return}fetch(`http://localhost:8000/api/billing/session/${encodeURIComponent(n)}`).then(i=>i.ok?i.json():Promise.reject(i)).then(i=>{e(i?.status==="paid"?"":"/")}).catch(async i=>{let a="";if(i&&i.json)try{const o=await i.json();a+=` (${o?.error??o?.message??""})`}catch{}e(a)})},[]),S.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:S.jsxs("div",{className:"max-w-md w-full rounded-2xl border p-6",children:[S.jsx("h1",{className:"text-xl font-semibold mb-3",children:""}),S.jsx("p",{children:t}),S.jsx("a",{className:"text-indigo-600 underline mt-4 inline-block",href:"/admin/site",children:""})]})})}function AH(){return S.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:S.jsxs("div",{className:"max-w-md w-full rounded-2xl border p-6",children:[S.jsx("h1",{className:"text-xl font-semibold mb-3",children:""}),S.jsx("p",{children:""}),S.jsx("a",{className:"text-indigo-600 underline mt-4 inline-block",href:"/signup",children:""})]})})}function OH(){const{user:t,loading:e}=gR();return e?null:t?S.jsx(dy,{}):S.jsx(Vw,{to:"/admin/login",replace:!0})}Df(null);const NH=$P([{path:"/s/:slug/*",element:S.jsx(Q7,{})},{path:"/s/:slug/reserve",element:S.jsx(Mk,{})},{path:"/",element:S.jsx(BL,{}),children:[{index:!0,element:S.jsx(e8,{})},{path:"reserve",element:S.jsx(Mk,{})},{path:"thanks",element:S.jsx(c8,{})},{path:"offices",element:S.jsx(n8,{})},{path:"signup",element:S.jsx(o8,{})},{path:":tenant/reserve",element:S.jsx(F7,{})},{path:"/billing/success",element:S.jsx(RH,{})},{path:"/billing/cancel",element:S.jsx(AH,{})},{path:"tenants/:slug",element:S.jsx(a8,{})},{path:"wait",element:S.jsx(CB,{})},{path:"host",element:S.jsx(PB,{})},{path:"join",element:S.jsx(Dj,{})},{path:"quick",element:S.jsx(LB,{})}]},{path:"/admin/login",element:S.jsx(jB,{})},{path:"/admin",element:S.jsx(OH,{}),children:[{element:S.jsx(UB,{}),children:[{index:!0,element:S.jsx(Vw,{to:"dashboard",replace:!0})},{path:"dashboard",element:S.jsx(zB,{})},{path:"charts",element:S.jsx(FB,{})},{path:"tables",element:S.jsx(VB,{})},{path:"site",element:S.jsx(U7,{})}]}]},{path:"*",element:S.jsx("div",{style:{padding:24},children:"Not Found"})}]);$N.createRoot(document.getElementById("root")).render(S.jsx(BN.StrictMode,{children:S.jsx(IB,{children:S.jsx(rM,{router:NH})})}));
